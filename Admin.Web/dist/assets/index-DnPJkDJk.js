var RC=Object.defineProperty;var dv=n=>{throw TypeError(n)};var MC=(n,e,t)=>e in n?RC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var IC=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var f=(n,e,t)=>MC(n,typeof e!="symbol"?e+"":e,t),uf=(n,e,t)=>e.has(n)||dv("Cannot "+t);var S=(n,e,t)=>(uf(n,e,"read from private field"),t?t.call(n):e.get(n)),pe=(n,e,t)=>e.has(n)?dv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),ee=(n,e,t,r)=>(uf(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Ae=(n,e,t)=>(uf(n,e,"access private method"),t);var Iu=(n,e,t,r)=>({set _(s){ee(n,e,s,t)},get _(){return S(n,e,r)}});var C3=IC((nr,rr)=>{function ix(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function ox(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function jC(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var ax={exports:{}},Ph={},lx={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pu=Symbol.for("react.element"),DC=Symbol.for("react.portal"),FC=Symbol.for("react.fragment"),LC=Symbol.for("react.strict_mode"),VC=Symbol.for("react.profiler"),$C=Symbol.for("react.provider"),BC=Symbol.for("react.context"),zC=Symbol.for("react.forward_ref"),UC=Symbol.for("react.suspense"),WC=Symbol.for("react.memo"),qC=Symbol.for("react.lazy"),hv=Symbol.iterator;function HC(n){return n===null||typeof n!="object"?null:(n=hv&&n[hv]||n["@@iterator"],typeof n=="function"?n:null)}var cx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ux=Object.assign,dx={};function yl(n,e,t){this.props=n,this.context=e,this.refs=dx,this.updater=t||cx}yl.prototype.isReactComponent={};yl.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};yl.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function hx(){}hx.prototype=yl.prototype;function yg(n,e,t){this.props=n,this.context=e,this.refs=dx,this.updater=t||cx}var vg=yg.prototype=new hx;vg.constructor=yg;ux(vg,yl.prototype);vg.isPureReactComponent=!0;var fv=Array.isArray,fx=Object.prototype.hasOwnProperty,wg={current:null},mx={key:!0,ref:!0,__self:!0,__source:!0};function px(n,e,t){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)fx.call(e,r)&&!mx.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:pu,type:n,key:i,ref:o,props:s,_owner:wg.current}}function KC(n,e){return{$$typeof:pu,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function _g(n){return typeof n=="object"&&n!==null&&n.$$typeof===pu}function QC(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var mv=/\/+/g;function df(n,e){return typeof n=="object"&&n!==null&&n.key!=null?QC(""+n.key):e.toString(36)}function ud(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case pu:case DC:o=!0}}if(o)return o=n,s=s(o),n=r===""?"."+df(o,0):r,fv(s)?(t="",n!=null&&(t=n.replace(mv,"$&/")+"/"),ud(s,e,t,"",function(c){return c})):s!=null&&(_g(s)&&(s=KC(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(mv,"$&/")+"/")+n)),e.push(s)),1;if(o=0,r=r===""?".":r+":",fv(n))for(var a=0;a<n.length;a++){i=n[a];var l=r+df(i,a);o+=ud(i,e,t,l,s)}else if(l=HC(n),typeof l=="function")for(n=l.call(n),a=0;!(i=n.next()).done;)i=i.value,l=r+df(i,a++),o+=ud(i,e,t,l,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ju(n,e,t){if(n==null)return n;var r=[],s=0;return ud(n,r,"","",function(i){return e.call(t,i,s++)}),r}function ZC(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Nn={current:null},dd={transition:null},JC={ReactCurrentDispatcher:Nn,ReactCurrentBatchConfig:dd,ReactCurrentOwner:wg};function gx(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:ju,forEach:function(n,e,t){ju(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return ju(n,function(){e++}),e},toArray:function(n){return ju(n,function(e){return e})||[]},only:function(n){if(!_g(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Fe.Component=yl;Fe.Fragment=FC;Fe.Profiler=VC;Fe.PureComponent=yg;Fe.StrictMode=LC;Fe.Suspense=UC;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JC;Fe.act=gx;Fe.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=ux({},n.props),s=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=wg.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)fx.call(e,l)&&!mx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:pu,type:n.type,key:s,ref:i,props:r,_owner:o}};Fe.createContext=function(n){return n={$$typeof:BC,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:$C,_context:n},n.Consumer=n};Fe.createElement=px;Fe.createFactory=function(n){var e=px.bind(null,n);return e.type=n,e};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(n){return{$$typeof:zC,render:n}};Fe.isValidElement=_g;Fe.lazy=function(n){return{$$typeof:qC,_payload:{_status:-1,_result:n},_init:ZC}};Fe.memo=function(n,e){return{$$typeof:WC,type:n,compare:e===void 0?null:e}};Fe.startTransition=function(n){var e=dd.transition;dd.transition={};try{n()}finally{dd.transition=e}};Fe.unstable_act=gx;Fe.useCallback=function(n,e){return Nn.current.useCallback(n,e)};Fe.useContext=function(n){return Nn.current.useContext(n)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(n){return Nn.current.useDeferredValue(n)};Fe.useEffect=function(n,e){return Nn.current.useEffect(n,e)};Fe.useId=function(){return Nn.current.useId()};Fe.useImperativeHandle=function(n,e,t){return Nn.current.useImperativeHandle(n,e,t)};Fe.useInsertionEffect=function(n,e){return Nn.current.useInsertionEffect(n,e)};Fe.useLayoutEffect=function(n,e){return Nn.current.useLayoutEffect(n,e)};Fe.useMemo=function(n,e){return Nn.current.useMemo(n,e)};Fe.useReducer=function(n,e,t){return Nn.current.useReducer(n,e,t)};Fe.useRef=function(n){return Nn.current.useRef(n)};Fe.useState=function(n){return Nn.current.useState(n)};Fe.useSyncExternalStore=function(n,e,t){return Nn.current.useSyncExternalStore(n,e,t)};Fe.useTransition=function(){return Nn.current.useTransition()};Fe.version="18.3.1";lx.exports=Fe;var O=lx.exports;const vn=ox(O),GC=ix({__proto__:null,default:vn},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YC=O,XC=Symbol.for("react.element"),eP=Symbol.for("react.fragment"),tP=Object.prototype.hasOwnProperty,nP=YC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rP={key:!0,ref:!0,__self:!0,__source:!0};function yx(n,e,t){var r,s={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)tP.call(e,r)&&!rP.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:XC,type:n,key:i,ref:o,props:s,_owner:nP.current}}Ph.Fragment=eP;Ph.jsx=yx;Ph.jsxs=yx;ax.exports=Ph;var m=ax.exports,vx={exports:{}},cr={},wx={exports:{}},_x={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(z,ne){var ue=z.length;z.push(ne);e:for(;0<ue;){var Ie=ue-1>>>1,Le=z[Ie];if(0<s(Le,ne))z[Ie]=ne,z[ue]=Le,ue=Ie;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var ne=z[0],ue=z.pop();if(ue!==ne){z[0]=ue;e:for(var Ie=0,Le=z.length,Ht=Le>>>1;Ie<Ht;){var Vt=2*(Ie+1)-1,U=z[Vt],we=Vt+1,rt=z[we];if(0>s(U,ue))we<Le&&0>s(rt,U)?(z[Ie]=rt,z[we]=ue,Ie=we):(z[Ie]=U,z[Vt]=ue,Ie=Vt);else if(we<Le&&0>s(rt,ue))z[Ie]=rt,z[we]=ue,Ie=we;else break e}}return ne}function s(z,ne){var ue=z.sortIndex-ne.sortIndex;return ue!==0?ue:z.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,p=!1,_=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var ne=t(c);ne!==null;){if(ne.callback===null)r(c);else if(ne.startTime<=z)r(c),ne.sortIndex=ne.expirationTime,e(l,ne);else break;ne=t(c)}}function x(z){if(v=!1,b(z),!_)if(t(l)!==null)_=!0,Oe(C);else{var ne=t(c);ne!==null&&Xe(x,ne.startTime-z)}}function C(z,ne){_=!1,v&&(v=!1,y(P),P=-1),p=!0;var ue=h;try{for(b(ne),d=t(l);d!==null&&(!(d.expirationTime>ne)||z&&!V());){var Ie=d.callback;if(typeof Ie=="function"){d.callback=null,h=d.priorityLevel;var Le=Ie(d.expirationTime<=ne);ne=n.unstable_now(),typeof Le=="function"?d.callback=Le:d===t(l)&&r(l),b(ne)}else r(l);d=t(l)}if(d!==null)var Ht=!0;else{var Vt=t(c);Vt!==null&&Xe(x,Vt.startTime-ne),Ht=!1}return Ht}finally{d=null,h=ue,p=!1}}var N=!1,k=null,P=-1,j=5,I=-1;function V(){return!(n.unstable_now()-I<j)}function H(){if(k!==null){var z=n.unstable_now();I=z;var ne=!0;try{ne=k(!0,z)}finally{ne?J():(N=!1,k=null)}}else N=!1}var J;if(typeof g=="function")J=function(){g(H)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Ee=ge.port2;ge.port1.onmessage=H,J=function(){Ee.postMessage(null)}}else J=function(){w(H,0)};function Oe(z){k=z,N||(N=!0,J())}function Xe(z,ne){P=w(function(){z(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){_||p||(_=!0,Oe(C))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(h){case 1:case 2:case 3:var ne=3;break;default:ne=h}var ue=h;h=ne;try{return z()}finally{h=ue}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,ne){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ue=h;h=z;try{return ne()}finally{h=ue}},n.unstable_scheduleCallback=function(z,ne,ue){var Ie=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Ie+ue:Ie):ue=Ie,z){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=ue+Le,z={id:u++,callback:ne,priorityLevel:z,startTime:ue,expirationTime:Le,sortIndex:-1},ue>Ie?(z.sortIndex=ue,e(c,z),t(l)===null&&z===t(c)&&(v?(y(P),P=-1):v=!0,Xe(x,ue-Ie))):(z.sortIndex=Le,e(l,z),_||p||(_=!0,Oe(C))),z},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(z){var ne=h;return function(){var ue=h;h=ne;try{return z.apply(this,arguments)}finally{h=ue}}}})(_x);wx.exports=_x;var sP=wx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iP=O,ir=sP;function Q(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bx=new Set,Nc={};function zo(n,e){Ga(n,e),Ga(n+"Capture",e)}function Ga(n,e){for(Nc[n]=e,n=0;n<e.length;n++)bx.add(e[n])}var Ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_m=Object.prototype.hasOwnProperty,oP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pv={},gv={};function aP(n){return _m.call(gv,n)?!0:_m.call(pv,n)?!1:oP.test(n)?gv[n]=!0:(pv[n]=!0,!1)}function lP(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function cP(n,e,t,r){if(e===null||typeof e>"u"||lP(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rn(n,e,t,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){fn[n]=new Rn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];fn[e]=new Rn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){fn[n]=new Rn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){fn[n]=new Rn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){fn[n]=new Rn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){fn[n]=new Rn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){fn[n]=new Rn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){fn[n]=new Rn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){fn[n]=new Rn(n,5,!1,n.toLowerCase(),null,!1,!1)});var bg=/[\-:]([a-z])/g;function xg(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(bg,xg);fn[e]=new Rn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(bg,xg);fn[e]=new Rn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(bg,xg);fn[e]=new Rn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){fn[n]=new Rn(n,1,!1,n.toLowerCase(),null,!1,!1)});fn.xlinkHref=new Rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){fn[n]=new Rn(n,1,!1,n.toLowerCase(),null,!0,!0)});function kg(n,e,t,r){var s=fn.hasOwnProperty(e)?fn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cP(e,t,s,r)&&(t=null),r||s===null?aP(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Bs=iP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Du=Symbol.for("react.element"),ma=Symbol.for("react.portal"),pa=Symbol.for("react.fragment"),Eg=Symbol.for("react.strict_mode"),bm=Symbol.for("react.profiler"),xx=Symbol.for("react.provider"),kx=Symbol.for("react.context"),Sg=Symbol.for("react.forward_ref"),xm=Symbol.for("react.suspense"),km=Symbol.for("react.suspense_list"),Cg=Symbol.for("react.memo"),Qs=Symbol.for("react.lazy"),Ex=Symbol.for("react.offscreen"),yv=Symbol.iterator;function Rl(n){return n===null||typeof n!="object"?null:(n=yv&&n[yv]||n["@@iterator"],typeof n=="function"?n:null)}var Tt=Object.assign,hf;function Yl(n){if(hf===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);hf=e&&e[1]||""}return`
`+hf+n}var ff=!1;function mf(n,e){if(!n||ff)return"";ff=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{ff=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Yl(n):""}function uP(n){switch(n.tag){case 5:return Yl(n.type);case 16:return Yl("Lazy");case 13:return Yl("Suspense");case 19:return Yl("SuspenseList");case 0:case 2:case 15:return n=mf(n.type,!1),n;case 11:return n=mf(n.type.render,!1),n;case 1:return n=mf(n.type,!0),n;default:return""}}function Em(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case pa:return"Fragment";case ma:return"Portal";case bm:return"Profiler";case Eg:return"StrictMode";case xm:return"Suspense";case km:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case kx:return(n.displayName||"Context")+".Consumer";case xx:return(n._context.displayName||"Context")+".Provider";case Sg:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Cg:return e=n.displayName||null,e!==null?e:Em(n.type)||"Memo";case Qs:e=n._payload,n=n._init;try{return Em(n(e))}catch{}}return null}function dP(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Em(e);case 8:return e===Eg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ti(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Sx(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hP(n){var e=Sx(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Fu(n){n._valueTracker||(n._valueTracker=hP(n))}function Cx(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Sx(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Ad(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Sm(n,e){var t=e.checked;return Tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function vv(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ti(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Px(n,e){e=e.checked,e!=null&&kg(n,"checked",e,!1)}function Cm(n,e){Px(n,e);var t=Ti(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Pm(n,e.type,t):e.hasOwnProperty("defaultValue")&&Pm(n,e.type,Ti(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function wv(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Pm(n,e,t){(e!=="number"||Ad(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Xl=Array.isArray;function Oa(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ti(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function Tm(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Tt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function _v(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Q(92));if(Xl(t)){if(1<t.length)throw Error(Q(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ti(t)}}function Tx(n,e){var t=Ti(e.value),r=Ti(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function bv(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Ax(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Am(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Ax(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Lu,Ox=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Lu=Lu||document.createElement("div"),Lu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lu.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Rc(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ac={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fP=["Webkit","ms","Moz","O"];Object.keys(ac).forEach(function(n){fP.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ac[e]=ac[n]})});function Nx(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ac.hasOwnProperty(n)&&ac[n]?(""+e).trim():e+"px"}function Rx(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=Nx(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var mP=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Om(n,e){if(e){if(mP[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Nm(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rm=null;function Pg(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Mm=null,Na=null,Ra=null;function xv(n){if(n=vu(n)){if(typeof Mm!="function")throw Error(Q(280));var e=n.stateNode;e&&(e=Rh(e),Mm(n.stateNode,n.type,e))}}function Mx(n){Na?Ra?Ra.push(n):Ra=[n]:Na=n}function Ix(){if(Na){var n=Na,e=Ra;if(Ra=Na=null,xv(n),e)for(n=0;n<e.length;n++)xv(e[n])}}function jx(n,e){return n(e)}function Dx(){}var pf=!1;function Fx(n,e,t){if(pf)return n(e,t);pf=!0;try{return jx(n,e,t)}finally{pf=!1,(Na!==null||Ra!==null)&&(Dx(),Ix())}}function Mc(n,e){var t=n.stateNode;if(t===null)return null;var r=Rh(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Q(231,e,typeof t));return t}var Im=!1;if(Ms)try{var Ml={};Object.defineProperty(Ml,"passive",{get:function(){Im=!0}}),window.addEventListener("test",Ml,Ml),window.removeEventListener("test",Ml,Ml)}catch{Im=!1}function pP(n,e,t,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var lc=!1,Od=null,Nd=!1,jm=null,gP={onError:function(n){lc=!0,Od=n}};function yP(n,e,t,r,s,i,o,a,l){lc=!1,Od=null,pP.apply(gP,arguments)}function vP(n,e,t,r,s,i,o,a,l){if(yP.apply(this,arguments),lc){if(lc){var c=Od;lc=!1,Od=null}else throw Error(Q(198));Nd||(Nd=!0,jm=c)}}function Uo(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Lx(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function kv(n){if(Uo(n)!==n)throw Error(Q(188))}function wP(n){var e=n.alternate;if(!e){if(e=Uo(n),e===null)throw Error(Q(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return kv(s),n;if(i===r)return kv(s),e;i=i.sibling}throw Error(Q(188))}if(t.return!==r.return)t=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(t.alternate!==r)throw Error(Q(190))}if(t.tag!==3)throw Error(Q(188));return t.stateNode.current===t?n:e}function Vx(n){return n=wP(n),n!==null?$x(n):null}function $x(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=$x(n);if(e!==null)return e;n=n.sibling}return null}var Bx=ir.unstable_scheduleCallback,Ev=ir.unstable_cancelCallback,_P=ir.unstable_shouldYield,bP=ir.unstable_requestPaint,Ft=ir.unstable_now,xP=ir.unstable_getCurrentPriorityLevel,Tg=ir.unstable_ImmediatePriority,zx=ir.unstable_UserBlockingPriority,Rd=ir.unstable_NormalPriority,kP=ir.unstable_LowPriority,Ux=ir.unstable_IdlePriority,Th=null,rs=null;function EP(n){if(rs&&typeof rs.onCommitFiberRoot=="function")try{rs.onCommitFiberRoot(Th,n,void 0,(n.current.flags&128)===128)}catch{}}var Lr=Math.clz32?Math.clz32:PP,SP=Math.log,CP=Math.LN2;function PP(n){return n>>>=0,n===0?32:31-(SP(n)/CP|0)|0}var Vu=64,$u=4194304;function ec(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Md(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?r=ec(a):(i&=o,i!==0&&(r=ec(i)))}else o=t&~s,o!==0?r=ec(o):i!==0&&(r=ec(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Lr(e),s=1<<t,r|=n[t],e&=~s;return r}function TP(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AP(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-Lr(i),a=1<<o,l=s[o];l===-1?(!(a&t)||a&r)&&(s[o]=TP(a,e)):l<=e&&(n.expiredLanes|=a),i&=~a}}function Dm(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Wx(){var n=Vu;return Vu<<=1,!(Vu&4194240)&&(Vu=64),n}function gf(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function gu(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Lr(e),n[e]=t}function OP(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-Lr(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function Ag(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Lr(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var tt=0;function qx(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Hx,Og,Kx,Qx,Zx,Fm=!1,Bu=[],pi=null,gi=null,yi=null,Ic=new Map,jc=new Map,Ys=[],NP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sv(n,e){switch(n){case"focusin":case"focusout":pi=null;break;case"dragenter":case"dragleave":gi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":Ic.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jc.delete(e.pointerId)}}function Il(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=vu(e),e!==null&&Og(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function RP(n,e,t,r,s){switch(e){case"focusin":return pi=Il(pi,n,e,t,r,s),!0;case"dragenter":return gi=Il(gi,n,e,t,r,s),!0;case"mouseover":return yi=Il(yi,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return Ic.set(i,Il(Ic.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,jc.set(i,Il(jc.get(i)||null,n,e,t,r,s)),!0}return!1}function Jx(n){var e=oo(n.target);if(e!==null){var t=Uo(e);if(t!==null){if(e=t.tag,e===13){if(e=Lx(t),e!==null){n.blockedOn=e,Zx(n.priority,function(){Kx(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function hd(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Lm(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Rm=r,t.target.dispatchEvent(r),Rm=null}else return e=vu(t),e!==null&&Og(e),n.blockedOn=t,!1;e.shift()}return!0}function Cv(n,e,t){hd(n)&&t.delete(e)}function MP(){Fm=!1,pi!==null&&hd(pi)&&(pi=null),gi!==null&&hd(gi)&&(gi=null),yi!==null&&hd(yi)&&(yi=null),Ic.forEach(Cv),jc.forEach(Cv)}function jl(n,e){n.blockedOn===e&&(n.blockedOn=null,Fm||(Fm=!0,ir.unstable_scheduleCallback(ir.unstable_NormalPriority,MP)))}function Dc(n){function e(s){return jl(s,n)}if(0<Bu.length){jl(Bu[0],n);for(var t=1;t<Bu.length;t++){var r=Bu[t];r.blockedOn===n&&(r.blockedOn=null)}}for(pi!==null&&jl(pi,n),gi!==null&&jl(gi,n),yi!==null&&jl(yi,n),Ic.forEach(e),jc.forEach(e),t=0;t<Ys.length;t++)r=Ys[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ys.length&&(t=Ys[0],t.blockedOn===null);)Jx(t),t.blockedOn===null&&Ys.shift()}var Ma=Bs.ReactCurrentBatchConfig,Id=!0;function IP(n,e,t,r){var s=tt,i=Ma.transition;Ma.transition=null;try{tt=1,Ng(n,e,t,r)}finally{tt=s,Ma.transition=i}}function jP(n,e,t,r){var s=tt,i=Ma.transition;Ma.transition=null;try{tt=4,Ng(n,e,t,r)}finally{tt=s,Ma.transition=i}}function Ng(n,e,t,r){if(Id){var s=Lm(n,e,t,r);if(s===null)Cf(n,e,r,jd,t),Sv(n,r);else if(RP(s,n,e,t,r))r.stopPropagation();else if(Sv(n,r),e&4&&-1<NP.indexOf(n)){for(;s!==null;){var i=vu(s);if(i!==null&&Hx(i),i=Lm(n,e,t,r),i===null&&Cf(n,e,r,jd,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else Cf(n,e,r,null,t)}}var jd=null;function Lm(n,e,t,r){if(jd=null,n=Pg(r),n=oo(n),n!==null)if(e=Uo(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Lx(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return jd=n,null}function Gx(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xP()){case Tg:return 1;case zx:return 4;case Rd:case kP:return 16;case Ux:return 536870912;default:return 16}default:return 16}}var ui=null,Rg=null,fd=null;function Yx(){if(fd)return fd;var n,e=Rg,t=e.length,r,s="value"in ui?ui.value:ui.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===s[i-r];r++);return fd=s.slice(n,1<r?1-r:void 0)}function md(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function zu(){return!0}function Pv(){return!1}function ur(n){function e(t,r,s,i,o){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?zu:Pv,this.isPropagationStopped=Pv,this}return Tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=zu)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=zu)},persist:function(){},isPersistent:zu}),e}var vl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mg=ur(vl),yu=Tt({},vl,{view:0,detail:0}),DP=ur(yu),yf,vf,Dl,Ah=Tt({},yu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ig,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Dl&&(Dl&&n.type==="mousemove"?(yf=n.screenX-Dl.screenX,vf=n.screenY-Dl.screenY):vf=yf=0,Dl=n),yf)},movementY:function(n){return"movementY"in n?n.movementY:vf}}),Tv=ur(Ah),FP=Tt({},Ah,{dataTransfer:0}),LP=ur(FP),VP=Tt({},yu,{relatedTarget:0}),wf=ur(VP),$P=Tt({},vl,{animationName:0,elapsedTime:0,pseudoElement:0}),BP=ur($P),zP=Tt({},vl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),UP=ur(zP),WP=Tt({},vl,{data:0}),Av=ur(WP),qP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QP(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=KP[n])?!!e[n]:!1}function Ig(){return QP}var ZP=Tt({},yu,{key:function(n){if(n.key){var e=qP[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=md(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?HP[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ig,charCode:function(n){return n.type==="keypress"?md(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?md(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),JP=ur(ZP),GP=Tt({},Ah,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ov=ur(GP),YP=Tt({},yu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ig}),XP=ur(YP),eT=Tt({},vl,{propertyName:0,elapsedTime:0,pseudoElement:0}),tT=ur(eT),nT=Tt({},Ah,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),rT=ur(nT),sT=[9,13,27,32],jg=Ms&&"CompositionEvent"in window,cc=null;Ms&&"documentMode"in document&&(cc=document.documentMode);var iT=Ms&&"TextEvent"in window&&!cc,Xx=Ms&&(!jg||cc&&8<cc&&11>=cc),Nv=" ",Rv=!1;function e1(n,e){switch(n){case"keyup":return sT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function t1(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ga=!1;function oT(n,e){switch(n){case"compositionend":return t1(e);case"keypress":return e.which!==32?null:(Rv=!0,Nv);case"textInput":return n=e.data,n===Nv&&Rv?null:n;default:return null}}function aT(n,e){if(ga)return n==="compositionend"||!jg&&e1(n,e)?(n=Yx(),fd=Rg=ui=null,ga=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xx&&e.locale!=="ko"?null:e.data;default:return null}}var lT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mv(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!lT[n.type]:e==="textarea"}function n1(n,e,t,r){Mx(r),e=Dd(e,"onChange"),0<e.length&&(t=new Mg("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var uc=null,Fc=null;function cT(n){f1(n,0)}function Oh(n){var e=wa(n);if(Cx(e))return n}function uT(n,e){if(n==="change")return e}var r1=!1;if(Ms){var _f;if(Ms){var bf="oninput"in document;if(!bf){var Iv=document.createElement("div");Iv.setAttribute("oninput","return;"),bf=typeof Iv.oninput=="function"}_f=bf}else _f=!1;r1=_f&&(!document.documentMode||9<document.documentMode)}function jv(){uc&&(uc.detachEvent("onpropertychange",s1),Fc=uc=null)}function s1(n){if(n.propertyName==="value"&&Oh(Fc)){var e=[];n1(e,Fc,n,Pg(n)),Fx(cT,e)}}function dT(n,e,t){n==="focusin"?(jv(),uc=e,Fc=t,uc.attachEvent("onpropertychange",s1)):n==="focusout"&&jv()}function hT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Oh(Fc)}function fT(n,e){if(n==="click")return Oh(e)}function mT(n,e){if(n==="input"||n==="change")return Oh(e)}function pT(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Br=typeof Object.is=="function"?Object.is:pT;function Lc(n,e){if(Br(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!_m.call(e,s)||!Br(n[s],e[s]))return!1}return!0}function Dv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Fv(n,e){var t=Dv(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Dv(t)}}function i1(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?i1(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function o1(){for(var n=window,e=Ad();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Ad(n.document)}return e}function Dg(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function gT(n){var e=o1(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&i1(t.ownerDocument.documentElement,t)){if(r!==null&&Dg(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=Fv(t,i);var o=Fv(t,r);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var yT=Ms&&"documentMode"in document&&11>=document.documentMode,ya=null,Vm=null,dc=null,$m=!1;function Lv(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;$m||ya==null||ya!==Ad(r)||(r=ya,"selectionStart"in r&&Dg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dc&&Lc(dc,r)||(dc=r,r=Dd(Vm,"onSelect"),0<r.length&&(e=new Mg("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=ya)))}function Uu(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var va={animationend:Uu("Animation","AnimationEnd"),animationiteration:Uu("Animation","AnimationIteration"),animationstart:Uu("Animation","AnimationStart"),transitionend:Uu("Transition","TransitionEnd")},xf={},a1={};Ms&&(a1=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function Nh(n){if(xf[n])return xf[n];if(!va[n])return n;var e=va[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in a1)return xf[n]=e[t];return n}var l1=Nh("animationend"),c1=Nh("animationiteration"),u1=Nh("animationstart"),d1=Nh("transitionend"),h1=new Map,Vv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fi(n,e){h1.set(n,e),zo(e,[n])}for(var kf=0;kf<Vv.length;kf++){var Ef=Vv[kf],vT=Ef.toLowerCase(),wT=Ef[0].toUpperCase()+Ef.slice(1);Fi(vT,"on"+wT)}Fi(l1,"onAnimationEnd");Fi(c1,"onAnimationIteration");Fi(u1,"onAnimationStart");Fi("dblclick","onDoubleClick");Fi("focusin","onFocus");Fi("focusout","onBlur");Fi(d1,"onTransitionEnd");Ga("onMouseEnter",["mouseout","mouseover"]);Ga("onMouseLeave",["mouseout","mouseover"]);Ga("onPointerEnter",["pointerout","pointerover"]);Ga("onPointerLeave",["pointerout","pointerover"]);zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zo("onBeforeInput",["compositionend","keypress","textInput","paste"]);zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_T=new Set("cancel close invalid load scroll toggle".split(" ").concat(tc));function $v(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,vP(r,e,void 0,n),n.currentTarget=null}function f1(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;$v(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;$v(s,a,c),i=l}}}if(Nd)throw n=jm,Nd=!1,jm=null,n}function mt(n,e){var t=e[qm];t===void 0&&(t=e[qm]=new Set);var r=n+"__bubble";t.has(r)||(m1(e,n,2,!1),t.add(r))}function Sf(n,e,t){var r=0;e&&(r|=4),m1(t,n,r,e)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function Vc(n){if(!n[Wu]){n[Wu]=!0,bx.forEach(function(t){t!=="selectionchange"&&(_T.has(t)||Sf(t,!1,n),Sf(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Wu]||(e[Wu]=!0,Sf("selectionchange",!1,e))}}function m1(n,e,t,r){switch(Gx(e)){case 1:var s=IP;break;case 4:s=jP;break;default:s=Ng}t=s.bind(null,e,t,n),s=void 0,!Im||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function Cf(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=oo(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Fx(function(){var c=i,u=Pg(t),d=[];e:{var h=h1.get(n);if(h!==void 0){var p=Mg,_=n;switch(n){case"keypress":if(md(t)===0)break e;case"keydown":case"keyup":p=JP;break;case"focusin":_="focus",p=wf;break;case"focusout":_="blur",p=wf;break;case"beforeblur":case"afterblur":p=wf;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Tv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=LP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=XP;break;case l1:case c1:case u1:p=BP;break;case d1:p=tT;break;case"scroll":p=DP;break;case"wheel":p=rT;break;case"copy":case"cut":case"paste":p=UP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Ov}var v=(e&4)!==0,w=!v&&n==="scroll",y=v?h!==null?h+"Capture":null:h;v=[];for(var g=c,b;g!==null;){b=g;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,y!==null&&(x=Mc(g,y),x!=null&&v.push($c(g,x,b)))),w)break;g=g.return}0<v.length&&(h=new p(h,_,null,t,u),d.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",h&&t!==Rm&&(_=t.relatedTarget||t.fromElement)&&(oo(_)||_[Is]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(_=t.relatedTarget||t.toElement,p=c,_=_?oo(_):null,_!==null&&(w=Uo(_),_!==w||_.tag!==5&&_.tag!==6)&&(_=null)):(p=null,_=c),p!==_)){if(v=Tv,x="onMouseLeave",y="onMouseEnter",g="mouse",(n==="pointerout"||n==="pointerover")&&(v=Ov,x="onPointerLeave",y="onPointerEnter",g="pointer"),w=p==null?h:wa(p),b=_==null?h:wa(_),h=new v(x,g+"leave",p,t,u),h.target=w,h.relatedTarget=b,x=null,oo(u)===c&&(v=new v(y,g+"enter",_,t,u),v.target=b,v.relatedTarget=w,x=v),w=x,p&&_)t:{for(v=p,y=_,g=0,b=v;b;b=ea(b))g++;for(b=0,x=y;x;x=ea(x))b++;for(;0<g-b;)v=ea(v),g--;for(;0<b-g;)y=ea(y),b--;for(;g--;){if(v===y||y!==null&&v===y.alternate)break t;v=ea(v),y=ea(y)}v=null}else v=null;p!==null&&Bv(d,h,p,v,!1),_!==null&&w!==null&&Bv(d,w,_,v,!0)}}e:{if(h=c?wa(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var C=uT;else if(Mv(h))if(r1)C=mT;else{C=hT;var N=dT}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=fT);if(C&&(C=C(n,c))){n1(d,C,t,u);break e}N&&N(n,h,c),n==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&Pm(h,"number",h.value)}switch(N=c?wa(c):window,n){case"focusin":(Mv(N)||N.contentEditable==="true")&&(ya=N,Vm=c,dc=null);break;case"focusout":dc=Vm=ya=null;break;case"mousedown":$m=!0;break;case"contextmenu":case"mouseup":case"dragend":$m=!1,Lv(d,t,u);break;case"selectionchange":if(yT)break;case"keydown":case"keyup":Lv(d,t,u)}var k;if(jg)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else ga?e1(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(Xx&&t.locale!=="ko"&&(ga||P!=="onCompositionStart"?P==="onCompositionEnd"&&ga&&(k=Yx()):(ui=u,Rg="value"in ui?ui.value:ui.textContent,ga=!0)),N=Dd(c,P),0<N.length&&(P=new Av(P,n,null,t,u),d.push({event:P,listeners:N}),k?P.data=k:(k=t1(t),k!==null&&(P.data=k)))),(k=iT?oT(n,t):aT(n,t))&&(c=Dd(c,"onBeforeInput"),0<c.length&&(u=new Av("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=k))}f1(d,e)})}function $c(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Dd(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Mc(n,t),i!=null&&r.unshift($c(n,i,s)),i=Mc(n,e),i!=null&&r.push($c(n,i,s))),n=n.return}return r}function ea(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Bv(n,e,t,r,s){for(var i=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Mc(t,i),l!=null&&o.unshift($c(t,l,a))):s||(l=Mc(t,i),l!=null&&o.push($c(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var bT=/\r\n?/g,xT=/\u0000|\uFFFD/g;function zv(n){return(typeof n=="string"?n:""+n).replace(bT,`
`).replace(xT,"")}function qu(n,e,t){if(e=zv(e),zv(n)!==e&&t)throw Error(Q(425))}function Fd(){}var Bm=null,zm=null;function Um(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wm=typeof setTimeout=="function"?setTimeout:void 0,kT=typeof clearTimeout=="function"?clearTimeout:void 0,Uv=typeof Promise=="function"?Promise:void 0,ET=typeof queueMicrotask=="function"?queueMicrotask:typeof Uv<"u"?function(n){return Uv.resolve(null).then(n).catch(ST)}:Wm;function ST(n){setTimeout(function(){throw n})}function Pf(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),Dc(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);Dc(e)}function vi(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Wv(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var wl=Math.random().toString(36).slice(2),ts="__reactFiber$"+wl,Bc="__reactProps$"+wl,Is="__reactContainer$"+wl,qm="__reactEvents$"+wl,CT="__reactListeners$"+wl,PT="__reactHandles$"+wl;function oo(n){var e=n[ts];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Is]||t[ts]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Wv(n);n!==null;){if(t=n[ts])return t;n=Wv(n)}return e}n=t,t=n.parentNode}return null}function vu(n){return n=n[ts]||n[Is],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function wa(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Q(33))}function Rh(n){return n[Bc]||null}var Hm=[],_a=-1;function Li(n){return{current:n}}function gt(n){0>_a||(n.current=Hm[_a],Hm[_a]=null,_a--)}function ht(n,e){_a++,Hm[_a]=n.current,n.current=e}var Ai={},bn=Li(Ai),Bn=Li(!1),To=Ai;function Ya(n,e){var t=n.type.contextTypes;if(!t)return Ai;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function zn(n){return n=n.childContextTypes,n!=null}function Ld(){gt(Bn),gt(bn)}function qv(n,e,t){if(bn.current!==Ai)throw Error(Q(168));ht(bn,e),ht(Bn,t)}function p1(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Q(108,dP(n)||"Unknown",s));return Tt({},t,r)}function Vd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ai,To=bn.current,ht(bn,n),ht(Bn,Bn.current),!0}function Hv(n,e,t){var r=n.stateNode;if(!r)throw Error(Q(169));t?(n=p1(n,e,To),r.__reactInternalMemoizedMergedChildContext=n,gt(Bn),gt(bn),ht(bn,n)):gt(Bn),ht(Bn,t)}var ys=null,Mh=!1,Tf=!1;function g1(n){ys===null?ys=[n]:ys.push(n)}function TT(n){Mh=!0,g1(n)}function Vi(){if(!Tf&&ys!==null){Tf=!0;var n=0,e=tt;try{var t=ys;for(tt=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ys=null,Mh=!1}catch(s){throw ys!==null&&(ys=ys.slice(n+1)),Bx(Tg,Vi),s}finally{tt=e,Tf=!1}}return null}var ba=[],xa=0,$d=null,Bd=0,yr=[],vr=0,Ao=null,Ss=1,Cs="";function Yi(n,e){ba[xa++]=Bd,ba[xa++]=$d,$d=n,Bd=e}function y1(n,e,t){yr[vr++]=Ss,yr[vr++]=Cs,yr[vr++]=Ao,Ao=n;var r=Ss;n=Cs;var s=32-Lr(r)-1;r&=~(1<<s),t+=1;var i=32-Lr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ss=1<<32-Lr(e)+s|t<<s|r,Cs=i+n}else Ss=1<<i|t<<s|r,Cs=n}function Fg(n){n.return!==null&&(Yi(n,1),y1(n,1,0))}function Lg(n){for(;n===$d;)$d=ba[--xa],ba[xa]=null,Bd=ba[--xa],ba[xa]=null;for(;n===Ao;)Ao=yr[--vr],yr[vr]=null,Cs=yr[--vr],yr[vr]=null,Ss=yr[--vr],yr[vr]=null}var sr=null,tr=null,bt=!1,Rr=null;function v1(n,e){var t=_r(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Kv(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,sr=n,tr=vi(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,sr=n,tr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ao!==null?{id:Ss,overflow:Cs}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=_r(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,sr=n,tr=null,!0):!1;default:return!1}}function Km(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Qm(n){if(bt){var e=tr;if(e){var t=e;if(!Kv(n,e)){if(Km(n))throw Error(Q(418));e=vi(t.nextSibling);var r=sr;e&&Kv(n,e)?v1(r,t):(n.flags=n.flags&-4097|2,bt=!1,sr=n)}}else{if(Km(n))throw Error(Q(418));n.flags=n.flags&-4097|2,bt=!1,sr=n}}}function Qv(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;sr=n}function Hu(n){if(n!==sr)return!1;if(!bt)return Qv(n),bt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Um(n.type,n.memoizedProps)),e&&(e=tr)){if(Km(n))throw w1(),Error(Q(418));for(;e;)v1(n,e),e=vi(e.nextSibling)}if(Qv(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Q(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){tr=vi(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}tr=null}}else tr=sr?vi(n.stateNode.nextSibling):null;return!0}function w1(){for(var n=tr;n;)n=vi(n.nextSibling)}function Xa(){tr=sr=null,bt=!1}function Vg(n){Rr===null?Rr=[n]:Rr.push(n)}var AT=Bs.ReactCurrentBatchConfig;function Fl(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Q(309));var r=t.stateNode}if(!r)throw Error(Q(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(Q(284));if(!t._owner)throw Error(Q(290,n))}return n}function Ku(n,e){throw n=Object.prototype.toString.call(e),Error(Q(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Zv(n){var e=n._init;return e(n._payload)}function _1(n){function e(y,g){if(n){var b=y.deletions;b===null?(y.deletions=[g],y.flags|=16):b.push(g)}}function t(y,g){if(!n)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function s(y,g){return y=xi(y,g),y.index=0,y.sibling=null,y}function i(y,g,b){return y.index=b,n?(b=y.alternate,b!==null?(b=b.index,b<g?(y.flags|=2,g):b):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,g,b,x){return g===null||g.tag!==6?(g=jf(b,y.mode,x),g.return=y,g):(g=s(g,b),g.return=y,g)}function l(y,g,b,x){var C=b.type;return C===pa?u(y,g,b.props.children,x,b.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Qs&&Zv(C)===g.type)?(x=s(g,b.props),x.ref=Fl(y,g,b),x.return=y,x):(x=bd(b.type,b.key,b.props,null,y.mode,x),x.ref=Fl(y,g,b),x.return=y,x)}function c(y,g,b,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=Df(b,y.mode,x),g.return=y,g):(g=s(g,b.children||[]),g.return=y,g)}function u(y,g,b,x,C){return g===null||g.tag!==7?(g=So(b,y.mode,x,C),g.return=y,g):(g=s(g,b),g.return=y,g)}function d(y,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=jf(""+g,y.mode,b),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Du:return b=bd(g.type,g.key,g.props,null,y.mode,b),b.ref=Fl(y,null,g),b.return=y,b;case ma:return g=Df(g,y.mode,b),g.return=y,g;case Qs:var x=g._init;return d(y,x(g._payload),b)}if(Xl(g)||Rl(g))return g=So(g,y.mode,b,null),g.return=y,g;Ku(y,g)}return null}function h(y,g,b,x){var C=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:a(y,g,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Du:return b.key===C?l(y,g,b,x):null;case ma:return b.key===C?c(y,g,b,x):null;case Qs:return C=b._init,h(y,g,C(b._payload),x)}if(Xl(b)||Rl(b))return C!==null?null:u(y,g,b,x,null);Ku(y,b)}return null}function p(y,g,b,x,C){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(b)||null,a(g,y,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Du:return y=y.get(x.key===null?b:x.key)||null,l(g,y,x,C);case ma:return y=y.get(x.key===null?b:x.key)||null,c(g,y,x,C);case Qs:var N=x._init;return p(y,g,b,N(x._payload),C)}if(Xl(x)||Rl(x))return y=y.get(b)||null,u(g,y,x,C,null);Ku(g,x)}return null}function _(y,g,b,x){for(var C=null,N=null,k=g,P=g=0,j=null;k!==null&&P<b.length;P++){k.index>P?(j=k,k=null):j=k.sibling;var I=h(y,k,b[P],x);if(I===null){k===null&&(k=j);break}n&&k&&I.alternate===null&&e(y,k),g=i(I,g,P),N===null?C=I:N.sibling=I,N=I,k=j}if(P===b.length)return t(y,k),bt&&Yi(y,P),C;if(k===null){for(;P<b.length;P++)k=d(y,b[P],x),k!==null&&(g=i(k,g,P),N===null?C=k:N.sibling=k,N=k);return bt&&Yi(y,P),C}for(k=r(y,k);P<b.length;P++)j=p(k,y,P,b[P],x),j!==null&&(n&&j.alternate!==null&&k.delete(j.key===null?P:j.key),g=i(j,g,P),N===null?C=j:N.sibling=j,N=j);return n&&k.forEach(function(V){return e(y,V)}),bt&&Yi(y,P),C}function v(y,g,b,x){var C=Rl(b);if(typeof C!="function")throw Error(Q(150));if(b=C.call(b),b==null)throw Error(Q(151));for(var N=C=null,k=g,P=g=0,j=null,I=b.next();k!==null&&!I.done;P++,I=b.next()){k.index>P?(j=k,k=null):j=k.sibling;var V=h(y,k,I.value,x);if(V===null){k===null&&(k=j);break}n&&k&&V.alternate===null&&e(y,k),g=i(V,g,P),N===null?C=V:N.sibling=V,N=V,k=j}if(I.done)return t(y,k),bt&&Yi(y,P),C;if(k===null){for(;!I.done;P++,I=b.next())I=d(y,I.value,x),I!==null&&(g=i(I,g,P),N===null?C=I:N.sibling=I,N=I);return bt&&Yi(y,P),C}for(k=r(y,k);!I.done;P++,I=b.next())I=p(k,y,P,I.value,x),I!==null&&(n&&I.alternate!==null&&k.delete(I.key===null?P:I.key),g=i(I,g,P),N===null?C=I:N.sibling=I,N=I);return n&&k.forEach(function(H){return e(y,H)}),bt&&Yi(y,P),C}function w(y,g,b,x){if(typeof b=="object"&&b!==null&&b.type===pa&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Du:e:{for(var C=b.key,N=g;N!==null;){if(N.key===C){if(C=b.type,C===pa){if(N.tag===7){t(y,N.sibling),g=s(N,b.props.children),g.return=y,y=g;break e}}else if(N.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Qs&&Zv(C)===N.type){t(y,N.sibling),g=s(N,b.props),g.ref=Fl(y,N,b),g.return=y,y=g;break e}t(y,N);break}else e(y,N);N=N.sibling}b.type===pa?(g=So(b.props.children,y.mode,x,b.key),g.return=y,y=g):(x=bd(b.type,b.key,b.props,null,y.mode,x),x.ref=Fl(y,g,b),x.return=y,y=x)}return o(y);case ma:e:{for(N=b.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){t(y,g.sibling),g=s(g,b.children||[]),g.return=y,y=g;break e}else{t(y,g);break}else e(y,g);g=g.sibling}g=Df(b,y.mode,x),g.return=y,y=g}return o(y);case Qs:return N=b._init,w(y,g,N(b._payload),x)}if(Xl(b))return _(y,g,b,x);if(Rl(b))return v(y,g,b,x);Ku(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(t(y,g.sibling),g=s(g,b),g.return=y,y=g):(t(y,g),g=jf(b,y.mode,x),g.return=y,y=g),o(y)):t(y,g)}return w}var el=_1(!0),b1=_1(!1),zd=Li(null),Ud=null,ka=null,$g=null;function Bg(){$g=ka=Ud=null}function zg(n){var e=zd.current;gt(zd),n._currentValue=e}function Zm(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Ia(n,e){Ud=n,$g=ka=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&($n=!0),n.firstContext=null)}function xr(n){var e=n._currentValue;if($g!==n)if(n={context:n,memoizedValue:e,next:null},ka===null){if(Ud===null)throw Error(Q(308));ka=n,Ud.dependencies={lanes:0,firstContext:n}}else ka=ka.next=n;return e}var ao=null;function Ug(n){ao===null?ao=[n]:ao.push(n)}function x1(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,Ug(e)):(t.next=s.next,s.next=t),e.interleaved=t,js(n,r)}function js(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Zs=!1;function Wg(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k1(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function As(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function wi(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,qe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,js(n,t)}return s=r.interleaved,s===null?(e.next=e,Ug(r)):(e.next=s.next,s.next=e),r.interleaved=e,js(n,t)}function pd(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Ag(n,t)}}function Jv(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Wd(n,e,t,r){var s=n.updateQueue;Zs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var h=a.lane,p=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=n,v=a;switch(h=e,p=t,v.tag){case 1:if(_=v.payload,typeof _=="function"){d=_.call(p,d,h);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,h=typeof _=="function"?_.call(p,d,h):_,h==null)break e;d=Tt({},d,h);break e;case 2:Zs=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);No|=o,n.lanes=o,n.memoizedState=d}}function Gv(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(Q(191,s));s.call(r)}}}var wu={},ss=Li(wu),zc=Li(wu),Uc=Li(wu);function lo(n){if(n===wu)throw Error(Q(174));return n}function qg(n,e){switch(ht(Uc,e),ht(zc,n),ht(ss,wu),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Am(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Am(e,n)}gt(ss),ht(ss,e)}function tl(){gt(ss),gt(zc),gt(Uc)}function E1(n){lo(Uc.current);var e=lo(ss.current),t=Am(e,n.type);e!==t&&(ht(zc,n),ht(ss,t))}function Hg(n){zc.current===n&&(gt(ss),gt(zc))}var Et=Li(0);function qd(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Af=[];function Kg(){for(var n=0;n<Af.length;n++)Af[n]._workInProgressVersionPrimary=null;Af.length=0}var gd=Bs.ReactCurrentDispatcher,Of=Bs.ReactCurrentBatchConfig,Oo=0,Ct=null,Kt=null,rn=null,Hd=!1,hc=!1,Wc=0,OT=0;function pn(){throw Error(Q(321))}function Qg(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Br(n[t],e[t]))return!1;return!0}function Zg(n,e,t,r,s,i){if(Oo=i,Ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gd.current=n===null||n.memoizedState===null?IT:jT,n=t(r,s),hc){i=0;do{if(hc=!1,Wc=0,25<=i)throw Error(Q(301));i+=1,rn=Kt=null,e.updateQueue=null,gd.current=DT,n=t(r,s)}while(hc)}if(gd.current=Kd,e=Kt!==null&&Kt.next!==null,Oo=0,rn=Kt=Ct=null,Hd=!1,e)throw Error(Q(300));return n}function Jg(){var n=Wc!==0;return Wc=0,n}function Qr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Ct.memoizedState=rn=n:rn=rn.next=n,rn}function kr(){if(Kt===null){var n=Ct.alternate;n=n!==null?n.memoizedState:null}else n=Kt.next;var e=rn===null?Ct.memoizedState:rn.next;if(e!==null)rn=e,Kt=n;else{if(n===null)throw Error(Q(310));Kt=n,n={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},rn===null?Ct.memoizedState=rn=n:rn=rn.next=n}return rn}function qc(n,e){return typeof e=="function"?e(n):e}function Nf(n){var e=kr(),t=e.queue;if(t===null)throw Error(Q(311));t.lastRenderedReducer=n;var r=Kt,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Oo&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ct.lanes|=u,No|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Br(r,e.memoizedState)||($n=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,Ct.lanes|=i,No|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Rf(n){var e=kr(),t=e.queue;if(t===null)throw Error(Q(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do i=n(i,o.action),o=o.next;while(o!==s);Br(i,e.memoizedState)||($n=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function S1(){}function C1(n,e){var t=Ct,r=kr(),s=e(),i=!Br(r.memoizedState,s);if(i&&(r.memoizedState=s,$n=!0),r=r.queue,Gg(A1.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||rn!==null&&rn.memoizedState.tag&1){if(t.flags|=2048,Hc(9,T1.bind(null,t,r,s,e),void 0,null),on===null)throw Error(Q(349));Oo&30||P1(t,e,s)}return s}function P1(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function T1(n,e,t,r){e.value=t,e.getSnapshot=r,O1(e)&&N1(n)}function A1(n,e,t){return t(function(){O1(e)&&N1(n)})}function O1(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Br(n,t)}catch{return!0}}function N1(n){var e=js(n,1);e!==null&&Vr(e,n,1,-1)}function Yv(n){var e=Qr();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qc,lastRenderedState:n},e.queue=n,n=n.dispatch=MT.bind(null,Ct,n),[e.memoizedState,n]}function Hc(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function R1(){return kr().memoizedState}function yd(n,e,t,r){var s=Qr();Ct.flags|=n,s.memoizedState=Hc(1|e,t,void 0,r===void 0?null:r)}function Ih(n,e,t,r){var s=kr();r=r===void 0?null:r;var i=void 0;if(Kt!==null){var o=Kt.memoizedState;if(i=o.destroy,r!==null&&Qg(r,o.deps)){s.memoizedState=Hc(e,t,i,r);return}}Ct.flags|=n,s.memoizedState=Hc(1|e,t,i,r)}function Xv(n,e){return yd(8390656,8,n,e)}function Gg(n,e){return Ih(2048,8,n,e)}function M1(n,e){return Ih(4,2,n,e)}function I1(n,e){return Ih(4,4,n,e)}function j1(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function D1(n,e,t){return t=t!=null?t.concat([n]):null,Ih(4,4,j1.bind(null,e,n),t)}function Yg(){}function F1(n,e){var t=kr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Qg(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function L1(n,e){var t=kr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&Qg(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function V1(n,e,t){return Oo&21?(Br(t,e)||(t=Wx(),Ct.lanes|=t,No|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,$n=!0),n.memoizedState=t)}function NT(n,e){var t=tt;tt=t!==0&&4>t?t:4,n(!0);var r=Of.transition;Of.transition={};try{n(!1),e()}finally{tt=t,Of.transition=r}}function $1(){return kr().memoizedState}function RT(n,e,t){var r=bi(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},B1(n))z1(e,t);else if(t=x1(n,e,t,r),t!==null){var s=On();Vr(t,n,r,s),U1(t,e,r)}}function MT(n,e,t){var r=bi(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(B1(n))z1(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(s.hasEagerState=!0,s.eagerState=a,Br(a,o)){var l=e.interleaved;l===null?(s.next=s,Ug(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=x1(n,e,s,r),t!==null&&(s=On(),Vr(t,n,r,s),U1(t,e,r))}}function B1(n){var e=n.alternate;return n===Ct||e!==null&&e===Ct}function z1(n,e){hc=Hd=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function U1(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Ag(n,t)}}var Kd={readContext:xr,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useInsertionEffect:pn,useLayoutEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useMutableSource:pn,useSyncExternalStore:pn,useId:pn,unstable_isNewReconciler:!1},IT={readContext:xr,useCallback:function(n,e){return Qr().memoizedState=[n,e===void 0?null:e],n},useContext:xr,useEffect:Xv,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,yd(4194308,4,j1.bind(null,e,n),t)},useLayoutEffect:function(n,e){return yd(4194308,4,n,e)},useInsertionEffect:function(n,e){return yd(4,2,n,e)},useMemo:function(n,e){var t=Qr();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Qr();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=RT.bind(null,Ct,n),[r.memoizedState,n]},useRef:function(n){var e=Qr();return n={current:n},e.memoizedState=n},useState:Yv,useDebugValue:Yg,useDeferredValue:function(n){return Qr().memoizedState=n},useTransition:function(){var n=Yv(!1),e=n[0];return n=NT.bind(null,n[1]),Qr().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Ct,s=Qr();if(bt){if(t===void 0)throw Error(Q(407));t=t()}else{if(t=e(),on===null)throw Error(Q(349));Oo&30||P1(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,Xv(A1.bind(null,r,i,n),[n]),r.flags|=2048,Hc(9,T1.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=Qr(),e=on.identifierPrefix;if(bt){var t=Cs,r=Ss;t=(r&~(1<<32-Lr(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Wc++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=OT++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},jT={readContext:xr,useCallback:F1,useContext:xr,useEffect:Gg,useImperativeHandle:D1,useInsertionEffect:M1,useLayoutEffect:I1,useMemo:L1,useReducer:Nf,useRef:R1,useState:function(){return Nf(qc)},useDebugValue:Yg,useDeferredValue:function(n){var e=kr();return V1(e,Kt.memoizedState,n)},useTransition:function(){var n=Nf(qc)[0],e=kr().memoizedState;return[n,e]},useMutableSource:S1,useSyncExternalStore:C1,useId:$1,unstable_isNewReconciler:!1},DT={readContext:xr,useCallback:F1,useContext:xr,useEffect:Gg,useImperativeHandle:D1,useInsertionEffect:M1,useLayoutEffect:I1,useMemo:L1,useReducer:Rf,useRef:R1,useState:function(){return Rf(qc)},useDebugValue:Yg,useDeferredValue:function(n){var e=kr();return Kt===null?e.memoizedState=n:V1(e,Kt.memoizedState,n)},useTransition:function(){var n=Rf(qc)[0],e=kr().memoizedState;return[n,e]},useMutableSource:S1,useSyncExternalStore:C1,useId:$1,unstable_isNewReconciler:!1};function Pr(n,e){if(n&&n.defaultProps){e=Tt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Jm(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Tt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var jh={isMounted:function(n){return(n=n._reactInternals)?Uo(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=On(),s=bi(n),i=As(r,s);i.payload=e,t!=null&&(i.callback=t),e=wi(n,i,s),e!==null&&(Vr(e,n,s,r),pd(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=On(),s=bi(n),i=As(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=wi(n,i,s),e!==null&&(Vr(e,n,s,r),pd(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=On(),r=bi(n),s=As(t,r);s.tag=2,e!=null&&(s.callback=e),e=wi(n,s,r),e!==null&&(Vr(e,n,r,t),pd(e,n,r))}};function ew(n,e,t,r,s,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Lc(t,r)||!Lc(s,i):!0}function W1(n,e,t){var r=!1,s=Ai,i=e.contextType;return typeof i=="object"&&i!==null?i=xr(i):(s=zn(e)?To:bn.current,r=e.contextTypes,i=(r=r!=null)?Ya(n,s):Ai),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jh,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function tw(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&jh.enqueueReplaceState(e,e.state,null)}function Gm(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},Wg(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=xr(i):(i=zn(e)?To:bn.current,s.context=Ya(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Jm(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&jh.enqueueReplaceState(s,s.state,null),Wd(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function nl(n,e){try{var t="",r=e;do t+=uP(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function Mf(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Ym(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var FT=typeof WeakMap=="function"?WeakMap:Map;function q1(n,e,t){t=As(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Zd||(Zd=!0,lp=r),Ym(n,e)},t}function H1(n,e,t){t=As(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){Ym(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){Ym(n,e),typeof r!="function"&&(_i===null?_i=new Set([this]):_i.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function nw(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new FT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=GT.bind(null,n,e,t),e.then(n,n))}function rw(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function sw(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=As(-1,1),e.tag=2,wi(t,e,1))),t.lanes|=1),n)}var LT=Bs.ReactCurrentOwner,$n=!1;function Sn(n,e,t,r){e.child=n===null?b1(e,null,t,r):el(e,n.child,t,r)}function iw(n,e,t,r,s){t=t.render;var i=e.ref;return Ia(e,s),r=Zg(n,e,t,r,i,s),t=Jg(),n!==null&&!$n?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Ds(n,e,s)):(bt&&t&&Fg(e),e.flags|=1,Sn(n,e,r,s),e.child)}function ow(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!oy(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,K1(n,e,i,r,s)):(n=bd(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:Lc,t(o,r)&&n.ref===e.ref)return Ds(n,e,s)}return e.flags|=1,n=xi(i,r),n.ref=e.ref,n.return=e,e.child=n}function K1(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(Lc(i,r)&&n.ref===e.ref)if($n=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&($n=!0);else return e.lanes=n.lanes,Ds(n,e,s)}return Xm(n,e,t,r,s)}function Q1(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(Sa,Zn),Zn|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ht(Sa,Zn),Zn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,ht(Sa,Zn),Zn|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,ht(Sa,Zn),Zn|=r;return Sn(n,e,s,t),e.child}function Z1(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Xm(n,e,t,r,s){var i=zn(t)?To:bn.current;return i=Ya(e,i),Ia(e,s),t=Zg(n,e,t,r,i,s),r=Jg(),n!==null&&!$n?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Ds(n,e,s)):(bt&&r&&Fg(e),e.flags|=1,Sn(n,e,t,s),e.child)}function aw(n,e,t,r,s){if(zn(t)){var i=!0;Vd(e)}else i=!1;if(Ia(e,s),e.stateNode===null)vd(n,e),W1(e,t,r),Gm(e,t,r,s),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=xr(c):(c=zn(t)?To:bn.current,c=Ya(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&tw(e,o,r,c),Zs=!1;var h=e.memoizedState;o.state=h,Wd(e,r,o,s),l=e.memoizedState,a!==r||h!==l||Bn.current||Zs?(typeof u=="function"&&(Jm(e,t,u,r),l=e.memoizedState),(a=Zs||ew(e,t,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,k1(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Pr(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=xr(l):(l=zn(t)?To:bn.current,l=Ya(e,l));var p=t.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&tw(e,o,r,l),Zs=!1,h=e.memoizedState,o.state=h,Wd(e,r,o,s);var _=e.memoizedState;a!==d||h!==_||Bn.current||Zs?(typeof p=="function"&&(Jm(e,t,p,r),_=e.memoizedState),(c=Zs||ew(e,t,c,r,h,_,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),r=!1)}return ep(n,e,t,r,i,s)}function ep(n,e,t,r,s,i){Z1(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Hv(e,t,!1),Ds(n,e,i);r=e.stateNode,LT.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=el(e,n.child,null,i),e.child=el(e,null,a,i)):Sn(n,e,a,i),e.memoizedState=r.state,s&&Hv(e,t,!0),e.child}function J1(n){var e=n.stateNode;e.pendingContext?qv(n,e.pendingContext,e.pendingContext!==e.context):e.context&&qv(n,e.context,!1),qg(n,e.containerInfo)}function lw(n,e,t,r,s){return Xa(),Vg(s),e.flags|=256,Sn(n,e,t,r),e.child}var tp={dehydrated:null,treeContext:null,retryLane:0};function np(n){return{baseLanes:n,cachePool:null,transitions:null}}function G1(n,e,t){var r=e.pendingProps,s=Et.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),ht(Et,s&1),n===null)return Qm(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Lh(o,r,0,null),n=So(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=np(t),e.memoizedState=tp,n):Xg(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return VT(n,e,o,r,a,s,t);if(i){i=r.fallback,o=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=xi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=xi(a,i):(i=So(i,o,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=n.child.memoizedState,o=o===null?np(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=tp,r}return i=n.child,n=i.sibling,r=xi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Xg(n,e){return e=Lh({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Qu(n,e,t,r){return r!==null&&Vg(r),el(e,n.child,null,t),n=Xg(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function VT(n,e,t,r,s,i,o){if(t)return e.flags&256?(e.flags&=-257,r=Mf(Error(Q(422))),Qu(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Lh({mode:"visible",children:r.children},s,0,null),i=So(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&el(e,n.child,null,o),e.child.memoizedState=np(o),e.memoizedState=tp,i);if(!(e.mode&1))return Qu(n,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Q(419)),r=Mf(i,r,void 0),Qu(n,e,o,r)}if(a=(o&n.childLanes)!==0,$n||a){if(r=on,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,js(n,s),Vr(r,n,s,-1))}return iy(),r=Mf(Error(Q(421))),Qu(n,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=YT.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,tr=vi(s.nextSibling),sr=e,bt=!0,Rr=null,n!==null&&(yr[vr++]=Ss,yr[vr++]=Cs,yr[vr++]=Ao,Ss=n.id,Cs=n.overflow,Ao=e),e=Xg(e,r.children),e.flags|=4096,e)}function cw(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Zm(n.return,e,t)}function If(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function Y1(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Sn(n,e,r.children,t),r=Et.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&cw(n,t,e);else if(n.tag===19)cw(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(ht(Et,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&qd(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),If(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&qd(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}If(e,!0,t,null,i);break;case"together":If(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vd(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ds(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),No|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Q(153));if(e.child!==null){for(n=e.child,t=xi(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=xi(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function $T(n,e,t){switch(e.tag){case 3:J1(e),Xa();break;case 5:E1(e);break;case 1:zn(e.type)&&Vd(e);break;case 4:qg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ht(zd,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ht(Et,Et.current&1),e.flags|=128,null):t&e.child.childLanes?G1(n,e,t):(ht(Et,Et.current&1),n=Ds(n,e,t),n!==null?n.sibling:null);ht(Et,Et.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return Y1(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ht(Et,Et.current),r)break;return null;case 22:case 23:return e.lanes=0,Q1(n,e,t)}return Ds(n,e,t)}var X1,rp,ek,tk;X1=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};rp=function(){};ek=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,lo(ss.current);var i=null;switch(t){case"input":s=Sm(n,s),r=Sm(n,r),i=[];break;case"select":s=Tt({},s,{value:void 0}),r=Tt({},r,{value:void 0}),i=[];break;case"textarea":s=Tm(n,s),r=Tm(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Fd)}Om(t,r);var o;t=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Nc.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(i||(i=[]),i.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Nc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&mt("scroll",n),i||a===l||(i=[])):(i=i||[]).push(c,l))}t&&(i=i||[]).push("style",t);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};tk=function(n,e,t,r){t!==r&&(e.flags|=4)};function Ll(n,e){if(!bt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function gn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function BT(n,e,t){var r=e.pendingProps;switch(Lg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(e),null;case 1:return zn(e.type)&&Ld(),gn(e),null;case 3:return r=e.stateNode,tl(),gt(Bn),gt(bn),Kg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Hu(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rr!==null&&(dp(Rr),Rr=null))),rp(n,e),gn(e),null;case 5:Hg(e);var s=lo(Uc.current);if(t=e.type,n!==null&&e.stateNode!=null)ek(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return gn(e),null}if(n=lo(ss.current),Hu(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[ts]=e,r[Bc]=i,n=(e.mode&1)!==0,t){case"dialog":mt("cancel",r),mt("close",r);break;case"iframe":case"object":case"embed":mt("load",r);break;case"video":case"audio":for(s=0;s<tc.length;s++)mt(tc[s],r);break;case"source":mt("error",r);break;case"img":case"image":case"link":mt("error",r),mt("load",r);break;case"details":mt("toggle",r);break;case"input":vv(r,i),mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},mt("invalid",r);break;case"textarea":_v(r,i),mt("invalid",r)}Om(t,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&qu(r.textContent,a,n),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&qu(r.textContent,a,n),s=["children",""+a]):Nc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&mt("scroll",r)}switch(t){case"input":Fu(r),wv(r,i,!0);break;case"textarea":Fu(r),bv(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Fd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Ax(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[ts]=e,n[Bc]=r,X1(n,e,!1,!1),e.stateNode=n;e:{switch(o=Nm(t,r),t){case"dialog":mt("cancel",n),mt("close",n),s=r;break;case"iframe":case"object":case"embed":mt("load",n),s=r;break;case"video":case"audio":for(s=0;s<tc.length;s++)mt(tc[s],n);s=r;break;case"source":mt("error",n),s=r;break;case"img":case"image":case"link":mt("error",n),mt("load",n),s=r;break;case"details":mt("toggle",n),s=r;break;case"input":vv(n,r),s=Sm(n,r),mt("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=Tt({},r,{value:void 0}),mt("invalid",n);break;case"textarea":_v(n,r),s=Tm(n,r),mt("invalid",n);break;default:s=r}Om(t,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Rx(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ox(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Rc(n,l):typeof l=="number"&&Rc(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Nc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&mt("scroll",n):l!=null&&kg(n,i,l,o))}switch(t){case"input":Fu(n),wv(n,r,!1);break;case"textarea":Fu(n),bv(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ti(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?Oa(n,!!r.multiple,i,!1):r.defaultValue!=null&&Oa(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Fd)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gn(e),null;case 6:if(n&&e.stateNode!=null)tk(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(t=lo(Uc.current),lo(ss.current),Hu(e)){if(r=e.stateNode,t=e.memoizedProps,r[ts]=e,(i=r.nodeValue!==t)&&(n=sr,n!==null))switch(n.tag){case 3:qu(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&qu(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[ts]=e,e.stateNode=r}return gn(e),null;case 13:if(gt(Et),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(bt&&tr!==null&&e.mode&1&&!(e.flags&128))w1(),Xa(),e.flags|=98560,i=!1;else if(i=Hu(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(Q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[ts]=e}else Xa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gn(e),i=!1}else Rr!==null&&(dp(Rr),Rr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Et.current&1?Zt===0&&(Zt=3):iy())),e.updateQueue!==null&&(e.flags|=4),gn(e),null);case 4:return tl(),rp(n,e),n===null&&Vc(e.stateNode.containerInfo),gn(e),null;case 10:return zg(e.type._context),gn(e),null;case 17:return zn(e.type)&&Ld(),gn(e),null;case 19:if(gt(Et),i=e.memoizedState,i===null)return gn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ll(i,!1);else{if(Zt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=qd(n),o!==null){for(e.flags|=128,Ll(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ht(Et,Et.current&1|2),e.child}n=n.sibling}i.tail!==null&&Ft()>rl&&(e.flags|=128,r=!0,Ll(i,!1),e.lanes=4194304)}else{if(!r)if(n=qd(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ll(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!bt)return gn(e),null}else 2*Ft()-i.renderingStartTime>rl&&t!==1073741824&&(e.flags|=128,r=!0,Ll(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ft(),e.sibling=null,t=Et.current,ht(Et,r?t&1|2:t&1),e):(gn(e),null);case 22:case 23:return sy(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Zn&1073741824&&(gn(e),e.subtreeFlags&6&&(e.flags|=8192)):gn(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function zT(n,e){switch(Lg(e),e.tag){case 1:return zn(e.type)&&Ld(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return tl(),gt(Bn),gt(bn),Kg(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Hg(e),null;case 13:if(gt(Et),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Xa()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return gt(Et),null;case 4:return tl(),null;case 10:return zg(e.type._context),null;case 22:case 23:return sy(),null;case 24:return null;default:return null}}var Zu=!1,wn=!1,UT=typeof WeakSet=="function"?WeakSet:Set,se=null;function Ea(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){It(n,e,r)}else t.current=null}function sp(n,e,t){try{t()}catch(r){It(n,e,r)}}var uw=!1;function WT(n,e){if(Bm=Id,n=o1(),Dg(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=n,h=null;t:for(;;){for(var p;d!==t||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===n)break t;if(h===t&&++c===s&&(a=o),h===i&&++u===r&&(l=o),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(zm={focusedElem:n,selectionRange:t},Id=!1,se=e;se!==null;)if(e=se,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,se=n;else for(;se!==null;){e=se;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,w=_.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:Pr(e.type,v),w);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(x){It(e,e.return,x)}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}return _=uw,uw=!1,_}function fc(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&sp(e,t,i)}s=s.next}while(s!==r)}}function Dh(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function ip(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function nk(n){var e=n.alternate;e!==null&&(n.alternate=null,nk(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ts],delete e[Bc],delete e[qm],delete e[CT],delete e[PT])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function rk(n){return n.tag===5||n.tag===3||n.tag===4}function dw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||rk(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function op(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Fd));else if(r!==4&&(n=n.child,n!==null))for(op(n,e,t),n=n.sibling;n!==null;)op(n,e,t),n=n.sibling}function ap(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(ap(n,e,t),n=n.sibling;n!==null;)ap(n,e,t),n=n.sibling}var un=null,Or=!1;function Us(n,e,t){for(t=t.child;t!==null;)sk(n,e,t),t=t.sibling}function sk(n,e,t){if(rs&&typeof rs.onCommitFiberUnmount=="function")try{rs.onCommitFiberUnmount(Th,t)}catch{}switch(t.tag){case 5:wn||Ea(t,e);case 6:var r=un,s=Or;un=null,Us(n,e,t),un=r,Or=s,un!==null&&(Or?(n=un,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):un.removeChild(t.stateNode));break;case 18:un!==null&&(Or?(n=un,t=t.stateNode,n.nodeType===8?Pf(n.parentNode,t):n.nodeType===1&&Pf(n,t),Dc(n)):Pf(un,t.stateNode));break;case 4:r=un,s=Or,un=t.stateNode.containerInfo,Or=!0,Us(n,e,t),un=r,Or=s;break;case 0:case 11:case 14:case 15:if(!wn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&sp(t,e,o),s=s.next}while(s!==r)}Us(n,e,t);break;case 1:if(!wn&&(Ea(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){It(t,e,a)}Us(n,e,t);break;case 21:Us(n,e,t);break;case 22:t.mode&1?(wn=(r=wn)||t.memoizedState!==null,Us(n,e,t),wn=r):Us(n,e,t);break;default:Us(n,e,t)}}function hw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new UT),e.forEach(function(r){var s=XT.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function Cr(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:un=a.stateNode,Or=!1;break e;case 3:un=a.stateNode.containerInfo,Or=!0;break e;case 4:un=a.stateNode.containerInfo,Or=!0;break e}a=a.return}if(un===null)throw Error(Q(160));sk(i,o,s),un=null,Or=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){It(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ik(e,n),e=e.sibling}function ik(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Cr(e,n),Hr(n),r&4){try{fc(3,n,n.return),Dh(3,n)}catch(v){It(n,n.return,v)}try{fc(5,n,n.return)}catch(v){It(n,n.return,v)}}break;case 1:Cr(e,n),Hr(n),r&512&&t!==null&&Ea(t,t.return);break;case 5:if(Cr(e,n),Hr(n),r&512&&t!==null&&Ea(t,t.return),n.flags&32){var s=n.stateNode;try{Rc(s,"")}catch(v){It(n,n.return,v)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Px(s,i),Nm(a,o);var c=Nm(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?Rx(s,d):u==="dangerouslySetInnerHTML"?Ox(s,d):u==="children"?Rc(s,d):kg(s,u,d,c)}switch(a){case"input":Cm(s,i);break;case"textarea":Tx(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Oa(s,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?Oa(s,!!i.multiple,i.defaultValue,!0):Oa(s,!!i.multiple,i.multiple?[]:"",!1))}s[Bc]=i}catch(v){It(n,n.return,v)}}break;case 6:if(Cr(e,n),Hr(n),r&4){if(n.stateNode===null)throw Error(Q(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(v){It(n,n.return,v)}}break;case 3:if(Cr(e,n),Hr(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Dc(e.containerInfo)}catch(v){It(n,n.return,v)}break;case 4:Cr(e,n),Hr(n);break;case 13:Cr(e,n),Hr(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ny=Ft())),r&4&&hw(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(wn=(c=wn)||u,Cr(e,n),wn=c):Cr(e,n),Hr(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(se=n,u=n.child;u!==null;){for(d=se=u;se!==null;){switch(h=se,p=h.child,h.tag){case 0:case 11:case 14:case 15:fc(4,h,h.return);break;case 1:Ea(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){r=h,t=h.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(v){It(r,t,v)}}break;case 5:Ea(h,h.return);break;case 22:if(h.memoizedState!==null){mw(d);continue}}p!==null?(p.return=h,se=p):mw(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Nx("display",o))}catch(v){It(n,n.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){It(n,n.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Cr(e,n),Hr(n),r&4&&hw(n);break;case 21:break;default:Cr(e,n),Hr(n)}}function Hr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(rk(t)){var r=t;break e}t=t.return}throw Error(Q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Rc(s,""),r.flags&=-33);var i=dw(n);ap(n,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=dw(n);op(n,a,o);break;default:throw Error(Q(161))}}catch(l){It(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function qT(n,e,t){se=n,ok(n)}function ok(n,e,t){for(var r=(n.mode&1)!==0;se!==null;){var s=se,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Zu;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||wn;a=Zu;var c=wn;if(Zu=o,(wn=l)&&!c)for(se=s;se!==null;)o=se,l=o.child,o.tag===22&&o.memoizedState!==null?pw(s):l!==null?(l.return=o,se=l):pw(s);for(;i!==null;)se=i,ok(i),i=i.sibling;se=s,Zu=a,wn=c}fw(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,se=i):fw(n)}}function fw(n){for(;se!==null;){var e=se;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wn||Dh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wn)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Pr(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Gv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Gv(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Dc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}wn||e.flags&512&&ip(e)}catch(h){It(e,e.return,h)}}if(e===n){se=null;break}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}}function mw(n){for(;se!==null;){var e=se;if(e===n){se=null;break}var t=e.sibling;if(t!==null){t.return=e.return,se=t;break}se=e.return}}function pw(n){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Dh(4,e)}catch(l){It(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){It(e,s,l)}}var i=e.return;try{ip(e)}catch(l){It(e,i,l)}break;case 5:var o=e.return;try{ip(e)}catch(l){It(e,o,l)}}}catch(l){It(e,e.return,l)}if(e===n){se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,se=a;break}se=e.return}}var HT=Math.ceil,Qd=Bs.ReactCurrentDispatcher,ey=Bs.ReactCurrentOwner,br=Bs.ReactCurrentBatchConfig,qe=0,on=null,Wt=null,hn=0,Zn=0,Sa=Li(0),Zt=0,Kc=null,No=0,Fh=0,ty=0,mc=null,Vn=null,ny=0,rl=1/0,gs=null,Zd=!1,lp=null,_i=null,Ju=!1,di=null,Jd=0,pc=0,cp=null,wd=-1,_d=0;function On(){return qe&6?Ft():wd!==-1?wd:wd=Ft()}function bi(n){return n.mode&1?qe&2&&hn!==0?hn&-hn:AT.transition!==null?(_d===0&&(_d=Wx()),_d):(n=tt,n!==0||(n=window.event,n=n===void 0?16:Gx(n.type)),n):1}function Vr(n,e,t,r){if(50<pc)throw pc=0,cp=null,Error(Q(185));gu(n,t,r),(!(qe&2)||n!==on)&&(n===on&&(!(qe&2)&&(Fh|=t),Zt===4&&Xs(n,hn)),Un(n,r),t===1&&qe===0&&!(e.mode&1)&&(rl=Ft()+500,Mh&&Vi()))}function Un(n,e){var t=n.callbackNode;AP(n,e);var r=Md(n,n===on?hn:0);if(r===0)t!==null&&Ev(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&Ev(t),e===1)n.tag===0?TT(gw.bind(null,n)):g1(gw.bind(null,n)),ET(function(){!(qe&6)&&Vi()}),t=null;else{switch(qx(r)){case 1:t=Tg;break;case 4:t=zx;break;case 16:t=Rd;break;case 536870912:t=Ux;break;default:t=Rd}t=mk(t,ak.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function ak(n,e){if(wd=-1,_d=0,qe&6)throw Error(Q(327));var t=n.callbackNode;if(ja()&&n.callbackNode!==t)return null;var r=Md(n,n===on?hn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Gd(n,r);else{e=r;var s=qe;qe|=2;var i=ck();(on!==n||hn!==e)&&(gs=null,rl=Ft()+500,Eo(n,e));do try{ZT();break}catch(a){lk(n,a)}while(!0);Bg(),Qd.current=i,qe=s,Wt!==null?e=0:(on=null,hn=0,e=Zt)}if(e!==0){if(e===2&&(s=Dm(n),s!==0&&(r=s,e=up(n,s))),e===1)throw t=Kc,Eo(n,0),Xs(n,r),Un(n,Ft()),t;if(e===6)Xs(n,r);else{if(s=n.current.alternate,!(r&30)&&!KT(s)&&(e=Gd(n,r),e===2&&(i=Dm(n),i!==0&&(r=i,e=up(n,i))),e===1))throw t=Kc,Eo(n,0),Xs(n,r),Un(n,Ft()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:Xi(n,Vn,gs);break;case 3:if(Xs(n,r),(r&130023424)===r&&(e=ny+500-Ft(),10<e)){if(Md(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){On(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=Wm(Xi.bind(null,n,Vn,gs),e);break}Xi(n,Vn,gs);break;case 4:if(Xs(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var o=31-Lr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ft()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*HT(r/1960))-r,10<r){n.timeoutHandle=Wm(Xi.bind(null,n,Vn,gs),r);break}Xi(n,Vn,gs);break;case 5:Xi(n,Vn,gs);break;default:throw Error(Q(329))}}}return Un(n,Ft()),n.callbackNode===t?ak.bind(null,n):null}function up(n,e){var t=mc;return n.current.memoizedState.isDehydrated&&(Eo(n,e).flags|=256),n=Gd(n,e),n!==2&&(e=Vn,Vn=t,e!==null&&dp(e)),n}function dp(n){Vn===null?Vn=n:Vn.push.apply(Vn,n)}function KT(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!Br(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xs(n,e){for(e&=~ty,e&=~Fh,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Lr(e),r=1<<t;n[t]=-1,e&=~r}}function gw(n){if(qe&6)throw Error(Q(327));ja();var e=Md(n,0);if(!(e&1))return Un(n,Ft()),null;var t=Gd(n,e);if(n.tag!==0&&t===2){var r=Dm(n);r!==0&&(e=r,t=up(n,r))}if(t===1)throw t=Kc,Eo(n,0),Xs(n,e),Un(n,Ft()),t;if(t===6)throw Error(Q(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Xi(n,Vn,gs),Un(n,Ft()),null}function ry(n,e){var t=qe;qe|=1;try{return n(e)}finally{qe=t,qe===0&&(rl=Ft()+500,Mh&&Vi())}}function Ro(n){di!==null&&di.tag===0&&!(qe&6)&&ja();var e=qe;qe|=1;var t=br.transition,r=tt;try{if(br.transition=null,tt=1,n)return n()}finally{tt=r,br.transition=t,qe=e,!(qe&6)&&Vi()}}function sy(){Zn=Sa.current,gt(Sa)}function Eo(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,kT(t)),Wt!==null)for(t=Wt.return;t!==null;){var r=t;switch(Lg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ld();break;case 3:tl(),gt(Bn),gt(bn),Kg();break;case 5:Hg(r);break;case 4:tl();break;case 13:gt(Et);break;case 19:gt(Et);break;case 10:zg(r.type._context);break;case 22:case 23:sy()}t=t.return}if(on=n,Wt=n=xi(n.current,null),hn=Zn=e,Zt=0,Kc=null,ty=Fh=No=0,Vn=mc=null,ao!==null){for(e=0;e<ao.length;e++)if(t=ao[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}t.pending=r}ao=null}return n}function lk(n,e){do{var t=Wt;try{if(Bg(),gd.current=Kd,Hd){for(var r=Ct.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Hd=!1}if(Oo=0,rn=Kt=Ct=null,hc=!1,Wc=0,ey.current=null,t===null||t.return===null){Zt=1,Kc=e,Wt=null;break}e:{var i=n,o=t.return,a=t,l=e;if(e=hn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=rw(o);if(p!==null){p.flags&=-257,sw(p,o,a,i,e),p.mode&1&&nw(i,c,e),e=p,l=c;var _=e.updateQueue;if(_===null){var v=new Set;v.add(l),e.updateQueue=v}else _.add(l);break e}else{if(!(e&1)){nw(i,c,e),iy();break e}l=Error(Q(426))}}else if(bt&&a.mode&1){var w=rw(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),sw(w,o,a,i,e),Vg(nl(l,a));break e}}i=l=nl(l,a),Zt!==4&&(Zt=2),mc===null?mc=[i]:mc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=q1(i,l,e);Jv(i,y);break e;case 1:a=l;var g=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(_i===null||!_i.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var x=H1(i,a,e);Jv(i,x);break e}}i=i.return}while(i!==null)}dk(t)}catch(C){e=C,Wt===t&&t!==null&&(Wt=t=t.return);continue}break}while(!0)}function ck(){var n=Qd.current;return Qd.current=Kd,n===null?Kd:n}function iy(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),on===null||!(No&268435455)&&!(Fh&268435455)||Xs(on,hn)}function Gd(n,e){var t=qe;qe|=2;var r=ck();(on!==n||hn!==e)&&(gs=null,Eo(n,e));do try{QT();break}catch(s){lk(n,s)}while(!0);if(Bg(),qe=t,Qd.current=r,Wt!==null)throw Error(Q(261));return on=null,hn=0,Zt}function QT(){for(;Wt!==null;)uk(Wt)}function ZT(){for(;Wt!==null&&!_P();)uk(Wt)}function uk(n){var e=fk(n.alternate,n,Zn);n.memoizedProps=n.pendingProps,e===null?dk(n):Wt=e,ey.current=null}function dk(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=zT(t,e),t!==null){t.flags&=32767,Wt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Zt=6,Wt=null;return}}else if(t=BT(t,e,Zn),t!==null){Wt=t;return}if(e=e.sibling,e!==null){Wt=e;return}Wt=e=n}while(e!==null);Zt===0&&(Zt=5)}function Xi(n,e,t){var r=tt,s=br.transition;try{br.transition=null,tt=1,JT(n,e,t,r)}finally{br.transition=s,tt=r}return null}function JT(n,e,t,r){do ja();while(di!==null);if(qe&6)throw Error(Q(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Q(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(OP(n,i),n===on&&(Wt=on=null,hn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Ju||(Ju=!0,mk(Rd,function(){return ja(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=br.transition,br.transition=null;var o=tt;tt=1;var a=qe;qe|=4,ey.current=null,WT(n,t),ik(t,n),gT(zm),Id=!!Bm,zm=Bm=null,n.current=t,qT(t),bP(),qe=a,tt=o,br.transition=i}else n.current=t;if(Ju&&(Ju=!1,di=n,Jd=s),i=n.pendingLanes,i===0&&(_i=null),EP(t.stateNode),Un(n,Ft()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zd)throw Zd=!1,n=lp,lp=null,n;return Jd&1&&n.tag!==0&&ja(),i=n.pendingLanes,i&1?n===cp?pc++:(pc=0,cp=n):pc=0,Vi(),null}function ja(){if(di!==null){var n=qx(Jd),e=br.transition,t=tt;try{if(br.transition=null,tt=16>n?16:n,di===null)var r=!1;else{if(n=di,di=null,Jd=0,qe&6)throw Error(Q(331));var s=qe;for(qe|=4,se=n.current;se!==null;){var i=se,o=i.child;if(se.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(se=c;se!==null;){var u=se;switch(u.tag){case 0:case 11:case 15:fc(8,u,i)}var d=u.child;if(d!==null)d.return=u,se=d;else for(;se!==null;){u=se;var h=u.sibling,p=u.return;if(nk(u),u===c){se=null;break}if(h!==null){h.return=p,se=h;break}se=p}}}var _=i.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}se=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,se=o;else e:for(;se!==null;){if(i=se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fc(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,se=y;break e}se=i.return}}var g=n.current;for(se=g;se!==null;){o=se;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,se=b;else e:for(o=g;se!==null;){if(a=se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Dh(9,a)}}catch(C){It(a,a.return,C)}if(a===o){se=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,se=x;break e}se=a.return}}if(qe=s,Vi(),rs&&typeof rs.onPostCommitFiberRoot=="function")try{rs.onPostCommitFiberRoot(Th,n)}catch{}r=!0}return r}finally{tt=t,br.transition=e}}return!1}function yw(n,e,t){e=nl(t,e),e=q1(n,e,1),n=wi(n,e,1),e=On(),n!==null&&(gu(n,1,e),Un(n,e))}function It(n,e,t){if(n.tag===3)yw(n,n,t);else for(;e!==null;){if(e.tag===3){yw(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_i===null||!_i.has(r))){n=nl(t,n),n=H1(e,n,1),e=wi(e,n,1),n=On(),e!==null&&(gu(e,1,n),Un(e,n));break}}e=e.return}}function GT(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=On(),n.pingedLanes|=n.suspendedLanes&t,on===n&&(hn&t)===t&&(Zt===4||Zt===3&&(hn&130023424)===hn&&500>Ft()-ny?Eo(n,0):ty|=t),Un(n,e)}function hk(n,e){e===0&&(n.mode&1?(e=$u,$u<<=1,!($u&130023424)&&($u=4194304)):e=1);var t=On();n=js(n,e),n!==null&&(gu(n,e,t),Un(n,t))}function YT(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),hk(n,t)}function XT(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),hk(n,t)}var fk;fk=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Bn.current)$n=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return $n=!1,$T(n,e,t);$n=!!(n.flags&131072)}else $n=!1,bt&&e.flags&1048576&&y1(e,Bd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vd(n,e),n=e.pendingProps;var s=Ya(e,bn.current);Ia(e,t),s=Zg(null,e,r,n,s,t);var i=Jg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zn(r)?(i=!0,Vd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Wg(e),s.updater=jh,e.stateNode=s,s._reactInternals=e,Gm(e,r,n,t),e=ep(null,e,r,!0,i,t)):(e.tag=0,bt&&i&&Fg(e),Sn(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(vd(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=t2(r),n=Pr(r,n),s){case 0:e=Xm(null,e,r,n,t);break e;case 1:e=aw(null,e,r,n,t);break e;case 11:e=iw(null,e,r,n,t);break e;case 14:e=ow(null,e,r,Pr(r.type,n),t);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pr(r,s),Xm(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pr(r,s),aw(n,e,r,s,t);case 3:e:{if(J1(e),n===null)throw Error(Q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,k1(n,e),Wd(e,r,null,t);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=nl(Error(Q(423)),e),e=lw(n,e,r,t,s);break e}else if(r!==s){s=nl(Error(Q(424)),e),e=lw(n,e,r,t,s);break e}else for(tr=vi(e.stateNode.containerInfo.firstChild),sr=e,bt=!0,Rr=null,t=b1(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Xa(),r===s){e=Ds(n,e,t);break e}Sn(n,e,r,t)}e=e.child}return e;case 5:return E1(e),n===null&&Qm(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,o=s.children,Um(r,s)?o=null:i!==null&&Um(r,i)&&(e.flags|=32),Z1(n,e),Sn(n,e,o,t),e.child;case 6:return n===null&&Qm(e),null;case 13:return G1(n,e,t);case 4:return qg(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=el(e,null,r,t):Sn(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pr(r,s),iw(n,e,r,s,t);case 7:return Sn(n,e,e.pendingProps,t),e.child;case 8:return Sn(n,e,e.pendingProps.children,t),e.child;case 12:return Sn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ht(zd,r._currentValue),r._currentValue=o,i!==null)if(Br(i.value,o)){if(i.children===s.children&&!Bn.current){e=Ds(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=As(-1,t&-t),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),Zm(i.return,t,e),a.lanes|=t;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Q(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Zm(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Sn(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ia(e,t),s=xr(s),r=r(s),e.flags|=1,Sn(n,e,r,t),e.child;case 14:return r=e.type,s=Pr(r,e.pendingProps),s=Pr(r.type,s),ow(n,e,r,s,t);case 15:return K1(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Pr(r,s),vd(n,e),e.tag=1,zn(r)?(n=!0,Vd(e)):n=!1,Ia(e,t),W1(e,r,s),Gm(e,r,s,t),ep(null,e,r,!0,n,t);case 19:return Y1(n,e,t);case 22:return Q1(n,e,t)}throw Error(Q(156,e.tag))};function mk(n,e){return Bx(n,e)}function e2(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(n,e,t,r){return new e2(n,e,t,r)}function oy(n){return n=n.prototype,!(!n||!n.isReactComponent)}function t2(n){if(typeof n=="function")return oy(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Sg)return 11;if(n===Cg)return 14}return 2}function xi(n,e){var t=n.alternate;return t===null?(t=_r(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function bd(n,e,t,r,s,i){var o=2;if(r=n,typeof n=="function")oy(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case pa:return So(t.children,s,i,e);case Eg:o=8,s|=8;break;case bm:return n=_r(12,t,e,s|2),n.elementType=bm,n.lanes=i,n;case xm:return n=_r(13,t,e,s),n.elementType=xm,n.lanes=i,n;case km:return n=_r(19,t,e,s),n.elementType=km,n.lanes=i,n;case Ex:return Lh(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case xx:o=10;break e;case kx:o=9;break e;case Sg:o=11;break e;case Cg:o=14;break e;case Qs:o=16,r=null;break e}throw Error(Q(130,n==null?n:typeof n,""))}return e=_r(o,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function So(n,e,t,r){return n=_r(7,n,r,e),n.lanes=t,n}function Lh(n,e,t,r){return n=_r(22,n,r,e),n.elementType=Ex,n.lanes=t,n.stateNode={isHidden:!1},n}function jf(n,e,t){return n=_r(6,n,null,e),n.lanes=t,n}function Df(n,e,t){return e=_r(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function n2(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gf(0),this.expirationTimes=gf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ay(n,e,t,r,s,i,o,a,l){return n=new n2(n,e,t,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=_r(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wg(i),n}function r2(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ma,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function pk(n){if(!n)return Ai;n=n._reactInternals;e:{if(Uo(n)!==n||n.tag!==1)throw Error(Q(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(n.tag===1){var t=n.type;if(zn(t))return p1(n,t,e)}return e}function gk(n,e,t,r,s,i,o,a,l){return n=ay(t,r,!0,n,s,i,o,a,l),n.context=pk(null),t=n.current,r=On(),s=bi(t),i=As(r,s),i.callback=e??null,wi(t,i,s),n.current.lanes=s,gu(n,s,r),Un(n,r),n}function Vh(n,e,t,r){var s=e.current,i=On(),o=bi(s);return t=pk(t),e.context===null?e.context=t:e.pendingContext=t,e=As(i,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=wi(s,e,o),n!==null&&(Vr(n,s,o,i),pd(n,s,o)),o}function Yd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function vw(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function ly(n,e){vw(n,e),(n=n.alternate)&&vw(n,e)}function s2(){return null}var yk=typeof reportError=="function"?reportError:function(n){console.error(n)};function cy(n){this._internalRoot=n}$h.prototype.render=cy.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Q(409));Vh(n,e,null,null)};$h.prototype.unmount=cy.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ro(function(){Vh(null,n,null,null)}),e[Is]=null}};function $h(n){this._internalRoot=n}$h.prototype.unstable_scheduleHydration=function(n){if(n){var e=Qx();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ys.length&&e!==0&&e<Ys[t].priority;t++);Ys.splice(t,0,n),t===0&&Jx(n)}};function uy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Bh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ww(){}function i2(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Yd(o);i.call(c)}}var o=gk(e,r,n,0,null,!1,!1,"",ww);return n._reactRootContainer=o,n[Is]=o.current,Vc(n.nodeType===8?n.parentNode:n),Ro(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Yd(l);a.call(c)}}var l=ay(n,0,!1,null,null,!1,!1,"",ww);return n._reactRootContainer=l,n[Is]=l.current,Vc(n.nodeType===8?n.parentNode:n),Ro(function(){Vh(e,l,t,r)}),l}function zh(n,e,t,r,s){var i=t._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Yd(o);a.call(l)}}Vh(e,o,n,s)}else o=i2(t,e,n,s,r);return Yd(o)}Hx=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=ec(e.pendingLanes);t!==0&&(Ag(e,t|1),Un(e,Ft()),!(qe&6)&&(rl=Ft()+500,Vi()))}break;case 13:Ro(function(){var r=js(n,1);if(r!==null){var s=On();Vr(r,n,1,s)}}),ly(n,1)}};Og=function(n){if(n.tag===13){var e=js(n,134217728);if(e!==null){var t=On();Vr(e,n,134217728,t)}ly(n,134217728)}};Kx=function(n){if(n.tag===13){var e=bi(n),t=js(n,e);if(t!==null){var r=On();Vr(t,n,e,r)}ly(n,e)}};Qx=function(){return tt};Zx=function(n,e){var t=tt;try{return tt=n,e()}finally{tt=t}};Mm=function(n,e,t){switch(e){case"input":if(Cm(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=Rh(r);if(!s)throw Error(Q(90));Cx(r),Cm(r,s)}}}break;case"textarea":Tx(n,t);break;case"select":e=t.value,e!=null&&Oa(n,!!t.multiple,e,!1)}};jx=ry;Dx=Ro;var o2={usingClientEntryPoint:!1,Events:[vu,wa,Rh,Mx,Ix,ry]},Vl={findFiberByHostInstance:oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},a2={bundleType:Vl.bundleType,version:Vl.version,rendererPackageName:Vl.rendererPackageName,rendererConfig:Vl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Vx(n),n===null?null:n.stateNode},findFiberByHostInstance:Vl.findFiberByHostInstance||s2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gu.isDisabled&&Gu.supportsFiber)try{Th=Gu.inject(a2),rs=Gu}catch{}}cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o2;cr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uy(e))throw Error(Q(200));return r2(n,e,null,t)};cr.createRoot=function(n,e){if(!uy(n))throw Error(Q(299));var t=!1,r="",s=yk;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ay(n,1,!1,null,null,t,!1,r,s),n[Is]=e.current,Vc(n.nodeType===8?n.parentNode:n),new cy(e)};cr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Q(188)):(n=Object.keys(n).join(","),Error(Q(268,n)));return n=Vx(e),n=n===null?null:n.stateNode,n};cr.flushSync=function(n){return Ro(n)};cr.hydrate=function(n,e,t){if(!Bh(e))throw Error(Q(200));return zh(null,n,e,!0,t)};cr.hydrateRoot=function(n,e,t){if(!uy(n))throw Error(Q(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",o=yk;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=gk(e,null,n,1,t??null,s,!1,i,o),n[Is]=e.current,Vc(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new $h(e)};cr.render=function(n,e,t){if(!Bh(e))throw Error(Q(200));return zh(null,n,e,!1,t)};cr.unmountComponentAtNode=function(n){if(!Bh(n))throw Error(Q(40));return n._reactRootContainer?(Ro(function(){zh(null,null,n,!1,function(){n._reactRootContainer=null,n[Is]=null})}),!0):!1};cr.unstable_batchedUpdates=ry;cr.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Bh(t))throw Error(Q(200));if(n==null||n._reactInternals===void 0)throw Error(Q(38));return zh(n,e,t,!1,r)};cr.version="18.3.1-next-f1338f8080-20240426";function vk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vk)}catch(n){console.error(n)}}vk(),vx.exports=cr;var _u=vx.exports;const l2=ox(_u),c2=ix({__proto__:null,default:l2},[_u]);var wk,_w=_u;wk=_w.createRoot,_w.hydrateRoot;var _l=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},u2={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},ti,gg,Q0,d2=(Q0=class{constructor(){pe(this,ti,u2);pe(this,gg,!1)}setTimeoutProvider(n){ee(this,ti,n)}setTimeout(n,e){return S(this,ti).setTimeout(n,e)}clearTimeout(n){S(this,ti).clearTimeout(n)}setInterval(n,e){return S(this,ti).setInterval(n,e)}clearInterval(n){S(this,ti).clearInterval(n)}},ti=new WeakMap,gg=new WeakMap,Q0),co=new d2;function h2(n){setTimeout(n,0)}var Mo=typeof window>"u"||"Deno"in globalThis;function Cn(){}function f2(n,e){return typeof n=="function"?n(e):n}function hp(n){return typeof n=="number"&&n>=0&&n!==1/0}function _k(n,e){return Math.max(n+(e||0)-Date.now(),0)}function ki(n,e){return typeof n=="function"?n(e):n}function pr(n,e){return typeof n=="function"?n(e):n}function bw(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==dy(o,e.options))return!1}else if(!Qc(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function xw(n,e){const{exact:t,status:r,predicate:s,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(Io(e.options.mutationKey)!==Io(i))return!1}else if(!Qc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function dy(n,e){return((e==null?void 0:e.queryKeyHashFn)||Io)(n)}function Io(n){return JSON.stringify(n,(e,t)=>fp(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function Qc(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Qc(n[t],e[t])):!1}var m2=Object.prototype.hasOwnProperty;function bk(n,e){if(n===e)return n;const t=kw(n)&&kw(e);if(!t&&!(fp(n)&&fp(e)))return e;const s=(t?n:Object.keys(n)).length,i=t?e:Object.keys(e),o=i.length,a=t?new Array(o):{};let l=0;for(let c=0;c<o;c++){const u=t?c:i[c],d=n[u],h=e[u];if(d===h){a[u]=d,(t?c<s:m2.call(n,u))&&l++;continue}if(d===null||h===null||typeof d!="object"||typeof h!="object"){a[u]=h;continue}const p=bk(d,h);a[u]=p,p===d&&l++}return s===o&&l===s?n:a}function Xd(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function kw(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function fp(n){if(!Ew(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Ew(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function Ew(n){return Object.prototype.toString.call(n)==="[object Object]"}function p2(n){return new Promise(e=>{co.setTimeout(e,n)})}function mp(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?bk(n,e):e}function g2(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function y2(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var hy=Symbol();function xk(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===hy?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function kk(n,e){return typeof n=="function"?n(...e):!!n}var po,ni,Va,Z0,v2=(Z0=class extends _l{constructor(){super();pe(this,po);pe(this,ni);pe(this,Va);ee(this,Va,e=>{if(!Mo&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){S(this,ni)||this.setEventListener(S(this,Va))}onUnsubscribe(){var e;this.hasListeners()||((e=S(this,ni))==null||e.call(this),ee(this,ni,void 0))}setEventListener(e){var t;ee(this,Va,e),(t=S(this,ni))==null||t.call(this),ee(this,ni,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){S(this,po)!==e&&(ee(this,po,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof S(this,po)=="boolean"?S(this,po):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},po=new WeakMap,ni=new WeakMap,Va=new WeakMap,Z0),fy=new v2;function pp(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}var w2=h2;function _2(){let n=[],e=0,t=a=>{a()},r=a=>{a()},s=w2;const i=a=>{e?n.push(a):s(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Qt=_2(),$a,ri,Ba,J0,b2=(J0=class extends _l{constructor(){super();pe(this,$a,!0);pe(this,ri);pe(this,Ba);ee(this,Ba,e=>{if(!Mo&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){S(this,ri)||this.setEventListener(S(this,Ba))}onUnsubscribe(){var e;this.hasListeners()||((e=S(this,ri))==null||e.call(this),ee(this,ri,void 0))}setEventListener(e){var t;ee(this,Ba,e),(t=S(this,ri))==null||t.call(this),ee(this,ri,e(this.setOnline.bind(this)))}setOnline(e){S(this,$a)!==e&&(ee(this,$a,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return S(this,$a)}},$a=new WeakMap,ri=new WeakMap,Ba=new WeakMap,J0),eh=new b2;function x2(n){return Math.min(1e3*2**n,3e4)}function Ek(n){return(n??"online")==="online"?eh.isOnline():!0}var gp=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Sk(n){let e=!1,t=0,r;const s=pp(),i=()=>s.status!=="pending",o=v=>{var w;if(!i()){const y=new gp(v);h(y),(w=n.onCancel)==null||w.call(n,y)}},a=()=>{e=!0},l=()=>{e=!1},c=()=>fy.isFocused()&&(n.networkMode==="always"||eh.isOnline())&&n.canRun(),u=()=>Ek(n.networkMode)&&n.canRun(),d=v=>{i()||(r==null||r(),s.resolve(v))},h=v=>{i()||(r==null||r(),s.reject(v))},p=()=>new Promise(v=>{var w;r=y=>{(i()||c())&&v(y)},(w=n.onPause)==null||w.call(n)}).then(()=>{var v;r=void 0,i()||(v=n.onContinue)==null||v.call(n)}),_=()=>{if(i())return;let v;const w=t===0?n.initialPromise:void 0;try{v=w??n.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(d).catch(y=>{var N;if(i())return;const g=n.retry??(Mo?0:3),b=n.retryDelay??x2,x=typeof b=="function"?b(t,y):b,C=g===!0||typeof g=="number"&&t<g||typeof g=="function"&&g(t,y);if(e||!C){h(y);return}t++,(N=n.onFail)==null||N.call(n,t,y),p2(x).then(()=>c()?void 0:p()).then(()=>{e?h(y):_()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?_():p().then(_),s)}}var go,G0,Ck=(G0=class{constructor(){pe(this,go)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),hp(this.gcTime)&&ee(this,go,co.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Mo?1/0:5*60*1e3))}clearGcTimeout(){S(this,go)&&(co.clearTimeout(S(this,go)),ee(this,go,void 0))}},go=new WeakMap,G0),yo,za,mr,vo,Xt,uu,wo,Tr,ms,Y0,k2=(Y0=class extends Ck{constructor(e){super();pe(this,Tr);pe(this,yo);pe(this,za);pe(this,mr);pe(this,vo);pe(this,Xt);pe(this,uu);pe(this,wo);ee(this,wo,!1),ee(this,uu,e.defaultOptions),this.setOptions(e.options),this.observers=[],ee(this,vo,e.client),ee(this,mr,S(this,vo).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ee(this,yo,Cw(this.options)),this.state=e.state??S(this,yo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=S(this,Xt))==null?void 0:e.promise}setOptions(e){if(this.options={...S(this,uu),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=Cw(this.options);t.data!==void 0&&(this.setState(Sw(t.data,t.dataUpdatedAt)),ee(this,yo,t))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&S(this,mr).remove(this)}setData(e,t){const r=mp(this.state.data,e,this.options);return Ae(this,Tr,ms).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){Ae(this,Tr,ms).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,s;const t=(r=S(this,Xt))==null?void 0:r.promise;return(s=S(this,Xt))==null||s.cancel(e),t?t.then(Cn).catch(Cn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(S(this,yo))}isActive(){return this.observers.some(e=>pr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===hy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ki(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!_k(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=S(this,Xt))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=S(this,Xt))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),S(this,mr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(S(this,Xt)&&(S(this,wo)?S(this,Xt).cancel({revert:!0}):S(this,Xt).cancelRetry()),this.scheduleGc()),S(this,mr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ae(this,Tr,ms).call(this,{type:"invalidate"})}async fetch(e,t){var l,c,u,d,h,p,_,v,w,y,g,b;if(this.state.fetchStatus!=="idle"&&((l=S(this,Xt))==null?void 0:l.status())!=="rejected"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(S(this,Xt))return S(this,Xt).continueRetry(),S(this,Xt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(C=>C.options.queryFn);x&&this.setOptions(x.options)}const r=new AbortController,s=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(ee(this,wo,!0),r.signal)})},i=()=>{const x=xk(this.options,t),N=(()=>{const k={client:S(this,vo),queryKey:this.queryKey,meta:this.meta};return s(k),k})();return ee(this,wo,!1),this.options.persister?this.options.persister(x,N,this):x(N)},a=(()=>{const x={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:S(this,vo),state:this.state,fetchFn:i};return s(x),x})();(c=this.options.behavior)==null||c.onFetch(a,this),ee(this,za,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Ae(this,Tr,ms).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta}),ee(this,Xt,Sk({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,onCancel:x=>{x instanceof gp&&x.revert&&this.setState({...S(this,za),fetchStatus:"idle"}),r.abort()},onFail:(x,C)=>{Ae(this,Tr,ms).call(this,{type:"failed",failureCount:x,error:C})},onPause:()=>{Ae(this,Tr,ms).call(this,{type:"pause"})},onContinue:()=>{Ae(this,Tr,ms).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const x=await S(this,Xt).start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),(p=(h=S(this,mr).config).onSuccess)==null||p.call(h,x,this),(v=(_=S(this,mr).config).onSettled)==null||v.call(_,x,this.state.error,this),x}catch(x){if(x instanceof gp){if(x.silent)return S(this,Xt).promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw Ae(this,Tr,ms).call(this,{type:"error",error:x}),(y=(w=S(this,mr).config).onError)==null||y.call(w,x,this),(b=(g=S(this,mr).config).onSettled)==null||b.call(g,this.state.data,x,this),x}finally{this.scheduleGc()}}},yo=new WeakMap,za=new WeakMap,mr=new WeakMap,vo=new WeakMap,Xt=new WeakMap,uu=new WeakMap,wo=new WeakMap,Tr=new WeakSet,ms=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Pk(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,...Sw(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ee(this,za,e.manual?s:void 0),s;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Qt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),S(this,mr).notify({query:this,type:"updated",action:e})})},Y0);function Pk(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ek(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Sw(n,e){return{data:n,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Cw(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var In,$e,du,xn,_o,Ua,ws,si,hu,Wa,qa,bo,xo,ii,Ha,Ge,nc,yp,vp,wp,_p,bp,xp,kp,Tk,X0,E2=(X0=class extends _l{constructor(e,t){super();pe(this,Ge);pe(this,In);pe(this,$e);pe(this,du);pe(this,xn);pe(this,_o);pe(this,Ua);pe(this,ws);pe(this,si);pe(this,hu);pe(this,Wa);pe(this,qa);pe(this,bo);pe(this,xo);pe(this,ii);pe(this,Ha,new Set);this.options=t,ee(this,In,e),ee(this,si,null),ee(this,ws,pp()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(S(this,$e).addObserver(this),Pw(S(this,$e),this.options)?Ae(this,Ge,nc).call(this):this.updateResult(),Ae(this,Ge,_p).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ep(S(this,$e),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ep(S(this,$e),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ae(this,Ge,bp).call(this),Ae(this,Ge,xp).call(this),S(this,$e).removeObserver(this)}setOptions(e){const t=this.options,r=S(this,$e);if(this.options=S(this,In).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof pr(this.options.enabled,S(this,$e))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ae(this,Ge,kp).call(this),S(this,$e).setOptions(this.options),t._defaulted&&!Xd(this.options,t)&&S(this,In).getQueryCache().notify({type:"observerOptionsUpdated",query:S(this,$e),observer:this});const s=this.hasListeners();s&&Tw(S(this,$e),r,this.options,t)&&Ae(this,Ge,nc).call(this),this.updateResult(),s&&(S(this,$e)!==r||pr(this.options.enabled,S(this,$e))!==pr(t.enabled,S(this,$e))||ki(this.options.staleTime,S(this,$e))!==ki(t.staleTime,S(this,$e)))&&Ae(this,Ge,yp).call(this);const i=Ae(this,Ge,vp).call(this);s&&(S(this,$e)!==r||pr(this.options.enabled,S(this,$e))!==pr(t.enabled,S(this,$e))||i!==S(this,ii))&&Ae(this,Ge,wp).call(this,i)}getOptimisticResult(e){const t=S(this,In).getQueryCache().build(S(this,In),e),r=this.createResult(t,e);return C2(this,r)&&(ee(this,xn,r),ee(this,Ua,this.options),ee(this,_o,S(this,$e).state)),r}getCurrentResult(){return S(this,xn)}trackResult(e,t){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),t==null||t(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&S(this,ws).status==="pending"&&S(this,ws).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(e){S(this,Ha).add(e)}getCurrentQuery(){return S(this,$e)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=S(this,In).defaultQueryOptions(e),r=S(this,In).getQueryCache().build(S(this,In),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return Ae(this,Ge,nc).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),S(this,xn)))}createResult(e,t){var j;const r=S(this,$e),s=this.options,i=S(this,xn),o=S(this,_o),a=S(this,Ua),c=e!==r?e.state:S(this,du),{state:u}=e;let d={...u},h=!1,p;if(t._optimisticResults){const I=this.hasListeners(),V=!I&&Pw(e,t),H=I&&Tw(e,r,t,s);(V||H)&&(d={...d,...Pk(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:_,errorUpdatedAt:v,status:w}=d;p=d.data;let y=!1;if(t.placeholderData!==void 0&&p===void 0&&w==="pending"){let I;i!=null&&i.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData)?(I=i.data,y=!0):I=typeof t.placeholderData=="function"?t.placeholderData((j=S(this,qa))==null?void 0:j.state.data,S(this,qa)):t.placeholderData,I!==void 0&&(w="success",p=mp(i==null?void 0:i.data,I,t),h=!0)}if(t.select&&p!==void 0&&!y)if(i&&p===(o==null?void 0:o.data)&&t.select===S(this,hu))p=S(this,Wa);else try{ee(this,hu,t.select),p=t.select(p),p=mp(i==null?void 0:i.data,p,t),ee(this,Wa,p),ee(this,si,null)}catch(I){ee(this,si,I)}S(this,si)&&(_=S(this,si),p=S(this,Wa),v=Date.now(),w="error");const g=d.fetchStatus==="fetching",b=w==="pending",x=w==="error",C=b&&g,N=p!==void 0,P={status:w,fetchStatus:d.fetchStatus,isPending:b,isSuccess:w==="success",isError:x,isInitialLoading:C,isLoading:C,data:p,dataUpdatedAt:d.dataUpdatedAt,error:_,errorUpdatedAt:v,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:g,isRefetching:g&&!b,isLoadingError:x&&!N,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:x&&N,isStale:my(e,t),refetch:this.refetch,promise:S(this,ws),isEnabled:pr(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const I=J=>{P.status==="error"?J.reject(P.error):P.data!==void 0&&J.resolve(P.data)},V=()=>{const J=ee(this,ws,P.promise=pp());I(J)},H=S(this,ws);switch(H.status){case"pending":e.queryHash===r.queryHash&&I(H);break;case"fulfilled":(P.status==="error"||P.data!==H.value)&&V();break;case"rejected":(P.status!=="error"||P.error!==H.reason)&&V();break}}return P}updateResult(){const e=S(this,xn),t=this.createResult(S(this,$e),this.options);if(ee(this,_o,S(this,$e).state),ee(this,Ua,this.options),S(this,_o).data!==void 0&&ee(this,qa,S(this,$e)),Xd(t,e))return;ee(this,xn,t);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!S(this,Ha).size)return!0;const o=new Set(i??S(this,Ha));return this.options.throwOnError&&o.add("error"),Object.keys(S(this,xn)).some(a=>{const l=a;return S(this,xn)[l]!==e[l]&&o.has(l)})};Ae(this,Ge,Tk).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ae(this,Ge,_p).call(this)}},In=new WeakMap,$e=new WeakMap,du=new WeakMap,xn=new WeakMap,_o=new WeakMap,Ua=new WeakMap,ws=new WeakMap,si=new WeakMap,hu=new WeakMap,Wa=new WeakMap,qa=new WeakMap,bo=new WeakMap,xo=new WeakMap,ii=new WeakMap,Ha=new WeakMap,Ge=new WeakSet,nc=function(e){Ae(this,Ge,kp).call(this);let t=S(this,$e).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Cn)),t},yp=function(){Ae(this,Ge,bp).call(this);const e=ki(this.options.staleTime,S(this,$e));if(Mo||S(this,xn).isStale||!hp(e))return;const r=_k(S(this,xn).dataUpdatedAt,e)+1;ee(this,bo,co.setTimeout(()=>{S(this,xn).isStale||this.updateResult()},r))},vp=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(S(this,$e)):this.options.refetchInterval)??!1},wp=function(e){Ae(this,Ge,xp).call(this),ee(this,ii,e),!(Mo||pr(this.options.enabled,S(this,$e))===!1||!hp(S(this,ii))||S(this,ii)===0)&&ee(this,xo,co.setInterval(()=>{(this.options.refetchIntervalInBackground||fy.isFocused())&&Ae(this,Ge,nc).call(this)},S(this,ii)))},_p=function(){Ae(this,Ge,yp).call(this),Ae(this,Ge,wp).call(this,Ae(this,Ge,vp).call(this))},bp=function(){S(this,bo)&&(co.clearTimeout(S(this,bo)),ee(this,bo,void 0))},xp=function(){S(this,xo)&&(co.clearInterval(S(this,xo)),ee(this,xo,void 0))},kp=function(){const e=S(this,In).getQueryCache().build(S(this,In),this.options);if(e===S(this,$e))return;const t=S(this,$e);ee(this,$e,e),ee(this,du,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},Tk=function(e){Qt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(S(this,xn))}),S(this,In).getQueryCache().notify({query:S(this,$e),type:"observerResultsUpdated"})})},X0);function S2(n,e){return pr(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function Pw(n,e){return S2(n,e)||n.state.data!==void 0&&Ep(n,e,e.refetchOnMount)}function Ep(n,e,t){if(pr(e.enabled,n)!==!1&&ki(e.staleTime,n)!=="static"){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&my(n,e)}return!1}function Tw(n,e,t,r){return(n!==e||pr(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&my(n,t)}function my(n,e){return pr(e.enabled,n)!==!1&&n.isStaleByTime(ki(e.staleTime,n))}function C2(n,e){return!Xd(n.getCurrentResult(),e)}function Aw(n){return{onFetch:(e,t)=>{var u,d,h,p,_;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((_=e.state.data)==null?void 0:_.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let v=!1;const w=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},y=xk(e.options,e.fetchOptions),g=async(b,x,C)=>{if(v)return Promise.reject();if(x==null&&b.pages.length)return Promise.resolve(b);const k=(()=>{const V={client:e.client,queryKey:e.queryKey,pageParam:x,direction:C?"backward":"forward",meta:e.options.meta};return w(V),V})(),P=await y(k),{maxPages:j}=e.options,I=C?y2:g2;return{pages:I(b.pages,P,j),pageParams:I(b.pageParams,x,j)}};if(s&&i.length){const b=s==="backward",x=b?P2:Ow,C={pages:i,pageParams:o},N=x(r,C);a=await g(C,N,b)}else{const b=n??i.length;do{const x=l===0?o[0]??r.initialPageParam:Ow(r,a);if(l>0&&x==null)break;a=await g(a,x),l++}while(l<b)}return a};e.options.persister?e.fetchFn=()=>{var v,w;return(w=(v=e.options).persister)==null?void 0:w.call(v,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function Ow(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function P2(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var fu,Gr,kn,ko,Yr,qs,ex,T2=(ex=class extends Ck{constructor(e){super();pe(this,Yr);pe(this,fu);pe(this,Gr);pe(this,kn);pe(this,ko);ee(this,fu,e.client),this.mutationId=e.mutationId,ee(this,kn,e.mutationCache),ee(this,Gr,[]),this.state=e.state||Ak(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){S(this,Gr).includes(e)||(S(this,Gr).push(e),this.clearGcTimeout(),S(this,kn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ee(this,Gr,S(this,Gr).filter(t=>t!==e)),this.scheduleGc(),S(this,kn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){S(this,Gr).length||(this.state.status==="pending"?this.scheduleGc():S(this,kn).remove(this))}continue(){var e;return((e=S(this,ko))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,l,c,u,d,h,p,_,v,w,y,g,b,x,C,N,k,P,j;const t=()=>{Ae(this,Yr,qs).call(this,{type:"continue"})},r={client:S(this,fu),meta:this.options.meta,mutationKey:this.options.mutationKey};ee(this,ko,Sk({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(I,V)=>{Ae(this,Yr,qs).call(this,{type:"failed",failureCount:I,error:V})},onPause:()=>{Ae(this,Yr,qs).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>S(this,kn).canRun(this)}));const s=this.state.status==="pending",i=!S(this,ko).canStart();try{if(s)t();else{Ae(this,Yr,qs).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(o=S(this,kn).config).onMutate)==null?void 0:a.call(o,e,this,r));const V=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e,r));V!==this.state.context&&Ae(this,Yr,qs).call(this,{type:"pending",context:V,variables:e,isPaused:i})}const I=await S(this,ko).start();return await((d=(u=S(this,kn).config).onSuccess)==null?void 0:d.call(u,I,e,this.state.context,this,r)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,I,e,this.state.context,r)),await((v=(_=S(this,kn).config).onSettled)==null?void 0:v.call(_,I,null,this.state.variables,this.state.context,this,r)),await((y=(w=this.options).onSettled)==null?void 0:y.call(w,I,null,e,this.state.context,r)),Ae(this,Yr,qs).call(this,{type:"success",data:I}),I}catch(I){try{throw await((b=(g=S(this,kn).config).onError)==null?void 0:b.call(g,I,e,this.state.context,this,r)),await((C=(x=this.options).onError)==null?void 0:C.call(x,I,e,this.state.context,r)),await((k=(N=S(this,kn).config).onSettled)==null?void 0:k.call(N,void 0,I,this.state.variables,this.state.context,this,r)),await((j=(P=this.options).onSettled)==null?void 0:j.call(P,void 0,I,e,this.state.context,r)),I}finally{Ae(this,Yr,qs).call(this,{type:"error",error:I})}}finally{S(this,kn).runNext(this)}}},fu=new WeakMap,Gr=new WeakMap,kn=new WeakMap,ko=new WeakMap,Yr=new WeakSet,qs=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Qt.batch(()=>{S(this,Gr).forEach(r=>{r.onMutationUpdate(e)}),S(this,kn).notify({mutation:this,type:"updated",action:e})})},ex);function Ak(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _s,Ar,mu,tx,A2=(tx=class extends _l{constructor(e={}){super();pe(this,_s);pe(this,Ar);pe(this,mu);this.config=e,ee(this,_s,new Set),ee(this,Ar,new Map),ee(this,mu,0)}build(e,t,r){const s=new T2({client:e,mutationCache:this,mutationId:++Iu(this,mu)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){S(this,_s).add(e);const t=Yu(e);if(typeof t=="string"){const r=S(this,Ar).get(t);r?r.push(e):S(this,Ar).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(S(this,_s).delete(e)){const t=Yu(e);if(typeof t=="string"){const r=S(this,Ar).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&S(this,Ar).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Yu(e);if(typeof t=="string"){const r=S(this,Ar).get(t),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=Yu(e);if(typeof t=="string"){const s=(r=S(this,Ar).get(t))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Qt.batch(()=>{S(this,_s).forEach(e=>{this.notify({type:"removed",mutation:e})}),S(this,_s).clear(),S(this,Ar).clear()})}getAll(){return Array.from(S(this,_s))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>xw(t,r))}findAll(e={}){return this.getAll().filter(t=>xw(e,t))}notify(e){Qt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Qt.batch(()=>Promise.all(e.map(t=>t.continue().catch(Cn))))}},_s=new WeakMap,Ar=new WeakMap,mu=new WeakMap,tx);function Yu(n){var e;return(e=n.options.scope)==null?void 0:e.id}var bs,oi,jn,xs,Rs,xd,Sp,nx,O2=(nx=class extends _l{constructor(t,r){super();pe(this,Rs);pe(this,bs);pe(this,oi);pe(this,jn);pe(this,xs);ee(this,bs,t),this.setOptions(r),this.bindMethods(),Ae(this,Rs,xd).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const r=this.options;this.options=S(this,bs).defaultMutationOptions(t),Xd(this.options,r)||S(this,bs).getMutationCache().notify({type:"observerOptionsUpdated",mutation:S(this,jn),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Io(r.mutationKey)!==Io(this.options.mutationKey)?this.reset():((s=S(this,jn))==null?void 0:s.state.status)==="pending"&&S(this,jn).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=S(this,jn))==null||t.removeObserver(this)}onMutationUpdate(t){Ae(this,Rs,xd).call(this),Ae(this,Rs,Sp).call(this,t)}getCurrentResult(){return S(this,oi)}reset(){var t;(t=S(this,jn))==null||t.removeObserver(this),ee(this,jn,void 0),Ae(this,Rs,xd).call(this),Ae(this,Rs,Sp).call(this)}mutate(t,r){var s;return ee(this,xs,r),(s=S(this,jn))==null||s.removeObserver(this),ee(this,jn,S(this,bs).getMutationCache().build(S(this,bs),this.options)),S(this,jn).addObserver(this),S(this,jn).execute(t)}},bs=new WeakMap,oi=new WeakMap,jn=new WeakMap,xs=new WeakMap,Rs=new WeakSet,xd=function(){var r;const t=((r=S(this,jn))==null?void 0:r.state)??Ak();ee(this,oi,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},Sp=function(t){Qt.batch(()=>{var r,s,i,o,a,l,c,u;if(S(this,xs)&&this.hasListeners()){const d=S(this,oi).variables,h=S(this,oi).context,p={client:S(this,bs),meta:this.options.meta,mutationKey:this.options.mutationKey};(t==null?void 0:t.type)==="success"?((s=(r=S(this,xs)).onSuccess)==null||s.call(r,t.data,d,h,p),(o=(i=S(this,xs)).onSettled)==null||o.call(i,t.data,null,d,h,p)):(t==null?void 0:t.type)==="error"&&((l=(a=S(this,xs)).onError)==null||l.call(a,t.error,d,h,p),(u=(c=S(this,xs)).onSettled)==null||u.call(c,void 0,t.error,d,h,p))}this.listeners.forEach(d=>{d(S(this,oi))})})},nx),Xr,rx,N2=(rx=class extends _l{constructor(e={}){super();pe(this,Xr);this.config=e,ee(this,Xr,new Map)}build(e,t,r){const s=t.queryKey,i=t.queryHash??dy(s,t);let o=this.get(i);return o||(o=new k2({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){S(this,Xr).has(e.queryHash)||(S(this,Xr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=S(this,Xr).get(e.queryHash);t&&(e.destroy(),t===e&&S(this,Xr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Qt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return S(this,Xr).get(e)}getAll(){return[...S(this,Xr).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>bw(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>bw(e,r)):t}notify(e){Qt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Qt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Qt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Xr=new WeakMap,rx),Mt,ai,li,Ka,Qa,ci,Za,Ja,sx,R2=(sx=class{constructor(n={}){pe(this,Mt);pe(this,ai);pe(this,li);pe(this,Ka);pe(this,Qa);pe(this,ci);pe(this,Za);pe(this,Ja);ee(this,Mt,n.queryCache||new N2),ee(this,ai,n.mutationCache||new A2),ee(this,li,n.defaultOptions||{}),ee(this,Ka,new Map),ee(this,Qa,new Map),ee(this,ci,0)}mount(){Iu(this,ci)._++,S(this,ci)===1&&(ee(this,Za,fy.subscribe(async n=>{n&&(await this.resumePausedMutations(),S(this,Mt).onFocus())})),ee(this,Ja,eh.subscribe(async n=>{n&&(await this.resumePausedMutations(),S(this,Mt).onOnline())})))}unmount(){var n,e;Iu(this,ci)._--,S(this,ci)===0&&((n=S(this,Za))==null||n.call(this),ee(this,Za,void 0),(e=S(this,Ja))==null||e.call(this),ee(this,Ja,void 0))}isFetching(n){return S(this,Mt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return S(this,ai).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=S(this,Mt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=S(this,Mt).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(ki(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return S(this,Mt).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=S(this,Mt).get(r.queryHash),i=s==null?void 0:s.state.data,o=f2(e,i);if(o!==void 0)return S(this,Mt).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return Qt.batch(()=>S(this,Mt).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=S(this,Mt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=S(this,Mt);Qt.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=S(this,Mt);return Qt.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Qt.batch(()=>S(this,Mt).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(Cn).catch(Cn)}invalidateQueries(n,e={}){return Qt.batch(()=>(S(this,Mt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Qt.batch(()=>S(this,Mt).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(Cn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Cn)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=S(this,Mt).build(this,e);return t.isStaleByTime(ki(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Cn).catch(Cn)}fetchInfiniteQuery(n){return n.behavior=Aw(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Cn).catch(Cn)}ensureInfiniteQueryData(n){return n.behavior=Aw(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return eh.isOnline()?S(this,ai).resumePausedMutations():Promise.resolve()}getQueryCache(){return S(this,Mt)}getMutationCache(){return S(this,ai)}getDefaultOptions(){return S(this,li)}setDefaultOptions(n){ee(this,li,n)}setQueryDefaults(n,e){S(this,Ka).set(Io(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...S(this,Ka).values()],t={};return e.forEach(r=>{Qc(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){S(this,Qa).set(Io(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...S(this,Qa).values()],t={};return e.forEach(r=>{Qc(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...S(this,li).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=dy(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===hy&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...S(this,li).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){S(this,Mt).clear(),S(this,ai).clear()}},Mt=new WeakMap,ai=new WeakMap,li=new WeakMap,Ka=new WeakMap,Qa=new WeakMap,ci=new WeakMap,Za=new WeakMap,Ja=new WeakMap,sx),Ok=O.createContext(void 0),Ye=n=>{const e=O.useContext(Ok);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},M2=({client:n,children:e})=>(O.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),m.jsx(Ok.Provider,{value:n,children:e})),Nk=O.createContext(!1),I2=()=>O.useContext(Nk);Nk.Provider;function j2(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var D2=O.createContext(j2()),F2=()=>O.useContext(D2),L2=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},V2=n=>{O.useEffect(()=>{n.clearReset()},[n])},$2=({result:n,errorResetBoundary:e,throwOnError:t,query:r,suspense:s})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&(s&&n.data===void 0||kk(t,[n.error,r])),B2=n=>{if(n.suspense){const t=s=>s==="static"?s:Math.max(s??1e3,1e3),r=n.staleTime;n.staleTime=typeof r=="function"?(...s)=>t(r(...s)):t(r),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},z2=(n,e)=>n.isLoading&&n.isFetching&&!e,U2=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,Nw=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function W2(n,e,t){var d,h,p,_,v;const r=I2(),s=F2(),i=Ye(),o=i.defaultQueryOptions(n);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",B2(o),L2(o,s),V2(s);const a=!i.getQueryCache().get(o.queryHash),[l]=O.useState(()=>new e(i,o)),c=l.getOptimisticResult(o),u=!r&&n.subscribed!==!1;if(O.useSyncExternalStore(O.useCallback(w=>{const y=u?l.subscribe(Qt.batchCalls(w)):Cn;return l.updateResult(),y},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),O.useEffect(()=>{l.setOptions(o)},[o,l]),U2(o,c))throw Nw(o,l,s);if($2({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((_=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||_.call(p,o,c),o.experimental_prefetchInRender&&!Mo&&z2(c,r)){const w=a?Nw(o,l,s):(v=i.getQueryCache().get(o.queryHash))==null?void 0:v.promise;w==null||w.catch(Cn).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function zs(n,e){return W2(n,E2)}function yt(n,e){const t=Ye(),[r]=O.useState(()=>new O2(t,n));O.useEffect(()=>{r.setOptions(n)},[r,n]);const s=O.useSyncExternalStore(O.useCallback(o=>r.subscribe(Qt.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=O.useCallback((o,a)=>{r.mutate(o,a).catch(Cn)},[r]);if(s.error&&kk(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}const q2=O.createContext(null);function H2({children:n}){const[e,t]=O.useState([]),r=O.useRef(1),s=O.useCallback(a=>{t(l=>l.filter(c=>c.id!==a))},[]),i=O.useCallback((a,l)=>{const c=r.current++,u={id:c,type:(l==null?void 0:l.type)||"info",message:a,duration:(l==null?void 0:l.duration)??3e3};t(d=>[...d,u]),u.duration&&u.duration>0&&setTimeout(()=>s(c),u.duration)},[s]),o=O.useMemo(()=>({show:i,success:(a,l)=>i(a,{type:"success",duration:l}),error:(a,l)=>i(a,{type:"error",duration:l}),info:(a,l)=>i(a,{type:"info",duration:l})}),[i]);return m.jsxs(q2.Provider,{value:o,children:[n,_u.createPortal(m.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-50 space-y-2 w-[90%] max-w-sm",children:e.map(a=>m.jsx("div",{className:`rounded px-3 py-2 shadow text-sm text-white ${a.type==="success"?"bg-emerald-600":a.type==="error"?"bg-rose-600":"bg-gray-800"}`,dir:"rtl",children:a.message},a.id))}),document.body)]})}const K2=O.createContext(null);function Q2({children:n}){const[e,t]=O.useState({open:!1,opts:{}}),r=O.useMemo(()=>({confirm:i=>new Promise(o=>t({open:!0,opts:i,resolve:o}))}),[]),s=i=>{const o=e.resolve;t({open:!1,opts:{}}),o==null||o(i)};return m.jsxs(K2.Provider,{value:r,children:[n,e.open&&_u.createPortal(m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[m.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>s(!1)}),m.jsxs("div",{className:"relative bg-white rounded shadow-lg w-[90%] max-w-md p-4",dir:"rtl",children:[m.jsx("h3",{className:"font-semibold mb-2",children:e.opts.title||" "}),e.opts.message&&m.jsx("p",{className:"text-sm text-gray-700 mb-3",children:e.opts.message}),m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx("button",{className:"btn-secondary px-3 py-1.5 rounded",onClick:()=>s(!1),children:e.opts.cancelText||""}),m.jsx("button",{className:"btn px-3 py-1.5 rounded",onClick:()=>s(!0),children:e.opts.confirmText||""})]})]})]}),document.body)]})}function Z2({children:n}){const[e]=O.useState(()=>new R2({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:2e4}}}));return m.jsx(M2,{client:e,children:m.jsx(H2,{children:m.jsx(Q2,{children:n})})})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _t(){return _t=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_t.apply(this,arguments)}var zt;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(zt||(zt={}));const Rw="popstate";function J2(n){n===void 0&&(n={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Zc("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:jo(s)}return Y2(e,t,null,n)}function je(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function sl(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function G2(){return Math.random().toString(36).substr(2,8)}function Mw(n,e){return{usr:n.state,key:n.key,idx:e}}function Zc(n,e,t,r){return t===void 0&&(t=null),_t({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?$i(e):e,{state:t,key:e&&e.key||r||G2()})}function jo(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function $i(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function Y2(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=zt.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(_t({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=zt.Pop;let w=u(),y=w==null?null:w-c;c=w,l&&l({action:a,location:v.location,delta:y})}function h(w,y){a=zt.Push;let g=Zc(v.location,w,y);c=u()+1;let b=Mw(g,c),x=v.createHref(g);try{o.pushState(b,"",x)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(x)}i&&l&&l({action:a,location:v.location,delta:1})}function p(w,y){a=zt.Replace;let g=Zc(v.location,w,y);c=u();let b=Mw(g,c),x=v.createHref(g);o.replaceState(b,"",x),i&&l&&l({action:a,location:v.location,delta:0})}function _(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof w=="string"?w:jo(w);return g=g.replace(/ $/,"%20"),je(y,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,y)}let v={get action(){return a},get location(){return n(s,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Rw,d),l=w,()=>{s.removeEventListener(Rw,d),l=null}},createHref(w){return e(s,w)},createURL:_,encodeLocation(w){let y=_(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:p,go(w){return o.go(w)}};return v}var et;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(et||(et={}));const X2=new Set(["lazy","caseSensitive","path","id","index","children"]);function eA(n){return n.index===!0}function th(n,e,t,r){return t===void 0&&(t=[]),r===void 0&&(r={}),n.map((s,i)=>{let o=[...t,String(i)],a=typeof s.id=="string"?s.id:o.join("-");if(je(s.index!==!0||!s.children,"Cannot specify children on an index route"),je(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),eA(s)){let l=_t({},s,e(s),{id:a});return r[a]=l,l}else{let l=_t({},s,e(s),{id:a,children:void 0});return r[a]=l,s.children&&(l.children=th(s.children,e,o,r)),l}})}function to(n,e,t){return t===void 0&&(t="/"),kd(n,e,t,!1)}function kd(n,e,t,r){let s=typeof e=="string"?$i(e):e,i=bl(s.pathname||"/",t);if(i==null)return null;let o=Rk(n);nA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=fA(i);a=dA(o[l],c,r)}return a}function tA(n,e){let{route:t,pathname:r,params:s}=n;return{id:t.id,pathname:r,params:s,data:e[t.id],handle:t.handle}}function Rk(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(je(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Os([r,l.relativePath]),u=t.concat(l);i.children&&i.children.length>0&&(je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Rk(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:cA(c,i.index),routesMeta:u})};return n.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Mk(i.path))s(i,o,l)}),e}function Mk(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Mk(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function nA(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:uA(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const rA=/^:[\w-]+$/,sA=3,iA=2,oA=1,aA=10,lA=-2,Iw=n=>n==="*";function cA(n,e){let t=n.split("/"),r=t.length;return t.some(Iw)&&(r+=lA),e&&(r+=iA),t.filter(s=>!Iw(s)).reduce((s,i)=>s+(rA.test(i)?sA:i===""?oA:aA),r)}function uA(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function dA(n,e,t){t===void 0&&(t=!1);let{routesMeta:r}=n,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=jw({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&t&&!r[r.length-1].route.index&&(d=jw({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Os([i,d.pathname]),pathnameBase:gA(Os([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Os([i,d.pathnameBase]))}return o}function jw(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=hA(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:h,isOptional:p}=u;if(h==="*"){let v=a[d]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const _=a[d];return p&&!_?c[h]=void 0:c[h]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:n}}function hA(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),sl(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function fA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sl(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function bl(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function mA(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?$i(n):n;return{pathname:t?t.startsWith("/")?t:pA(t,e):e,search:yA(r),hash:vA(s)}}function pA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Ff(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ik(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Uh(n,e){let t=Ik(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Wh(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=$i(n):(s=_t({},n),je(!s.pathname||!s.pathname.includes("?"),Ff("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),Ff("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),Ff("#","search","hash",s)));let i=n===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=mA(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Os=n=>n.join("/").replace(/\/\/+/g,"/"),gA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),yA=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,vA=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class nh{constructor(e,t,r,s){s===void 0&&(s=!1),this.status=e,this.statusText=t||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function il(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const jk=["post","put","patch","delete"],wA=new Set(jk),_A=["get",...jk],bA=new Set(_A),xA=new Set([301,302,303,307,308]),kA=new Set([307,308]),Lf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},EA={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},$l={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},py=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SA=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),Dk="remix-router-transitions";function CA(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!t;je(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(n.mapRouteProperties)s=n.mapRouteProperties;else if(n.detectErrorBoundary){let T=n.detectErrorBoundary;s=R=>({hasErrorBoundary:T(R)})}else s=SA;let i={},o=th(n.routes,s,void 0,i),a,l=n.basename||"/",c=n.dataStrategy||OA,u=n.patchRoutesOnNavigation,d=_t({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),h=null,p=new Set,_=null,v=null,w=null,y=n.hydrationData!=null,g=to(o,n.history.location,l),b=!1,x=null;if(g==null&&!u){let T=Dn(404,{pathname:n.history.location.pathname}),{matches:R,route:F}=Hw(o);g=R,x={[F.id]:T}}g&&!n.hydrationData&&Ou(g,o,n.history.location.pathname).active&&(g=null);let C;if(g)if(g.some(T=>T.route.lazy))C=!1;else if(!g.some(T=>T.route.loader))C=!0;else if(d.v7_partialHydration){let T=n.hydrationData?n.hydrationData.loaderData:null,R=n.hydrationData?n.hydrationData.errors:null;if(R){let F=g.findIndex(q=>R[q.route.id]!==void 0);C=g.slice(0,F+1).every(q=>!Pp(q.route,T,R))}else C=g.every(F=>!Pp(F.route,T,R))}else C=n.hydrationData!=null;else if(C=!1,g=[],d.v7_partialHydration){let T=Ou(null,o,n.history.location.pathname);T.active&&T.matches&&(b=!0,g=T.matches)}let N,k={historyAction:n.history.action,location:n.history.location,matches:g,initialized:C,navigation:Lf,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||x,fetchers:new Map,blockers:new Map},P=zt.Pop,j=!1,I,V=!1,H=new Map,J=null,ge=!1,Ee=!1,Oe=[],Xe=new Set,z=new Map,ne=0,ue=-1,Ie=new Map,Le=new Set,Ht=new Map,Vt=new Map,U=new Set,we=new Map,rt=new Map,vt;function dr(){if(h=n.history.listen(T=>{let{action:R,location:F,delta:q}=T;if(vt){vt(),vt=void 0;return}sl(rt.size===0||q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Y=av({currentLocation:k.location,nextLocation:F,historyAction:R});if(Y&&q!=null){let ve=new Promise(be=>{vt=be});n.history.go(q*-1),Au(Y,{state:"blocked",location:F,proceed(){Au(Y,{state:"proceeding",proceed:void 0,reset:void 0,location:F}),ve.then(()=>n.history.go(q))},reset(){let be=new Map(k.blockers);be.set(Y,$l),ye({blockers:be})}});return}return Jt(R,F)}),t){WA(e,H);let T=()=>qA(e,H);e.addEventListener("pagehide",T),J=()=>e.removeEventListener("pagehide",T)}return k.initialized||Jt(zt.Pop,k.location,{initialHydration:!0}),N}function an(){h&&h(),J&&J(),p.clear(),I&&I.abort(),k.fetchers.forEach((T,R)=>Hn(R)),k.blockers.forEach((T,R)=>Tl(R))}function cs(T){return p.add(T),()=>p.delete(T)}function ye(T,R){R===void 0&&(R={}),k=_t({},k,T);let F=[],q=[];d.v7_fetcherPersist&&k.fetchers.forEach((Y,ve)=>{Y.state==="idle"&&(U.has(ve)?q.push(ve):F.push(ve))}),U.forEach(Y=>{!k.fetchers.has(Y)&&!z.has(Y)&&q.push(Y)}),[...p].forEach(Y=>Y(k,{deletedFetchers:q,viewTransitionOpts:R.viewTransitionOpts,flushSync:R.flushSync===!0})),d.v7_fetcherPersist?(F.forEach(Y=>k.fetchers.delete(Y)),q.forEach(Y=>Hn(Y))):q.forEach(Y=>U.delete(Y))}function Be(T,R,F){var q,Y;let{flushSync:ve}=F===void 0?{}:F,be=k.actionData!=null&&k.navigation.formMethod!=null&&Nr(k.navigation.formMethod)&&k.navigation.state==="loading"&&((q=T.state)==null?void 0:q._isRedirect)!==!0,ae;R.actionData?Object.keys(R.actionData).length>0?ae=R.actionData:ae=null:be?ae=k.actionData:ae=null;let de=R.loaderData?Ww(k.loaderData,R.loaderData,R.matches||[],R.errors):k.loaderData,ie=k.blockers;ie.size>0&&(ie=new Map(ie),ie.forEach((ze,cn)=>ie.set(cn,$l)));let me=j===!0||k.navigation.formMethod!=null&&Nr(k.navigation.formMethod)&&((Y=T.state)==null?void 0:Y._isRedirect)!==!0;a&&(o=a,a=void 0),ge||P===zt.Pop||(P===zt.Push?n.history.push(T,T.state):P===zt.Replace&&n.history.replace(T,T.state));let Pe;if(P===zt.Pop){let ze=H.get(k.location.pathname);ze&&ze.has(T.pathname)?Pe={currentLocation:k.location,nextLocation:T}:H.has(T.pathname)&&(Pe={currentLocation:T,nextLocation:k.location})}else if(V){let ze=H.get(k.location.pathname);ze?ze.add(T.pathname):(ze=new Set([T.pathname]),H.set(k.location.pathname,ze)),Pe={currentLocation:k.location,nextLocation:T}}ye(_t({},R,{actionData:ae,loaderData:de,historyAction:P,location:T,initialized:!0,navigation:Lf,revalidation:"idle",restoreScrollPosition:cv(T,R.matches||k.matches),preventScrollReset:me,blockers:ie}),{viewTransitionOpts:Pe,flushSync:ve===!0}),P=zt.Pop,j=!1,V=!1,ge=!1,Ee=!1,Oe=[]}async function Ne(T,R){if(typeof T=="number"){n.history.go(T);return}let F=Cp(k.location,k.matches,l,d.v7_prependBasename,T,d.v7_relativeSplatPath,R==null?void 0:R.fromRouteId,R==null?void 0:R.relative),{path:q,submission:Y,error:ve}=Dw(d.v7_normalizeFormMethod,!1,F,R),be=k.location,ae=Zc(k.location,q,R&&R.state);ae=_t({},ae,n.history.encodeLocation(ae));let de=R&&R.replace!=null?R.replace:void 0,ie=zt.Push;de===!0?ie=zt.Replace:de===!1||Y!=null&&Nr(Y.formMethod)&&Y.formAction===k.location.pathname+k.location.search&&(ie=zt.Replace);let me=R&&"preventScrollReset"in R?R.preventScrollReset===!0:void 0,Pe=(R&&R.flushSync)===!0,ze=av({currentLocation:be,nextLocation:ae,historyAction:ie});if(ze){Au(ze,{state:"blocked",location:ae,proceed(){Au(ze,{state:"proceeding",proceed:void 0,reset:void 0,location:ae}),Ne(T,R)},reset(){let cn=new Map(k.blockers);cn.set(ze,$l),ye({blockers:cn})}});return}return await Jt(ie,ae,{submission:Y,pendingError:ve,preventScrollReset:me,replace:R&&R.replace,enableViewTransition:R&&R.viewTransition,flushSync:Pe})}function ln(){if(We(),ye({revalidation:"loading"}),k.navigation.state!=="submitting"){if(k.navigation.state==="idle"){Jt(k.historyAction,k.location,{startUninterruptedRevalidation:!0});return}Jt(P||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:V===!0})}}async function Jt(T,R,F){I&&I.abort(),I=null,P=T,ge=(F&&F.startUninterruptedRevalidation)===!0,TC(k.location,k.matches),j=(F&&F.preventScrollReset)===!0,V=(F&&F.enableViewTransition)===!0;let q=a||o,Y=F&&F.overrideNavigation,ve=F!=null&&F.initialHydration&&k.matches&&k.matches.length>0&&!b?k.matches:to(q,R,l),be=(F&&F.flushSync)===!0;if(ve&&k.initialized&&!Ee&&DA(k.location,R)&&!(F&&F.submission&&Nr(F.submission.formMethod))){Be(R,{matches:ve},{flushSync:be});return}let ae=Ou(ve,q,R.pathname);if(ae.active&&ae.matches&&(ve=ae.matches),!ve){let{error:ct,notFoundMatches:Ze,route:Nt}=af(R.pathname);Be(R,{matches:Ze,loaderData:{},errors:{[Nt.id]:ct}},{flushSync:be});return}I=new AbortController;let de=ta(n.history,R,I.signal,F&&F.submission),ie;if(F&&F.pendingError)ie=[no(ve).route.id,{type:et.error,error:F.pendingError}];else if(F&&F.submission&&Nr(F.submission.formMethod)){let ct=await Wn(de,R,F.submission,ve,ae.active,{replace:F.replace,flushSync:be});if(ct.shortCircuited)return;if(ct.pendingActionResult){let[Ze,Nt]=ct.pendingActionResult;if(Jn(Nt)&&il(Nt.error)&&Nt.error.status===404){I=null,Be(R,{matches:ct.matches,loaderData:{},errors:{[Ze]:Nt.error}});return}}ve=ct.matches||ve,ie=ct.pendingActionResult,Y=Vf(R,F.submission),be=!1,ae.active=!1,de=ta(n.history,de.url,de.signal)}let{shortCircuited:me,matches:Pe,loaderData:ze,errors:cn}=await qn(de,R,ve,ae.active,Y,F&&F.submission,F&&F.fetcherSubmission,F&&F.replace,F&&F.initialHydration===!0,be,ie);me||(I=null,Be(R,_t({matches:Pe||ve},qw(ie),{loaderData:ze,errors:cn})))}async function Wn(T,R,F,q,Y,ve){ve===void 0&&(ve={}),We();let be=zA(R,F);if(ye({navigation:be},{flushSync:ve.flushSync===!0}),Y){let ie=await Nu(q,R.pathname,T.signal);if(ie.type==="aborted")return{shortCircuited:!0};if(ie.type==="error"){let me=no(ie.partialMatches).route.id;return{matches:ie.partialMatches,pendingActionResult:[me,{type:et.error,error:ie.error}]}}else if(ie.matches)q=ie.matches;else{let{notFoundMatches:me,error:Pe,route:ze}=af(R.pathname);return{matches:me,pendingActionResult:[ze.id,{type:et.error,error:Pe}]}}}let ae,de=rc(q,R);if(!de.route.action&&!de.route.lazy)ae={type:et.error,error:Dn(405,{method:T.method,pathname:R.pathname,routeId:de.route.id})};else if(ae=(await W("action",k,T,[de],q,null))[de.route.id],T.signal.aborted)return{shortCircuited:!0};if(uo(ae)){let ie;return ve&&ve.replace!=null?ie=ve.replace:ie=Bw(ae.response.headers.get("Location"),new URL(T.url),l)===k.location.pathname+k.location.search,await B(T,ae,!0,{submission:F,replace:ie}),{shortCircuited:!0}}if(hi(ae))throw Dn(400,{type:"defer-action"});if(Jn(ae)){let ie=no(q,de.route.id);return(ve&&ve.replace)!==!0&&(P=zt.Push),{matches:q,pendingActionResult:[ie.route.id,ae]}}return{matches:q,pendingActionResult:[de.route.id,ae]}}async function qn(T,R,F,q,Y,ve,be,ae,de,ie,me){let Pe=Y||Vf(R,ve),ze=ve||be||Qw(Pe),cn=!ge&&(!d.v7_partialHydration||!de);if(q){if(cn){let Rt=mn(me);ye(_t({navigation:Pe},Rt!==void 0?{actionData:Rt}:{}),{flushSync:ie})}let Ke=await Nu(F,R.pathname,T.signal);if(Ke.type==="aborted")return{shortCircuited:!0};if(Ke.type==="error"){let Rt=no(Ke.partialMatches).route.id;return{matches:Ke.partialMatches,loaderData:{},errors:{[Rt]:Ke.error}}}else if(Ke.matches)F=Ke.matches;else{let{error:Rt,notFoundMatches:Yo,route:Nl}=af(R.pathname);return{matches:Yo,loaderData:{},errors:{[Nl.id]:Rt}}}}let ct=a||o,[Ze,Nt]=Lw(n.history,k,F,ze,R,d.v7_partialHydration&&de===!0,d.v7_skipActionErrorRevalidation,Ee,Oe,Xe,U,Ht,Le,ct,l,me);if(lf(Ke=>!(F&&F.some(Rt=>Rt.route.id===Ke))||Ze&&Ze.some(Rt=>Rt.route.id===Ke)),ue=++ne,Ze.length===0&&Nt.length===0){let Ke=Tu();return Be(R,_t({matches:F,loaderData:{},errors:me&&Jn(me[1])?{[me[0]]:me[1].error}:null},qw(me),Ke?{fetchers:new Map(k.fetchers)}:{}),{flushSync:ie}),{shortCircuited:!0}}if(cn){let Ke={};if(!q){Ke.navigation=Pe;let Rt=mn(me);Rt!==void 0&&(Ke.actionData=Rt)}Nt.length>0&&(Ke.fetchers=E(Nt)),ye(Ke,{flushSync:ie})}Nt.forEach(Ke=>{hr(Ke.key),Ke.controller&&z.set(Ke.key,Ke.controller)});let Go=()=>Nt.forEach(Ke=>hr(Ke.key));I&&I.signal.addEventListener("abort",Go);let{loaderResults:Al,fetcherResults:us}=await fe(k,F,Ze,Nt,T);if(T.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",Go),Nt.forEach(Ke=>z.delete(Ke.key));let qr=Xu(Al);if(qr)return await B(T,qr.result,!0,{replace:ae}),{shortCircuited:!0};if(qr=Xu(us),qr)return Le.add(qr.key),await B(T,qr.result,!0,{replace:ae}),{shortCircuited:!0};let{loaderData:cf,errors:Ol}=Uw(k,F,Al,me,Nt,us,we);we.forEach((Ke,Rt)=>{Ke.subscribe(Yo=>{(Yo||Ke.done)&&we.delete(Rt)})}),d.v7_partialHydration&&de&&k.errors&&(Ol=_t({},k.errors,Ol));let Qi=Tu(),Ru=Pl(ue),Mu=Qi||Ru||Nt.length>0;return _t({matches:F,loaderData:cf,errors:Ol},Mu?{fetchers:new Map(k.fetchers)}:{})}function mn(T){if(T&&!Jn(T[1]))return{[T[0]]:T[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function E(T){return T.forEach(R=>{let F=k.fetchers.get(R.key),q=Bl(void 0,F?F.data:void 0);k.fetchers.set(R.key,q)}),new Map(k.fetchers)}function M(T,R,F,q){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");hr(T);let Y=(q&&q.flushSync)===!0,ve=a||o,be=Cp(k.location,k.matches,l,d.v7_prependBasename,F,d.v7_relativeSplatPath,R,q==null?void 0:q.relative),ae=to(ve,be,l),de=Ou(ae,ve,be);if(de.active&&de.matches&&(ae=de.matches),!ae){Ot(T,R,Dn(404,{pathname:be}),{flushSync:Y});return}let{path:ie,submission:me,error:Pe}=Dw(d.v7_normalizeFormMethod,!0,be,q);if(Pe){Ot(T,R,Pe,{flushSync:Y});return}let ze=rc(ae,ie),cn=(q&&q.preventScrollReset)===!0;if(me&&Nr(me.formMethod)){L(T,R,ie,ze,ae,de.active,Y,cn,me);return}Ht.set(T,{routeId:R,path:ie}),K(T,R,ie,ze,ae,de.active,Y,cn,me)}async function L(T,R,F,q,Y,ve,be,ae,de){We(),Ht.delete(T);function ie($t){if(!$t.route.action&&!$t.route.lazy){let Xo=Dn(405,{method:de.formMethod,pathname:F,routeId:R});return Ot(T,R,Xo,{flushSync:be}),!0}return!1}if(!ve&&ie(q))return;let me=k.fetchers.get(T);Ve(T,UA(de,me),{flushSync:be});let Pe=new AbortController,ze=ta(n.history,F,Pe.signal,de);if(ve){let $t=await Nu(Y,new URL(ze.url).pathname,ze.signal,T);if($t.type==="aborted")return;if($t.type==="error"){Ot(T,R,$t.error,{flushSync:be});return}else if($t.matches){if(Y=$t.matches,q=rc(Y,F),ie(q))return}else{Ot(T,R,Dn(404,{pathname:F}),{flushSync:be});return}}z.set(T,Pe);let cn=ne,Ze=(await W("action",k,ze,[q],Y,T))[q.route.id];if(ze.signal.aborted){z.get(T)===Pe&&z.delete(T);return}if(d.v7_fetcherPersist&&U.has(T)){if(uo(Ze)||Jn(Ze)){Ve(T,Hs(void 0));return}}else{if(uo(Ze))if(z.delete(T),ue>cn){Ve(T,Hs(void 0));return}else return Le.add(T),Ve(T,Bl(de)),B(ze,Ze,!1,{fetcherSubmission:de,preventScrollReset:ae});if(Jn(Ze)){Ot(T,R,Ze.error);return}}if(hi(Ze))throw Dn(400,{type:"defer-action"});let Nt=k.navigation.location||k.location,Go=ta(n.history,Nt,Pe.signal),Al=a||o,us=k.navigation.state!=="idle"?to(Al,k.navigation.location,l):k.matches;je(us,"Didn't find any matches after fetcher action");let qr=++ne;Ie.set(T,qr);let cf=Bl(de,Ze.data);k.fetchers.set(T,cf);let[Ol,Qi]=Lw(n.history,k,us,de,Nt,!1,d.v7_skipActionErrorRevalidation,Ee,Oe,Xe,U,Ht,Le,Al,l,[q.route.id,Ze]);Qi.filter($t=>$t.key!==T).forEach($t=>{let Xo=$t.key,uv=k.fetchers.get(Xo),NC=Bl(void 0,uv?uv.data:void 0);k.fetchers.set(Xo,NC),hr(Xo),$t.controller&&z.set(Xo,$t.controller)}),ye({fetchers:new Map(k.fetchers)});let Ru=()=>Qi.forEach($t=>hr($t.key));Pe.signal.addEventListener("abort",Ru);let{loaderResults:Mu,fetcherResults:Ke}=await fe(k,us,Ol,Qi,Go);if(Pe.signal.aborted)return;Pe.signal.removeEventListener("abort",Ru),Ie.delete(T),z.delete(T),Qi.forEach($t=>z.delete($t.key));let Rt=Xu(Mu);if(Rt)return B(Go,Rt.result,!1,{preventScrollReset:ae});if(Rt=Xu(Ke),Rt)return Le.add(Rt.key),B(Go,Rt.result,!1,{preventScrollReset:ae});let{loaderData:Yo,errors:Nl}=Uw(k,us,Mu,void 0,Qi,Ke,we);if(k.fetchers.has(T)){let $t=Hs(Ze.data);k.fetchers.set(T,$t)}Pl(qr),k.navigation.state==="loading"&&qr>ue?(je(P,"Expected pending action"),I&&I.abort(),Be(k.navigation.location,{matches:us,loaderData:Yo,errors:Nl,fetchers:new Map(k.fetchers)})):(ye({errors:Nl,loaderData:Ww(k.loaderData,Yo,us,Nl),fetchers:new Map(k.fetchers)}),Ee=!1)}async function K(T,R,F,q,Y,ve,be,ae,de){let ie=k.fetchers.get(T);Ve(T,Bl(de,ie?ie.data:void 0),{flushSync:be});let me=new AbortController,Pe=ta(n.history,F,me.signal);if(ve){let Ze=await Nu(Y,new URL(Pe.url).pathname,Pe.signal,T);if(Ze.type==="aborted")return;if(Ze.type==="error"){Ot(T,R,Ze.error,{flushSync:be});return}else if(Ze.matches)Y=Ze.matches,q=rc(Y,F);else{Ot(T,R,Dn(404,{pathname:F}),{flushSync:be});return}}z.set(T,me);let ze=ne,ct=(await W("loader",k,Pe,[q],Y,T))[q.route.id];if(hi(ct)&&(ct=await gy(ct,Pe.signal,!0)||ct),z.get(T)===me&&z.delete(T),!Pe.signal.aborted){if(U.has(T)){Ve(T,Hs(void 0));return}if(uo(ct))if(ue>ze){Ve(T,Hs(void 0));return}else{Le.add(T),await B(Pe,ct,!1,{preventScrollReset:ae});return}if(Jn(ct)){Ot(T,R,ct.error);return}je(!hi(ct),"Unhandled fetcher deferred data"),Ve(T,Hs(ct.data))}}async function B(T,R,F,q){let{submission:Y,fetcherSubmission:ve,preventScrollReset:be,replace:ae}=q===void 0?{}:q;R.response.headers.has("X-Remix-Revalidate")&&(Ee=!0);let de=R.response.headers.get("Location");je(de,"Expected a Location header on the redirect Response"),de=Bw(de,new URL(T.url),l);let ie=Zc(k.location,de,{_isRedirect:!0});if(t){let Ze=!1;if(R.response.headers.has("X-Remix-Reload-Document"))Ze=!0;else if(py.test(de)){const Nt=n.history.createURL(de);Ze=Nt.origin!==e.location.origin||bl(Nt.pathname,l)==null}if(Ze){ae?e.location.replace(de):e.location.assign(de);return}}I=null;let me=ae===!0||R.response.headers.has("X-Remix-Replace")?zt.Replace:zt.Push,{formMethod:Pe,formAction:ze,formEncType:cn}=k.navigation;!Y&&!ve&&Pe&&ze&&cn&&(Y=Qw(k.navigation));let ct=Y||ve;if(kA.has(R.response.status)&&ct&&Nr(ct.formMethod))await Jt(me,ie,{submission:_t({},ct,{formAction:de}),preventScrollReset:be||j,enableViewTransition:F?V:void 0});else{let Ze=Vf(ie,Y);await Jt(me,ie,{overrideNavigation:Ze,fetcherSubmission:ve,preventScrollReset:be||j,enableViewTransition:F?V:void 0})}}async function W(T,R,F,q,Y,ve){let be,ae={};try{be=await NA(c,T,R,F,q,Y,ve,i,s)}catch(de){return q.forEach(ie=>{ae[ie.route.id]={type:et.error,error:de}}),ae}for(let[de,ie]of Object.entries(be))if(FA(ie)){let me=ie.result;ae[de]={type:et.redirect,response:IA(me,F,de,Y,l,d.v7_relativeSplatPath)}}else ae[de]=await MA(ie);return ae}async function fe(T,R,F,q,Y){let ve=T.matches,be=W("loader",T,Y,F,R,null),ae=Promise.all(q.map(async me=>{if(me.matches&&me.match&&me.controller){let ze=(await W("loader",T,ta(n.history,me.path,me.controller.signal),[me.match],me.matches,me.key))[me.match.route.id];return{[me.key]:ze}}else return Promise.resolve({[me.key]:{type:et.error,error:Dn(404,{pathname:me.path})}})})),de=await be,ie=(await ae).reduce((me,Pe)=>Object.assign(me,Pe),{});return await Promise.all([$A(R,de,Y.signal,ve,T.loaderData),BA(R,ie,q)]),{loaderResults:de,fetcherResults:ie}}function We(){Ee=!0,Oe.push(...lf()),Ht.forEach((T,R)=>{z.has(R)&&Xe.add(R),hr(R)})}function Ve(T,R,F){F===void 0&&(F={}),k.fetchers.set(T,R),ye({fetchers:new Map(k.fetchers)},{flushSync:(F&&F.flushSync)===!0})}function Ot(T,R,F,q){q===void 0&&(q={});let Y=no(k.matches,R);Hn(T),ye({errors:{[Y.route.id]:F},fetchers:new Map(k.fetchers)},{flushSync:(q&&q.flushSync)===!0})}function Ki(T){return Vt.set(T,(Vt.get(T)||0)+1),U.has(T)&&U.delete(T),k.fetchers.get(T)||EA}function Hn(T){let R=k.fetchers.get(T);z.has(T)&&!(R&&R.state==="loading"&&Ie.has(T))&&hr(T),Ht.delete(T),Ie.delete(T),Le.delete(T),d.v7_fetcherPersist&&U.delete(T),Xe.delete(T),k.fetchers.delete(T)}function sf(T){let R=(Vt.get(T)||0)-1;R<=0?(Vt.delete(T),U.add(T),d.v7_fetcherPersist||Hn(T)):Vt.set(T,R),ye({fetchers:new Map(k.fetchers)})}function hr(T){let R=z.get(T);R&&(R.abort(),z.delete(T))}function Jo(T){for(let R of T){let F=Ki(R),q=Hs(F.data);k.fetchers.set(R,q)}}function Tu(){let T=[],R=!1;for(let F of Le){let q=k.fetchers.get(F);je(q,"Expected fetcher: "+F),q.state==="loading"&&(Le.delete(F),T.push(F),R=!0)}return Jo(T),R}function Pl(T){let R=[];for(let[F,q]of Ie)if(q<T){let Y=k.fetchers.get(F);je(Y,"Expected fetcher: "+F),Y.state==="loading"&&(hr(F),Ie.delete(F),R.push(F))}return Jo(R),R.length>0}function of(T,R){let F=k.blockers.get(T)||$l;return rt.get(T)!==R&&rt.set(T,R),F}function Tl(T){k.blockers.delete(T),rt.delete(T)}function Au(T,R){let F=k.blockers.get(T)||$l;je(F.state==="unblocked"&&R.state==="blocked"||F.state==="blocked"&&R.state==="blocked"||F.state==="blocked"&&R.state==="proceeding"||F.state==="blocked"&&R.state==="unblocked"||F.state==="proceeding"&&R.state==="unblocked","Invalid blocker state transition: "+F.state+" -> "+R.state);let q=new Map(k.blockers);q.set(T,R),ye({blockers:q})}function av(T){let{currentLocation:R,nextLocation:F,historyAction:q}=T;if(rt.size===0)return;rt.size>1&&sl(!1,"A router only supports one blocker at a time");let Y=Array.from(rt.entries()),[ve,be]=Y[Y.length-1],ae=k.blockers.get(ve);if(!(ae&&ae.state==="proceeding")&&be({currentLocation:R,nextLocation:F,historyAction:q}))return ve}function af(T){let R=Dn(404,{pathname:T}),F=a||o,{matches:q,route:Y}=Hw(F);return lf(),{notFoundMatches:q,route:Y,error:R}}function lf(T){let R=[];return we.forEach((F,q)=>{(!T||T(q))&&(F.cancel(),R.push(q),we.delete(q))}),R}function PC(T,R,F){if(_=T,w=R,v=F||null,!y&&k.navigation===Lf){y=!0;let q=cv(k.location,k.matches);q!=null&&ye({restoreScrollPosition:q})}return()=>{_=null,w=null,v=null}}function lv(T,R){return v&&v(T,R.map(q=>tA(q,k.loaderData)))||T.key}function TC(T,R){if(_&&w){let F=lv(T,R);_[F]=w()}}function cv(T,R){if(_){let F=lv(T,R),q=_[F];if(typeof q=="number")return q}return null}function Ou(T,R,F){if(u)if(T){if(Object.keys(T[0].params).length>0)return{active:!0,matches:kd(R,F,l,!0)}}else return{active:!0,matches:kd(R,F,l,!0)||[]};return{active:!1,matches:null}}async function Nu(T,R,F,q){if(!u)return{type:"success",matches:T};let Y=T;for(;;){let ve=a==null,be=a||o,ae=i;try{await u({signal:F,path:R,matches:Y,fetcherKey:q,patch:(me,Pe)=>{F.aborted||$w(me,Pe,be,ae,s)}})}catch(me){return{type:"error",error:me,partialMatches:Y}}finally{ve&&!F.aborted&&(o=[...o])}if(F.aborted)return{type:"aborted"};let de=to(be,R,l);if(de)return{type:"success",matches:de};let ie=kd(be,R,l,!0);if(!ie||Y.length===ie.length&&Y.every((me,Pe)=>me.route.id===ie[Pe].route.id))return{type:"success",matches:null};Y=ie}}function AC(T){i={},a=th(T,s,void 0,i)}function OC(T,R){let F=a==null;$w(T,R,a||o,i,s),F&&(o=[...o],ye({}))}return N={get basename(){return l},get future(){return d},get state(){return k},get routes(){return o},get window(){return e},initialize:dr,subscribe:cs,enableScrollRestoration:PC,navigate:Ne,fetch:M,revalidate:ln,createHref:T=>n.history.createHref(T),encodeLocation:T=>n.history.encodeLocation(T),getFetcher:Ki,deleteFetcher:sf,dispose:an,getBlocker:of,deleteBlocker:Tl,patchRoutes:OC,_internalFetchControllers:z,_internalActiveDeferreds:we,_internalSetRoutes:AC},N}function PA(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Cp(n,e,t,r,s,i,o,a){let l,c;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){c=d;break}}else l=e,c=e[e.length-1];let u=Wh(s||".",Uh(l,i),bl(n.pathname,t)||n.pathname,a==="path");if(s==null&&(u.search=n.search,u.hash=n.hash),(s==null||s===""||s===".")&&c){let d=yy(u.search);if(c.route.index&&!d)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&d){let h=new URLSearchParams(u.search),p=h.getAll("index");h.delete("index"),p.filter(v=>v).forEach(v=>h.append("index",v));let _=h.toString();u.search=_?"?"+_:""}}return r&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Os([t,u.pathname])),jo(u)}function Dw(n,e,t,r){if(!r||!PA(r))return{path:t};if(r.formMethod&&!VA(r.formMethod))return{path:t,error:Dn(405,{method:r.formMethod})};let s=()=>({path:t,error:Dn(400,{type:"invalid-body"})}),i=r.formMethod||"get",o=n?i.toUpperCase():i.toLowerCase(),a=Vk(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Nr(o))return s();let h=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((p,_)=>{let[v,w]=_;return""+p+v+"="+w+`
`},""):String(r.body);return{path:t,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:h}}}else if(r.formEncType==="application/json"){if(!Nr(o))return s();try{let h=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch{return s()}}}je(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=Tp(r.formData),c=r.formData;else if(r.body instanceof FormData)l=Tp(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=zw(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=zw(l)}catch{return s()}let u={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Nr(u.formMethod))return{path:t,submission:u};let d=$i(t);return e&&d.search&&yy(d.search)&&l.append("index",""),d.search="?"+l,{path:jo(d),submission:u}}function Fw(n,e,t){t===void 0&&(t=!1);let r=n.findIndex(s=>s.route.id===e);return r>=0?n.slice(0,t?r+1:r):n}function Lw(n,e,t,r,s,i,o,a,l,c,u,d,h,p,_,v){let w=v?Jn(v[1])?v[1].error:v[1].data:void 0,y=n.createURL(e.location),g=n.createURL(s),b=t;i&&e.errors?b=Fw(t,Object.keys(e.errors)[0],!0):v&&Jn(v[1])&&(b=Fw(t,v[0]));let x=v?v[1].statusCode:void 0,C=o&&x&&x>=400,N=b.filter((P,j)=>{let{route:I}=P;if(I.lazy)return!0;if(I.loader==null)return!1;if(i)return Pp(I,e.loaderData,e.errors);if(TA(e.loaderData,e.matches[j],P)||l.some(J=>J===P.route.id))return!0;let V=e.matches[j],H=P;return Vw(P,_t({currentUrl:y,currentParams:V.params,nextUrl:g,nextParams:H.params},r,{actionResult:w,actionStatus:x,defaultShouldRevalidate:C?!1:a||y.pathname+y.search===g.pathname+g.search||y.search!==g.search||Fk(V,H)}))}),k=[];return d.forEach((P,j)=>{if(i||!t.some(ge=>ge.route.id===P.routeId)||u.has(j))return;let I=to(p,P.path,_);if(!I){k.push({key:j,routeId:P.routeId,path:P.path,matches:null,match:null,controller:null});return}let V=e.fetchers.get(j),H=rc(I,P.path),J=!1;h.has(j)?J=!1:c.has(j)?(c.delete(j),J=!0):V&&V.state!=="idle"&&V.data===void 0?J=a:J=Vw(H,_t({currentUrl:y,currentParams:e.matches[e.matches.length-1].params,nextUrl:g,nextParams:t[t.length-1].params},r,{actionResult:w,actionStatus:x,defaultShouldRevalidate:C?!1:a})),J&&k.push({key:j,routeId:P.routeId,path:P.path,matches:I,match:H,controller:new AbortController})}),[N,k]}function Pp(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,s=t!=null&&t[n.id]!==void 0;return!r&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!s}function TA(n,e,t){let r=!e||t.route.id!==e.route.id,s=n[t.route.id]===void 0;return r||s}function Fk(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Vw(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function $w(n,e,t,r,s){var i;let o;if(n){let c=r[n];je(c,"No route found to patch children into: routeId = "+n),c.children||(c.children=[]),o=c.children}else o=t;let a=e.filter(c=>!o.some(u=>Lk(c,u))),l=th(a,s,[n||"_","patch",String(((i=o)==null?void 0:i.length)||"0")],r);o.push(...l)}function Lk(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var s;return(s=e.children)==null?void 0:s.some(i=>Lk(t,i))}):!1}async function AA(n,e,t){if(!n.lazy)return;let r=await n.lazy();if(!n.lazy)return;let s=t[n.id];je(s,"No route found in manifest");let i={};for(let o in r){let l=s[o]!==void 0&&o!=="hasErrorBoundary";sl(!l,'Route "'+s.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!X2.has(o)&&(i[o]=r[o])}Object.assign(s,i),Object.assign(s,_t({},e(s),{lazy:void 0}))}async function OA(n){let{matches:e}=n,t=e.filter(s=>s.shouldLoad);return(await Promise.all(t.map(s=>s.resolve()))).reduce((s,i,o)=>Object.assign(s,{[t[o].route.id]:i}),{})}async function NA(n,e,t,r,s,i,o,a,l,c){let u=i.map(p=>p.route.lazy?AA(p.route,l,a):void 0),d=i.map((p,_)=>{let v=u[_],w=s.some(g=>g.route.id===p.route.id);return _t({},p,{shouldLoad:w,resolve:async g=>(g&&r.method==="GET"&&(p.route.lazy||p.route.loader)&&(w=!0),w?RA(e,r,p,v,g,c):Promise.resolve({type:et.data,result:void 0}))})}),h=await n({matches:d,request:r,params:i[0].params,fetcherKey:o,context:c});try{await Promise.all(u)}catch{}return h}async function RA(n,e,t,r,s,i){let o,a,l=c=>{let u,d=new Promise((_,v)=>u=v);a=()=>u(),e.signal.addEventListener("abort",a);let h=_=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):c({request:e,params:t.params,context:i},..._!==void 0?[_]:[]),p=(async()=>{try{return{type:"data",result:await(s?s(v=>h(v)):h())}}catch(_){return{type:"error",result:_}}})();return Promise.race([p,d])};try{let c=t.route[n];if(r)if(c){let u,[d]=await Promise.all([l(c).catch(h=>{u=h}),r]);if(u!==void 0)throw u;o=d}else if(await r,c=t.route[n],c)o=await l(c);else if(n==="action"){let u=new URL(e.url),d=u.pathname+u.search;throw Dn(405,{method:e.method,pathname:d,routeId:t.route.id})}else return{type:et.data,result:void 0};else if(c)o=await l(c);else{let u=new URL(e.url),d=u.pathname+u.search;throw Dn(404,{pathname:d})}je(o.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:et.error,result:c}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function MA(n){let{result:e,type:t}=n;if($k(e)){let d;try{let h=e.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?e.body==null?d=null:d=await e.json():d=await e.text()}catch(h){return{type:et.error,error:h}}return t===et.error?{type:et.error,error:new nh(e.status,e.statusText,d),statusCode:e.status,headers:e.headers}:{type:et.data,data:d,statusCode:e.status,headers:e.headers}}if(t===et.error){if(Kw(e)){var r,s;if(e.data instanceof Error){var i,o;return{type:et.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:et.error,error:new nh(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:il(e)?e.status:void 0,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:et.error,error:e,statusCode:il(e)?e.status:void 0}}if(LA(e)){var a,l;return{type:et.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(Kw(e)){var c,u;return{type:et.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:et.data,data:e}}function IA(n,e,t,r,s,i){let o=n.headers.get("Location");if(je(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!py.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===t)+1);o=Cp(new URL(e.url),a,s,!0,o,i),n.headers.set("Location",o)}return n}function Bw(n,e,t){if(py.test(n)){let r=n,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),i=bl(s.pathname,t)!=null;if(s.origin===e.origin&&i)return s.pathname+s.search+s.hash}return n}function ta(n,e,t,r){let s=n.createURL(Vk(e)).toString(),i={signal:t};if(r&&Nr(r.formMethod)){let{formMethod:o,formEncType:a}=r;i.method=o.toUpperCase(),a==="application/json"?(i.headers=new Headers({"Content-Type":a}),i.body=JSON.stringify(r.json)):a==="text/plain"?i.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?i.body=Tp(r.formData):i.body=r.formData}return new Request(s,i)}function Tp(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function zw(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function jA(n,e,t,r,s){let i={},o=null,a,l=!1,c={},u=t&&Jn(t[1])?t[1].error:void 0;return n.forEach(d=>{if(!(d.route.id in e))return;let h=d.route.id,p=e[h];if(je(!uo(p),"Cannot handle redirect results in processLoaderData"),Jn(p)){let _=p.error;u!==void 0&&(_=u,u=void 0),o=o||{};{let v=no(n,h);o[v.route.id]==null&&(o[v.route.id]=_)}i[h]=void 0,l||(l=!0,a=il(p.error)?p.error.status:500),p.headers&&(c[h]=p.headers)}else hi(p)?(r.set(h,p.deferredData),i[h]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[h]=p.headers)):(i[h]=p.data,p.statusCode&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[h]=p.headers))}),u!==void 0&&t&&(o={[t[0]]:u},i[t[0]]=void 0),{loaderData:i,errors:o,statusCode:a||200,loaderHeaders:c}}function Uw(n,e,t,r,s,i,o){let{loaderData:a,errors:l}=jA(e,t,r,o);return s.forEach(c=>{let{key:u,match:d,controller:h}=c,p=i[u];if(je(p,"Did not find corresponding fetcher result"),!(h&&h.signal.aborted))if(Jn(p)){let _=no(n.matches,d==null?void 0:d.route.id);l&&l[_.route.id]||(l=_t({},l,{[_.route.id]:p.error})),n.fetchers.delete(u)}else if(uo(p))je(!1,"Unhandled fetcher revalidation redirect");else if(hi(p))je(!1,"Unhandled fetcher deferred data");else{let _=Hs(p.data);n.fetchers.set(u,_)}}),{loaderData:a,errors:l}}function Ww(n,e,t,r){let s=_t({},e);for(let i of t){let o=i.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(s[o]=e[o]):n[o]!==void 0&&i.route.loader&&(s[o]=n[o]),r&&r.hasOwnProperty(o))break}return s}function qw(n){return n?Jn(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function no(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function Hw(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Dn(n,e){let{pathname:t,routeId:r,method:s,type:i,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return n===400?(a="Bad Request",s&&t&&r?l="You made a "+s+' request to "'+t+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?l="defer() is not supported in actions":i==="invalid-body"&&(l="Unable to encode submission body")):n===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+t+'"'):n===404?(a="Not Found",l='No route matches URL "'+t+'"'):n===405&&(a="Method Not Allowed",s&&t&&r?l="You made a "+s.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(l='Invalid request method "'+s.toUpperCase()+'"')),new nh(n||500,a,new Error(l),!0)}function Xu(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,s]=e[t];if(uo(s))return{key:r,result:s}}}function Vk(n){let e=typeof n=="string"?$i(n):n;return jo(_t({},e,{hash:""}))}function DA(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function FA(n){return $k(n.result)&&xA.has(n.result.status)}function hi(n){return n.type===et.deferred}function Jn(n){return n.type===et.error}function uo(n){return(n&&n.type)===et.redirect}function Kw(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function LA(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function $k(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function VA(n){return bA.has(n.toLowerCase())}function Nr(n){return wA.has(n.toLowerCase())}async function $A(n,e,t,r,s){let i=Object.entries(e);for(let o=0;o<i.length;o++){let[a,l]=i[o],c=n.find(h=>(h==null?void 0:h.route.id)===a);if(!c)continue;let u=r.find(h=>h.route.id===c.route.id),d=u!=null&&!Fk(u,c)&&(s&&s[c.route.id])!==void 0;hi(l)&&d&&await gy(l,t,!1).then(h=>{h&&(e[a]=h)})}}async function BA(n,e,t){for(let r=0;r<t.length;r++){let{key:s,routeId:i,controller:o}=t[r],a=e[s];n.find(c=>(c==null?void 0:c.route.id)===i)&&hi(a)&&(je(o,"Expected an AbortController for revalidating fetcher deferred result"),await gy(a,o.signal,!0).then(c=>{c&&(e[s]=c)}))}}async function gy(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:et.data,data:n.deferredData.unwrappedData}}catch(s){return{type:et.error,error:s}}return{type:et.data,data:n.deferredData.data}}}function yy(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function rc(n,e){let t=typeof e=="string"?$i(e).search:e.search;if(n[n.length-1].route.index&&yy(t||""))return n[n.length-1];let r=Ik(n);return r[r.length-1]}function Qw(n){let{formMethod:e,formAction:t,formEncType:r,text:s,formData:i,json:o}=n;if(!(!e||!t||!r)){if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:s};if(i!=null)return{formMethod:e,formAction:t,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:o,text:void 0}}}function Vf(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function zA(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Bl(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function UA(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Hs(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function WA(n,e){try{let t=n.sessionStorage.getItem(Dk);if(t){let r=JSON.parse(t);for(let[s,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(s,new Set(i||[]))}}catch{}}function qA(n,e){if(e.size>0){let t={};for(let[r,s]of e)t[r]=[...s];try{n.sessionStorage.setItem(Dk,JSON.stringify(t))}catch(r){sl(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rh(){return rh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rh.apply(this,arguments)}const qh=O.createContext(null),Bk=O.createContext(null),Bi=O.createContext(null),vy=O.createContext(null),ls=O.createContext({outlet:null,matches:[],isDataRoute:!1}),zk=O.createContext(null);function HA(n,e){let{relative:t}=e===void 0?{}:e;xl()||je(!1);let{basename:r,navigator:s}=O.useContext(Bi),{hash:i,pathname:o,search:a}=qk(n,{relative:t}),l=o;return r!=="/"&&(l=o==="/"?r:Os([r,o])),s.createHref({pathname:l,search:a,hash:i})}function xl(){return O.useContext(vy)!=null}function kl(){return xl()||je(!1),O.useContext(vy).location}function Uk(n){O.useContext(Bi).static||O.useLayoutEffect(n)}function bu(){let{isDataRoute:n}=O.useContext(ls);return n?iO():KA()}function KA(){xl()||je(!1);let n=O.useContext(qh),{basename:e,future:t,navigator:r}=O.useContext(Bi),{matches:s}=O.useContext(ls),{pathname:i}=kl(),o=JSON.stringify(Uh(s,t.v7_relativeSplatPath)),a=O.useRef(!1);return Uk(()=>{a.current=!0}),O.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Wh(c,JSON.parse(o),i,u.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Os([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,n])}const QA=O.createContext(null);function ZA(n){let e=O.useContext(ls).outlet;return e&&O.createElement(QA.Provider,{value:n},e)}function Wk(){let{matches:n}=O.useContext(ls),e=n[n.length-1];return e?e.params:{}}function qk(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=O.useContext(Bi),{matches:s}=O.useContext(ls),{pathname:i}=kl(),o=JSON.stringify(Uh(s,r.v7_relativeSplatPath));return O.useMemo(()=>Wh(n,JSON.parse(o),i,t==="path"),[n,o,i,t])}function JA(n,e,t,r){xl()||je(!1);let{navigator:s}=O.useContext(Bi),{matches:i}=O.useContext(ls),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=kl(),u;u=c;let d=u.pathname||"/",h=d;if(l!=="/"){let v=l.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(v.length).join("/")}let p=to(n,{pathname:h});return tO(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Os([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Os([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,t,r)}function GA(){let n=Zk(),e=il(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:s},t):null,null)}const YA=O.createElement(GA,null);class XA extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?O.createElement(ls.Provider,{value:this.props.routeContext},O.createElement(zk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eO(n){let{routeContext:e,match:t,children:r}=n,s=O.useContext(qh);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),O.createElement(ls.Provider,{value:e},r)}function tO(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(s=t)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||je(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:p}=t,_=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||_){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let p,_=!1,v=null,w=null;t&&(p=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||YA,l&&(c<0&&h===0?(oO("route-fallback"),_=!0,w=null):c===h&&(_=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),g=()=>{let b;return p?b=v:_?b=w:d.route.Component?b=O.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,O.createElement(eO,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:t!=null},children:b})};return t&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?O.createElement(XA,{location:t.location,revalidation:t.revalidation,component:v,error:p,children:g(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):g()},null)}var Hk=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Hk||{}),Kk=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Kk||{});function nO(n){let e=O.useContext(qh);return e||je(!1),e}function rO(n){let e=O.useContext(Bk);return e||je(!1),e}function sO(n){let e=O.useContext(ls);return e||je(!1),e}function Qk(n){let e=sO(),t=e.matches[e.matches.length-1];return t.route.id||je(!1),t.route.id}function Zk(){var n;let e=O.useContext(zk),t=rO(Kk.UseRouteError),r=Qk();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function iO(){let{router:n}=nO(Hk.UseNavigateStable),e=Qk(),t=O.useRef(!1);return Uk(()=>{t.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,rh({fromRouteId:e},i)))},[n,e])}const Zw={};function oO(n,e,t){Zw[n]||(Zw[n]=!0)}function aO(n,e){n==null||n.v7_startTransition,(n==null?void 0:n.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function lO(n){let{to:e,replace:t,state:r,relative:s}=n;xl()||je(!1);let{future:i,static:o}=O.useContext(Bi),{matches:a}=O.useContext(ls),{pathname:l}=kl(),c=bu(),u=Wh(e,Uh(a,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(u);return O.useEffect(()=>c(JSON.parse(d),{replace:t,state:r,relative:s}),[c,d,s,t,r]),null}function cO(n){return ZA(n.context)}function uO(n){let{basename:e="/",children:t=null,location:r,navigationType:s=zt.Pop,navigator:i,static:o=!1,future:a}=n;xl()&&je(!1);let l=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:l,navigator:i,static:o,future:rh({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=$i(r));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:_="default"}=r,v=O.useMemo(()=>{let w=bl(u,l);return w==null?null:{location:{pathname:w,search:d,hash:h,state:p,key:_},navigationType:s}},[l,u,d,h,p,_,s]);return v==null?null:O.createElement(Bi.Provider,{value:c},O.createElement(vy.Provider,{children:t,value:v}))}new Promise(()=>{});function dO(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:O.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:O.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:O.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jc(){return Jc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Jc.apply(this,arguments)}function hO(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function fO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function mO(n,e){return n.button===0&&(!e||e==="_self")&&!fO(n)}const pO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gO="6";try{window.__reactRouterVersion=gO}catch{}function yO(n,e){return CA({basename:void 0,future:Jc({},void 0,{v7_prependBasename:!0}),history:J2({window:void 0}),hydrationData:vO(),routes:n,mapRouteProperties:dO,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function vO(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=Jc({},e,{errors:wO(e.errors)})),e}function wO(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")t[r]=new nh(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let i=window[s.__subType];if(typeof i=="function")try{let o=new i(s.message);o.stack="",t[r]=o}catch{}}if(t[r]==null){let i=new Error(s.message);i.stack="",t[r]=i}}else t[r]=s;return t}const _O=O.createContext({isTransitioning:!1}),bO=O.createContext(new Map),xO="startTransition",Jw=GC[xO],kO="flushSync",Gw=c2[kO];function EO(n){Jw?Jw(n):n()}function zl(n){Gw?Gw(n):n()}class SO{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}}function CO(n){let{fallbackElement:e,router:t,future:r}=n,[s,i]=O.useState(t.state),[o,a]=O.useState(),[l,c]=O.useState({isTransitioning:!1}),[u,d]=O.useState(),[h,p]=O.useState(),[_,v]=O.useState(),w=O.useRef(new Map),{v7_startTransition:y}=r||{},g=O.useCallback(P=>{y?EO(P):P()},[y]),b=O.useCallback((P,j)=>{let{deletedFetchers:I,flushSync:V,viewTransitionOpts:H}=j;P.fetchers.forEach((ge,Ee)=>{ge.data!==void 0&&w.current.set(Ee,ge.data)}),I.forEach(ge=>w.current.delete(ge));let J=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!H||J){V?zl(()=>i(P)):g(()=>i(P));return}if(V){zl(()=>{h&&(u&&u.resolve(),h.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:H.currentLocation,nextLocation:H.nextLocation})});let ge=t.window.document.startViewTransition(()=>{zl(()=>i(P))});ge.finished.finally(()=>{zl(()=>{d(void 0),p(void 0),a(void 0),c({isTransitioning:!1})})}),zl(()=>p(ge));return}h?(u&&u.resolve(),h.skipTransition(),v({state:P,currentLocation:H.currentLocation,nextLocation:H.nextLocation})):(a(P),c({isTransitioning:!0,flushSync:!1,currentLocation:H.currentLocation,nextLocation:H.nextLocation}))},[t.window,h,u,w,g]);O.useLayoutEffect(()=>t.subscribe(b),[t,b]),O.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new SO)},[l]),O.useEffect(()=>{if(u&&o&&t.window){let P=o,j=u.promise,I=t.window.document.startViewTransition(async()=>{g(()=>i(P)),await j});I.finished.finally(()=>{d(void 0),p(void 0),a(void 0),c({isTransitioning:!1})}),p(I)}},[g,o,u,t.window]),O.useEffect(()=>{u&&o&&s.location.key===o.location.key&&u.resolve()},[u,h,s.location,o]),O.useEffect(()=>{!l.isTransitioning&&_&&(a(_.state),c({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}),v(void 0))},[l.isTransitioning,_]),O.useEffect(()=>{},[]);let x=O.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:P=>t.navigate(P),push:(P,j,I)=>t.navigate(P,{state:j,preventScrollReset:I==null?void 0:I.preventScrollReset}),replace:(P,j,I)=>t.navigate(P,{replace:!0,state:j,preventScrollReset:I==null?void 0:I.preventScrollReset})}),[t]),C=t.basename||"/",N=O.useMemo(()=>({router:t,navigator:x,static:!1,basename:C}),[t,x,C]),k=O.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return O.useEffect(()=>aO(r,t.future),[r,t.future]),O.createElement(O.Fragment,null,O.createElement(qh.Provider,{value:N},O.createElement(Bk.Provider,{value:s},O.createElement(bO.Provider,{value:w.current},O.createElement(_O.Provider,{value:l},O.createElement(uO,{basename:C,location:s.location,navigationType:s.historyAction,navigator:x,future:k},s.initialized||t.future.v7_partialHydration?O.createElement(PO,{routes:t.routes,future:t.future,state:s}):e))))),null)}const PO=O.memo(TO);function TO(n){let{routes:e,future:t,state:r}=n;return JA(e,void 0,r,t)}const AO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Js=O.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,h=hO(e,pO),{basename:p}=O.useContext(Bi),_,v=!1;if(typeof c=="string"&&OO.test(c)&&(_=c,AO))try{let b=new URL(window.location.href),x=c.startsWith("//")?new URL(b.protocol+c):new URL(c),C=bl(x.pathname,p);x.origin===b.origin&&C!=null?c=C+x.search+x.hash:v=!0}catch{}let w=HA(c,{relative:s}),y=NO(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:d});function g(b){r&&r(b),b.defaultPrevented||y(b)}return O.createElement("a",Jc({},h,{href:_||w,onClick:v||i?r:g,ref:t,target:l}))});var Yw;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Yw||(Yw={}));var Xw;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Xw||(Xw={}));function NO(n,e){let{target:t,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=bu(),c=kl(),u=qk(n,{relative:o});return O.useCallback(d=>{if(mO(d,t)){d.preventDefault();let h=r!==void 0?r:jo(c)===jo(u);l(n,{replace:h,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,u,r,s,t,n,i,o,a])}function RO(){const n=kl();return m.jsxs("div",{className:"min-h-screen flex flex-col",children:[m.jsx("header",{className:"bg-white border-b",children:m.jsxs("div",{className:"container-std flex items-center justify-between h-14",children:[m.jsx(Js,{to:"/",className:"font-semibold",children:"Admin.Web"}),m.jsxs("nav",{className:"flex items-center gap-4 text-sm",children:[m.jsx(Js,{to:"/products",className:Ul(n.pathname.startsWith("/products")),children:""}),m.jsx(Js,{to:"/brands",className:Ul(n.pathname.startsWith("/brands")),children:""}),m.jsx(Js,{to:"/categories",className:Ul(n.pathname.startsWith("/categories")),children:""}),m.jsx(Js,{to:"/stores",className:Ul(n.pathname.startsWith("/stores")),children:" "}),m.jsx(Js,{to:"/countries",className:Ul(n.pathname.startsWith("/countries")),children:" "})]})]})}),m.jsx("main",{className:"container-std py-6 flex-1 w-full",children:m.jsx(cO,{})}),m.jsx("footer",{className:"border-t bg-white",children:m.jsx("div",{className:"container-std py-3 text-xs text-gray-500",children:"   wira dev"})})]})}function Ul(n){return`px-3 py-1.5 rounded-md hover:bg-gray-100 ${n?"bg-gray-900 text-white hover:bg-gray-800":""}`}function MO(){var r;const n=Zk();let e="Unexpected Error",t="Something went wrong.";if(il(n)){e=`${n.status} ${n.statusText}`;try{t=((r=n.data)==null?void 0:r.message)||n.data||t}catch{}}else n instanceof Error&&(e=n.name||e,t=n.message||t);return m.jsx("div",{className:"container-std py-10",children:m.jsxs("div",{className:"max-w-lg mx-auto card p-6 space-y-2",children:[m.jsx("h1",{className:"text-lg font-semibold",children:e}),m.jsx("p",{className:"text-sm text-gray-600",children:t})]})})}function Fs({title:n,actions:e,children:t}){return m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsx("h1",{className:"text-lg font-semibold",children:n}),e]}),t?m.jsx("div",{className:"mt-2 text-sm text-gray-600",children:t}):null]})}function Oi(){return m.jsx("div",{className:"flex items-center justify-center py-8",children:m.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-gray-300 border-t-gray-900"})})}const Hh="https://localhost:7062/api/catalog";async function Te(n,e={}){var i;const t=new Headers(e.headers);e.json!==void 0&&!t.has("Content-Type")&&t.set("Content-Type","application/json"),t.has("Accept")||t.set("Accept","application/json"),e.token&&t.set("Authorization",`Bearer ${e.token}`);const r=await fetch(`${Hh}${n}`.replace(/\/$/,""),{...e,headers:t,body:e.json!==void 0?JSON.stringify(e.json):e.body}),s=(i=r.headers.get("content-type"))==null?void 0:i.includes("application/json");if(!r.ok){let o=r.statusText,a;try{if(s){const c=await r.json();o=c.message||c.error||o,a=c}else o=await r.text()}catch{}throw{status:r.status,message:o,details:a}}if(r.status!==204)return s?r.json():r.text()}function Jk(n){const e=new URLSearchParams;Object.entries(n).forEach(([r,s])=>{s==null||s===""||e.set(r,String(s))});const t=e.toString();return t?`?${t}`:""}function IO(){try{return new URL(Hh,location.origin).origin}catch{return location.origin}}function wy(n){if(!n)return;if(/^https?:\/\//i.test(n))return n;const e=n.replace(/\\/g,"/").replace(/^\/+/,""),t=e.startsWith("media/")||e.startsWith("/media/")?`/${e.replace(/^\/+/,"")}`:`/media/${e}`;return`${IO()}${t}`}var Qe;(function(n){n.assertEqual=s=>{};function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},n.getValidEnumValues=s=>{const i=n.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return n.objectValues(o)},n.objectValues=s=>n.objectKeys(s).map(function(i){return s[i]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},n.find=(s,i)=>{for(const o of s)if(i(o))return o},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}n.joinValues=r,n.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Qe||(Qe={}));var e_;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(e_||(e_={}));const le=Qe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Gs=n=>{switch(typeof n){case"undefined":return le.undefined;case"string":return le.string;case"number":return Number.isNaN(n)?le.nan:le.number;case"boolean":return le.boolean;case"function":return le.function;case"bigint":return le.bigint;case"symbol":return le.symbol;case"object":return Array.isArray(n)?le.array:n===null?le.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?le.promise:typeof Map<"u"&&n instanceof Map?le.map:typeof Set<"u"&&n instanceof Set?le.set:typeof Date<"u"&&n instanceof Date?le.date:le.object;default:return le.unknown}},Z=Qe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ls extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(t(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),r}static assert(e){if(!(e instanceof Ls))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Qe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];t[i]=t[i]||[],t[i].push(e(s))}else r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}Ls.create=n=>new Ls(n);const Ap=(n,e)=>{let t;switch(n.code){case Z.invalid_type:n.received===le.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case Z.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,Qe.jsonStringifyReplacer)}`;break;case Z.unrecognized_keys:t=`Unrecognized key(s) in object: ${Qe.joinValues(n.keys,", ")}`;break;case Z.invalid_union:t="Invalid input";break;case Z.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Qe.joinValues(n.options)}`;break;case Z.invalid_enum_value:t=`Invalid enum value. Expected ${Qe.joinValues(n.options)}, received '${n.received}'`;break;case Z.invalid_arguments:t="Invalid function arguments";break;case Z.invalid_return_type:t="Invalid function return type";break;case Z.invalid_date:t="Invalid date";break;case Z.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:Qe.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case Z.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="bigint"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case Z.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case Z.custom:t="Invalid input";break;case Z.invalid_intersection_types:t="Intersection results could not be merged";break;case Z.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case Z.not_finite:t="Number must be finite";break;default:t=e.defaultError,Qe.assertNever(n)}return{message:t}};let jO=Ap;function DO(){return jO}const FO=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,i=[...t,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function te(n,e){const t=DO(),r=FO({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===Ap?void 0:Ap].filter(s=>!!s)});n.common.issues.push(r)}class or{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return Se;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return or.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Se;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Se=Object.freeze({status:"aborted"}),sc=n=>({status:"dirty",value:n}),Sr=n=>({status:"valid",value:n}),t_=n=>n.status==="aborted",n_=n=>n.status==="dirty",ol=n=>n.status==="valid",sh=n=>typeof Promise<"u"&&n instanceof Promise;var he;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(he||(he={}));class Ni{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const r_=(n,e)=>{if(ol(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ls(n.common.issues);return this._error=t,this._error}}};function Me(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:l}=n;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??t??a.defaultError}},description:s}}class He{get description(){return this._def.description}_getType(e){return Gs(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Gs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new or,ctx:{common:e.parent.common,data:e.data,parsedType:Gs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(sh(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Gs(e)},s=this._parseSync({data:e,path:r.path,parent:r});return r_(r,s)}"~validate"(e){var r,s;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Gs(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:t});return ol(i)?{value:i.value}:{issues:t.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(i=>ol(i)?{value:i.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Gs(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(sh(s)?s:Promise.resolve(s));return r_(r,i)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Z.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new cl({schema:this,typeName:Ce.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Ei.create(this,this._def)}nullable(){return ul.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return is.create(this)}promise(){return lh.create(this,this._def)}or(e){return oh.create([this,e],this._def)}and(e){return ah.create(this,e,this._def)}transform(e){return new cl({...Me(this._def),schema:this,typeName:Ce.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Mp({...Me(this._def),innerType:this,defaultValue:t,typeName:Ce.ZodDefault})}brand(){return new oN({typeName:Ce.ZodBranded,type:this,...Me(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Ip({...Me(this._def),innerType:this,catchValue:t,typeName:Ce.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return _y.create(this,e)}readonly(){return jp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const LO=/^c[^\s-]{8,}$/i,VO=/^[0-9a-z]+$/,$O=/^[0-9A-HJKMNP-TV-Z]{26}$/i,BO=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,zO=/^[a-z0-9_-]{21}$/i,UO=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,WO=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,qO=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,HO="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let $f;const KO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,QO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ZO=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,JO=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,GO=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,YO=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Gk="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",XO=new RegExp(`^${Gk}$`);function Yk(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function eN(n){return new RegExp(`^${Yk(n)}$`)}function tN(n){let e=`${Gk}T${Yk(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function nN(n,e){return!!((e==="v4"||!e)&&KO.test(n)||(e==="v6"||!e)&&ZO.test(n))}function rN(n,e){if(!UO.test(n))return!1;try{const[t]=n.split(".");if(!t)return!1;const r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function sN(n,e){return!!((e==="v4"||!e)&&QO.test(n)||(e==="v6"||!e)&&JO.test(n))}class fi extends He{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==le.string){const i=this._getOrReturnCtx(e);return te(i,{code:Z.invalid_type,expected:le.string,received:i.parsedType}),Se}const r=new or;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),te(s,{code:Z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),te(s,{code:Z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?te(s,{code:Z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&te(s,{code:Z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")qO.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"email",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")$f||($f=new RegExp(HO,"u")),$f.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"emoji",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")BO.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"uuid",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")zO.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"nanoid",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")LO.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"cuid",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")VO.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"cuid2",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")$O.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"ulid",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),te(s,{validation:"url",code:Z.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"regex",code:Z.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),te(s,{code:Z.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),te(s,{code:Z.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),te(s,{code:Z.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?tN(i).test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{code:Z.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?XO.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{code:Z.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?eN(i).test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{code:Z.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?WO.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"duration",code:Z.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?nN(e.data,i.version)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"ip",code:Z.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?rN(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"jwt",code:Z.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?sN(e.data,i.version)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"cidr",code:Z.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?GO.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"base64",code:Z.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?YO.test(e.data)||(s=this._getOrReturnCtx(e,s),te(s,{validation:"base64url",code:Z.invalid_string,message:i.message}),r.dirty()):Qe.assertNever(i);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:Z.invalid_string,...he.errToObj(r)})}_addCheck(e){return new fi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...he.errToObj(e)})}url(e){return this._addCheck({kind:"url",...he.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...he.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...he.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...he.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...he.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...he.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...he.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...he.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...he.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...he.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...he.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...he.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...he.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...he.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...he.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...he.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...he.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...he.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...he.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...he.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...he.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...he.errToObj(t)})}nonempty(e){return this.min(1,he.errToObj(e))}trim(){return new fi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new fi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new fi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}fi.create=n=>new fi({checks:[],typeName:Ce.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...Me(n)});function iN(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,i=Number.parseInt(n.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class al extends He{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==le.number){const i=this._getOrReturnCtx(e);return te(i,{code:Z.invalid_type,expected:le.number,received:i.parsedType}),Se}let r;const s=new or;for(const i of this._def.checks)i.kind==="int"?Qe.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),te(r,{code:Z.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),te(r,{code:Z.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),te(r,{code:Z.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?iN(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),te(r,{code:Z.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),te(r,{code:Z.not_finite,message:i.message}),s.dirty()):Qe.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,he.toString(t))}gt(e,t){return this.setLimit("min",e,!1,he.toString(t))}lte(e,t){return this.setLimit("max",e,!0,he.toString(t))}lt(e,t){return this.setLimit("max",e,!1,he.toString(t))}setLimit(e,t,r,s){return new al({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:he.toString(s)}]})}_addCheck(e){return new al({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:he.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:he.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:he.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:he.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:he.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:he.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:he.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:he.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:he.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Qe.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}al.create=n=>new al({checks:[],typeName:Ce.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Me(n)});class Gc extends He{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==le.bigint)return this._getInvalidInput(e);let r;const s=new or;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),te(r,{code:Z.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),te(r,{code:Z.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),te(r,{code:Z.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Qe.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return te(t,{code:Z.invalid_type,expected:le.bigint,received:t.parsedType}),Se}gte(e,t){return this.setLimit("min",e,!0,he.toString(t))}gt(e,t){return this.setLimit("min",e,!1,he.toString(t))}lte(e,t){return this.setLimit("max",e,!0,he.toString(t))}lt(e,t){return this.setLimit("max",e,!1,he.toString(t))}setLimit(e,t,r,s){return new Gc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:he.toString(s)}]})}_addCheck(e){return new Gc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:he.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:he.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:he.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:he.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:he.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Gc.create=n=>new Gc({checks:[],typeName:Ce.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...Me(n)});class Op extends He{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==le.boolean){const r=this._getOrReturnCtx(e);return te(r,{code:Z.invalid_type,expected:le.boolean,received:r.parsedType}),Se}return Sr(e.data)}}Op.create=n=>new Op({typeName:Ce.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Me(n)});class ih extends He{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==le.date){const i=this._getOrReturnCtx(e);return te(i,{code:Z.invalid_type,expected:le.date,received:i.parsedType}),Se}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return te(i,{code:Z.invalid_date}),Se}const r=new or;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),te(s,{code:Z.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),te(s,{code:Z.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Qe.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ih({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:he.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:he.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}ih.create=n=>new ih({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:Ce.ZodDate,...Me(n)});class s_ extends He{_parse(e){if(this._getType(e)!==le.symbol){const r=this._getOrReturnCtx(e);return te(r,{code:Z.invalid_type,expected:le.symbol,received:r.parsedType}),Se}return Sr(e.data)}}s_.create=n=>new s_({typeName:Ce.ZodSymbol,...Me(n)});class i_ extends He{_parse(e){if(this._getType(e)!==le.undefined){const r=this._getOrReturnCtx(e);return te(r,{code:Z.invalid_type,expected:le.undefined,received:r.parsedType}),Se}return Sr(e.data)}}i_.create=n=>new i_({typeName:Ce.ZodUndefined,...Me(n)});class o_ extends He{_parse(e){if(this._getType(e)!==le.null){const r=this._getOrReturnCtx(e);return te(r,{code:Z.invalid_type,expected:le.null,received:r.parsedType}),Se}return Sr(e.data)}}o_.create=n=>new o_({typeName:Ce.ZodNull,...Me(n)});class Np extends He{constructor(){super(...arguments),this._any=!0}_parse(e){return Sr(e.data)}}Np.create=n=>new Np({typeName:Ce.ZodAny,...Me(n)});class a_ extends He{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Sr(e.data)}}a_.create=n=>new a_({typeName:Ce.ZodUnknown,...Me(n)});class Ri extends He{_parse(e){const t=this._getOrReturnCtx(e);return te(t,{code:Z.invalid_type,expected:le.never,received:t.parsedType}),Se}}Ri.create=n=>new Ri({typeName:Ce.ZodNever,...Me(n)});class l_ extends He{_parse(e){if(this._getType(e)!==le.undefined){const r=this._getOrReturnCtx(e);return te(r,{code:Z.invalid_type,expected:le.void,received:r.parsedType}),Se}return Sr(e.data)}}l_.create=n=>new l_({typeName:Ce.ZodVoid,...Me(n)});class is extends He{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==le.array)return te(t,{code:Z.invalid_type,expected:le.array,received:t.parsedType}),Se;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(o||a)&&(te(t,{code:o?Z.too_big:Z.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(te(t,{code:Z.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(te(t,{code:Z.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>s.type._parseAsync(new Ni(t,o,t.path,a)))).then(o=>or.mergeArray(r,o));const i=[...t.data].map((o,a)=>s.type._parseSync(new Ni(t,o,t.path,a)));return or.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new is({...this._def,minLength:{value:e,message:he.toString(t)}})}max(e,t){return new is({...this._def,maxLength:{value:e,message:he.toString(t)}})}length(e,t){return new is({...this._def,exactLength:{value:e,message:he.toString(t)}})}nonempty(e){return this.min(1,e)}}is.create=(n,e)=>new is({type:n,minLength:null,maxLength:null,exactLength:null,typeName:Ce.ZodArray,...Me(e)});function ca(n){if(n instanceof Ut){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=Ei.create(ca(r))}return new Ut({...n._def,shape:()=>e})}else return n instanceof is?new is({...n._def,type:ca(n.element)}):n instanceof Ei?Ei.create(ca(n.unwrap())):n instanceof ul?ul.create(ca(n.unwrap())):n instanceof Do?Do.create(n.items.map(e=>ca(e))):n}class Ut extends He{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Qe.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==le.object){const c=this._getOrReturnCtx(e);return te(c,{code:Z.invalid_type,expected:le.object,received:c.parsedType}),Se}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ri&&this._def.unknownKeys==="strip"))for(const c in s.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=i[c],d=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Ni(s,d,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof Ri){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")a.length>0&&(te(s,{code:Z.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Ni(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,h=await u.value;c.push({key:d,value:h,alwaysSet:u.alwaysSet})}return c}).then(c=>or.mergeObjectSync(r,c)):or.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return he.errToObj,new Ut({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,t,r).message)??r.defaultError;return t.code==="unrecognized_keys"?{message:he.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Ut({...this._def,unknownKeys:"strip"})}passthrough(){return new Ut({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ut({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ut({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ce.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Ut({...this._def,catchall:e})}pick(e){const t={};for(const r of Qe.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new Ut({...this._def,shape:()=>t})}omit(e){const t={};for(const r of Qe.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new Ut({...this._def,shape:()=>t})}deepPartial(){return ca(this)}partial(e){const t={};for(const r of Qe.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}return new Ut({...this._def,shape:()=>t})}required(e){const t={};for(const r of Qe.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ei;)i=i._def.innerType;t[r]=i}return new Ut({...this._def,shape:()=>t})}keyof(){return Xk(Qe.objectKeys(this.shape))}}Ut.create=(n,e)=>new Ut({shape:()=>n,unknownKeys:"strip",catchall:Ri.create(),typeName:Ce.ZodObject,...Me(e)});Ut.strictCreate=(n,e)=>new Ut({shape:()=>n,unknownKeys:"strict",catchall:Ri.create(),typeName:Ce.ZodObject,...Me(e)});Ut.lazycreate=(n,e)=>new Ut({shape:n,unknownKeys:"strip",catchall:Ri.create(),typeName:Ce.ZodObject,...Me(e)});class oh extends He{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Ls(a.ctx.common.issues));return te(t,{code:Z.invalid_union,unionErrors:o}),Se}if(t.common.async)return Promise.all(r.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const c={...t,common:{...t.common,issues:[]},parent:null},u=l._parseSync({data:t.data,path:t.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new Ls(l));return te(t,{code:Z.invalid_union,unionErrors:a}),Se}}get options(){return this._def.options}}oh.create=(n,e)=>new oh({options:n,typeName:Ce.ZodUnion,...Me(e)});function Rp(n,e){const t=Gs(n),r=Gs(e);if(n===e)return{valid:!0,data:n};if(t===le.object&&r===le.object){const s=Qe.objectKeys(e),i=Qe.objectKeys(n).filter(a=>s.indexOf(a)!==-1),o={...n,...e};for(const a of i){const l=Rp(n[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(t===le.array&&r===le.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<n.length;i++){const o=n[i],a=e[i],l=Rp(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return t===le.date&&r===le.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class ah extends He{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(t_(i)||t_(o))return Se;const a=Rp(i.value,o.value);return a.valid?((n_(i)||n_(o))&&t.dirty(),{status:t.value,value:a.data}):(te(r,{code:Z.invalid_intersection_types}),Se)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ah.create=(n,e,t)=>new ah({left:n,right:e,typeName:Ce.ZodIntersection,...Me(t)});class Do extends He{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==le.array)return te(r,{code:Z.invalid_type,expected:le.array,received:r.parsedType}),Se;if(r.data.length<this._def.items.length)return te(r,{code:Z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Se;!this._def.rest&&r.data.length>this._def.items.length&&(te(r,{code:Z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Ni(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>or.mergeArray(t,o)):or.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new Do({...this._def,rest:e})}}Do.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Do({items:n,typeName:Ce.ZodTuple,rest:null,...Me(e)})};class c_ extends He{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==le.map)return te(r,{code:Z.invalid_type,expected:le.map,received:r.parsedType}),Se;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:s._parse(new Ni(r,a,r.path,[c,"key"])),value:i._parse(new Ni(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Se;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(c.value,u.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Se;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(c.value,u.value)}return{status:t.value,value:a}}}}c_.create=(n,e,t)=>new c_({valueType:e,keyType:n,typeName:Ce.ZodMap,...Me(t)});class Yc extends He{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==le.set)return te(r,{code:Z.invalid_type,expected:le.set,received:r.parsedType}),Se;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(te(r,{code:Z.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(te(r,{code:Z.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Se;u.status==="dirty"&&t.dirty(),c.add(u.value)}return{status:t.value,value:c}}const a=[...r.data.values()].map((l,c)=>i._parse(new Ni(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,t){return new Yc({...this._def,minSize:{value:e,message:he.toString(t)}})}max(e,t){return new Yc({...this._def,maxSize:{value:e,message:he.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Yc.create=(n,e)=>new Yc({valueType:n,minSize:null,maxSize:null,typeName:Ce.ZodSet,...Me(e)});class u_ extends He{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}u_.create=(n,e)=>new u_({getter:n,typeName:Ce.ZodLazy,...Me(e)});class d_ extends He{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return te(t,{received:t.data,code:Z.invalid_literal,expected:this._def.value}),Se}return{status:"valid",value:e.data}}get value(){return this._def.value}}d_.create=(n,e)=>new d_({value:n,typeName:Ce.ZodLiteral,...Me(e)});function Xk(n,e){return new ll({values:n,typeName:Ce.ZodEnum,...Me(e)})}class ll extends He{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return te(t,{expected:Qe.joinValues(r),received:t.parsedType,code:Z.invalid_type}),Se}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return te(t,{received:t.data,code:Z.invalid_enum_value,options:r}),Se}return Sr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return ll.create(e,{...this._def,...t})}exclude(e,t=this._def){return ll.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}ll.create=Xk;class h_ extends He{_parse(e){const t=Qe.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==le.string&&r.parsedType!==le.number){const s=Qe.objectValues(t);return te(r,{expected:Qe.joinValues(s),received:r.parsedType,code:Z.invalid_type}),Se}if(this._cache||(this._cache=new Set(Qe.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Qe.objectValues(t);return te(r,{received:r.data,code:Z.invalid_enum_value,options:s}),Se}return Sr(e.data)}get enum(){return this._def.values}}h_.create=(n,e)=>new h_({values:n,typeName:Ce.ZodNativeEnum,...Me(e)});class lh extends He{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==le.promise&&t.common.async===!1)return te(t,{code:Z.invalid_type,expected:le.promise,received:t.parsedType}),Se;const r=t.parsedType===le.promise?t.data:Promise.resolve(t.data);return Sr(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}lh.create=(n,e)=>new lh({type:n,typeName:Ce.ZodPromise,...Me(e)});class cl extends He{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ce.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{te(r,o),o.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return Se;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?Se:l.status==="dirty"||t.value==="dirty"?sc(l.value):l});{if(t.value==="aborted")return Se;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Se:a.status==="dirty"||t.value==="dirty"?sc(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Se:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Se:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ol(o))return Se;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>ol(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:t.value,value:a})):Se);Qe.assertNever(s)}}cl.create=(n,e,t)=>new cl({schema:n,typeName:Ce.ZodEffects,effect:e,...Me(t)});cl.createWithPreprocess=(n,e,t)=>new cl({schema:e,effect:{type:"preprocess",transform:n},typeName:Ce.ZodEffects,...Me(t)});class Ei extends He{_parse(e){return this._getType(e)===le.undefined?Sr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ei.create=(n,e)=>new Ei({innerType:n,typeName:Ce.ZodOptional,...Me(e)});class ul extends He{_parse(e){return this._getType(e)===le.null?Sr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ul.create=(n,e)=>new ul({innerType:n,typeName:Ce.ZodNullable,...Me(e)});class Mp extends He{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===le.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Mp.create=(n,e)=>new Mp({innerType:n,typeName:Ce.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Me(e)});class Ip extends He{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return sh(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ls(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ls(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ip.create=(n,e)=>new Ip({innerType:n,typeName:Ce.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Me(e)});class f_ extends He{_parse(e){if(this._getType(e)!==le.nan){const r=this._getOrReturnCtx(e);return te(r,{code:Z.invalid_type,expected:le.nan,received:r.parsedType}),Se}return{status:"valid",value:e.data}}}f_.create=n=>new f_({typeName:Ce.ZodNaN,...Me(n)});class oN extends He{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class _y extends He{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Se:i.status==="dirty"?(t.dirty(),sc(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Se:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new _y({in:e,out:t,typeName:Ce.ZodPipeline})}}class jp extends He{_parse(e){const t=this._def.innerType._parse(e),r=s=>(ol(s)&&(s.value=Object.freeze(s.value)),s);return sh(t)?t.then(s=>r(s)):r(t)}unwrap(){return this._def.innerType}}jp.create=(n,e)=>new jp({innerType:n,typeName:Ce.ZodReadonly,...Me(e)});var Ce;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(Ce||(Ce={}));const G=fi.create,Mi=al.create,ic=Op.create,aN=Np.create;Ri.create;const eo=is.create,Tn=Ut.create;oh.create;ah.create;Do.create;ll.create;lh.create;Ei.create;ul.create;const lN=Tn({code2:G(),code3:G(),nameFa:G(),nameEn:G(),region:G().nullable().optional(),flagEmoji:G().nullable().optional()}),eE=Tn({id:G().uuid(),name:G(),slug:G(),parentId:G().uuid().nullable().optional(),depth:Mi()}),cN=Tn({id:G().uuid(),name:G(),domain:G().nullable().optional()}),uN=Tn({id:G().uuid(),name:G(),website:G().nullable().optional(),description:G().nullable().optional(),establishedYear:Mi().nullable().optional(),logoMediaId:G().uuid().nullable().optional(),logoUrl:G().nullable().optional(),status:aN(),productsCount:Mi()}),dN=Tn({id:G().uuid(),name:G(),normalizedName:G(),website:G().nullable().optional(),description:G().nullable().optional(),establishedYear:Mi().nullable().optional(),logoMediaId:G().uuid().nullable().optional(),logoUrl:G().nullable().optional(),status:Mi()}),hN=Tn({id:G().uuid(),name:G(),slug:G(),parentId:G().uuid().nullable().optional(),depth:Mi()}),fN=Tn({id:G().uuid(),name:G(),code:G(),defaultSlug:G(),brandId:G().uuid().nullable().optional(),brandName:G().nullable().optional(),primaryCategoryId:G().uuid().nullable().optional(),status:G(),mainImageId:G().uuid().nullable().optional(),mainImageUrl:G().url().nullable().optional(),createdAt:G(),updatedAt:G()}),mN=Tn({id:G().uuid(),url:G(),alt:G().nullable().optional(),sortOrder:Mi(),isMain:ic()}),pN=Tn({id:G().uuid(),name:G(),code:G(),defaultSlug:G(),brandName:G(),description:G(),brandId:G().uuid(),status:G(),warehouseCode:G().nullable().optional(),countryCode:G().length(2).nullable().optional(),primaryCategoryId:G().uuid().nullable().optional(),variationKey:G().nullable().optional(),images:eo(mN),variants:eo(Tn({id:G().uuid(),value:G(),sku:G(),isActive:ic()})),properties:eo(Tn({id:G().uuid(),key:G(),valueString:G().nullable().optional(),valueDecimal:Mi().nullable().optional(),valueBool:ic().nullable().optional(),valueJson:G().nullable().optional()})),categories:eo(Tn({categoryId:G().uuid(),isPrimary:ic()})),stores:eo(Tn({storeId:G().uuid(),isVisible:ic(),slug:G(),titleOverride:G().nullable().optional(),descriptionOverride:G().nullable().optional()})),seos:eo(Tn({storeId:G().uuid(),metaTitle:G().nullable().optional(),metaDescription:G().nullable().optional(),canonicalUrl:G().nullable().optional(),robots:G().nullable().optional(),jsonLd:G().nullable().optional()}))}),tE=Tn({name:G().min(1,"  "),slug:G().min(1,"  "),code:G().min(1,"   "),brandId:G().uuid({message:"   "}),categoryIds:eo(G().uuid()).min(1,"     "),warehouseCode:G().optional().nullable(),variationKey:G().optional().nullable(),countryCode:G().length(2).optional().nullable()});function Kh(){return typeof window<"u"&&window.Swal||null}async function Fo(n){const e=Kh();return e?!!(await e.fire({title:n.title||" ",text:n.text||"",icon:n.icon||"question",showCancelButton:!0,confirmButtonText:n.confirmText||"",cancelButtonText:n.cancelText||"",reverseButtons:!0})).isConfirmed:Promise.resolve(window.confirm(n.text||n.title||"Are you sure?"))}function An(n,e=2500){const t=Kh();return t?t.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:e,timerProgressBar:!0}).fire({icon:"success",title:n}):window.alert(n)}function Lt(n,e=3e3){const t=Kh();if(!t)return window.alert(n);if(typeof n=="string"&&(n.length>160||/\n|\r/.test(n))){const i=`<pre dir="ltr" style="text-align:left;white-space:pre-wrap;max-height:60vh;overflow:auto;padding:8px;background:#f9fafb;border-radius:6px;">${gN(n)}</pre>`;return t.fire({icon:"error",title:"",html:i,width:"60em",confirmButtonText:"",focusConfirm:!0})}return t.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:e,timerProgressBar:!0}).fire({icon:"error",title:n})}function gN(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}async function ho(n){const e=Kh();if(!e){const r=window.prompt(n.title||"",n.defaultValue||"");return n.required&&!(r&&r.trim())?null:r??null}const t=await e.fire({title:n.title||"",input:n.textarea?"textarea":"text",inputLabel:n.inputLabel,inputPlaceholder:n.placeholder,inputValue:n.defaultValue||"",showCancelButton:!0,confirmButtonText:n.confirmText||"",cancelButtonText:n.cancelText||"",reverseButtons:!0,inputValidator:r=>n.required&&!String(r||"").trim()?"  ":void 0});return t.isConfirmed?t.value:null}async function yN(n){const e=await Te(`/products${Jk(n)}`),t=e.items.map(a=>fN.parse(a)),r=e.page??1,s=e.pageSize??t.length,i=e.total??t.length,o=Math.max(1,Math.ceil(i/Math.max(1,s)));return{items:t,page:r,pageSize:s,total:i,totalPages:o}}async function vN(n){const e=await Te(`/products/${n}`);return pN.parse(e)}async function wN(n){const e=tE.parse(n);return Te("/products",{method:"POST",json:e})}async function _N(n,e,t){if(!e||e.size===0)throw new Error("   ");const r=10*1024*1024;if(e.size>r)throw new Error("   10MB ");const s=new FormData;s.append("file",e),t&&s.append("alt",t);const i=Hh.replace(/\/$/,""),o=await fetch(`${i}/products/${n}/images/upload`,{method:"POST",body:s});if(!o.ok)try{const a=await o.json(),l=(a==null?void 0:a.detail)||(a==null?void 0:a.title)||(a==null?void 0:a.message)||(a==null?void 0:a.error)||(typeof a=="string"?a:"");throw new Error(l||`Upload failed (${o.status})`)}catch{const a=await o.text().catch(()=>"");throw new Error(a||`Upload failed (${o.status})`)}return o.json()}async function bN(){return(await Te("/brands")).map(e=>uN.parse(e))}async function xN(n){const e=await Te(`/brands/${n}`);return dN.parse(e)}async function kN(n){return(await Te(`/stores${Jk({search:n})}`)).map(t=>cN.parse(t))}async function EN(){return(await Te("/countries")).map(e=>lN.parse(e))}async function SN(){return(await Te("/categories/tree")).map(e=>hN.parse(e))}async function CN(){return(await Te("/categories/leaves")).map(e=>eE.parse(e))}async function PN(){return(await Te("/categories/leaves/with-products")).map(e=>eE.parse(e))}async function TN(n){return Te("/brands",{method:"POST",json:n})}async function AN(n,e){return Te(`/brands/${n}`,{method:"PUT",json:e})}async function ON(n,e){if(!e||e.size===0)throw new Error("   ");const t=new FormData;t.append("file",e);const r=Hh.replace(/\/$/,""),s=await fetch(`${r}/brands/${n}/logo`,{method:"POST",body:t});if(!s.ok){const i=await s.text().catch(()=>"");throw new Error(i||`Upload failed (${s.status})`)}return await s.json()}async function NN(n){return Te(`/brands/${n}`,{method:"DELETE"})}async function RN(n){return Te("/stores",{method:"POST",json:n})}async function MN(n,e){return Te(`/stores/${n}/rename`,{method:"POST",json:{name:e}})}async function IN(n,e){return Te(`/stores/${n}/domain`,{method:"POST",json:{domain:e}})}async function jN(n){return Te("/countries",{method:"POST",json:n})}async function DN(n,e){return Te(`/countries/${n}`,{method:"POST",json:{...e}})}async function FN(n){return Te(`/countries/${n}`,{method:"DELETE"})}async function LN(n){return Te("/categories",{method:"POST",json:n})}async function VN(n,e){return Te(`/categories/${n}/rename`,{method:"POST",json:e})}async function $N(n,e){return Te(`/categories/${n}/move`,{method:"POST",json:{newParentId:e}})}async function nE(n,e){return Te(`/products/${n}/description`,{method:"POST",json:{contentHtml:e}})}async function BN(n,e){return Te(`/products/${n}/seo`,{method:"POST",json:e})}async function zN(n,e){return Te(`/products/${n}/stores`,{method:"POST",json:e})}async function UN(n,e){try{return await Te(`/products/${n}/stores/${e}`,{method:"DELETE"})}catch{return Te(`/products/${n}/stores/remove`,{method:"POST",json:{storeId:e}})}}async function rE(n,e){return Te(`/products/${n}/properties`,{method:"POST",json:e})}async function Dp(n,e){return Te(`/products/${n}/variation`,{method:"POST",json:{variationKey:e}})}async function by(n,e){return Te(`/products/${n}/variants`,{method:"POST",json:e})}async function sE(n,e){return Te(`/products/${n}/variants/${e}`,{method:"DELETE"})}async function WN(n,e,t){var r;try{return await Te(`/products/${n}/variants/${e}`,{method:"POST",json:t})}catch(s){const i=s==null?void 0:s.status;if(i&&(i===404||i===405))try{await sE(n,e),await by(n,t);return}catch(a){throw a}const o=((r=s==null?void 0:s.details)==null?void 0:r.detail)||(s==null?void 0:s.message)||"Update failed";throw new Error(o)}}async function iE(n){return Te(`/products/${n}/activate`,{method:"POST"})}async function oE(n){return Te(`/products/${n}/hide`,{method:"POST"})}async function qN(n,e){return Te(`/products/${n}/images/${e}/main`,{method:"POST"})}async function HN(n,e){return Te(`/products/${n}/images/reorder`,{method:"POST",json:e})}async function KN(n,e){return Te(`/products/${n}/images/${e}`,{method:"DELETE"})}async function QN(n,e){return Te(`/products/${n}/basics`,{method:"POST",json:e})}async function ZN(n,e){return Te(`/products/${n}/categories`,{method:"POST",json:e})}async function JN(n,e){return Te(`/products/${n}/categories/primary`,{method:"POST",json:e})}async function GN(n,e){if(!await Fo({title:" ",text:"      ",icon:"warning",confirmText:"  ",cancelText:""}))throw new Error("__CANCELLED__");return Te(`/products/${n}/properties/${e}`,{method:"DELETE"})}function YN({items:n}){const e=Ye();return m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full text-sm",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"text-left bg-gray-100",children:[m.jsx("th",{className:"p-2",children:""}),m.jsx("th",{className:"p-2",children:""}),m.jsx("th",{className:"p-2",children:""}),m.jsx("th",{className:"p-2",children:""}),m.jsx("th",{className:"p-2",children:""}),m.jsx("th",{className:"p-2",children:""})]})}),m.jsx("tbody",{children:n.map(t=>m.jsxs("tr",{className:"border-b last:border-0",children:[m.jsxs("td",{className:"p-2 flex items-center gap-2",children:[t.mainImageUrl?m.jsx("img",{src:wy(t.mainImageUrl),className:"w-10 h-10 object-cover rounded"}):null,m.jsx("span",{children:t.name})]}),m.jsx("td",{className:"p-2",children:t.code}),m.jsx("td",{className:"p-2",children:t.brandName??"-"}),m.jsx("td",{className:"p-2",children:XN(t.status)}),m.jsx("td",{className:"p-2 whitespace-nowrap",children:new Date(t.createdAt).toLocaleDateString()}),m.jsxs("td",{className:"p-2 flex items-center gap-2",children:[m.jsx(Js,{to:`/products/${t.id}`,className:"btn",children:""}),t.status==="Active"?m.jsx("button",{className:"btn-red",onClick:async()=>{try{await oE(t.id),await e.invalidateQueries({queryKey:["products","list"]}),alert(" ")}catch(r){alert((r==null?void 0:r.message)||"  ")}},children:" "}):m.jsx("button",{className:"btn-green",onClick:async()=>{try{await iE(t.id),await e.invalidateQueries({queryKey:["products","list"]}),alert(" ")}catch(r){alert((r==null?void 0:r.message)||"  ")}},children:""})]})]},t.id))})]})})}function XN(n){return n==="Active"?m.jsx("span",{className:"badge badge-green",children:""}):n==="Hidden"?m.jsx("span",{className:"badge badge-red",children:""}):m.jsx("span",{className:"badge badge-gray",children:""})}function eR(n){return zs({queryKey:["products","list",n],queryFn:()=>yN(n),keepPreviousData:!0})}function tR(n){return zs({queryKey:["products","detail",n],queryFn:()=>vN(n),enabled:!!n})}function nR(n){const e=Ye();return yt({mutationFn:t=>_N(n,t.file,t.alt),onSuccess:()=>{e.invalidateQueries({queryKey:["products","detail",n]})}})}function rR(n){const e=Ye();return yt({mutationFn:t=>qN(n,t),onSuccess:()=>e.invalidateQueries({queryKey:["products","detail",n]})})}function sR(n){const e=Ye();return yt({mutationFn:t=>HN(n,t),onSuccess:()=>e.invalidateQueries({queryKey:["products","detail",n]})})}function iR(n){const e=Ye();return yt({mutationFn:async t=>await Fo({title:" ",text:"     ",icon:"warning",confirmText:"  ",cancelText:""})?KN(n,t):{__cancelled:!0},onSuccess:t=>{t&&t.__cancelled||e.invalidateQueries({queryKey:["products","detail",n]})}})}function oR(n){const e=Ye();return yt({mutationFn:t=>by(n,{variantValue:t.value,sku:t.sku,isActive:t.isActive}),onSuccess:()=>e.invalidateQueries({queryKey:["products","detail",n]})})}function aR(n){const e=Ye();return yt({mutationFn:t=>WN(n,t.variantId,{variantValue:t.value,sku:t.sku,isActive:t.isActive}),onSuccess:()=>e.invalidateQueries({queryKey:["products","detail",n]})})}function lR(n){const e=Ye();return yt({mutationFn:async t=>await Fo({title:" ",text:"      ",icon:"warning",confirmText:"  ",cancelText:""})?sE(n,t):{__cancelled:!0},onSuccess:t=>{t&&t.__cancelled||e.invalidateQueries({queryKey:["products","detail",n]})}})}function cR(n){const e=Ye();return yt({mutationFn:t=>QN(n,t),onSuccess:()=>e.invalidateQueries({queryKey:["products","detail",n]})})}function uR(n){const e=Ye();return yt({mutationFn:t=>ZN(n,t),onSuccess:()=>e.invalidateQueries({queryKey:["products","detail",n]})})}function dR(n){const e=Ye();return yt({mutationFn:t=>BN(n,t),onSuccess:()=>e.invalidateQueries({queryKey:["products","detail",n]})})}function hR(n){const e=Ye();return yt({mutationFn:t=>zN(n,t),onSuccess:()=>e.invalidateQueries({queryKey:["products","detail",n]})})}function fR(n){const e=Ye();return yt({mutationFn:t=>UN(n,t),onSuccess:()=>e.invalidateQueries({queryKey:["products","detail",n]})})}function Qh(){return zs({queryKey:["brands"],queryFn:bN})}function xy(n){return zs({queryKey:["stores",""],queryFn:()=>kN(n)})}function ky(){return zs({queryKey:["countries"],queryFn:EN})}function Ey(){return zs({queryKey:["categories","tree"],queryFn:SN})}function aE(){return zs({queryKey:["categories","leaves"],queryFn:CN})}function mR(){return zs({queryKey:["categories","leaves","with-products"],queryFn:PN})}function pR(){const n=Ye();return yt({mutationFn:TN,onSuccess:()=>n.invalidateQueries({queryKey:["brands"]})})}function gR(n){return zs({queryKey:["brands","detail",n],queryFn:()=>xN(n),enabled:!!n})}function yR(n){const e=Ye();return yt({mutationFn:t=>AN(n,t),onSuccess:()=>{e.invalidateQueries({queryKey:["brands"]}),e.invalidateQueries({queryKey:["brands","detail",n]})}})}function vR(n){const e=Ye();return yt({mutationFn:t=>ON(n,t),onSuccess:()=>{e.invalidateQueries({queryKey:["brands"]}),e.invalidateQueries({queryKey:["brands","detail",n]})}})}function wR(){const n=Ye();return yt({mutationFn:async e=>await Fo({title:" ",text:"     ",icon:"warning",confirmText:"  ",cancelText:""})?NN(e):{__cancelled:!0},onSuccess:e=>{e&&e.__cancelled||n.invalidateQueries({queryKey:["brands"]})}})}function _R(){const n=Ye();return yt({mutationFn:RN,onSuccess:()=>n.invalidateQueries({queryKey:["stores"]})})}function bR(){const n=Ye();return yt({mutationFn:({id:e,name:t})=>MN(e,t),onSuccess:()=>n.invalidateQueries({queryKey:["stores"]})})}function xR(){const n=Ye();return yt({mutationFn:({id:e,domain:t})=>IN(e,t),onSuccess:()=>n.invalidateQueries({queryKey:["stores"]})})}function kR(){const n=Ye();return yt({mutationFn:jN,onSuccess:()=>n.invalidateQueries({queryKey:["countries"]})})}function ER(){const n=Ye();return yt({mutationFn:({code2:e,input:t})=>DN(e,t),onSuccess:()=>n.invalidateQueries({queryKey:["countries"]})})}function SR(){const n=Ye();return yt({mutationFn:async e=>await Fo({title:" ",text:` ${e}  `,icon:"warning",confirmText:"  ",cancelText:""})?FN(e):{__cancelled:!0},onSuccess:e=>{e&&e.__cancelled||n.invalidateQueries({queryKey:["countries"]})}})}function CR(){const n=Ye();return yt({mutationFn:LN,onSuccess:()=>n.invalidateQueries({queryKey:["categories","tree"]})})}function PR(){const n=Ye();return yt({mutationFn:({id:e,name:t,slug:r})=>VN(e,{name:t,slug:r}),onSuccess:()=>n.invalidateQueries({queryKey:["categories","tree"]})})}function TR(){const n=Ye();return yt({mutationFn:({id:e,newParentId:t})=>$N(e,t),onSuccess:()=>n.invalidateQueries({queryKey:["categories","tree"]})})}function AR(){const[n,e]=O.useState(1),[t,r]=O.useState(""),[s,i]=O.useState(""),[o,a]=O.useState(""),[l,c]=O.useState(""),u=O.useMemo(()=>({page:n,pageSize:10,search:t,brandId:s||void 0,categoryId:o||void 0,sort:l||void 0}),[n,t,s,o,l]),{data:d,isLoading:h}=eR(u),{data:p}=Qh(),{data:_}=Ey(),v=O.useMemo(()=>{const w=_??[],y=new Map;for(const x of w){const C=x.parentId??null;y.has(C)||y.set(C,[]),y.get(C).push(x)}for(const x of y.values())x.sort((C,N)=>C.name.localeCompare(N.name));const g=[],b=x=>{const C=y.get(x??null)||[];for(const N of C){const k=y.get(N.id)||[];g.push({...N,hasChildren:k.length>0}),b(N.id)}};return b(null),g},[_]);return m.jsxs("div",{className:"space-y-4",children:[m.jsx(Fs,{title:"",actions:m.jsx("a",{href:"/products/new",className:"btn",children:" "}),children:"         "}),m.jsx("div",{className:"card p-4",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[m.jsx("input",{value:t,onChange:w=>r(w.target.value),className:"input",placeholder:"..."}),m.jsxs("select",{className:"input",value:s,onChange:w=>i(w.target.value),children:[m.jsx("option",{value:"",children:""}),p==null?void 0:p.map(w=>m.jsx("option",{value:w.id,children:w.name},w.id))]}),m.jsxs("select",{className:"input",value:o,onChange:w=>a(w.target.value),children:[m.jsx("option",{value:"",children:""}),v==null?void 0:v.map(w=>{const y="".repeat(Math.max(0,w.depth-1)),g=w.hasChildren?"":"";return m.jsx("option",{value:w.id,children:`${y}${g} ${w.name}`},w.id)})]}),m.jsxs("select",{className:"input",value:l,onChange:w=>c(w.target.value),children:[m.jsx("option",{value:"",children:" (: )"}),m.jsx("option",{value:"name",children:"name"}),m.jsx("option",{value:"-name",children:"-name"}),m.jsx("option",{value:"code",children:"code"}),m.jsx("option",{value:"-code",children:"-code"}),m.jsx("option",{value:"created",children:"created"}),m.jsx("option",{value:"-created",children:"-created"}),m.jsx("option",{value:"updated",children:"updated"}),m.jsx("option",{value:"-updated",children:"-updated"})]}),m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("button",{className:"btn-secondary px-3 py-2 rounded",onClick:()=>{r(""),i(""),a(""),c(""),e(1)},children:" "})})]})}),m.jsx("div",{className:"card p-4",children:h?m.jsx(Oi,{}):m.jsxs(m.Fragment,{children:[m.jsx(YN,{items:(d==null?void 0:d.items)??[]}),m.jsxs("div",{className:"flex items-center justify-between mt-4",children:[m.jsx("button",{disabled:n<=1,className:"btn-secondary px-3 py-2 rounded",onClick:()=>e(w=>Math.max(1,w-1)),children:""}),m.jsxs("div",{className:"text-sm text-gray-600",children:[" ",(d==null?void 0:d.page)??n,"  ",(d==null?void 0:d.totalPages)??1]}),m.jsx("button",{disabled:((d==null?void 0:d.page)??1)>=((d==null?void 0:d.totalPages)??1),className:"btn-secondary px-3 py-2 rounded",onClick:()=>e(w=>w+1),children:""})]})]})})]})}function OR({product:n}){var y;const e=O.useRef(null),[t,r]=O.useState(!1),[s,i]=O.useState(""),o=nR(n.id),a=rR(n.id),l=sR(n.id),c=iR(n.id),[u,d]=O.useState(n.images.map(g=>g.id)),h=async g=>{if(g){r(!0);try{await o.mutateAsync({file:g,alt:s||void 0})}catch(b){alert((b==null?void 0:b.message)||"  ")}finally{r(!1)}}},p=O.useRef(null),_=g=>b=>{p.current=g,b.dataTransfer.effectAllowed="move"},v=g=>b=>{b.preventDefault(),b.dataTransfer.dropEffect="move"},w=g=>async b=>{b.preventDefault();const x=p.current;if(p.current=null,!x||x===g)return;const C=[...u],N=C.indexOf(x),k=C.indexOf(g);if(!(N===-1||k===-1)){C.splice(k,0,C.splice(N,1)[0]),d(C);try{await l.mutateAsync(C)}catch(P){alert((P==null?void 0:P.message)||"   ")}}};return m.jsxs("div",{className:"card p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h3",{className:"font-semibold",children:""}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{className:"input",placeholder:"ALT ()",value:s,onChange:g=>i(g.target.value)}),m.jsx("input",{ref:e,type:"file",className:"hidden",accept:"image/*",onChange:g=>{var b;return h((b=g.target.files)==null?void 0:b[0])}}),m.jsx("button",{className:"btn",onClick:()=>{var g;return(g=e.current)==null?void 0:g.click()},disabled:t,children:" "})]})]}),(y=n.images)!=null&&y.length?m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:n.images.map(g=>{var b;return m.jsxs("div",{draggable:!0,onDragStart:_(g.id),onDragOver:v(g.id),onDrop:w(g.id),className:`relative group border rounded overflow-hidden ${(b=n.images.find(x=>x.id===g.id))!=null&&b.isMain?"ring-2 ring-gray-900":""}`,children:[m.jsx("img",{src:wy(g.url),alt:"product",className:"w-full h-32 object-cover"}),m.jsxs("div",{className:"absolute inset-x-0 bottom-0 bg-black/50 text-white text-xs opacity-0 group-hover:opacity-100 transition flex items-center justify-between px-2 py-1",children:[m.jsx("button",{className:"underline",onClick:async()=>{try{await a.mutateAsync(g.id)}catch(x){alert((x==null?void 0:x.message)||"     ")}},children:""}),m.jsx("button",{className:"underline",onClick:async()=>{if(confirm(" "))try{await c.mutateAsync(g.id)}catch(x){alert((x==null?void 0:x.message)||"  ")}},children:""})]})]},g.id)})}):m.jsx("p",{className:"text-sm text-gray-500",children:"   ."})]})}function lE({value:n,onChange:e}){const[t,r]=O.useState({key:"",value:""}),s=()=>{t.key.trim()&&(e([...n,{key:t.key.trim(),value:t.value}]),r({key:"",value:""}))},i=o=>e(n.filter((a,l)=>l!==o));return m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[m.jsx("input",{className:"input",placeholder:"",value:t.key,onChange:o=>r(a=>({...a,key:o.target.value}))}),m.jsx("input",{className:"input sm:col-span-2",placeholder:"",value:t.value,onChange:o=>r(a=>({...a,value:o.target.value}))})]}),m.jsx("button",{type:"button",className:"btn",onClick:s,children:""}),n.length>0&&m.jsx("div",{className:"border rounded",children:n.map((o,a)=>m.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 border-b last:border-0 text-sm",children:[m.jsx("div",{className:"font-mono",children:o.key}),m.jsx("div",{className:"flex-1 truncate",children:o.value}),m.jsx("button",{type:"button",className:"btn-secondary px-2 py-1 rounded",onClick:()=>i(a),children:""})]},a))})]})}var cE={exports:{}},Bf={exports:{}},zf,m_;function NR(){if(m_)return zf;m_=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return zf=n,zf}var Uf,p_;function RR(){if(p_)return Uf;p_=1;var n=NR();function e(){}function t(){}return t.resetWarningCache=e,Uf=function(){function r(o,a,l,c,u,d){if(d!==n){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function s(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return i.PropTypes=i,i},Uf}var g_;function MR(){return g_||(g_=1,Bf.exports=RR()()),Bf.exports}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Sy{constructor(e){f(this,"crashes",[]);f(this,"state","initializing");f(this,"_crashNumberLimit");f(this,"_now",Date.now);f(this,"_minimumNonErrorTimePeriod");f(this,"_boundErrorHandler");f(this,"_listeners");if(this.crashes=[],this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const r="error"in t?t.error:t.reason;r instanceof Error&&this._handleError(r,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]=this._listeners[e].filter(r=>r!==t)}_fire(e,...t){const r=this._listeners[e]||[];for(const s of r)s.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});const r=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:r}),r?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const e=this.crashes[this.crashes.length-1].date,t=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(e-t)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}function IR(n){return n==null||typeof n!="object"&&typeof n!="function"}function jR(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function DR(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const FR="[object RegExp]",uE="[object String]",dE="[object Number]",hE="[object Boolean]",fE="[object Arguments]",LR="[object Symbol]",VR="[object Date]",$R="[object Map]",BR="[object Set]",zR="[object Array]",UR="[object ArrayBuffer]",WR="[object Object]",qR="[object DataView]",HR="[object Uint8Array]",KR="[object Uint8ClampedArray]",QR="[object Uint16Array]",ZR="[object Uint32Array]",JR="[object Int8Array]",GR="[object Int16Array]",YR="[object Int32Array]",XR="[object Float32Array]",eM="[object Float64Array]";function tM(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function nM(n,e){return Ca(n,void 0,n,new Map,e)}function Ca(n,e,t,r=new Map,s=void 0){const i=s==null?void 0:s(n,e,t,r);if(i!=null)return i;if(IR(n))return n;if(r.has(n))return r.get(n);if(Array.isArray(n)){const o=new Array(n.length);r.set(n,o);for(let a=0;a<n.length;a++)o[a]=Ca(n[a],a,t,r,s);return Object.hasOwn(n,"index")&&(o.index=n.index),Object.hasOwn(n,"input")&&(o.input=n.input),o}if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp){const o=new RegExp(n.source,n.flags);return o.lastIndex=n.lastIndex,o}if(n instanceof Map){const o=new Map;r.set(n,o);for(const[a,l]of n)o.set(a,Ca(l,a,t,r,s));return o}if(n instanceof Set){const o=new Set;r.set(n,o);for(const a of n)o.add(Ca(a,void 0,t,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(n))return n.subarray();if(tM(n)){const o=new(Object.getPrototypeOf(n)).constructor(n.length);r.set(n,o);for(let a=0;a<n.length;a++)o[a]=Ca(n[a],a,t,r,s);return o}if(n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);if(n instanceof DataView){const o=new DataView(n.buffer.slice(0),n.byteOffset,n.byteLength);return r.set(n,o),ro(o,n,t,r,s),o}if(typeof File<"u"&&n instanceof File){const o=new File([n],n.name,{type:n.type});return r.set(n,o),ro(o,n,t,r,s),o}if(n instanceof Blob){const o=new Blob([n],{type:n.type});return r.set(n,o),ro(o,n,t,r,s),o}if(n instanceof Error){const o=new n.constructor;return r.set(n,o),o.message=n.message,o.name=n.name,o.stack=n.stack,o.cause=n.cause,ro(o,n,t,r,s),o}if(typeof n=="object"&&rM(n)){const o=Object.create(Object.getPrototypeOf(n));return r.set(n,o),ro(o,n,t,r,s),o}return n}function ro(n,e,t=n,r,s){const i=[...Object.keys(e),...jR(e)];for(let o=0;o<i.length;o++){const a=i[o],l=Object.getOwnPropertyDescriptor(n,a);(l==null||l.writable)&&(n[a]=Ca(e[a],a,t,r,s))}}function rM(n){switch(DR(n)){case fE:case zR:case UR:case qR:case hE:case VR:case XR:case eM:case JR:case GR:case YR:case $R:case dE:case WR:case FR:case BR:case uE:case LR:case HR:case KR:case QR:case ZR:return!0;default:return!1}}function sM(n,e){return nM(n,(t,r,s,i)=>{const o=e==null?void 0:e(t,r,s,i);if(o!=null)return o;if(typeof n=="object")switch(Object.prototype.toString.call(n)){case dE:case uE:case hE:{const a=new n.constructor(n==null?void 0:n.valueOf());return ro(a,n),a}case fE:{const a={};return ro(a,n),a.length=n.length,a[Symbol.iterator]=n[Symbol.iterator],a}default:return}})}function iM(n){return typeof n=="object"&&n!==null}function oM(n,e,{signal:t,edges:r}={}){let s,i=null;const o=r!=null&&r.includes("leading"),a=r==null||r.includes("trailing"),l=()=>{i!==null&&(n.apply(s,i),s=void 0,i=null)},c=()=>{a&&l(),p()};let u=null;const d=()=>{u!=null&&clearTimeout(u),u=setTimeout(()=>{u=null,c()},e)},h=()=>{u!==null&&(clearTimeout(u),u=null)},p=()=>{h(),s=void 0,i=null},_=()=>{h(),l()},v=function(...w){if(t!=null&&t.aborted)return;s=this,i=w;const y=u==null;d(),o&&y&&l()};return v.schedule=d,v.cancel=p,v.flush=_,t==null||t.addEventListener("abort",p,{once:!0}),v}function aM(n,e=0,t={}){typeof t!="object"&&(t={});const{leading:r=!1,trailing:s=!0,maxWait:i}=t,o=Array(2);r&&(o[0]="leading"),s&&(o[1]="trailing");let a,l=null;const c=oM(function(...h){a=n.apply(this,h),l=null},e,{edges:o}),u=function(...h){return i!=null&&(l===null&&(l=Date.now()),Date.now()-l>=i)?(a=n.apply(this,h),l=Date.now(),c.cancel(),c.schedule(),a):(c.apply(this,h),a)},d=()=>(c.flush(),a);return u.cancel=c.cancel,u.flush=d,u}function lM(n,e=0,t={}){typeof t!="object"&&(t={});const{leading:r=!0,trailing:s=!0}=t;return aM(n,e,{leading:r,trailing:s,maxWait:e})}function mE(n){var t;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const r=n[Symbol.toStringTag];return r==null||!((t=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&t.writable)?!1:n.toString()===`[object ${r}]`}let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function y_(n){return iM(n)&&n.nodeType===1&&!mE(n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Fp(n,e=new Set){const t=[n],r=new Set;let s=0;for(;t.length>s;){const i=t[s++];if(!(r.has(i)||!cM(i)||e.has(i)))if(r.add(i),Symbol.iterator in i)try{for(const o of i)t.push(o)}catch{}else for(const o in i)o!=="defaultValue"&&t.push(i[o])}return r}function cM(n){const e=Object.prototype.toString.call(n),t=typeof n;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||n===void 0||n===null||n._watchdogExcluded||n instanceof EventTarget||n instanceof Event)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function pE(n,e,t=new Set){if(n===e&&uM(n))return!0;const r=Fp(n,t),s=Fp(e,t);for(const i of r)if(s.has(i))return!0;return!1}function uM(n){return typeof n=="object"&&n!==null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class gE extends Sy{constructor(t,r={}){super(r);f(this,"_editor",null);f(this,"_lifecyclePromise",null);f(this,"_throttledSave");f(this,"_data");f(this,"_lastDocumentVersion");f(this,"_elementOrData");f(this,"_initUsingData",!0);f(this,"_editables",{});f(this,"_config");f(this,"_excludedProps");this._throttledSave=lM(this._save.bind(this),typeof r.saveInterval=="number"?r.saveInterval:5e3),t&&(this._creator=(s,i)=>t.create(s,i)),this._destructor=s=>s.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(t=>{console.error("An error happened during the editor destroying.",t)}).then(()=>{const t={},r=[],s=this._config.rootsAttributes||{},i={};for(const[a,l]of Object.entries(this._data.roots))l.isLoaded?(t[a]="",i[a]=s[a]||{}):r.push(a);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:r,rootsAttributes:i,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(dM),this._initUsingData?this.create(t,o,o.context):y_(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(t=this._elementOrData,r=this._config,s){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=t,this._initUsingData=typeof t=="string"||Object.keys(t).length>0&&typeof Object.values(t)[0]=="string",this._config=this._cloneEditorConfiguration(r)||{},this._config.context=s,this._creator(t,this._config))).then(i=>{this._editor=i,i.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=i.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const t=this._editor;return this._editor=null,t.model.document.off("change:data",this._throttledSave),this._destructor(t)})}_save(){const t=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=t}catch(r){console.error(r,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(t){this._excludedProps=t}_getData(){const t=this._editor,r=t.model.document.roots.filter(l=>l.isAttached()&&l.rootName!="$graveyard"),{plugins:s}=t,i=s.has("CommentsRepository")&&s.get("CommentsRepository"),o=s.has("TrackChanges")&&s.get("TrackChanges"),a={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};r.forEach(l=>{a.roots[l.rootName]={content:JSON.stringify(Array.from(l.getChildren())),attributes:JSON.stringify(Array.from(l.getAttributes())),isLoaded:l._isLoaded}});for(const l of t.model.markers)l._affectsData&&(a.markers[l.name]={rangeJSON:l.getRange().toJSON(),usingOperation:l._managedUsingOperations,affectsData:l._affectsData});return i&&(a.commentThreads=JSON.stringify(i.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(a.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),a}_getEditables(){const t={};for(const r of this.editor.model.document.getRootNames()){const s=this.editor.ui.getEditableElement(r);s&&(t[r]=s)}return t}_isErrorComingFromThisItem(t){return pE(this._editor,t.context,this._excludedProps)}_cloneEditorConfiguration(t){return sM(t,(r,s)=>{if(y_(r)||s==="context")return r})}}class dM{constructor(e){f(this,"editor");f(this,"_data");this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,t){if("name"in t){const r=e.createElement(t.name,t.attributes);if(t.children)for(const s of t.children)r._appendChild(this._createNode(e,s));return r}else return e.createText(t.data,t.attributes)}_restoreEditorData(e){const t=this.editor;Object.entries(this._data.roots).forEach(([r,{content:s,attributes:i}])=>{const o=JSON.parse(s),a=JSON.parse(i),l=t.model.document.getRoot(r);for(const[c,u]of a)e.setAttribute(c,u,l);for(const c of o){const u=this._createNode(e,c);e.insert(u,l,"end")}}),Object.entries(this._data.markers).forEach(([r,s])=>{const{document:i}=t.model,{rangeJSON:{start:o,end:a},...l}=s,c=i.getRoot(o.root),u=e.createPositionFromPath(c,o.path,o.stickiness),d=e.createPositionFromPath(c,a.path,a.stickiness),h=e.createRange(u,d);e.addMarker(r,{range:h,...l})})}_restoreCollaborationData(){const e=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);if(this.editor.plugins.has("CommentsRepository")){const r=this.editor.plugins.get("CommentsRepository");for(const s of r.getCommentThreads())r._removeCommentThread({threadId:s.id});e.forEach(s=>{const i=this.editor.config.get("collaboration.channelId");this.editor.plugins.get("CommentsRepository").addCommentThread({channelId:i,...s})})}if(this.editor.plugins.has("TrackChangesEditing")){const r=this.editor.plugins.get("TrackChangesEditing");for(const s of r.getSuggestions())r._removeSuggestion(s);t.forEach(s=>{r.addSuggestionData(s)})}}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const gc=Symbol("MainQueueId");class hM extends Sy{constructor(t,r={}){super(r);f(this,"_watchdogs",new Map);f(this,"_watchdogConfig");f(this,"_context",null);f(this,"_contextProps",new Set);f(this,"_actionQueues",new fM);f(this,"_contextConfig");f(this,"_item");this._watchdogConfig=r,this._creator=s=>t.create(s),this._destructor=s=>s.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}get context(){return this._context}create(t={}){return this._actionQueues.enqueue(gc,()=>(this._contextConfig=t,this._create()))}getItem(t){return this._getWatchdog(t)._item}getItemState(t){return this._getWatchdog(t).state}add(t){const r=v_(t);return Promise.all(r.map(s=>this._actionQueues.enqueue(s.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let i;if(this._watchdogs.has(s.id))throw new Error(`Item with the given id is already added: '${s.id}'.`);if(s.type==="editor")return i=new gE(null,this._watchdogConfig),i.setCreator(s.creator),i._setExcludedProperties(this._contextProps),s.destructor&&i.setDestructor(s.destructor),this._watchdogs.set(s.id,i),i.on("error",(o,{error:a,causesRestart:l})=>{this._fire("itemError",{itemId:s.id,error:a}),l&&this._actionQueues.enqueue(s.id,()=>new Promise(c=>{const u=()=>{i.off("restart",u),this._fire("itemRestart",{itemId:s.id}),c()};i.on("restart",u)}))}),i.create(s.sourceElementOrData,s.config,this._context);throw new Error(`Not supported item type: '${s.type}'.`)})))}remove(t){const r=v_(t);return Promise.all(r.map(s=>this._actionQueues.enqueue(s,()=>{const i=this._getWatchdog(s);return this._watchdogs.delete(s),i.destroy()})))}destroy(){return this._actionQueues.enqueue(gc,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(gc,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(t=>{console.error("An error happened during destroying the context or items.",t)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(t=>(this._context=t,this._contextProps=Fp(this._context),Promise.all(Array.from(this._watchdogs.values()).map(r=>(r._setExcludedProperties(this._contextProps),r.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const t=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(r=>r.destroy())).then(()=>this._destructor(t))})}_getWatchdog(t){const r=this._watchdogs.get(t);if(!r)throw new Error(`Item with the given id was not registered: ${t}.`);return r}_isErrorComingFromThisItem(t){for(const r of this._watchdogs.values())if(r._isErrorComingFromThisItem(t))return!1;return pE(this._context,t.context)}}class fM{constructor(){f(this,"_onEmptyCallbacks",[]);f(this,"_queues",new Map);f(this,"_activeActions",0)}onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,t){const r=e===gc;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());const i=(r?Promise.all(this._queues.values()):Promise.all([this._queues.get(gc),this._queues.get(e)])).then(t),o=i.catch(()=>{});return this._queues.set(e,o),i.finally(()=>{this._activeActions--,this._queues.get(e)===o&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}}function v_(n){return Array.isArray(n)?n:[n]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class mM{constructor(e){f(this,"editor");f(this,"_entries",[]);f(this,"_frameStack",[]);f(this,"_errors",new Set);f(this,"_maxEntries");f(this,"_errorCallback");f(this,"_filterCallback");f(this,"_maxEntriesCallback");this.editor=e,e.config.define("actionsRecorder.maxEntries",1e3);const t=e.config.get("actionsRecorder");this._maxEntries=t.maxEntries,this._filterCallback=t.onFilter,this._errorCallback=t.onError,this._maxEntriesCallback=t.onMaxEntries||this._maxEntriesDefaultHandler,this._tapCommands(),this._tapOperationApply(),this._tapModelMethods(),this._tapModelSelection(),this._tapComponentFactory(),this._tapViewDocumentEvents()}static get pluginName(){return"ActionsRecorder"}static get isOfficialPlugin(){return!0}getEntries(){return this._entries.slice()}flushEntries(){this._entries=[]}_enterFrame(e,t){const r={timeStamp:new Date().toISOString(),...this._frameStack.length&&{parentEntry:this._frameStack.at(-1)},action:e,params:t==null?void 0:t.map(s=>es(s)),before:this._buildStateSnapshot()};return(!this._filterCallback||this._filterCallback(r,this._entries))&&this._entries.push(r),this._frameStack.push(r),r}_leaveFrame(e,t,r){const s=this._frameStack.pop();!s||s!==e||(t!==void 0&&(s.result=es(t)),r&&(s.error=es(r)),s.after=this._buildStateSnapshot(),r&&this._callErrorCallback(r),this._frameStack.length==0&&this._errors.clear(),this._entries.length>=this._maxEntries&&this._maxEntriesCallback())}_buildStateSnapshot(){const{model:e,isReadOnly:t,editing:r}=this.editor;return{documentVersion:e.document.version,editorReadOnly:t,editorFocused:r.view.document.isFocused,modelSelection:es(e.document.selection)}}_tapCommands(){for(const[e,t]of this.editor.commands)this._tapCommand(e,t);na(this.editor.commands,"add",{before:(e,[t,r])=>(this._tapCommand(t,r),!1)})}_tapOperationApply(){na(this.editor.model,"applyOperation",{before:(e,[t])=>t.baseVersion===null?!1:(e.callFrame=this._enterFrame("model.applyOperation",[t]),!0),after:e=>{this._leaveFrame(e.callFrame)},error:(e,t)=>{this._leaveFrame(e.callFrame,void 0,t)}})}_tapModelMethods(){for(const e of["insertContent","insertObject","deleteContent"])na(this.editor.model,e,{before:(t,...r)=>(t.callFrame=this._enterFrame(`model.${e}`,r),!0),after:(t,r)=>{this._leaveFrame(t.callFrame,r)},error:(t,r)=>{this._leaveFrame(t.callFrame,void 0,r)}})}_tapModelSelection(){const e=["change:range","change:attribute","change:marker"];this._tapFireMethod(this.editor.model.document.selection,e,{eventSource:"model-selection"})}_tapCommand(e,t){na(t,"execute",{before:(r,s)=>(r.callFrame=this._enterFrame(`commands.${e}:execute`,s),!0),after:(r,s)=>{this._leaveFrame(r.callFrame,s)},error:(r,s)=>{this._leaveFrame(r.callFrame,void 0,s)}})}_tapComponentFactory(){na(this.editor.ui.componentFactory,"create",{before:(e,[t])=>(e.componentName=t,e.callFrame=this._enterFrame(`component-factory.create:${t}`),!0),after:(e,t)=>{var s,i,o;const r={...e,eventSource:`component.${e.componentName}`};typeof t.fire=="function"&&this._tapFireMethod(t,["execute"],r),typeof((s=t.panelView)==null?void 0:s.fire)=="function"&&this._tapFireMethod(t.panelView,["execute"],r),typeof((o=(i=t.buttonView)==null?void 0:i.actionView)==null?void 0:o.fire)=="function"&&this._tapFireMethod(t.buttonView.actionView,["execute"],r),this._leaveFrame(e.callFrame)},error:(e,t)=>{this._leaveFrame(e.callFrame,void 0,t)}})}_tapViewDocumentEvents(){const e=["click","mousedown","mouseup","pointerdown","pointerup","focus","blur","keydown","keyup","selectionChange","compositionstart","compositionend","beforeinput","mutations","enter","delete","insertText","paste","copy","cut","dragstart","drop"];this._tapFireMethod(this.editor.editing.view.document,e,{eventSource:"observers"})}_tapFireMethod(e,t,r={}){na(e,"fire",{before:(s,[i,...o])=>{const a=typeof i=="string"?i:i.name;return t.includes(a)?(s.callFrame=this._enterFrame(`${s.eventSource}:${a}`,o),!0):!1},after:(s,i)=>{this._leaveFrame(s.callFrame,i)},error:(s,i)=>{this._leaveFrame(s.callFrame,void 0,i)}},r)}_callErrorCallback(e){if(!(!this._errorCallback||this._errors.has(e))){this._errors.add(e);try{this._errorCallback(e,this.getEntries())}catch(t){console.error("ActionsRecorder onError callback error:",t)}}}_maxEntriesDefaultHandler(){this._entries.shift()}}function na(n,e,t,r={}){const s=n[e];s[Symbol.for("Tapped method")]||(n[e]=(...i)=>{var l,c,u;const o=Object.assign({},r);let a;try{a=(l=t.before)==null?void 0:l.call(t,o,i);const d=s.apply(n,i);return a&&((c=t.after)==null||c.call(t,o,d)),d}catch(d){throw a&&((u=t.error)==null||u.call(t,o,d)),d}},n[e][Symbol.for("Tapped method")]=s)}function es(n,e=new WeakSet){var s;if(!n||["boolean","number","string"].includes(typeof n))return n;if(typeof n.toJSON=="function"){const i=n.toJSON();if(mE(i)||Array.isArray(i)||["string","number","boolean"].includes(typeof i))return es(i,e)}if(n instanceof Error)return{name:n.name,message:n.message,stack:n.stack};if(gM(n)||typeof n!="object")return{type:typeof n,constructor:((s=n.constructor)==null?void 0:s.name)||"unknown",string:String(n)};if(n instanceof File||n instanceof Blob||n instanceof FormData||n instanceof DataTransfer)return String(n);if(e.has(n))return;if(e.add(n),Array.isArray(n))return n.length?n.map(i=>es(i,e)):void 0;const t={},r=[];n.domEvent&&(r.push("domEvent","domTarget","view","document"),t.domEvent=pM(n.domEvent),t.target=es(n.target),n.dataTransfer&&(t.dataTransfer={types:n.dataTransfer.types,htmlData:n.dataTransfer.getData("text/html"),files:es(n.dataTransfer.files)}));for(const[i,o]of Object.entries(n)){if(i.startsWith("_")||r.includes(i)||typeof o=="function")continue;const a=es(o,e);a!==void 0&&(t[i]=a)}if(Symbol.iterator in n){const i=Array.from(n[Symbol.iterator]()).map(o=>es(o,e));i.length&&(t._items=i)}return Object.keys(t).length?t:void 0}function pM(n){let e={type:n.type,target:t(n.target)};n instanceof MouseEvent&&(e={...e,button:n.button,buttons:n.buttons,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,altKey:n.altKey,metaKey:n.metaKey}),n instanceof KeyboardEvent&&(e={...e,key:n.key,code:n.code,keyCode:n.keyCode,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,altKey:n.altKey,metaKey:n.metaKey,repeat:n.repeat}),n instanceof InputEvent&&(e={...e,data:n.data,inputType:n.inputType,isComposing:n.isComposing}),n instanceof PointerEvent&&(e={...e,isPrimary:n.isPrimary});function t(r){return r?r instanceof Element?{tagName:r.tagName,className:r.className,id:r.id}:r instanceof Window||r instanceof Document?{type:r.constructor.name}:{}:null}return e}function gM(n){return n&&typeof n.is=="function"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const yM=Object.freeze(Object.defineProperty({__proto__:null,ActionsRecorder:mM,ContextWatchdog:hM,EditorWatchdog:gE,Watchdog:Sy},Symbol.toStringTag,{value:"Module"})),vM=jC(yM);/*!
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */(function(n,e){(function(t,r){n.exports=r(O,MR(),vM)})(self,(t,r,s)=>(()=>{var i={546:c=>{c.exports=s},949:c=>{c.exports=r},155:c=>{c.exports=t}},o={};function a(c){var u=o[c];if(u!==void 0)return u.exports;var d=o[c]={exports:{}};return i[c](d,d.exports,a),d.exports}a.n=c=>{var u=c&&c.__esModule?()=>c.default:()=>c;return a.d(u,{a:u}),u},a.d=(c,u)=>{for(var d in u)a.o(u,d)&&!a.o(c,d)&&Object.defineProperty(c,d,{enumerable:!0,get:u[d]})},a.o=(c,u)=>Object.prototype.hasOwnProperty.call(c,u),a.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var l={};return(()=>{a.r(l),a.d(l,{CKEditor:()=>g,CKEditorContext:()=>w,useMultiRootEditor:()=>N});var c=a(155),u=a.n(c),d=a(949),h=a.n(d);const p=new Array(256).fill("").map((k,P)=>("0"+P.toString(16)).slice(-2));var _=a(546);const v=u().createContext("contextWatchdog");class w extends u().Component{constructor(P,j){super(P,j),this.contextWatchdog=null,this.props.isLayoutReady&&this._initializeContextWatchdog(this.props.config)}shouldComponentUpdate(P){return this._shouldComponentUpdate(P)}async _shouldComponentUpdate(P){return P.id!==this.props.id&&(this.contextWatchdog&&await this.contextWatchdog.destroy(),await this._initializeContextWatchdog(P.config)),P.isLayoutReady&&!this.contextWatchdog?(await this._initializeContextWatchdog(P.config),!0):this.props.children!==P.children}render(){return u().createElement(v.Provider,{value:this.contextWatchdog},this.props.children)}componentWillUnmount(){this._destroyContext()}async _initializeContextWatchdog(P){this.contextWatchdog=new _.ContextWatchdog(this.props.context,this.props.watchdogConfig),this.contextWatchdog.on("error",(j,I)=>{this.props.onError(I.error,{phase:"runtime",willContextRestart:I.causesRestart})}),this.contextWatchdog.on("stateChange",()=>{this.contextWatchdog.state==="ready"&&this.props.onReady&&this.props.onReady(this.contextWatchdog.context)}),await this.contextWatchdog.create(P).catch(j=>{this.props.onError(j,{phase:"initialization",willContextRestart:!1})})}async _destroyContext(){this.contextWatchdog&&(await this.contextWatchdog.destroy(),this.contextWatchdog=null)}}w.defaultProps={isLayoutReady:!0,onError:(k,P)=>console.error(k,P)},w.propTypes={id:h().string,isLayoutReady:h().bool,context:h().func,watchdogConfig:h().object,config:h().object,onReady:h().func,onError:h().func};const y="Lock from React integration (@ckeditor/ckeditor5-react)";class g extends u().Component{constructor(P){super(P),this.editorDestructionInProgress=null,this.domContainer=u().createRef(),this.watchdog=null;const{CKEDITOR_VERSION:j}=window;if(j){const[I]=j.split(".").map(Number);I<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}get editor(){return this.props.disableWatchdog?this.instance:this.watchdog?this.watchdog.editor:null}shouldComponentUpdate(P){return!!this.editor&&(P.id!==this.props.id||P.disableWatchdog!==this.props.disableWatchdog||(this._shouldUpdateEditor(P)&&this.editor.data.set(P.data),"disabled"in P&&(P.disabled?this.editor.enableReadOnlyMode(y):this.editor.disableReadOnlyMode(y)),!1))}async componentDidMount(){await this._initializeEditor()}async componentDidUpdate(){await this._destroyEditor(),await this._initializeEditor()}async componentWillUnmount(){await this._destroyEditor()}render(){return u().createElement("div",{ref:this.domContainer})}async _initializeEditor(){await this.editorDestructionInProgress,this.props.disableWatchdog?this.instance=await this._createEditor(this.domContainer.current,this._getConfig()):this.watchdog||(this.context instanceof _.ContextWatchdog?this.watchdog=new b(this.context):this.watchdog=new g._EditorWatchdog(this.props.editor,this.props.watchdogConfig),this.watchdog.setCreator((P,j)=>this._createEditor(P,j)),this.watchdog.on("error",(P,{error:j,causesRestart:I})=>{(this.props.onError||console.error)(j,{phase:"runtime",willEditorRestart:I})}),await this.watchdog.create(this.domContainer.current,this._getConfig()).catch(P=>{(this.props.onError||console.error)(P,{phase:"initialization",willEditorRestart:!1})}))}_createEditor(P,j){return this.props.editor.create(P,j).then(I=>{"disabled"in this.props&&this.props.disabled&&I.enableReadOnlyMode(y);const V=I.model.document,H=I.editing.view.document;return V.on("change:data",J=>{this.props.onChange&&this.props.onChange(J,I)}),H.on("focus",J=>{this.props.onFocus&&this.props.onFocus(J,I)}),H.on("blur",J=>{this.props.onBlur&&this.props.onBlur(J,I)}),setTimeout(()=>{this.props.onReady&&this.props.onReady(I)}),I})}async _destroyEditor(){this.editorDestructionInProgress=new Promise(P=>{setTimeout(async()=>this.watchdog?(await this.watchdog.destroy(),this.watchdog=null,P()):this.instance?(await this.instance.destroy(),this.instance=null,P()):void P())})}_shouldUpdateEditor(P){return this.props.data!==P.data&&this.editor.data.get()!==P.data}_getConfig(){const P=this.props.config||{};return this.props.data&&P.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...P,initialData:P.initialData||this.props.data||""}}}g.contextType=v,g.propTypes={editor:h().func.isRequired,data:h().string,config:h().object,disableWatchdog:h().bool,watchdogConfig:h().object,onChange:h().func,onReady:h().func,onFocus:h().func,onBlur:h().func,onError:h().func,disabled:h().bool,id:h().any},g._EditorWatchdog=_.EditorWatchdog;class b{constructor(P){this._contextWatchdog=P,this._id=function(){const j=4294967296*Math.random()>>>0,I=4294967296*Math.random()>>>0,V=4294967296*Math.random()>>>0,H=4294967296*Math.random()>>>0;return"e"+p[255&j]+p[j>>8&255]+p[j>>16&255]+p[j>>24&255]+p[255&I]+p[I>>8&255]+p[I>>16&255]+p[I>>24&255]+p[255&V]+p[V>>8&255]+p[V>>16&255]+p[V>>24&255]+p[255&H]+p[H>>8&255]+p[H>>16&255]+p[H>>24&255]}()}setCreator(P){this._creator=P}create(P,j){return this._contextWatchdog.add({sourceElementOrData:P,config:j,creator:this._creator,id:this._id,type:"editor"})}on(P,j){this._contextWatchdog.on("itemError",(I,{itemId:V,error:H})=>{V===this._id&&j(null,{error:H,causesRestart:void 0})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}const x="Lock from React integration (@ckeditor/ckeditor5-react)",C=({editor:k})=>{const P=(0,c.useRef)(null);return(0,c.useEffect)(()=>{const j=P.current;if(!k||!j)return;const I=k.ui.view.toolbar.element;return j&&j.appendChild(I),()=>{j&&j.removeChild(I)}},[k&&k.id]),u().createElement("div",{ref:P})},N=k=>{const P=(0,c.useRef)(null),j=(0,c.useRef)(null),I=(0,c.useContext)(v),[V,H]=(0,c.useState)(null),[J,ge]=(0,c.useState)(k.data),[Ee,Oe]=(0,c.useState)(k.rootsAttributes||{}),[Xe,z]=(0,c.useState)([]),ne=(0,c.useRef)(!0);(0,c.useEffect)(()=>((async()=>(await j.current,k.isLayoutReady!==!1&&await Vt()))(),()=>{Ht().then(()=>{j.current=null})}),[k.isLayoutReady]),(0,c.useEffect)(()=>{V&&(k.disabled?V.enableReadOnlyMode(x):V.disableReadOnlyMode(x))},[k.disabled]),(0,c.useEffect)(()=>{if(V&&!j.current){const ye=V.getFullData();ge({...ye}),Oe({...V.getRootsAttributes()}),z([...Object.keys(ye).map(Be=>Ie(V,Be))])}},[V&&V.id]);const ue=()=>{const ye=k.config||{};return k.data&&ye.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `data` property. The config value takes precedence over `data` property and will be used when both are specified."),{...ye,rootsAttributes:Ee}},Ie=(ye,Be)=>u().createElement("div",{id:Be,key:Be,ref:Ne=>{if(Ne){const ln=ye.ui.view.createEditable(Be,Ne);ye.ui.addEditable(ln),ye.editing.view.forceRender()}}}),Le=(ye,Be)=>k.editor.create(ye,Be).then(Ne=>{k.disabled&&k.disabled&&Ne.enableReadOnlyMode(x);const ln=Ne.model.document,Jt=Ne.editing.view.document;return ln.on("change:data",Wn=>((qn,mn)=>{const E=qn.model.document;if(!k.disableTwoWayDataBinding){const M={},L={};E.differ.getChanges().forEach(K=>{let B;if(B=K.type=="insert"||K.type=="remove"?K.position.root:K.range.root,!B.isAttached())return;const{rootName:W}=B;M[W]=qn.getData({rootName:W})}),E.differ.getChangedRoots().forEach(K=>{if(K.state)return void(M[K.name]!==void 0&&delete M[K.name]);const B=K.name;L[B]=qn.getRootAttributes(B)}),Object.keys(M).length&&ge(K=>({...K,...M})),Object.keys(L).length&&Oe(K=>({...K,...L}))}k.onChange&&k.onChange(mn,qn)})(Ne,Wn)),Ne.on("addRoot",(Wn,qn)=>((mn,E,M)=>{const L=M.rootName,K=Ie(mn,L);k.disableTwoWayDataBinding||(ge(B=>({...B,[L]:mn.getData({rootName:L})})),Oe(B=>({...B,[L]:mn.getRootAttributes(L)}))),z(B=>[...B,K])})(Ne,0,qn)),Ne.on("detachRoot",(Wn,qn)=>((mn,E,M)=>{const L=M.rootName;z(K=>K.filter(B=>B.props.id!==L)),k.disableTwoWayDataBinding||(ge(K=>{const{[L]:B,...W}=K;return{...W}}),Oe(K=>{const{[L]:B,...W}=K;return{...W}})),mn.detachEditable(M)})(Ne,0,qn)),Jt.on("focus",Wn=>{k.onFocus&&k.onFocus(Wn,Ne)}),Jt.on("blur",Wn=>{k.onBlur&&k.onBlur(Wn,Ne)}),H(Ne),k.onReady&&k.onReady(Ne),Ne}),Ht=async()=>{H(null),ge({}),Oe({}),z([]),j.current=new Promise(ye=>{setTimeout(async()=>P.current?(await P.current.destroy(),P.current=null,ye()):V?(await V.destroy(),ye()):void ye())})},Vt=async()=>{if(k.disableWatchdog)return void await Le(k.data,ue());if(P.current)return;I instanceof _.ContextWatchdog?P.current=new b(I):P.current=new _.EditorWatchdog(k.editor,k.watchdogConfig);const ye=P.current;ye.setCreator((Be,Ne)=>Le(Be,Ne)),ye.on("error",(Be,{error:Ne,causesRestart:ln})=>{(k.onError||console.error)(Ne,{phase:"runtime",willEditorRestart:ln})}),await ye.create(J,ue()).catch(Be=>{(k.onError||console.error)(Be,{phase:"initialization",willEditorRestart:!1})})};(0,c.useEffect)(()=>{if(V&&ne.current){ne.current=!1;const ye=Object.keys(J),Be=Object.keys(Ee);if(!ye.every(E=>Be.includes(E)))throw new Error("`data` and `attributes` objects must have the same keys (roots).");const Ne=V.getFullData(),ln=V.getRootsAttributes(),{addedKeys:Jt,removedKeys:Wn}=U(Ne,J||{}),qn=ye.some(E=>Ne[E]!==void 0&&JSON.stringify(Ne[E])!==JSON.stringify(J[E])),mn=Be.filter(E=>JSON.stringify(ln[E])!==JSON.stringify(Ee[E]));V.model.change(E=>{we(Jt),rt(Wn),qn&&vt(),mn.length&&dr(E,mn)})}},[J,Ee]);const U=(ye,Be)=>{const Ne=Object.keys(ye),ln=Object.keys(Be);return{addedKeys:ln.filter(Jt=>!Ne.includes(Jt)),removedKeys:Ne.filter(Jt=>!ln.includes(Jt))}},we=ye=>{ye.forEach(Be=>{V.addRoot(Be,{data:J[Be]||"",attributes:(Ee==null?void 0:Ee[Be])||{},isUndoable:!0})})},rt=ye=>{ye.forEach(Be=>{V.detachRoot(Be,!0)})},vt=()=>{V.data.set(J,{suppressErrorInCollaboration:!0})},dr=(ye,Be)=>{Be.forEach(Ne=>{Object.keys(Ee[Ne]).forEach(ln=>{V.registerRootAttribute(ln)}),ye.clearAttributes(V.model.document.getRoot(Ne)),ye.setAttributes(Ee[Ne],V.model.document.getRoot(Ne))})},an=(0,c.useCallback)(ye=>{ne.current=!0,ge(ye)},[ge]),cs=(0,c.useCallback)(ye=>{ne.current=!0,Oe(ye)},[Oe]);return{editor:V,editableElements:Xe,toolbarElement:u().createElement(C,{editor:V}),data:J,setData:an,attributes:Ee,setAttributes:cs}}})(),l})())})(cE);var wM=cE.exports;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function _M(n,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(r){if(r!=="default"&&!(r in n)){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}})}),Object.freeze(n)}let Lp;try{Lp={window,document}}catch{Lp={window:{},document:{}}}var ke=Lp;function bM(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const Zi=bM(),kt={isMac:yE(Zi),isWindows:xM(Zi),isGecko:kM(Zi),isSafari:EM(Zi),isiOS:SM(Zi),isAndroid:CM(Zi),isBlink:PM(Zi),features:{isRegExpUnicodePropertySupported:TM()}};function yE(n){return n.indexOf("macintosh")>-1}function xM(n){return n.indexOf("windows")>-1}function kM(n){return!!n.match(/gecko\/\d+/)}function EM(n){return n.indexOf(" applewebkit/")>-1&&n.indexOf("chrome")===-1}function SM(n){return!!n.match(/iphone|ipad/i)||yE(n)&&navigator.maxTouchPoints>0}function CM(n){return n.indexOf("android")>-1}function PM(n){return n.indexOf("chrome/")>-1&&n.indexOf("edge/")<0}function TM(){let n=!1;try{n="".search(new RegExp("[\\p{L}]","u"))===0}catch{}return n}function vE(n,e,t,r){t=t||function(l,c){return l===c};const s=Array.isArray(n)?n:Array.prototype.slice.call(n),i=Array.isArray(e)?e:Array.prototype.slice.call(e),o=function(l,c,u){const d=w_(l,c,u);if(d===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const h=__(l,d),p=__(c,d),_=w_(h,p,u),v=l.length-_,w=c.length-_;return{firstIndex:d,lastIndexOld:v,lastIndexNew:w}}(s,i,t);return r?function(l,c){const{firstIndex:u,lastIndexOld:d,lastIndexNew:h}=l;if(u===-1)return Array(c).fill("equal");let p=[];return u>0&&(p=p.concat(Array(u).fill("equal"))),h-u>0&&(p=p.concat(Array(h-u).fill("insert"))),d-u>0&&(p=p.concat(Array(d-u).fill("delete"))),h<c&&(p=p.concat(Array(c-h).fill("equal"))),p}(o,i.length):function(l,c){const u=[],{firstIndex:d,lastIndexOld:h,lastIndexNew:p}=c;return p-d>0&&u.push({index:d,type:"insert",values:l.slice(d,p)}),h-d>0&&u.push({index:d+(p-d),type:"delete",howMany:h-d}),u}(i,o)}function w_(n,e,t){for(let r=0;r<Math.max(n.length,e.length);r++)if(n[r]===void 0||e[r]===void 0||!t(n[r],e[r]))return r;return-1}function __(n,e){return n.slice(e).reverse()}function yc(n,e,t){t=t||function(v,w){return v===w};const r=n.length,s=e.length;if(r>200||s>200||r+s>300)return yc.fastDiff(n,e,t,!0);let i,o;if(s<r){const v=n;n=e,e=v,i="delete",o="insert"}else i="insert",o="delete";const a=n.length,l=e.length,c=l-a,u={},d={};function h(v){const w=(d[v-1]!==void 0?d[v-1]:-1)+1,y=d[v+1]!==void 0?d[v+1]:-1,g=w>y?-1:1;u[v+g]&&(u[v]=u[v+g].slice(0)),u[v]||(u[v]=[]),u[v].push(w>y?i:o);let b=Math.max(w,y),x=b-v;for(;x<a&&b<l&&t(n[x],e[b]);)x++,b++,u[v].push("equal");return b}let p,_=0;do{for(p=-_;p<c;p++)d[p]=h(p);for(p=c+_;p>c;p--)d[p]=h(p);d[c]=h(c),_++}while(d[c]!==l);return u[c].slice(1)}yc.fastDiff=vE;class dl{constructor(e,t){f(this,"source");f(this,"name");f(this,"path");f(this,"stop");f(this,"off");f(this,"return");this.source=e,this.name=t,this.path=[],this.stop=function r(){r.called=!0},this.off=function r(){r.called=!0}}}const yn=new Array(256).fill("").map((n,e)=>("0"+e.toString(16)).slice(-2));function El(){const[n,e,t,r]=crypto.getRandomValues(new Uint32Array(4));return"e"+yn[255&n]+yn[n>>8&255]+yn[n>>16&255]+yn[n>>24&255]+yn[255&e]+yn[e>>8&255]+yn[e>>16&255]+yn[e>>24&255]+yn[255&t]+yn[t>>8&255]+yn[t>>16&255]+yn[t>>24&255]+yn[255&r]+yn[r>>8&255]+yn[r>>16&255]+yn[r>>24&255]}const Co={get(n="normal"){return typeof n!="number"?this[n]||this.normal:n},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function AM(n,e){const t=Co.get(e.priority);for(let r=0;r<n.length;r++)if(Co.get(n[r].priority)<t)return void n.splice(r,0,e);n.push(e)}class A extends Error{constructor(t,r,s){super(function(i,o){const a=new WeakSet,l=(d,h)=>{if(typeof h=="object"&&h!==null){if(a.has(h))return`[object ${h.constructor.name}]`;a.add(h)}return h},c=o?` ${JSON.stringify(o,l)}`:"",u=wE(i);return i+c+u}(t,s));f(this,"context");f(this,"data");this.name="CKEditorError",this.context=r,this.data=s}is(t){return t==="CKEditorError"}static rethrowUnexpectedError(t,r){if(t.is&&t.is("CKEditorError"))throw t;const s=new A(t.message,r);throw s.stack=t.stack,s}}function Pt(n,e){console.warn(...OM(n,e))}function wE(n){return`
Read more: https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html#error-${n}`}function OM(n,e){const t=wE(n);return e?[n,e,t]:[n,t]}const NM="43.2.0",RM=new Date(2024,9,2);if(globalThis.CKEDITOR_VERSION)throw new A("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=NM;const ua=Symbol("listeningTo"),Vp=Symbol("emitterId"),ds=Symbol("delegations"),_E=nt(Object);function nt(n){return n?class extends n{on(e,t,r){this.listenTo(this,e,t,r)}once(e,t,r){let s=!1;this.listenTo(this,e,(i,...o)=>{s||(s=!0,i.off(),t.call(this,i,...o))},r)}off(e,t){this.stopListening(this,e,t)}listenTo(e,t,r,s={}){let i,o;this[ua]||(this[ua]={});const a=this[ua];Wf(e)||bE(e);const l=Wf(e);(i=a[l])||(i=a[l]={emitter:e,callbacks:{}}),(o=i.callbacks[t])||(o=i.callbacks[t]=[]),o.push(r),function(c,u,d,h,p){u._addEventListener?u._addEventListener(d,h,p):c._addEventListener.call(u,d,h,p)}(this,e,t,r,s)}stopListening(e,t,r){const s=this[ua];let i=e&&Wf(e);const o=s&&i?s[i]:void 0,a=o&&t?o.callbacks[t]:void 0;if(!(!s||e&&!o||t&&!a))if(r)qf(this,e,t,r),a.indexOf(r)!==-1&&(a.length===1?delete o.callbacks[t]:qf(this,e,t,r));else if(a){for(;r=a.pop();)qf(this,e,t,r);delete o.callbacks[t]}else if(o){for(t in o.callbacks)this.stopListening(e,t);delete s[i]}else{for(i in s)this.stopListening(s[i].emitter);delete this[ua]}}fire(e,...t){try{const r=e instanceof dl?e:new dl(this,e),s=r.name;let i=kE(this,s);if(r.path.push(this),i){const a=[r,...t];i=Array.from(i);for(let l=0;l<i.length&&(i[l].callback.apply(this,a),r.off.called&&(delete r.off.called,this._removeEventListener(s,i[l].callback)),!r.stop.called);l++);}const o=this[ds];if(o){const a=o.get(s),l=o.get("*");a&&b_(a,r,t),l&&b_(l,r,t)}return r.return}catch(r){A.rethrowUnexpectedError(r,this)}}delegate(...e){return{to:(t,r)=>{this[ds]||(this[ds]=new Map),e.forEach(s=>{const i=this[ds].get(s);i?i.set(t,r):this[ds].set(s,new Map([[t,r]]))})}}}stopDelegating(e,t){if(this[ds])if(e)if(t){const r=this[ds].get(e);r&&r.delete(t)}else this[ds].delete(e);else this[ds].clear()}_addEventListener(e,t,r){(function(o,a){const l=xE(o);if(l[a])return;let c=a,u=null;const d=[];for(;c!==""&&!l[c];)l[c]={callbacks:[],childEvents:[]},d.push(l[c]),u&&l[c].childEvents.push(u),u=c,c=c.substr(0,c.lastIndexOf(":"));if(c!==""){for(const h of d)h.callbacks=l[c].callbacks.slice();l[c].childEvents.push(u)}})(this,e);const s=$p(this,e),i={callback:t,priority:Co.get(r.priority)};for(const o of s)AM(o,i)}_removeEventListener(e,t){const r=$p(this,e);for(const s of r)for(let i=0;i<s.length;i++)s[i].callback==t&&(s.splice(i,1),i--)}}:_E}function bE(n,e){n[Vp]||(n[Vp]=e||El())}function Wf(n){return n[Vp]}function xE(n){return n._events||Object.defineProperty(n,"_events",{value:{}}),n._events}function $p(n,e){const t=xE(n)[e];if(!t)return[];let r=[t.callbacks];for(let s=0;s<t.childEvents.length;s++){const i=$p(n,t.childEvents[s]);r=r.concat(i)}return r}function kE(n,e){let t;return n._events&&(t=n._events[e])&&t.callbacks.length?t.callbacks:e.indexOf(":")>-1?kE(n,e.substr(0,e.lastIndexOf(":"))):null}function b_(n,e,t){for(let[r,s]of n){s?typeof s=="function"&&(s=s(e.name)):s=e.name;const i=new dl(e.source,s);i.path=[...e.path],r.fire(i,...t)}}function qf(n,e,t,r){e._removeEventListener?e._removeEventListener(t,r):n._removeEventListener.call(e,t,r)}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{nt[n]=_E.prototype[n]});var EE=typeof global=="object"&&global&&global.Object===Object&&global,MM=typeof self=="object"&&self&&self.Object===Object&&self,Wr=EE||MM||Function("return this")(),as=Wr.Symbol,SE=Object.prototype,IM=SE.hasOwnProperty,jM=SE.toString,Wl=as?as.toStringTag:void 0,DM=Object.prototype.toString,x_=as?as.toStringTag:void 0;function zi(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":x_&&x_ in Object(n)?function(e){var t=IM.call(e,Wl),r=e[Wl];try{e[Wl]=void 0;var s=!0}catch{}var i=jM.call(e);return s&&(t?e[Wl]=r:delete e[Wl]),i}(n):function(e){return DM.call(e)}(n)}function Er(n){return n!=null&&typeof n=="object"}function Zh(n){return typeof n=="symbol"||Er(n)&&zi(n)=="[object Symbol]"}function FM(n,e){for(var t=-1,r=n==null?0:n.length,s=Array(r);++t<r;)s[t]=e(n[t],t,n);return s}var zr=Array.isArray,k_=as?as.prototype:void 0,E_=k_?k_.toString:void 0;function CE(n){if(typeof n=="string")return n;if(zr(n))return FM(n,CE)+"";if(Zh(n))return E_?E_.call(n):"";var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}var LM=/\s/,VM=/^\s+/;function $M(n){return n&&n.slice(0,function(e){for(var t=e.length;t--&&LM.test(e.charAt(t)););return t}(n)+1).replace(VM,"")}function At(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var BM=/^[-+]0x[0-9a-f]+$/i,zM=/^0b[01]+$/i,UM=/^0o[0-7]+$/i,WM=parseInt;function S_(n){if(typeof n=="number")return n;if(Zh(n))return NaN;if(At(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=At(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=$M(n);var t=zM.test(n);return t||UM.test(n)?WM(n.slice(2),t?2:8):BM.test(n)?NaN:+n}function PE(n){return n}function Lo(n){if(!At(n))return!1;var e=zi(n);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"}var Hf=Wr["__core-js_shared__"],C_=function(){var n=/[^.]+$/.exec(Hf&&Hf.keys&&Hf.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),qM=Function.prototype.toString;function Wo(n){if(n!=null){try{return qM.call(n)}catch{}try{return n+""}catch{}}return""}var HM=/^\[object .+?Constructor\]$/,KM=Function.prototype,QM=Object.prototype,ZM=KM.toString,JM=QM.hasOwnProperty,GM=RegExp("^"+ZM.call(JM).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function YM(n){return!(!At(n)||(e=n,C_&&C_ in e))&&(Lo(n)?GM:HM).test(Wo(n));var e}function qo(n,e){var t=function(r,s){return r==null?void 0:r[s]}(n,e);return YM(t)?t:void 0}var Bp=qo(Wr,"WeakMap"),P_=Object.create,XM=function(){function n(){}return function(e){if(!At(e))return{};if(P_)return P_(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();function TE(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var eI=Date.now,ch=function(){try{var n=qo(Object,"defineProperty");return n({},"",{}),n}catch{}}(),tI=function(n){var e=0,t=0;return function(){var r=eI(),s=16-(r-t);if(t=r,s>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}(ch?function(n,e){return ch(n,"toString",{configurable:!0,enumerable:!1,value:(t=e,function(){return t}),writable:!0});var t}:PE),nI=/^(?:0|[1-9]\d*)$/;function Cy(n,e){var t=typeof n;return!!(e=e??9007199254740991)&&(t=="number"||t!="symbol"&&nI.test(n))&&n>-1&&n%1==0&&n<e}function Py(n,e,t){e=="__proto__"&&ch?ch(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function xu(n,e){return n===e||n!=n&&e!=e}var rI=Object.prototype.hasOwnProperty;function Ty(n,e,t){var r=n[e];rI.call(n,e)&&xu(r,t)&&(t!==void 0||e in n)||Py(n,e,t)}function Pa(n,e,t,r){var s=!t;t||(t={});for(var i=-1,o=e.length;++i<o;){var a=e[i],l=void 0;l===void 0&&(l=n[a]),s?Py(t,a,l):Ty(t,a,l)}return t}var T_=Math.max;function sI(n,e){return tI(function(t,r,s){return r=T_(r===void 0?t.length-1:r,0),function(){for(var i=arguments,o=-1,a=T_(i.length-r,0),l=Array(a);++o<a;)l[o]=i[r+o];o=-1;for(var c=Array(r+1);++o<r;)c[o]=i[o];return c[r]=s(l),function(u,d,h){switch(h.length){case 0:return u.call(d);case 1:return u.call(d,h[0]);case 2:return u.call(d,h[0],h[1]);case 3:return u.call(d,h[0],h[1],h[2])}return u.apply(d,h)}(t,this,c)}}(n,e,PE),n+"")}function AE(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=9007199254740991}function Jh(n){return n!=null&&AE(n.length)&&!Lo(n)}function Ay(n){return sI(function(e,t){var r=-1,s=t.length,i=s>1?t[s-1]:void 0,o=s>2?t[2]:void 0;for(i=n.length>3&&typeof i=="function"?(s--,i):void 0,o&&function(l,c,u){if(!At(u))return!1;var d=typeof c;return!!(d=="number"?Jh(u)&&Cy(c,u.length):d=="string"&&c in u)&&xu(u[c],l)}(t[0],t[1],o)&&(i=s<3?void 0:i,s=1),e=Object(e);++r<s;){var a=t[r];a&&n(e,a,r,i)}return e})}var iI=Object.prototype;function Oy(n){var e=n&&n.constructor;return n===(typeof e=="function"&&e.prototype||iI)}function A_(n){return Er(n)&&zi(n)=="[object Arguments]"}var OE=Object.prototype,oI=OE.hasOwnProperty,aI=OE.propertyIsEnumerable,zp=A_(function(){return arguments}())?A_:function(n){return Er(n)&&oI.call(n,"callee")&&!aI.call(n,"callee")},NE=typeof nr=="object"&&nr&&!nr.nodeType&&nr,O_=NE&&typeof rr=="object"&&rr&&!rr.nodeType&&rr,N_=O_&&O_.exports===NE?Wr.Buffer:void 0,Xc=(N_?N_.isBuffer:void 0)||function(){return!1},pt={};function Ny(n){return function(e){return n(e)}}pt["[object Float32Array]"]=pt["[object Float64Array]"]=pt["[object Int8Array]"]=pt["[object Int16Array]"]=pt["[object Int32Array]"]=pt["[object Uint8Array]"]=pt["[object Uint8ClampedArray]"]=pt["[object Uint16Array]"]=pt["[object Uint32Array]"]=!0,pt["[object Arguments]"]=pt["[object Array]"]=pt["[object ArrayBuffer]"]=pt["[object Boolean]"]=pt["[object DataView]"]=pt["[object Date]"]=pt["[object Error]"]=pt["[object Function]"]=pt["[object Map]"]=pt["[object Number]"]=pt["[object Object]"]=pt["[object RegExp]"]=pt["[object Set]"]=pt["[object String]"]=pt["[object WeakMap]"]=!1;var RE=typeof nr=="object"&&nr&&!nr.nodeType&&nr,vc=RE&&typeof rr=="object"&&rr&&!rr.nodeType&&rr,Kf=vc&&vc.exports===RE&&EE.process,hl=function(){try{var n=vc&&vc.require&&vc.require("util").types;return n||Kf&&Kf.binding&&Kf.binding("util")}catch{}}(),R_=hl&&hl.isTypedArray,Ry=R_?Ny(R_):function(n){return Er(n)&&AE(n.length)&&!!pt[zi(n)]},lI=Object.prototype.hasOwnProperty;function ME(n,e){var t=zr(n),r=!t&&zp(n),s=!t&&!r&&Xc(n),i=!t&&!r&&!s&&Ry(n),o=t||r||s||i,a=o?function(u,d){for(var h=-1,p=Array(u);++h<u;)p[h]=d(h);return p}(n.length,String):[],l=a.length;for(var c in n)!e&&!lI.call(n,c)||o&&(c=="length"||s&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Cy(c,l))||a.push(c);return a}function IE(n,e){return function(t){return n(e(t))}}var cI=IE(Object.keys,Object),uI=Object.prototype.hasOwnProperty;function Up(n){return Jh(n)?ME(n):function(e){if(!Oy(e))return cI(e);var t=[];for(var r in Object(e))uI.call(e,r)&&r!="constructor"&&t.push(r);return t}(n)}var dI=Object.prototype.hasOwnProperty;function hI(n){if(!At(n))return function(s){var i=[];if(s!=null)for(var o in Object(s))i.push(o);return i}(n);var e=Oy(n),t=[];for(var r in n)(r!="constructor"||!e&&dI.call(n,r))&&t.push(r);return t}function fl(n){return Jh(n)?ME(n,!0):hI(n)}var fI=Ay(function(n,e){Pa(e,fl(e),n)}),mI=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pI=/^\w*$/;function gI(n,e){if(zr(n))return!1;var t=typeof n;return!(t!="number"&&t!="symbol"&&t!="boolean"&&n!=null&&!Zh(n))||pI.test(n)||!mI.test(n)||e!=null&&n in Object(e)}var ql=qo(Object,"create"),yI=Object.prototype.hasOwnProperty,vI=Object.prototype.hasOwnProperty;function so(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}function ed(n,e){for(var t=n.length;t--;)if(xu(n[t][0],e))return t;return-1}so.prototype.clear=function(){this.__data__=ql?ql(null):{},this.size=0},so.prototype.delete=function(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e},so.prototype.get=function(n){var e=this.__data__;if(ql){var t=e[n];return t==="__lodash_hash_undefined__"?void 0:t}return yI.call(e,n)?e[n]:void 0},so.prototype.has=function(n){var e=this.__data__;return ql?e[n]!==void 0:vI.call(e,n)},so.prototype.set=function(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=ql&&e===void 0?"__lodash_hash_undefined__":e,this};var wI=Array.prototype.splice;function ks(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ks.prototype.clear=function(){this.__data__=[],this.size=0},ks.prototype.delete=function(n){var e=this.__data__,t=ed(e,n);return!(t<0)&&(t==e.length-1?e.pop():wI.call(e,t,1),--this.size,!0)},ks.prototype.get=function(n){var e=this.__data__,t=ed(e,n);return t<0?void 0:e[t][1]},ks.prototype.has=function(n){return ed(this.__data__,n)>-1},ks.prototype.set=function(n,e){var t=this.__data__,r=ed(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this};var eu=qo(Wr,"Map");function td(n,e){var t,r,s=n.__data__;return((r=typeof(t=e))=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null)?s[typeof e=="string"?"string":"hash"]:s.map}function Es(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Es.prototype.clear=function(){this.size=0,this.__data__={hash:new so,map:new(eu||ks),string:new so}},Es.prototype.delete=function(n){var e=td(this,n).delete(n);return this.size-=e?1:0,e},Es.prototype.get=function(n){return td(this,n).get(n)},Es.prototype.has=function(n){return td(this,n).has(n)},Es.prototype.set=function(n,e){var t=td(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this};function My(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var t=function(){var r=arguments,s=e?e.apply(this,r):r[0],i=t.cache;if(i.has(s))return i.get(s);var o=n.apply(this,r);return t.cache=i.set(s,o)||i,o};return t.cache=new(My.Cache||Es),t}My.Cache=Es;var _I=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bI=/\\(\\)?/g,xI=function(n){var e=My(n,function(r){return t.size===500&&t.clear(),r}),t=e.cache;return e}(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(_I,function(t,r,s,i){e.push(s?i.replace(bI,"$1"):r||t)}),e});function kI(n){return n==null?"":CE(n)}function Iy(n,e){return zr(n)?n:gI(n,e)?[n]:xI(kI(n))}function jy(n){if(typeof n=="string"||Zh(n))return n;var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function jE(n,e){for(var t=0,r=(e=Iy(e,n)).length;n!=null&&t<r;)n=n[jy(e[t++])];return t&&t==r?n:void 0}function uh(n,e,t){var r=n==null?void 0:jE(n,e);return r===void 0?t:r}function DE(n,e){for(var t=-1,r=e.length,s=n.length;++t<r;)n[s+t]=e[t];return n}var Dy=IE(Object.getPrototypeOf,Object),EI=Function.prototype,SI=Object.prototype,FE=EI.toString,CI=SI.hasOwnProperty,PI=FE.call(Object);function wr(n){if(!Er(n)||zi(n)!="[object Object]")return!1;var e=Dy(n);if(e===null)return!0;var t=CI.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&FE.call(t)==PI}function TI(n,e,t){var r=-1,s=n.length;e<0&&(e=-e>s?0:s+e),(t=t>s?s:t)<0&&(t+=s),s=e>t?0:t-e>>>0,e>>>=0;for(var i=Array(s);++r<s;)i[r]=n[r+e];return i}function ns(n){var e=this.__data__=new ks(n);this.size=e.size}ns.prototype.clear=function(){this.__data__=new ks,this.size=0},ns.prototype.delete=function(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t},ns.prototype.get=function(n){return this.__data__.get(n)},ns.prototype.has=function(n){return this.__data__.has(n)},ns.prototype.set=function(n,e){var t=this.__data__;if(t instanceof ks){var r=t.__data__;if(!eu||r.length<199)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new Es(r)}return t.set(n,e),this.size=t.size,this};var LE=typeof nr=="object"&&nr&&!nr.nodeType&&nr,M_=LE&&typeof rr=="object"&&rr&&!rr.nodeType&&rr,I_=M_&&M_.exports===LE?Wr.Buffer:void 0,j_=I_?I_.allocUnsafe:void 0;function VE(n,e){if(e)return n.slice();var t=n.length,r=j_?j_(t):new n.constructor(t);return n.copy(r),r}function $E(){return[]}var AI=Object.prototype.propertyIsEnumerable,D_=Object.getOwnPropertySymbols,Fy=D_?function(n){return n==null?[]:(n=Object(n),function(e,t){for(var r=-1,s=e==null?0:e.length,i=0,o=[];++r<s;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}(D_(n),function(e){return AI.call(n,e)}))}:$E,BE=Object.getOwnPropertySymbols?function(n){for(var e=[];n;)DE(e,Fy(n)),n=Dy(n);return e}:$E;function zE(n,e,t){var r=e(n);return zr(n)?r:DE(r,t(n))}function Wp(n){return zE(n,Up,Fy)}function OI(n){return zE(n,fl,BE)}var qp=qo(Wr,"DataView"),Hp=qo(Wr,"Promise"),Kp=qo(Wr,"Set"),F_="[object Map]",L_="[object Promise]",V_="[object Set]",$_="[object WeakMap]",B_="[object DataView]",NI=Wo(qp),RI=Wo(eu),MI=Wo(Hp),II=Wo(Kp),jI=Wo(Bp),Mr=zi;(qp&&Mr(new qp(new ArrayBuffer(1)))!=B_||eu&&Mr(new eu)!=F_||Hp&&Mr(Hp.resolve())!=L_||Kp&&Mr(new Kp)!=V_||Bp&&Mr(new Bp)!=$_)&&(Mr=function(n){var e=zi(n),t=e=="[object Object]"?n.constructor:void 0,r=t?Wo(t):"";if(r)switch(r){case NI:return B_;case RI:return F_;case MI:return L_;case II:return V_;case jI:return $_}return e});var DI=Object.prototype.hasOwnProperty,dh=Wr.Uint8Array;function Qp(n){var e=new n.constructor(n.byteLength);return new dh(e).set(new dh(n)),e}var FI=/\w*$/,z_=as?as.prototype:void 0,U_=z_?z_.valueOf:void 0;function UE(n,e){var t=e?Qp(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}function LI(n,e,t){var r,s,i,o=n.constructor;switch(e){case"[object ArrayBuffer]":return Qp(n);case"[object Boolean]":case"[object Date]":return new o(+n);case"[object DataView]":return function(a,l){var c=l?Qp(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.byteLength)}(n,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return UE(n,t);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(n);case"[object RegExp]":return(i=new(s=n).constructor(s.source,FI.exec(s))).lastIndex=s.lastIndex,i;case"[object Symbol]":return r=n,U_?Object(U_.call(r)):{}}}function WE(n){return typeof n.constructor!="function"||Oy(n)?{}:XM(Dy(n))}var W_=hl&&hl.isMap,VI=W_?Ny(W_):function(n){return Er(n)&&Mr(n)=="[object Map]"},q_=hl&&hl.isSet,$I=q_?Ny(q_):function(n){return Er(n)&&Mr(n)=="[object Set]"},qE="[object Arguments]",HE="[object Function]",KE="[object Object]",ut={};function Da(n,e,t,r,s,i){var o,a=1&e,l=2&e,c=4&e;if(t&&(o=s?t(n,r,s,i):t(n)),o!==void 0)return o;if(!At(n))return n;var u=zr(n);if(u){if(o=function(v){var w=v.length,y=new v.constructor(w);return w&&typeof v[0]=="string"&&DI.call(v,"index")&&(y.index=v.index,y.input=v.input),y}(n),!a)return TE(n,o)}else{var d=Mr(n),h=d==HE||d=="[object GeneratorFunction]";if(Xc(n))return VE(n,a);if(d==KE||d==qE||h&&!s){if(o=l||h?{}:WE(n),!a)return l?function(v,w){return Pa(v,BE(v),w)}(n,function(v,w){return v&&Pa(w,fl(w),v)}(o,n)):function(v,w){return Pa(v,Fy(v),w)}(n,function(v,w){return v&&Pa(w,Up(w),v)}(o,n))}else{if(!ut[d])return s?n:{};o=LI(n,d,a)}}i||(i=new ns);var p=i.get(n);if(p)return p;i.set(n,o),$I(n)?n.forEach(function(v){o.add(Da(v,e,t,v,n,i))}):VI(n)&&n.forEach(function(v,w){o.set(w,Da(v,e,t,w,n,i))});var _=u?void 0:(c?l?OI:Wp:l?fl:Up)(n);return function(v,w){for(var y=-1,g=v==null?0:v.length;++y<g&&w(v[y],y,v)!==!1;);}(_||n,function(v,w){_&&(v=n[w=v]),Ty(o,w,Da(v,e,t,w,n,i))}),o}ut[qE]=ut["[object Array]"]=ut["[object ArrayBuffer]"]=ut["[object DataView]"]=ut["[object Boolean]"]=ut["[object Date]"]=ut["[object Float32Array]"]=ut["[object Float64Array]"]=ut["[object Int8Array]"]=ut["[object Int16Array]"]=ut["[object Int32Array]"]=ut["[object Map]"]=ut["[object Number]"]=ut[KE]=ut["[object RegExp]"]=ut["[object Set]"]=ut["[object String]"]=ut["[object Symbol]"]=ut["[object Uint8Array]"]=ut["[object Uint8ClampedArray]"]=ut["[object Uint16Array]"]=ut["[object Uint32Array]"]=!0,ut["[object Error]"]=ut[HE]=ut["[object WeakMap]"]=!1;function QE(n){return Da(n,4)}function $r(n){return Da(n,5)}function Ly(n,e){return Da(n,5,e=typeof e=="function"?e:void 0)}function Ed(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Es;++e<t;)this.add(n[e])}function BI(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function zI(n,e){return n.has(e)}Ed.prototype.add=Ed.prototype.push=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},Ed.prototype.has=function(n){return this.__data__.has(n)};function H_(n,e,t,r,s,i){var o=1&t,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=i.get(n),u=i.get(e);if(c&&u)return c==e&&u==n;var d=-1,h=!0,p=2&t?new Ed:void 0;for(i.set(n,e),i.set(e,n);++d<a;){var _=n[d],v=e[d];if(r)var w=o?r(v,_,d,e,n,i):r(_,v,d,n,e,i);if(w!==void 0){if(w)continue;h=!1;break}if(p){if(!BI(e,function(y,g){if(!zI(p,g)&&(_===y||s(_,y,t,r,i)))return p.push(g)})){h=!1;break}}else if(_!==v&&!s(_,v,t,r,i)){h=!1;break}}return i.delete(n),i.delete(e),h}function UI(n){var e=-1,t=Array(n.size);return n.forEach(function(r,s){t[++e]=[s,r]}),t}function WI(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var K_=as?as.prototype:void 0,Qf=K_?K_.valueOf:void 0,qI=Object.prototype.hasOwnProperty,Q_="[object Arguments]",Z_="[object Array]",nd="[object Object]",J_=Object.prototype.hasOwnProperty;function HI(n,e,t,r,s,i){var o=zr(n),a=zr(e),l=o?Z_:Mr(n),c=a?Z_:Mr(e),u=(l=l==Q_?nd:l)==nd,d=(c=c==Q_?nd:c)==nd,h=l==c;if(h&&Xc(n)){if(!Xc(e))return!1;o=!0,u=!1}if(h&&!u)return i||(i=new ns),o||Ry(n)?H_(n,e,t,r,s,i):function(y,g,b,x,C,N,k){switch(b){case"[object DataView]":if(y.byteLength!=g.byteLength||y.byteOffset!=g.byteOffset)return!1;y=y.buffer,g=g.buffer;case"[object ArrayBuffer]":return!(y.byteLength!=g.byteLength||!N(new dh(y),new dh(g)));case"[object Boolean]":case"[object Date]":case"[object Number]":return xu(+y,+g);case"[object Error]":return y.name==g.name&&y.message==g.message;case"[object RegExp]":case"[object String]":return y==g+"";case"[object Map]":var P=UI;case"[object Set]":var j=1&x;if(P||(P=WI),y.size!=g.size&&!j)return!1;var I=k.get(y);if(I)return I==g;x|=2,k.set(y,g);var V=H_(P(y),P(g),x,C,N,k);return k.delete(y),V;case"[object Symbol]":if(Qf)return Qf.call(y)==Qf.call(g)}return!1}(n,e,l,t,r,s,i);if(!(1&t)){var p=u&&J_.call(n,"__wrapped__"),_=d&&J_.call(e,"__wrapped__");if(p||_){var v=p?n.value():n,w=_?e.value():e;return i||(i=new ns),s(v,w,t,r,i)}}return!!h&&(i||(i=new ns),function(y,g,b,x,C,N){var k=1&b,P=Wp(y),j=P.length;if(j!=Wp(g).length&&!k)return!1;for(var I=j;I--;){var V=P[I];if(!(k?V in g:qI.call(g,V)))return!1}var H=N.get(y),J=N.get(g);if(H&&J)return H==g&&J==y;var ge=!0;N.set(y,g),N.set(g,y);for(var Ee=k;++I<j;){var Oe=y[V=P[I]],Xe=g[V];if(x)var z=k?x(Xe,Oe,V,g,y,N):x(Oe,Xe,V,y,g,N);if(!(z===void 0?Oe===Xe||C(Oe,Xe,b,x,N):z)){ge=!1;break}Ee||(Ee=V=="constructor")}if(ge&&!Ee){var ne=y.constructor,ue=g.constructor;ne==ue||!("constructor"in y)||!("constructor"in g)||typeof ne=="function"&&ne instanceof ne&&typeof ue=="function"&&ue instanceof ue||(ge=!1)}return N.delete(y),N.delete(g),ge}(n,e,t,r,s,i))}function Vy(n,e,t,r,s){return n===e||(n==null||e==null||!Er(n)&&!Er(e)?n!=n&&e!=e:HI(n,e,t,r,Vy,s))}var KI=function(n,e,t){for(var r=-1,s=Object(n),i=t(n),o=i.length;o--;){var a=i[++r];if(e(s[a],a,s)===!1)break}return n},Zf=function(){return Wr.Date.now()},QI=Math.max,ZI=Math.min;function ml(n,e,t){var r,s,i,o,a,l,c=0,u=!1,d=!1,h=!0;if(typeof n!="function")throw new TypeError("Expected a function");function p(g){var b=r,x=s;return r=s=void 0,c=g,o=n.apply(x,b)}function _(g){var b=g-l;return l===void 0||b>=e||b<0||d&&g-c>=i}function v(){var g=Zf();if(_(g))return w(g);a=setTimeout(v,function(b){var x=e-(b-l);return d?ZI(x,i-(b-c)):x}(g))}function w(g){return a=void 0,h&&r?p(g):(r=s=void 0,o)}function y(){var g=Zf(),b=_(g);if(r=arguments,s=this,l=g,b){if(a===void 0)return function(x){return c=x,a=setTimeout(v,e),u?p(x):o}(l);if(d)return clearTimeout(a),a=setTimeout(v,e),p(l)}return a===void 0&&(a=setTimeout(v,e)),o}return e=S_(e)||0,At(t)&&(u=!!t.leading,i=(d="maxWait"in t)?QI(S_(t.maxWait)||0,e):i,h="trailing"in t?!!t.trailing:h),y.cancel=function(){a!==void 0&&clearTimeout(a),c=0,r=l=s=a=void 0},y.flush=function(){return a===void 0?o:w(Zf())},y}function Zp(n,e,t){(t!==void 0&&!xu(n[e],t)||t===void 0&&!(e in n))&&Py(n,e,t)}function Jp(n,e){if((e!=="constructor"||typeof n[e]!="function")&&e!="__proto__")return n[e]}function JI(n,e,t,r,s,i,o){var a=Jp(n,t),l=Jp(e,t),c=o.get(l);if(c)Zp(n,t,c);else{var u,d=i?i(a,l,t+"",n,e,o):void 0,h=d===void 0;if(h){var p=zr(l),_=!p&&Xc(l),v=!p&&!_&&Ry(l);d=l,p||_||v?zr(a)?d=a:Er(u=a)&&Jh(u)?d=TE(a):_?(h=!1,d=VE(l,!0)):v?(h=!1,d=UE(l,!0)):d=[]:wr(l)||zp(l)?(d=a,zp(a)?d=function(w){return Pa(w,fl(w))}(a):At(a)&&!Lo(a)||(d=WE(l))):h=!1}h&&(o.set(l,d),s(d,l,r,i,o),o.delete(l)),Zp(n,t,d)}}function $y(n,e,t,r,s){n!==e&&KI(e,function(i,o){if(s||(s=new ns),At(i))JI(n,e,o,t,$y,r,s);else{var a=r?r(Jp(n,o),i,o+"",n,e,s):void 0;a===void 0&&(a=i),Zp(n,o,a)}},fl)}Ay(function(n,e,t,r){$y(n,e,t,r)});function G_(n){return typeof n=="string"||!zr(n)&&Er(n)&&zi(n)=="[object String]"}function Vo(n){return Er(n)&&n.nodeType===1&&!wr(n)}function Y_(n,e){return Vy(n,e)}var By=Ay(function(n,e,t){$y(n,e,t)});function GI(n,e){return(n=function(s,i){return i.length<2?s:jE(s,TI(i,0,-1))}(n,e=Iy(e,n)))==null||delete n[jy((t=e,r=t==null?0:t.length,r?t[r-1]:void 0))];var t,r}function YI(n,e,t){return n==null?n:function(r,s,i){if(!At(r))return r;for(var o=-1,a=(s=Iy(s,r)).length,l=a-1,c=r;c!=null&&++o<a;){var u=jy(s[o]),d=i;if(u==="__proto__"||u==="constructor"||u==="prototype")return r;if(o!=l){var h=c[u];(d=void 0)==void 0&&(d=At(h)?h:Cy(s[o+1])?[]:{})}Ty(c,u,d),c=c[u]}return r}(n,e,t)}function ZE(n,e,t){var r=!0,s=!0;if(typeof n!="function")throw new TypeError("Expected a function");return At(t)&&(r="leading"in t?!!t.leading:r,s="trailing"in t?!!t.trailing:s),ml(n,e,{leading:r,maxWait:e,trailing:s})}const wc=Symbol("observableProperties"),tu=Symbol("boundObservables"),_c=Symbol("boundProperties"),Ji=Symbol("decoratedMethods"),X_=Symbol("decoratedOriginal"),JE=sn(nt());function sn(n){var e,t,r,s,i;return n?class extends(i=n,s=wc,r=Ji,t=_c,e=tu,i){constructor(){super(...arguments);f(this,s);f(this,r);f(this,t);f(this,e)}set(a,l){if(At(a))return void Object.keys(a).forEach(u=>{this.set(u,a[u])},this);Jf(this);const c=this[wc];if(a in this&&!c.has(a))throw new A("observable-set-cannot-override",this);Object.defineProperty(this,a,{enumerable:!0,configurable:!0,get:()=>c.get(a),set(u){const d=c.get(a);let h=this.fire(`set:${a}`,a,u,d);h===void 0&&(h=u),d===h&&c.has(a)||(c.set(a,h),this.fire(`change:${a}`,a,h,d))}}),this[a]=l}bind(...a){if(!a.length||!eb(a))throw new A("observable-bind-wrong-properties",this);if(new Set(a).size!==a.length)throw new A("observable-bind-duplicate-properties",this);Jf(this);const l=this[_c];a.forEach(u=>{if(l.has(u))throw new A("observable-bind-rebind",this)});const c=new Map;return a.forEach(u=>{const d={property:u,to:[]};l.set(u,d),c.set(u,d)}),{to:XI,toMany:ej,_observable:this,_bindProperties:a,_to:[],_bindings:c}}unbind(...a){if(!this[wc])return;const l=this[_c],c=this[tu];if(a.length){if(!eb(a))throw new A("observable-unbind-wrong-properties",this);a.forEach(u=>{const d=l.get(u);d&&(d.to.forEach(([h,p])=>{const _=c.get(h),v=_[p];v.delete(d),v.size||delete _[p],Object.keys(_).length||(c.delete(h),this.stopListening(h,"change"))}),l.delete(u))})}else c.forEach((u,d)=>{this.stopListening(d,"change")}),c.clear(),l.clear()}decorate(a){Jf(this);const l=this[a];if(!l)throw new A("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:a});this.on(a,(c,u)=>{c.return=l.apply(this,u)}),this[a]=function(...c){return this.fire(a,c)},this[a][X_]=l,this[Ji]||(this[Ji]=[]),this[Ji].push(a)}stopListening(a,l,c){if(!a&&this[Ji]){for(const u of this[Ji])this[u]=this[u][X_];delete this[Ji]}super.stopListening(a,l,c)}}:JE}function Jf(n){n[wc]||(Object.defineProperty(n,wc,{value:new Map}),Object.defineProperty(n,tu,{value:new Map}),Object.defineProperty(n,_c,{value:new Map}))}function XI(...n){const e=function(...i){if(!i.length)throw new A("observable-bind-to-parse-error",null);const o={to:[]};let a;return typeof i[i.length-1]=="function"&&(o.callback=i.pop()),i.forEach(l=>{if(typeof l=="string")a.properties.push(l);else{if(typeof l!="object")throw new A("observable-bind-to-parse-error",null);a={observable:l,properties:[]},o.to.push(a)}}),o}(...n),t=Array.from(this._bindings.keys()),r=t.length;if(!e.callback&&e.to.length>1)throw new A("observable-bind-to-no-callback",this);if(r>1&&e.callback)throw new A("observable-bind-to-extra-callback",this);var s;e.to.forEach(i=>{if(i.properties.length&&i.properties.length!==r)throw new A("observable-bind-to-properties-length",this);i.properties.length||(i.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),s=this._observable,this._to.forEach(i=>{const o=s[tu];let a;o.get(i.observable)||s.listenTo(i.observable,"change",(l,c)=>{a=o.get(i.observable)[c],a&&a.forEach(u=>{tb(s,u.property)})})}),function(i){let o;i._bindings.forEach((a,l)=>{i._to.forEach(c=>{o=c.properties[a.callback?0:i._bindProperties.indexOf(l)],a.to.push([c.observable,o]),function(u,d,h,p){const _=u[tu],v=_.get(h),w=v||{};w[p]||(w[p]=new Set),w[p].add(d),v||_.set(h,w)}(i._observable,a,c.observable,o)})})}(this),this._bindProperties.forEach(i=>{tb(this._observable,i)})}function ej(n,e,t){if(this._bindings.size>1)throw new A("observable-bind-to-many-not-one-binding",this);this.to(...function(r,s){const i=r.map(o=>[o,s]);return Array.prototype.concat.apply([],i)}(n,e),t)}function eb(n){return n.every(e=>typeof e=="string")}function tb(n,e){const t=n[_c].get(e);let r;t.callback?r=t.callback.apply(n,t.to.map(s=>s[0][s[1]])):(r=t.to[0],r=r[0][r[1]]),Object.prototype.hasOwnProperty.call(n,e)?n[e]=r:n.set(e,r)}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{sn[n]=JE.prototype[n]});class tj{constructor(){f(this,"_replacedElements");this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display="",t&&t.remove()}),this._replacedElements=[]}}function nb(n){let e=0;for(const t of n)e++;return e}function Pn(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++)if(n[r]!=e[r])return r;return n.length==e.length?"same":n.length<e.length?"prefix":"extension"}function ar(n){return!(!n||!n[Symbol.iterator])}function nj(n,e,t={},r=[]){const s=t&&t.xmlns,i=s?n.createElementNS(s,e):n.createElement(e);for(const o in t)i.setAttribute(o,t[o]);!G_(r)&&ar(r)||(r=[r]);for(let o of r)G_(o)&&(o=n.createTextNode(o)),i.appendChild(o);return i}class GE{constructor(e,t){f(this,"_config");this._config=Object.create(null),t&&this.define(rb(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,t,r,s=!1){if(wr(t))return void this._setObjectToTarget(e,t,s);const i=t.split(".");t=i.pop();for(const o of i)wr(e[o])||(e[o]=Object.create(null)),e=e[o];if(wr(r))return wr(e[t])||(e[t]=Object.create(null)),e=e[t],void this._setObjectToTarget(e,r,s);s&&e[t]!==void 0||(e[t]=r)}_getFromSource(e,t){const r=t.split(".");t=r.pop();for(const s of r){if(!wr(e[s])){e=null;break}e=e[s]}return e?rb(e[t]):void 0}_setObjectToTarget(e,t,r){Object.keys(t).forEach(s=>{this._setToTarget(e,s,t[s],r)})}}function rb(n){return Ly(n,rj)}function rj(n){return Vo(n)||typeof n=="function"?n:void 0}function Ii(n){if(n){if(n.defaultView)return n instanceof n.defaultView.Document;if(n.ownerDocument&&n.ownerDocument.defaultView)return n instanceof n.ownerDocument.defaultView.Node}return!1}function hh(n){const e=Object.prototype.toString.apply(n);return e=="[object Window]"||e=="[object global]"}const YE=Ui(nt());function Ui(n){return n?class extends n{listenTo(e,t,r,s={}){if(Ii(e)||hh(e)){const i={capture:!!s.useCapture,passive:!!s.usePassive},o=this._getProxyEmitter(e,i)||new sj(e,i);this.listenTo(o,t,r,s)}else super.listenTo(e,t,r,s)}stopListening(e,t,r){if(Ii(e)||hh(e)){const s=this._getAllProxyEmitters(e);for(const i of s)this.stopListening(i,t,r)}else super.stopListening(e,t,r)}_getProxyEmitter(e,t){return function(r,s){const i=r[ua];return i&&i[s]?i[s].emitter:null}(this,XE(e,t))}_getAllProxyEmitters(e){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(t=>this._getProxyEmitter(e,t)).filter(t=>!!t)}}:YE}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{Ui[n]=YE.prototype[n]});class sj extends nt(){constructor(t,r){super();f(this,"_domNode");f(this,"_options");f(this,"_domListeners");bE(this,XE(t,r)),this._domNode=t,this._options=r}attach(t){if(this._domListeners&&this._domListeners[t])return;const r=this._createDomListener(t);this._domNode.addEventListener(t,r,this._options),this._domListeners||(this._domListeners={}),this._domListeners[t]=r}detach(t){let r;!this._domListeners[t]||(r=this._events[t])&&r.callbacks.length||this._domListeners[t].removeListener()}_addEventListener(t,r,s){this.attach(t),nt().prototype._addEventListener.call(this,t,r,s)}_removeEventListener(t,r){nt().prototype._removeEventListener.call(this,t,r),this.detach(t)}_createDomListener(t){const r=s=>{this.fire(t,s)};return r.removeListener=()=>{this._domNode.removeEventListener(t,r,this._options),delete this._domListeners[t]},r}}function XE(n,e){let t=function(r){return r["data-ck-expando"]||(r["data-ck-expando"]=El())}(n);for(const r of Object.keys(e).sort())e[r]&&(t+="-"+r);return t}function ij(n){const e=[];let t=n;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}function oj(n){return n instanceof HTMLTextAreaElement?n.value:n.innerHTML}function sb(n){const e=n.ownerDocument.defaultView.getComputedStyle(n);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}function St(n){return Object.prototype.toString.call(n)=="[object Text]"}function Gh(n){return Object.prototype.toString.apply(n)=="[object Range]"}function eS(n){return n&&n.parentNode?n.offsetParent===ke.document.body?null:n.offsetParent:null}const tS=["top","right","bottom","left","width","height"];class Je{constructor(e){f(this,"top");f(this,"right");f(this,"bottom");f(this,"left");f(this,"width");f(this,"height");f(this,"_source");const t=Gh(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),Gp(e)||t)if(t){const r=Je.getDomRangeRects(e);rd(this,Je.getBoundingRect(r))}else rd(this,e.getBoundingClientRect());else if(hh(e)){const{innerWidth:r,innerHeight:s}=e;rd(this,{top:0,right:r,bottom:s,left:0,width:r,height:s})}else rd(this,e)}clone(){return new Je(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};if(t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0)return null;{const r=new Je(t);return r._source=this._source,r}}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let t=this.clone();if(ib(e))return t;let r,s=e,i=e.parentNode||e.commonAncestorContainer;for(;i&&!ib(i);){const a=((o=i)instanceof HTMLElement?o.ownerDocument.defaultView.getComputedStyle(o).overflow:"visible")==="visible";s instanceof HTMLElement&&ob(s)==="absolute"&&(r=s);const l=ob(i);if(a||r&&(l==="relative"&&a||l!=="relative")){s=i,i=i.parentNode;continue}const c=new Je(i),u=t.getIntersection(c);if(!u)return null;u.getArea()<t.getArea()&&(t=u),s=i,i=i.parentNode}var o;return t}isEqual(e){for(const t of tS)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!(!t||!t.isEqual(e))}toAbsoluteRect(){const{scrollX:e,scrollY:t}=ke.window,r=this.clone().moveBy(e,t);if(Gp(r._source)){const s=eS(r._source);s&&function(i,o){const a=new Je(o),l=sb(o);let c=0,u=0;c-=a.left,u-=a.top,c+=o.scrollLeft,u+=o.scrollTop,c-=l.left,u-=l.top,i.moveBy(c,u)}(r,s)}return r}excludeScrollbarsAndBorders(){const e=this._source;let t,r,s;if(hh(e))t=e.innerWidth-e.document.documentElement.clientWidth,r=e.innerHeight-e.document.documentElement.clientHeight,s=e.getComputedStyle(e.document.documentElement).direction;else{const i=sb(e);t=e.offsetWidth-e.clientWidth-i.left-i.right,r=e.offsetHeight-e.clientHeight-i.top-i.bottom,s=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=i.left,this.top+=i.top,this.right-=i.right,this.bottom-=i.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,s==="ltr"?this.right-=t:this.left+=t,this.height-=r,this.bottom-=r,this}static getDomRangeRects(e){const t=[],r=Array.from(e.getClientRects());if(r.length)for(const s of r)t.push(new Je(s));else{let s=e.startContainer;St(s)&&(s=s.parentNode);const i=new Je(s.getBoundingClientRect());i.right=i.left,i.width=0,t.push(i)}return t}static getBoundingRect(e){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let r=0;for(const s of e)r++,t.left=Math.min(t.left,s.left),t.top=Math.min(t.top,s.top),t.right=Math.max(t.right,s.right),t.bottom=Math.max(t.bottom,s.bottom);return r==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new Je(t))}}function rd(n,e){for(const t of tS)n[t]=e[t]}function ib(n){return!!Gp(n)&&n===n.ownerDocument.body}function Gp(n){return n!==null&&typeof n=="object"&&n.nodeType===1&&typeof n.getBoundingClientRect=="function"}function ob(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).position:"static"}const wt=class wt{constructor(e,t){f(this,"_element");f(this,"_callback");wt._observerInstance||wt._createObserver(),this._element=e,this._callback=t,wt._addElementCallback(e,t),wt._observerInstance.observe(e)}get element(){return this._element}destroy(){wt._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){wt._elementCallbacks||(wt._elementCallbacks=new Map);let r=wt._elementCallbacks.get(e);r||(r=new Set,wt._elementCallbacks.set(e,r)),r.add(t)}static _deleteElementCallback(e,t){const r=wt._getElementCallbacks(e);r&&(r.delete(t),r.size||(wt._elementCallbacks.delete(e),wt._observerInstance.unobserve(e))),wt._elementCallbacks&&!wt._elementCallbacks.size&&(wt._observerInstance=null,wt._elementCallbacks=null)}static _getElementCallbacks(e){return wt._elementCallbacks?wt._elementCallbacks.get(e):null}static _createObserver(){wt._observerInstance=new ke.window.ResizeObserver(e=>{for(const t of e){const r=wt._getElementCallbacks(t.target);if(r)for(const s of r)s(t)}})}};f(wt,"_observerInstance",null),f(wt,"_elementCallbacks",null);let fh=wt;function ab(n,e){n instanceof HTMLTextAreaElement&&(n.value=e),n.innerHTML=e}function zy(n){return e=>e+n}function oc(n){let e=0;for(;n.previousSibling;)n=n.previousSibling,e++;return e}function nS(n,e,t){n.insertBefore(t,n.childNodes[e]||null)}function bc(n){return n&&n.nodeType===Node.COMMENT_NODE}function aj(n){try{ke.document.createAttribute(n)}catch{return!1}return!0}function Vs(n){return!!n&&(St(n)?Vs(n.parentElement):!!n.getClientRects&&!!n.getClientRects().length)}function Uy({element:n,target:e,positions:t,limiter:r,fitInViewport:s,viewportOffsetConfig:i}){Lo(e)&&(e=e()),Lo(r)&&(r=r());const o=eS(n),a=function(h){h=Object.assign({top:0,bottom:0,left:0,right:0},h);const p=new Je(ke.window);return p.top+=h.top,p.height-=h.top,p.bottom-=h.bottom,p.height-=h.bottom,p}(i),l=new Je(n),c=lb(e,a);let u;if(!c||!a.getIntersection(c))return null;const d={targetRect:c,elementRect:l,positionedElementAncestor:o,viewportRect:a};if(r||s){if(r){const h=lb(r,a);h&&(d.limiterRect=h)}u=function(h,p){const{elementRect:_}=p,v=_.getArea(),w=h.map(b=>new cb(b,p)).filter(b=>!!b.name);let y=0,g=null;for(const b of w){const{limiterIntersectionArea:x,viewportIntersectionArea:C}=b;if(x===v)return b;const N=C**2+x**2;N>y&&(y=N,g=b)}return g}(t,d)}else u=new cb(t[0],d);return u}function lb(n,e){const t=new Je(n).getVisible();return t?t.getIntersection(e):null}class cb{constructor(e,t){f(this,"name");f(this,"config");f(this,"_positioningFunctionCoordinates");f(this,"_options");f(this,"_cachedRect");f(this,"_cachedAbsoluteRect");const r=e(t.targetRect,t.elementRect,t.viewportRect,t.limiterRect);if(!r)return;const{left:s,top:i,name:o,config:a}=r;this.name=o,this.config=a,this._positioningFunctionCoordinates={left:s,top:i},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const e=this._options.limiterRect;return e?e.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect||(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top)),this._cachedRect}get _absoluteRect(){return this._cachedAbsoluteRect||(this._cachedAbsoluteRect=this._rect.toAbsoluteRect()),this._cachedAbsoluteRect}}function ub(n){const e=n.parentNode;e&&e.removeChild(n)}function lj({target:n,viewportOffset:e=0,ancestorOffset:t=0,alignToTop:r,forceScroll:s}){const i=Wy(n);let o=i,a=null;for(e=function(l){return typeof l=="number"?{top:l,bottom:l,left:l,right:l}:l}(e);o;){let l;l=dj(o==i?n:a),uj({parent:l,getRect:()=>db(n,o),alignToTop:r,ancestorOffset:t,forceScroll:s});const c=db(n,o);if(cj({window:o,rect:c,viewportOffset:e,alignToTop:r,forceScroll:s}),o.parent!=o){if(a=o.frameElement,o=o.parent,!a)return}else o=null}}function cj({window:n,rect:e,alignToTop:t,forceScroll:r,viewportOffset:s}){const i=e.clone().moveBy(0,s.bottom),o=e.clone().moveBy(0,-s.top),a=new Je(n).excludeScrollbarsAndBorders(),l=t&&r,c=[o,i].every(_=>a.contains(_));let{scrollX:u,scrollY:d}=n;const h=u,p=d;l?d-=a.top-e.top+s.top:c||(sS(o,a)?d-=a.top-e.top+s.top:rS(i,a)&&(d+=t?e.top-a.top-s.top:e.bottom-a.bottom+s.bottom)),c||(iS(e,a)?u-=a.left-e.left+s.left:oS(e,a)&&(u+=e.right-a.right+s.right)),u==h&&d===p||n.scrollTo(u,d)}function uj({parent:n,getRect:e,alignToTop:t,forceScroll:r,ancestorOffset:s=0,limiterElement:i}){const o=Wy(n),a=t&&r;let l,c,u;const d=i||o.document.body;for(;n!=d;)c=e(),l=new Je(n).excludeScrollbarsAndBorders(),u=l.contains(c),a?n.scrollTop-=l.top-c.top+s:u||(sS(c,l)?n.scrollTop-=l.top-c.top+s:rS(c,l)&&(n.scrollTop+=t?c.top-l.top-s:c.bottom-l.bottom+s)),u||(iS(c,l)?n.scrollLeft-=l.left-c.left+s:oS(c,l)&&(n.scrollLeft+=c.right-l.right+s)),n=n.parentNode}function rS(n,e){return n.bottom>e.bottom}function sS(n,e){return n.top<e.top}function iS(n,e){return n.left<e.left}function oS(n,e){return n.right>e.right}function Wy(n){return Gh(n)?n.startContainer.ownerDocument.defaultView:n.ownerDocument.defaultView}function dj(n){if(Gh(n)){let e=n.commonAncestorContainer;return St(e)&&(e=e.parentNode),e}return n.parentNode}function db(n,e){const t=Wy(n),r=new Je(n);if(t===e)return r;{let s=t;for(;s!=e;){const i=s.frameElement,o=new Je(i).excludeScrollbarsAndBorders();r.moveBy(o.left,o.top),s=s.parent}}return r}const hj={ctrl:"",cmd:"",alt:"",shift:""},fj={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},hb={37:"",38:"",39:"",40:"",9:"",33:"Page Up",34:"Page Down"},ft=gj(),mj=Object.fromEntries(Object.entries(ft).map(([n,e])=>{let t;return t=e in hb?hb[e]:n.charAt(0).toUpperCase()+n.slice(1),[e,t]}));function nu(n){let e;if(typeof n=="string"){if(e=ft[n.toLowerCase()],!e)throw new A("keyboard-unknown-key",null,{key:n})}else e=n.keyCode+(n.altKey?ft.alt:0)+(n.ctrlKey?ft.ctrl:0)+(n.shiftKey?ft.shift:0)+(n.metaKey?ft.cmd:0);return e}function ku(n){return typeof n=="string"&&(n=function(e){return e.split("+").map(t=>t.trim())}(n)),n.map(e=>typeof e=="string"?function(t){if(t.endsWith("!"))return nu(t.slice(0,-1));const r=nu(t);return(kt.isMac||kt.isiOS)&&r==ft.ctrl?ft.cmd:r}(e):e).reduce((e,t)=>t+e,0)}function fb(n){let e=ku(n);return Object.entries(kt.isMac||kt.isiOS?hj:fj).reduce((t,[r,s])=>(e&ft[r]&&(e&=~ft[r],t+=s),t),"")+(e?mj[e]:"")}function pj(n){return n==ft.arrowright||n==ft.arrowleft||n==ft.arrowup||n==ft.arrowdown}function gj(){const n={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++)n[String.fromCharCode(e).toLowerCase()]=e;for(let e=48;e<=57;e++)n[e-48]=e;for(let e=112;e<=123;e++)n["f"+(e-111)]=e;return Object.assign(n,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),n}const yj=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function mb(n){return yj.includes(n)?"rtl":"ltr"}function _n(n){return Array.isArray(n)?n:[n]}function vj(n,e,t=1,r){if(typeof t!="number")throw new A("translation-service-quantity-not-a-number",null,{quantity:t});const s=r||ke.window.CKEDITOR_TRANSLATIONS,i=function(u){return Object.keys(u).length}(s);i===1&&(n=Object.keys(s)[0]);const o=e.id||e.string;if(i===0||!function(u,d,h){return!!h[u]&&!!h[u].dictionary[d]}(n,o,s))return t!==1?e.plural:e.string;const a=s[n].dictionary,l=s[n].getPluralForm||(u=>u===1?0:1),c=a[o];return typeof c=="string"?c:c[Number(l(t))]}ke.window.CKEDITOR_TRANSLATIONS||(ke.window.CKEDITOR_TRANSLATIONS={});class wj{constructor({uiLanguage:e="en",contentLanguage:t,translations:r}={}){f(this,"uiLanguage");f(this,"uiLanguageDirection");f(this,"contentLanguage");f(this,"contentLanguageDirection");f(this,"t");f(this,"translations");this.uiLanguage=e,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=mb(this.uiLanguage),this.contentLanguageDirection=mb(this.contentLanguage),this.translations=function(s){return Array.isArray(s)?s.reduce((i,o)=>By(i,o)):s}(r),this.t=(s,i)=>this._t(s,i)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=_n(t),typeof e=="string"&&(e={string:e});const r=e.plural?t[0]:1;return function(s,i){return s.replace(/%(\d+)/g,(o,a)=>a<i.length?i[a]:o)}(vj(this.uiLanguage,e,r,this.translations),t)}}class Sl extends nt(){constructor(t={},r={}){super();f(this,"_items");f(this,"_itemMap");f(this,"_idProperty");f(this,"_bindToCollection");f(this,"_bindToExternalToInternalMap");f(this,"_bindToInternalToExternalMap");f(this,"_skippedIndexesFromExternal");const s=ar(t);if(s||(r=t),this._items=[],this._itemMap=new Map,this._idProperty=r.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],s)for(const i of t)this._items.push(i),this._itemMap.set(this._getItemIdBeforeAdding(i),i)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,r){return this.addMany([t],r)}addMany(t,r){if(r===void 0)r=this._items.length;else if(r>this._items.length||r<0)throw new A("collection-add-item-invalid-index",this);let s=0;for(const i of t){const o=this._getItemIdBeforeAdding(i),a=r+s;this._items.splice(a,0,i),this._itemMap.set(o,i),this.fire("add",i,a),s++}return this.fire("change",{added:t,removed:[],index:r}),this}get(t){let r;if(typeof t=="string")r=this._itemMap.get(t);else{if(typeof t!="number")throw new A("collection-get-invalid-arg",this);r=this._items[t]}return r||null}has(t){if(typeof t=="string")return this._itemMap.has(t);{const r=t[this._idProperty];return r&&this._itemMap.has(r)}}getIndex(t){let r;return r=typeof t=="string"?this._itemMap.get(t):t,r?this._items.indexOf(r):-1}remove(t){const[r,s]=this._remove(t);return this.fire("change",{added:[],removed:[r],index:s}),r}map(t,r){return this._items.map(t,r)}forEach(t,r){this._items.forEach(t,r)}find(t,r){return this._items.find(t,r)}filter(t,r){return this._items.filter(t,r)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new A("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:r=>{this._setUpBindToBinding(s=>new r(s))},using:r=>{typeof r=="function"?this._setUpBindToBinding(r):this._setUpBindToBinding(s=>s[r])}}}_setUpBindToBinding(t){const r=this._bindToCollection,s=(i,o,a)=>{const l=r._bindToCollection==this,c=r._bindToInternalToExternalMap.get(o);if(l&&c)this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o);else{const u=t(o);if(!u)return void this._skippedIndexesFromExternal.push(a);let d=a;for(const h of this._skippedIndexesFromExternal)a>h&&d--;for(const h of r._skippedIndexesFromExternal)d>=h&&d++;this._bindToExternalToInternalMap.set(o,u),this._bindToInternalToExternalMap.set(u,o),this.add(u,d);for(let h=0;h<r._skippedIndexesFromExternal.length;h++)d<=r._skippedIndexesFromExternal[h]&&r._skippedIndexesFromExternal[h]++}};for(const i of r)s(0,i,r.getIndex(i));this.listenTo(r,"add",s),this.listenTo(r,"remove",(i,o,a)=>{const l=this._bindToExternalToInternalMap.get(o);l&&this.remove(l),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((c,u)=>(a<u&&c.push(u-1),a>u&&c.push(u),c),[])})}_getItemIdBeforeAdding(t){const r=this._idProperty;let s;if(r in t){if(s=t[r],typeof s!="string")throw new A("collection-add-invalid-id",this);if(this.get(s))throw new A("collection-add-item-already-exists",this)}else t[r]=s=El();return s}_remove(t){let r,s,i,o=!1;const a=this._idProperty;if(typeof t=="string"?(s=t,i=this._itemMap.get(s),o=!i,i&&(r=this._items.indexOf(i))):typeof t=="number"?(r=t,i=this._items[r],o=!i,i&&(s=i[a])):(i=t,s=i[a],r=this._items.indexOf(i),o=r==-1||!this._itemMap.get(s)),o)throw new A("collection-remove-404",this);this._items.splice(r,1),this._itemMap.delete(s);const l=this._bindToInternalToExternalMap.get(i);return this._bindToInternalToExternalMap.delete(i),this._bindToExternalToInternalMap.delete(l),this.fire("remove",i,r),[i,r]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}function Yh(n){const e=n.next();return e.done?null:e.value}class Wi extends Ui(sn()){constructor(){super();f(this,"_elements",new Set);f(this,"_nextEventLoopTimeout",null);this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}add(t){if(this._elements.has(t))throw new A("focustracker-add-element-already-exist",this);this.listenTo(t,"focus",()=>this._focus(t),{useCapture:!0}),this.listenTo(t,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(t)}remove(t){t===this.focusedElement&&this._blur(),this._elements.has(t)&&(this.stopListening(t),this._elements.delete(t))}destroy(){this.stopListening()}_focus(t){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=t,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}class qi{constructor(){f(this,"_listener");this._listener=new(Ui())}listenTo(e){this._listener.listenTo(e,"keydown",(t,r)=>{this._listener.fire("_keydown:"+nu(r),r)})}set(e,t,r={}){const s=ku(e),i=r.priority;this._listener.listenTo(this._listener,"_keydown:"+s,(o,a)=>{r.filter&&!r.filter(a)||(t(a,()=>{a.preventDefault(),a.stopPropagation(),o.stop()}),o.return=!0)},{priority:i})}press(e){return!!this._listener.fire("_keydown:"+nu(e),e)}stopListening(e){this._listener.stopListening(e)}destroy(){this.stopListening()}}function $o(n){return ar(n)?new Map(n):function(e){const t=new Map;for(const r in e)t.set(r,e[r]);return t}(n)}function _j(n,e,t,r){if(Math.max(e.length,n.length)>1e4)return n.slice(0,t).concat(e).concat(n.slice(t+r,n.length));{const s=Array.from(n);return s.splice(t,r,...e),s}}function bj(n,e){let t;function r(...s){r.cancel(),t=setTimeout(()=>n(...s),e)}return r.cancel=()=>{clearTimeout(t)},r}function xj(n){function e(d){return d.length>=40&&d.length<=255?"VALID":"INVALID"}if(!n)return"INVALID";let t="";try{t=atob(n)}catch{return"INVALID"}const r=t.split("-"),s=r[0],i=r[1];if(!i)return e(n);try{atob(i)}catch{try{if(atob(s),!atob(s).length)return e(n)}catch{return e(n)}}if(s.length<40||s.length>255)return"INVALID";let o="";try{atob(s),o=atob(i)}catch{return"INVALID"}if(o.length!==8)return"INVALID";const a=Number(o.substring(0,4)),l=Number(o.substring(4,6))-1,c=Number(o.substring(6,8)),u=new Date(a,l,c);return u<RM||isNaN(Number(u))?"INVALID":"VALID"}function kj(n){return!!n&&n.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n)}function Ej(n){return!!n&&n.length==1&&/[\ud800-\udbff]/.test(n)}function Sj(n){return!!n&&n.length==1&&/[\udc00-\udfff]/.test(n)}function aS(n,e){return Ej(n.charAt(e-1))&&Sj(n.charAt(e))}function lS(n,e){return kj(n.charAt(e))}const Cj=Tj();function Pj(n,e){const t=String(n).matchAll(Cj);return Array.from(t).some(r=>r.index<e&&e<r.index+r[0].length)}function Tj(){const n=new RegExp("\\p{Regional_Indicator}{2}","u").source,e="(?:"+[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")].map(t=>t.source).join("|")+")";return new RegExp(`${n}|${e}(?:${e})*`,"ug")}class cS extends nt(){constructor(t,r=[],s=[]){super();f(this,"_context");f(this,"_plugins",new Map);f(this,"_availablePlugins");f(this,"_contextPlugins");this._context=t,this._availablePlugins=new Map;for(const i of r)i.pluginName&&this._availablePlugins.set(i.pluginName,i);this._contextPlugins=new Map;for(const[i,o]of s)this._contextPlugins.set(i,o),this._contextPlugins.set(o,i),i.pluginName&&this._availablePlugins.set(i.pluginName,i)}*[Symbol.iterator](){for(const t of this._plugins)typeof t[0]=="function"&&(yield t)}get(t){const r=this._plugins.get(t);if(!r){let s=t;throw typeof t=="function"&&(s=t.pluginName||t.name),new A("plugincollection-plugin-not-loaded",this._context,{plugin:s})}return r}has(t){return this._plugins.has(t)}init(t,r=[],s=[]){const i=this,o=this._context;(function v(w,y=new Set){w.forEach(g=>{c(g)&&(y.has(g)||(y.add(g),g.pluginName&&!i._availablePlugins.has(g.pluginName)&&i._availablePlugins.set(g.pluginName,g),g.requires&&v(g.requires,y)))})})(t),p(t);const a=[...function v(w,y=new Set){return w.map(g=>c(g)?g:i._availablePlugins.get(g)).reduce((g,b)=>y.has(b)?g:(y.add(b),b.requires&&(p(b.requires,b),v(b.requires,y).forEach(x=>g.add(x))),g.add(b)),new Set)}(t.filter(v=>!d(v,r)))];(function(v,w){for(const y of w){if(typeof y!="function")throw new A("plugincollection-replace-plugin-invalid-type",null,{pluginItem:y});const g=y.pluginName;if(!g)throw new A("plugincollection-replace-plugin-missing-name",null,{pluginItem:y});if(y.requires&&y.requires.length)throw new A("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:g});const b=i._availablePlugins.get(g);if(!b)throw new A("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:g});const x=v.indexOf(b);if(x===-1){if(i._contextPlugins.has(b))return;throw new A("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:g})}if(b.requires&&b.requires.length)throw new A("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:g});v.splice(x,1,y),i._availablePlugins.set(g,y)}})(a,s);const l=function(v){return v.map(w=>{let y=i._contextPlugins.get(w);return y=y||new w(o),i._add(w,y),y})}(a);return _(l,"init").then(()=>_(l,"afterInit")).then(()=>l);function c(v){return typeof v=="function"}function u(v){return c(v)&&!!v.isContextPlugin}function d(v,w){return w.some(y=>y===v||h(v)===y||h(y)===v)}function h(v){return c(v)?v.pluginName||v.name:v}function p(v,w=null){v.map(y=>c(y)?y:i._availablePlugins.get(y)||y).forEach(y=>{(function(g,b){if(!c(g))throw b?new A("plugincollection-soft-required",o,{missingPlugin:g,requiredBy:h(b)}):new A("plugincollection-plugin-not-found",o,{plugin:g})})(y,w),function(g,b){if(u(b)&&!u(g))throw new A("plugincollection-context-required",o,{plugin:h(g),requiredBy:h(b)})}(y,w),function(g,b){if(b&&d(g,r))throw new A("plugincollection-required",o,{plugin:h(g),requiredBy:h(b)})}(y,w)})}function _(v,w){return v.reduce((y,g)=>g[w]?i._contextPlugins.has(g)?y:y.then(g[w].bind(g)):y,Promise.resolve())}}destroy(){const t=[];for(const[,r]of this)typeof r.destroy!="function"||this._contextPlugins.has(r)||t.push(r.destroy());return Promise.all(t)}_add(t,r){this._plugins.set(t,r);const s=t.pluginName;if(s){if(this._plugins.has(s))throw new A("plugincollection-plugin-name-conflict",null,{pluginName:s,plugin1:this._plugins.get(s).constructor,plugin2:t});this._plugins.set(s,r)}}}class mh{constructor(e){f(this,"config");f(this,"plugins");f(this,"locale");f(this,"t");f(this,"editors");f(this,"_contextOwner",null);const{translations:t,...r}=e||{};this.config=new GE(r,this.constructor.defaultConfig);const s=this.constructor.builtinPlugins;this.config.define("plugins",s),this.plugins=new cS(this,s);const i=this.config.get("language")||{};this.locale=new wj({uiLanguage:typeof i=="string"?i:i.ui,contentLanguage:this.config.get("language.content"),translations:t}),this.t=this.locale.t,this.editors=new Sl}initPlugins(){const e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const r of e.concat(t)){if(typeof r!="function")throw new A("context-initplugins-constructor-only",null,{Plugin:r});if(r.isContextPlugin!==!0)throw new A("context-initplugins-invalid-plugin",null,{Plugin:r})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,t){if(this._contextOwner)throw new A("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(e){return new Promise(t=>{const r=new this(e);t(r.initPlugins().then(()=>r))})}}f(mh,"defaultConfig"),f(mh,"builtinPlugins");const Sd=new WeakMap;let pb=!1;function Aj({view:n,element:e,text:t,isDirectHost:r=!0,keepOnFocus:s=!1}){const i=n.document;function o(a){Sd.get(i).set(e,{text:a,isDirectHost:r,keepOnFocus:s,hostElement:r?e:null}),n.change(l=>Gf(i,l))}Sd.has(i)||(Sd.set(i,new Map),i.registerPostFixer(a=>Gf(i,a)),i.on("change:isComposing",()=>{n.change(a=>Gf(i,a))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(a,l,c)=>{o(c)}),e.placeholder?o(e.placeholder):t&&o(t),t&&function(){pb||Pt("enableplaceholder-deprecated-text-option"),pb=!0}()}function Oj(n,e){return!e.hasClass("ck-placeholder")&&(n.addClass("ck-placeholder",e),!0)}function Nj(n,e){return!!e.hasClass("ck-placeholder")&&(n.removeClass("ck-placeholder",e),!0)}function Rj(n,e){if(!n.isAttached()||Array.from(n.getChildren()).some(i=>!i.is("uiElement")))return!1;const r=n.document,s=r.selection.anchor;return(!r.isComposing||!s||s.parent!==n)&&(!!e||!r.isFocused||!!s&&s.parent!==n)}function Gf(n,e){const t=Sd.get(n),r=[];let s=!1;for(const[i,o]of t)o.isDirectHost&&(r.push(i),gb(e,i,o)&&(s=!0));for(const[i,o]of t){if(o.isDirectHost)continue;const a=Mj(i);a&&(r.includes(a)||(o.hostElement=a,gb(e,i,o)&&(s=!0)))}return s}function gb(n,e,t){const{text:r,isDirectHost:s,hostElement:i}=t;let o=!1;return i.getAttribute("data-placeholder")!==r&&(n.setAttribute("data-placeholder",r,i),o=!0),(s||e.childCount==1)&&Rj(i,t.keepOnFocus)?Oj(n,i)&&(o=!0):Nj(n,i)&&(o=!0),o}function Mj(n){if(n.childCount){const e=n.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}let Ho=class{is(){throw new Error("is() method is abstract")}},Ko=class extends nt(Ho){constructor(e){super();f(this,"document");f(this,"parent");this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new A("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={}){const t=[];let r=e.includeSelf?this:this.parent;for(;r;)t[e.parentFirst?"push":"unshift"](r),r=r.parent;return t}getCommonAncestor(e,t={}){const r=this.getAncestors(t),s=e.getAncestors(t);let i=0;for(;r[i]==s[i]&&r[i];)i++;return i===0?null:r[i-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),r=e.getPath(),s=Pn(t,r);switch(s){case"prefix":return!0;case"extension":return!1;default:return t[s]<r[s]}}isAfter(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire(`change:${e}`,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){const e=QE(this);return delete e.parent,e}};Ko.prototype.is=function(n){return n==="node"||n==="view:node"};let xt=class Yp extends Ko{constructor(t,r){super(t);f(this,"_textData");this._textData=r}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof Yp&&(this===t||this.data===t.data)}_clone(){return new Yp(this.document,this.data)}};xt.prototype.is=function(n){return n==="$text"||n==="view:$text"||n==="text"||n==="view:text"||n==="node"||n==="view:node"};let Zr=class extends Ho{constructor(e,t,r){super();f(this,"textNode");f(this,"data");f(this,"offsetInText");if(this.textNode=e,t<0||t>e.data.length)throw new A("view-textproxy-wrong-offsetintext",this);if(r<0||t+r>e.data.length)throw new A("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+r),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const t=[];let r=e.includeSelf?this.textNode:this.parent;for(;r!==null;)t[e.parentFirst?"push":"unshift"](r),r=r.parent;return t}};Zr.prototype.is=function(n){return n==="$textProxy"||n==="view:$textProxy"||n==="textProxy"||n==="view:textProxy"};class ru{constructor(...e){f(this,"_patterns",[]);this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const t of e)for(const r of this._patterns){const s=yb(t,r);if(s)return{element:t,pattern:r,match:s}}return null}matchAll(...e){const t=[];for(const r of e)for(const s of this._patterns){const i=yb(r,s);i&&t.push({element:r,pattern:s,match:i})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const e=this._patterns[0],t=e.name;return typeof e=="function"||!t||t instanceof RegExp?null:t}}function yb(n,e){if(typeof e=="function")return e(n);const t={};return e.name&&(t.name=function(r,s){return r instanceof RegExp?!!s.match(r):r===s}(e.name,n.name),!t.name)||e.attributes&&(t.attributes=function(r,s){const i=new Set(s.getAttributeKeys());return wr(r)?(r.style!==void 0&&Pt("matcher-pattern-deprecated-attributes-style-key",r),r.class!==void 0&&Pt("matcher-pattern-deprecated-attributes-class-key",r)):(i.delete("style"),i.delete("class")),Yf(r,i,o=>s.getAttribute(o))}(e.attributes,n),!t.attributes)||e.classes&&(t.classes=function(r,s){return Yf(r,s.getClassNames(),()=>{})}(e.classes,n),!t.classes)||e.styles&&(t.styles=function(r,s){return Yf(r,s.getStyleNames(!0),i=>s.getStyle(i))}(e.styles,n),!t.styles)?null:t}function Yf(n,e,t){const r=function(o){return Array.isArray(o)?o.map(a=>wr(a)?(a.key!==void 0&&a.value!==void 0||Pt("matcher-pattern-missing-key-or-value",a),[a.key,a.value]):[a,!0]):wr(o)?Object.entries(o):[[o,!0]]}(n),s=Array.from(e),i=[];if(r.forEach(([o,a])=>{s.forEach(l=>{(function(c,u){return c===!0||c===u||c instanceof RegExp&&u.match(c)})(o,l)&&function(c,u,d){if(c===!0)return!0;const h=d(u);return c===h||c instanceof RegExp&&!!String(h).match(c)}(a,l,t)&&i.push(l)})}),r.length&&!(i.length<r.length))return i}class Xp{constructor(e){f(this,"_styles");f(this,"_styleProcessor");this._styles={},this._styleProcessor=e}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const t=function(r){let s=null,i=0,o=0,a=null;const l=new Map;if(r==="")return l;r.charAt(r.length-1)!=";"&&(r+=";");for(let c=0;c<r.length;c++){const u=r.charAt(c);if(s===null)switch(u){case":":a||(a=r.substr(i,c-i),o=c+1);break;case'"':case"'":s=u;break;case";":{const d=r.substr(o,c-o);a&&l.set(a.trim(),d.trim()),a=null,i=c+1;break}}else u===s&&(s=null)}return l}(e);for(const[r,s]of t)this._styleProcessor.toNormalizedForm(r,s,this._styles)}has(e){if(this.isEmpty)return!1;const t=this._styleProcessor.getReducedForm(e,this._styles).find(([r])=>r===e);return Array.isArray(t)}set(e,t){if(At(e))for(const[r,s]of Object.entries(e))this._styleProcessor.toNormalizedForm(r,s,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){const t=eg(e);(function(r,s){r==null||GI(r,s)})(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!At(this._styles[e]))return this._styles[e];const t=this._styleProcessor.getReducedForm(e,this._styles).find(([r])=>r===e);return Array.isArray(t)?t[1]:void 0}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([t])=>t)}clear(){this._styles={}}getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const r of t)e.push(...this._styleProcessor.getReducedForm(r,this._styles));return e}_cleanEmptyObjectsOnPath(e){const t=e.split(".");if(!(t.length>1))return;const r=t.splice(0,t.length-1).join("."),s=uh(this._styles,r);s&&!Object.keys(s).length&&this.remove(r)}}class Ij{constructor(){f(this,"_normalizers");f(this,"_extractors");f(this,"_reducers");f(this,"_consumables");this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,r){if(At(t))Xf(r,eg(e),t);else if(this._normalizers.has(e)){const s=this._normalizers.get(e),{path:i,value:o}=s(t);Xf(r,i,o)}else Xf(r,e,t)}getNormalized(e,t){if(!e)return By({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){const r=this._extractors.get(e);if(typeof r=="string")return uh(t,r);const s=r(e,t);if(s)return s}return uh(t,eg(e))}getReducedForm(e,t){const r=this.getNormalized(e,t);return r===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(r):[[e,r]]}getStyleNames(e){const t=new Set;for(const r of this._consumables.keys()){const s=this.getNormalized(r,e);s&&(typeof s!="object"||Object.keys(s).length)&&t.add(r)}for(const r of Object.keys(e))t.add(r);return Array.from(t)}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const r of t)this._mapStyleNames(r,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function eg(n){return n.replace("-",".")}function Xf(n,e,t){let r=t;At(t)&&(r=By({},uh(n,e),t)),YI(n,e,r)}let $s=class uS extends Ko{constructor(t,r,s,i){super(t);f(this,"name");f(this,"_unsafeAttributesToRender",[]);f(this,"_attrs");f(this,"_children");f(this,"_classes");f(this,"_styles");f(this,"_customProperties",new Map);if(this.name=r,this._attrs=function(o){const a=$o(o);for(const[l,c]of a)c===null?a.delete(l):typeof c!="string"&&a.set(l,String(c));return a}(s),this._children=[],i&&this._insertChild(0,i),this._classes=new Set,this._attrs.has("class")){const o=this._attrs.get("class");vb(this._classes,o),this._attrs.delete("class")}this._styles=new Xp(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(t){if(t=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(t=="style"){const r=this._styles.toString();return r==""?void 0:r}return this._attrs.get(t)}hasAttribute(t){return t=="class"?this._classes.size>0:t=="style"?!this._styles.isEmpty:this._attrs.has(t)}isSimilar(t){if(!(t instanceof uS))return!1;if(this===t)return!0;if(this.name!=t.name||this._attrs.size!==t._attrs.size||this._classes.size!==t._classes.size||this._styles.size!==t._styles.size)return!1;for(const[r,s]of this._attrs)if(!t._attrs.has(r)||t._attrs.get(r)!==s)return!1;for(const r of this._classes)if(!t._classes.has(r))return!1;for(const r of this._styles.getStyleNames())if(!t._styles.has(r)||t._styles.getAsString(r)!==this._styles.getAsString(r))return!1;return!0}hasClass(...t){for(const r of t)if(!this._classes.has(r))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(t){return this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles.getNormalized(t)}getStyleNames(t){return this._styles.getStyleNames(t)}hasStyle(...t){for(const r of t)if(!this._styles.has(r))return!1;return!0}findAncestor(...t){const r=new ru(...t);let s=this.parent;for(;s&&!s.is("documentFragment");){if(r.match(s))return s;s=s.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=Array.from(this._classes).sort().join(","),r=this._styles.toString(),s=Array.from(this._attrs).map(i=>`${i[0]}="${i[1]}"`).sort().join(" ");return this.name+(t==""?"":` class="${t}"`)+(r?` style="${r}"`:"")+(s==""?"":` ${s}`)}shouldRenderUnsafeAttribute(t){return this._unsafeAttributesToRender.includes(t)}_clone(t=!1){const r=[];if(t)for(const i of this.getChildren())r.push(i._clone(t));const s=new this.constructor(this.document,this.name,this._attrs,r);return s._classes=new Set(this._classes),s._styles.set(this._styles.getNormalized()),s._customProperties=new Map(this._customProperties),s.getFillerOffset=this.getFillerOffset,s._unsafeAttributesToRender=this._unsafeAttributesToRender,s}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,r){this._fireChange("children",this);let s=0;const i=function(o,a){return typeof a=="string"?[new xt(o,a)]:(ar(a)||(a=[a]),Array.from(a).map(l=>typeof l=="string"?new xt(o,l):l instanceof Zr?new xt(o,l.data):l))}(this.document,r);for(const o of i)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(t,0,o),t++,s++;return s}_removeChildren(t,r=1){this._fireChange("children",this);for(let s=t;s<t+r;s++)this._children[s].parent=null;return this._children.splice(t,r)}_setAttribute(t,r){const s=String(r);this._fireChange("attributes",this),t=="class"?vb(this._classes,s):t=="style"?this._styles.setTo(s):this._attrs.set(t,s)}_removeAttribute(t){return this._fireChange("attributes",this),t=="class"?this._classes.size>0&&(this._classes.clear(),!0):t=="style"?!this._styles.isEmpty&&(this._styles.clear(),!0):this._attrs.delete(t)}_addClass(t){this._fireChange("attributes",this);for(const r of _n(t))this._classes.add(r)}_removeClass(t){this._fireChange("attributes",this);for(const r of _n(t))this._classes.delete(r)}_setStyle(t,r){this._fireChange("attributes",this),typeof t!="string"?this._styles.set(t):this._styles.set(t,r)}_removeStyle(t){this._fireChange("attributes",this);for(const r of _n(t))this._styles.remove(r)}_setCustomProperty(t,r){this._customProperties.set(t,r)}_removeCustomProperty(t){return this._customProperties.delete(t)}};function vb(n,e){const t=e.split(/\s+/);n.clear(),t.forEach(r=>n.add(r))}$s.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="view:element"):n==="element"||n==="view:element"||n==="node"||n==="view:node"};class su extends $s{constructor(e,t,r,s){super(e,t,r,s),this.getFillerOffset=jj}}function jj(){const n=[...this.getChildren()],e=n[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const t of n)if(!t.is("uiElement"))return null;return this.childCount}su.prototype.is=function(n,e){return e?e===this.name&&(n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};class Xh extends sn(su){constructor(e,t,r,s){super(e,t,r,s),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",i=>i&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}destroy(){this.stopListening()}}Xh.prototype.is=function(n,e){return e?e===this.name&&(n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};const wb=Symbol("rootName");class dS extends Xh{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty(wb)}set rootName(e){this._setCustomProperty(wb,e)}set _name(e){this.name=e}}dS.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};let fo=class{constructor(n={}){f(this,"direction");f(this,"boundaries");f(this,"singleCharacters");f(this,"shallow");f(this,"ignoreElementEnd");f(this,"_position");f(this,"_boundaryStartParent");f(this,"_boundaryEndParent");if(!n.boundaries&&!n.startPosition)throw new A("view-tree-walker-no-start-position",null);if(n.direction&&n.direction!="forward"&&n.direction!="backward")throw new A("view-tree-walker-unknown-direction",n.startPosition,{direction:n.direction});this.boundaries=n.boundaries||null,n.startPosition?this._position=X._createAt(n.startPosition):this._position=X._createAt(n.boundaries[n.direction=="backward"?"end":"start"]),this.direction=n.direction||"forward",this.singleCharacters=!!n.singleCharacters,this.shallow=!!n.shallow,this.ignoreElementEnd=!!n.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(n){let e,t;do t=this.position,e=this.next();while(!e.done&&n(e.value));e.done||(this._position=t)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let n=this.position.clone();const e=this.position,t=n.parent;if(t.parent===null&&n.offset===t.childCount)return{done:!0,value:void 0};if(t===this._boundaryEndParent&&n.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let r;if(t instanceof xt){if(n.isAtEnd)return this._position=X._createAfter(t),this._next();r=t.data[n.offset]}else r=t.getChild(n.offset);if(r instanceof $s){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(n))return{done:!0,value:void 0};n.offset++}else n=new X(r,0);return this._position=n,this._formatReturnValue("elementStart",r,e,n,1)}if(r instanceof xt){if(this.singleCharacters)return n=new X(r,0),this._position=n,this._next();let s,i=r.data.length;return r==this._boundaryEndParent?(i=this.boundaries.end.offset,s=new Zr(r,0,i),n=X._createAfter(s)):(s=new Zr(r,0,r.data.length),n.offset++),this._position=n,this._formatReturnValue("text",s,e,n,i)}if(typeof r=="string"){let s;this.singleCharacters?s=1:s=(t===this._boundaryEndParent?this.boundaries.end.offset:t.data.length)-n.offset;const i=new Zr(t,n.offset,s);return n.offset+=s,this._position=n,this._formatReturnValue("text",i,e,n,s)}return n=X._createAfter(t),this._position=n,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",t,e,n)}_previous(){let n=this.position.clone();const e=this.position,t=n.parent;if(t.parent===null&&n.offset===0)return{done:!0,value:void 0};if(t==this._boundaryStartParent&&n.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let r;if(t instanceof xt){if(n.isAtStart)return this._position=X._createBefore(t),this._previous();r=t.data[n.offset-1]}else r=t.getChild(n.offset-1);if(r instanceof $s)return this.shallow?(n.offset--,this._position=n,this._formatReturnValue("elementStart",r,e,n,1)):(n=new X(r,r.childCount),this._position=n,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",r,e,n));if(r instanceof xt){if(this.singleCharacters)return n=new X(r,r.data.length),this._position=n,this._previous();let s,i=r.data.length;if(r==this._boundaryStartParent){const o=this.boundaries.start.offset;s=new Zr(r,o,r.data.length-o),i=s.data.length,n=X._createBefore(s)}else s=new Zr(r,0,r.data.length),n.offset--;return this._position=n,this._formatReturnValue("text",s,e,n,i)}if(typeof r=="string"){let s;if(this.singleCharacters)s=1;else{const o=t===this._boundaryStartParent?this.boundaries.start.offset:0;s=n.offset-o}n.offset-=s;const i=new Zr(t,n.offset,s);return this._position=n,this._formatReturnValue("text",i,e,n,s)}return n=X._createBefore(t),this._position=n,this._formatReturnValue("elementStart",t,e,n,1)}_formatReturnValue(n,e,t,r,s){return e instanceof Zr&&(e.offsetInText+e.data.length==e.textNode.data.length&&(this.direction!="forward"||this.boundaries&&this.boundaries.end.isEqual(this.position)?t=X._createAfter(e.textNode):(r=X._createAfter(e.textNode),this._position=r)),e.offsetInText===0&&(this.direction!="backward"||this.boundaries&&this.boundaries.start.isEqual(this.position)?t=X._createBefore(e.textNode):(r=X._createBefore(e.textNode),this._position=r))),{done:!1,value:{type:n,item:e,previousPosition:t,nextPosition:r,length:s}}}},X=class ps extends Ho{constructor(t,r){super();f(this,"parent");f(this,"offset");this.parent=t,this.offset=r}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof Xh);){if(!t.parent)return null;t=t.parent}return t}getShiftedBy(t){const r=ps._createAt(this),s=r.offset+t;return r.offset=s<0?0:s,r}getLastMatchingPosition(t,r={}){r.startPosition=this;const s=new fo(r);return s.skip(t),s.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const r=this.getAncestors(),s=t.getAncestors();let i=0;for(;r[i]==s[i]&&r[i];)i++;return i===0?null:r[i-1]}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return this.compareWith(t)=="before"}isAfter(t){return this.compareWith(t)=="after"}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const r=this.parent.is("node")?this.parent.getPath():[],s=t.parent.is("node")?t.parent.getPath():[];r.push(this.offset),s.push(t.offset);const i=Pn(r,s);switch(i){case"prefix":return"before";case"extension":return"after";default:return r[i]<s[i]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new fo(t)}clone(){return new ps(this.parent,this.offset)}static _createAt(t,r){if(t instanceof ps)return new this(t.parent,t.offset);{const s=t;if(r=="end")r=s.is("$text")?s.data.length:s.childCount;else{if(r=="before")return this._createBefore(s);if(r=="after")return this._createAfter(s);if(r!==0&&!r)throw new A("view-createpositionat-offset-required",s)}return new ps(s,r)}}static _createAfter(t){if(t.is("$textProxy"))return new ps(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new A("view-position-after-root",t,{root:t});return new ps(t.parent,t.index+1)}static _createBefore(t){if(t.is("$textProxy"))return new ps(t.textNode,t.offsetInText);if(!t.parent)throw new A("view-position-before-root",t,{root:t});return new ps(t.parent,t.index)}};X.prototype.is=function(n){return n==="position"||n==="view:position"};let Re=class Ks extends Ho{constructor(t,r=null){super();f(this,"start");f(this,"end");this.start=t.clone(),this.end=r?r.clone():t.clone()}*[Symbol.iterator](){yield*new fo({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(sd,{direction:"backward"}),r=this.end.getLastMatchingPosition(sd);return t.parent.is("$text")&&t.isAtStart&&(t=X._createBefore(t.parent)),r.parent.is("$text")&&r.isAtEnd&&(r=X._createAfter(r.parent)),new Ks(t,r)}getTrimmed(){let t=this.start.getLastMatchingPosition(sd);if(t.isAfter(this.end)||t.isEqual(this.end))return new Ks(t,t);let r=this.end.getLastMatchingPosition(sd,{direction:"backward"});const s=t.nodeAfter,i=r.nodeBefore;return s&&s.is("$text")&&(t=new X(s,0)),i&&i.is("$text")&&(r=new X(i,i.data.length)),new Ks(t,r)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,r=!1){t.isCollapsed&&(r=!1);const s=this.containsPosition(t.start)||r&&this.start.isEqual(t.start),i=this.containsPosition(t.end)||r&&this.end.isEqual(t.end);return s&&i}getDifference(t){const r=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&r.push(new Ks(this.start,t.start)),this.containsPosition(t.end)&&r.push(new Ks(t.end,this.end))):r.push(this.clone()),r}getIntersection(t){if(this.isIntersecting(t)){let r=this.start,s=this.end;return this.containsPosition(t.start)&&(r=t.start),this.containsPosition(t.end)&&(s=t.end),new Ks(r,s)}return null}getWalker(t={}){return t.boundaries=this,new fo(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let t=this.start.nodeAfter,r=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(r=this.end.parent.previousSibling),t&&t.is("element")&&t===r?t:null}clone(){return new Ks(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const r=new fo(t);for(const s of r)yield s.item}*getPositions(t={}){t.boundaries=this;const r=new fo(t);yield r.position;for(const s of r)yield s.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}static _createFromParentsAndOffsets(t,r,s,i){return new this(new X(t,r),new X(s,i))}static _createFromPositionAndShift(t,r){const s=t,i=t.getShiftedBy(r);return r>0?new this(s,i):new this(i,s)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const r=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(X._createBefore(t),r)}};function sd(n){return!(!n.item.is("attributeElement")&&!n.item.is("uiElement"))}Re.prototype.is=function(n){return n==="range"||n==="view:range"};let Si=class hS extends nt(Ho){constructor(...t){super();f(this,"_ranges");f(this,"_lastRangeBackward");f(this,"_isFake");f(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",t.length&&this.setTo(...t)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const r of this._ranges)t&&!r.start.isBefore(t.start)||(t=r);return t?t.clone():null}getLastRange(){let t=null;for(const r of this._ranges)t&&!r.end.isAfter(t.end)||(t=r);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake||this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel||this.rangeCount!=t.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const r of this._ranges){let s=!1;for(const i of t._ranges)if(r.isEqual(i)){s=!0;break}if(!s)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const r=nb(this.getRanges());if(r!=nb(t.getRanges()))return!1;if(r==0)return!0;for(let s of this.getRanges()){s=s.getTrimmed();let i=!1;for(let o of t.getRanges())if(o=o.getTrimmed(),s.start.isEqual(o.start)&&s.end.isEqual(o.end)){i=!0;break}if(!i)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...t){let[r,s,i]=t;if(typeof s=="object"&&(i=s,s=void 0),r===null)this._setRanges([]),this._setFakeOptions(i);else if(r instanceof hS||r instanceof qy)this._setRanges(r.getRanges(),r.isBackward),this._setFakeOptions({fake:r.isFake,label:r.fakeSelectionLabel});else if(r instanceof Re)this._setRanges([r],i&&i.backward),this._setFakeOptions(i);else if(r instanceof X)this._setRanges([new Re(r)]),this._setFakeOptions(i);else if(r instanceof Ko){const o=!!i&&!!i.backward;let a;if(s===void 0)throw new A("view-selection-setto-required-second-parameter",this);a=s=="in"?Re._createIn(r):s=="on"?Re._createOn(r):new Re(X._createAt(r,s)),this._setRanges([a],o),this._setFakeOptions(i)}else{if(!ar(r))throw new A("view-selection-setto-not-selectable",this);this._setRanges(r,i&&i.backward),this._setFakeOptions(i)}this.fire("change")}setFocus(t,r){if(this.anchor===null)throw new A("view-selection-setfocus-no-ranges",this);const s=X._createAt(t,r);if(s.compareWith(this.focus)=="same")return;const i=this.anchor;this._ranges.pop(),s.compareWith(i)=="before"?this._addRange(new Re(s,i),!0):this._addRange(new Re(i,s)),this.fire("change")}_setRanges(t,r=!1){t=Array.from(t),this._ranges=[];for(const s of t)this._addRange(s);this._lastRangeBackward=!!r}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,r=!1){if(!(t instanceof Re))throw new A("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!r}_pushRange(t){for(const r of this._ranges)if(t.isIntersecting(r))throw new A("view-selection-range-intersects",this,{addedRange:t,intersectingRange:r});this._ranges.push(new Re(t.start,t.end))}};Si.prototype.is=function(n){return n==="selection"||n==="view:selection"};let qy=class extends nt(Ho){constructor(...e){super();f(this,"_selection");this._selection=new Si,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,t){this._selection.setFocus(e,t)}};qy.prototype.is=function(n){return n==="selection"||n=="documentSelection"||n=="view:selection"||n=="view:documentSelection"};class Hy extends dl{constructor(t,r,s){super(t,r);f(this,"startRange");f(this,"_eventPhase");f(this,"_currentTarget");this.startRange=s,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const em=Symbol("bubbling contexts");function tg(n){return class extends n{fire(e,...t){try{const r=e instanceof dl?e:new dl(this,e),s=tm(this);if(!s.size)return;if(Hl(r,"capturing",this),ra(s,"$capture",r,...t))return r.return;const i=r.startRange||this.selection.getFirstRange(),o=i?i.getContainedElement():null,a=!!o&&!!fS(s,o);let l=o||function(c){if(!c)return null;const u=c.start.parent,d=c.end.parent,h=u.getPath(),p=d.getPath();return h.length>p.length?u:d}(i);if(Hl(r,"atTarget",l),!a){if(ra(s,"$text",r,...t))return r.return;Hl(r,"bubbling",l)}for(;l;){if(l.is("rootElement")){if(ra(s,"$root",r,...t))return r.return}else if(l.is("element")&&ra(s,l.name,r,...t))return r.return;if(ra(s,l,r,...t))return r.return;l=l.parent,Hl(r,"bubbling",l)}return Hl(r,"bubbling",this),ra(s,"$document",r,...t),r.return}catch(r){A.rethrowUnexpectedError(r,this)}}_addEventListener(e,t,r){const s=_n(r.context||"$document"),i=tm(this);for(const o of s){let a=i.get(o);a||(a=new(nt()),i.set(o,a)),this.listenTo(a,e,t,r)}}_removeEventListener(e,t){const r=tm(this);for(const s of r.values())this.stopListening(s,e,t)}}}{const n=tg(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{tg[e]=n.prototype[e]})}function Hl(n,e,t){n instanceof Hy&&(n._eventPhase=e,n._currentTarget=t)}function ra(n,e,t,...r){const s=typeof e=="string"?n.get(e):fS(n,e);return!!s&&(s.fire(t,...r),t.stop.called)}function fS(n,e){for(const[t,r]of n)if(typeof t=="function"&&t(e))return r;return null}function tm(n){return n[em]||(n[em]=new Map),n[em]}let mS=class extends tg(sn()){constructor(e){super();f(this,"selection");f(this,"roots");f(this,"stylesProcessor");f(this,"_postFixers",new Set);this.selection=new qy,this.roots=new Sl({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do for(const r of this._postFixers)if(t=r(e),t)break;while(t)}};class Po extends $s{constructor(t,r,s,i){super(t,r,s,i);f(this,"_priority",10);f(this,"_id",null);f(this,"_clonesGroup",null);this.getFillerOffset=Dj}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new A("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return this.id!==null||t.id!==null?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}_clone(t=!1){const r=super._clone(t);return r._priority=this._priority,r._id=this._id,r}}f(Po,"DEFAULT_PRIORITY",10);function Dj(){if(nm(this))return null;let n=this.parent;for(;n&&n.is("attributeElement");){if(nm(n)>1)return null;n=n.parent}return!n||nm(n)>1?null:this.childCount}function nm(n){return Array.from(n.getChildren()).filter(e=>!e.is("uiElement")).length}Po.prototype.is=function(n,e){return e?e===this.name&&(n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"):n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};class Ky extends $s{constructor(e,t,r,s){super(e,t,r,s),this.getFillerOffset=Fj}_insertChild(e,t){if(t&&(t instanceof Ko||Array.from(t).length>0))throw new A("view-emptyelement-cannot-add",[this,t]);return 0}}function Fj(){return null}Ky.prototype.is=function(n,e){return e?e===this.name&&(n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"):n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};class ef extends $s{constructor(e,t,r,s){super(e,t,r,s),this.getFillerOffset=Vj}_insertChild(e,t){if(t&&(t instanceof Ko||Array.from(t).length>0))throw new A("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const r of this.getAttributeKeys())t.setAttribute(r,this.getAttribute(r));return t}}function Lj(n){n.document.on("arrowKey",(e,t)=>function(r,s,i){if(s.keyCode==ft.arrowright){const o=s.domTarget.ownerDocument.defaultView.getSelection(),a=o.rangeCount==1&&o.getRangeAt(0).collapsed;if(a||s.shiftKey){const l=o.focusNode,c=o.focusOffset,u=i.domPositionToView(l,c);if(u===null)return;let d=!1;const h=u.getLastMatchingPosition(p=>(p.item.is("uiElement")&&(d=!0),!(!p.item.is("uiElement")&&!p.item.is("attributeElement"))));if(d){const p=i.viewPositionToDom(h);a?o.collapse(p.parent,p.offset):o.extend(p.parent,p.offset)}}}}(0,t,n.domConverter),{priority:"low"})}function Vj(){return null}ef.prototype.is=function(n,e){return e?e===this.name&&(n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"):n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};class Qy extends $s{constructor(e,t,r,s){super(e,t,r,s),this.getFillerOffset=$j}_insertChild(e,t){if(t&&(t instanceof Ko||Array.from(t).length>0))throw new A("view-rawelement-cannot-add",[this,t]);return 0}render(e,t){}}function $j(){return null}Qy.prototype.is=function(n,e){return e?e===this.name&&(n==="rawElement"||n==="view:rawElement"||n==="element"||n==="view:element"):n==="rawElement"||n==="view:rawElement"||n===this.name||n==="view:"+this.name||n==="element"||n==="view:element"||n==="node"||n==="view:node"};let Fa=class extends nt(Ho){constructor(e,t){super();f(this,"document");f(this,"_children",[]);f(this,"_customProperties",new Map);this.document=e,t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let r=0;const s=function(i,o){return typeof o=="string"?[new xt(i,o)]:(ar(o)||(o=[o]),Array.from(o).map(a=>typeof a=="string"?new xt(i,a):a instanceof Zr?new xt(i,a.data):a))}(this.document,t);for(const i of s)i.parent!==null&&i._remove(),i.parent=this,this._children.splice(e,0,i),e++,r++;return r}_removeChildren(e,t=1){this._fireChange("children",this);for(let r=e;r<e+t;r++)this._children[r].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire("change:"+e,t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Fa.prototype.is=function(n){return n==="documentFragment"||n==="view:documentFragment"};class pS{constructor(e){f(this,"document");f(this,"_cloneGroups",new Map);f(this,"_slotFactory",null);this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new Fa(this.document,e)}createText(e){return new xt(this.document,e)}createAttributeElement(e,t,r={}){const s=new Po(this.document,e,t);return typeof r.priority=="number"&&(s._priority=r.priority),r.id&&(s._id=r.id),r.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),s}createContainerElement(e,t,r={},s={}){let i=null;wr(r)?s=r:i=r;const o=new su(this.document,e,t,i);return s.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),o}createEditableElement(e,t,r={}){const s=new Xh(this.document,e,t);return r.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),s}createEmptyElement(e,t,r={}){const s=new Ky(this.document,e,t);return r.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),s}createUIElement(e,t,r){const s=new ef(this.document,e,t);return r&&(s.render=r),s}createRawElement(e,t,r,s={}){const i=new Qy(this.document,e,t);return r&&(i.render=r),s.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),i}setAttribute(e,t,r){r._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,r){wr(e)&&r===void 0?t._setStyle(e):r._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,r){r._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof X?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new A("view-writer-break-non-container-element",this.document);if(!t.parent)throw new A("view-writer-break-root",this.document);if(e.isAtStart)return X._createBefore(t);if(!e.isAtEnd){const r=t._clone(!1);this.insert(X._createAfter(t),r);const s=new Re(e,X._createAt(t,"end")),i=new X(r,0);this.move(s,i)}return X._createAfter(t)}mergeAttributes(e){const t=e.offset,r=e.parent;if(r.is("$text"))return e;if(r.is("attributeElement")&&r.childCount===0){const o=r.parent,a=r.index;return r._remove(),this._removeFromClonedElementsGroup(r),this.mergeAttributes(new X(o,a))}const s=r.getChild(t-1),i=r.getChild(t);if(!s||!i)return e;if(s.is("$text")&&i.is("$text"))return bb(s,i);if(s.is("attributeElement")&&i.is("attributeElement")&&s.isSimilar(i)){const o=s.childCount;return s._appendChild(i.getChildren()),i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new X(s,o))}return e}mergeContainers(e){const t=e.nodeBefore,r=e.nodeAfter;if(!(t&&r&&t.is("containerElement")&&r.is("containerElement")))throw new A("view-writer-merge-containers-invalid-position",this.document);const s=t.getChild(t.childCount-1),i=s instanceof xt?X._createAt(s,"end"):X._createAt(t,"end");return this.move(Re._createIn(r),X._createAt(t,"end")),this.remove(Re._createOn(r)),i}insert(e,t){gS(t=ar(t)?[...t]:[t],this.document);const r=t.reduce((o,a)=>{const l=o[o.length-1],c=!a.is("uiElement");return l&&l.breakAttributes==c?l.nodes.push(a):o.push({breakAttributes:c,nodes:[a]}),o},[]);let s=null,i=e;for(const{nodes:o,breakAttributes:a}of r){const l=this._insertNodes(i,o,a);s||(s=l.start),i=l.end}return s?new Re(s,i):new Re(e)}remove(e){const t=e instanceof Re?e:Re._createOn(e);if(Kl(t,this.document),t.isCollapsed)return new Fa(this.document);const{start:r,end:s}=this._breakAttributesRange(t,!0),i=r.parent,o=s.offset-r.offset,a=i._removeChildren(r.offset,o);for(const c of a)this._removeFromClonedElementsGroup(c);const l=this.mergeAttributes(r);return t.start=l,t.end=l.clone(),new Fa(this.document,a)}clear(e,t){Kl(e,this.document);const r=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const s of r){const i=s.item;let o;if(i.is("element")&&t.isSimilar(i))o=Re._createOn(i);else if(!s.nextPosition.isAfter(e.start)&&i.is("$textProxy")){const a=i.getAncestors().find(l=>l.is("element")&&t.isSimilar(l));a&&(o=Re._createIn(a))}o&&(o.end.isAfter(e.end)&&(o.end=e.end),o.start.isBefore(e.start)&&(o.start=e.start),this.remove(o))}}move(e,t){let r;if(t.isAfter(e.end)){const s=(t=this._breakAttributes(t,!0)).parent,i=s.childCount;e=this._breakAttributesRange(e,!0),r=this.remove(e),t.offset+=s.childCount-i}else r=this.remove(e);return this.insert(t,r)}wrap(e,t){if(!(t instanceof Po))throw new A("view-writer-wrap-invalid-attribute",this.document);if(Kl(e,this.document),e.isCollapsed){let r=e.start;r.parent.is("element")&&!function(i){return Array.from(i.getChildren()).some(o=>!o.is("uiElement"))}(r.parent)&&(r=r.getLastMatchingPosition(i=>i.item.is("uiElement"))),r=this._wrapPosition(r,t);const s=this.document.selection;return s.isCollapsed&&s.getFirstPosition().isEqual(e.start)&&this.setSelection(r),new Re(r)}return this._wrapRange(e,t)}unwrap(e,t){if(!(t instanceof Po))throw new A("view-writer-unwrap-invalid-attribute",this.document);if(Kl(e,this.document),e.isCollapsed)return e;const{start:r,end:s}=this._breakAttributesRange(e,!0),i=r.parent,o=this._unwrapChildren(i,r.offset,s.offset,t),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const l=this.mergeAttributes(o.end);return new Re(a,l)}rename(e,t){const r=new su(this.document,e,t.getAttributes());return this.insert(X._createAfter(t),r),this.move(Re._createIn(t),X._createAt(r,0)),this.remove(Re._createOn(t)),r}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return X._createAt(e,t)}createPositionAfter(e){return X._createAfter(e)}createPositionBefore(e){return X._createBefore(e)}createRange(e,t){return new Re(e,t)}createRangeOn(e){return Re._createOn(e)}createRangeIn(e){return Re._createIn(e)}createSelection(...e){return new Si(...e)}createSlot(e="children"){if(!this._slotFactory)throw new A("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,r){let s,i;if(s=r?ng(e):e.parent.is("$text")?e.parent.parent:e.parent,!s)throw new A("view-writer-invalid-position-container",this.document);i=r?this._breakAttributes(e,!0):e.parent.is("$text")?rm(e):e;const o=s._insertChild(i.offset,t);for(const u of t)this._addToClonedElementsGroup(u);const a=i.getShiftedBy(o),l=this.mergeAttributes(i);l.isEqual(i)||a.offset--;const c=this.mergeAttributes(a);return new Re(l,c)}_wrapChildren(e,t,r,s){let i=t;const o=[];for(;i<r;){const l=e.getChild(i),c=l.is("$text"),u=l.is("attributeElement");if(u&&this._wrapAttributeElement(s,l))o.push(new X(e,i));else if(c||!u||Bj(s,l)){const d=s._clone();l._remove(),d._appendChild(l),e._insertChild(i,d),this._addToClonedElementsGroup(d),o.push(new X(e,i))}else this._wrapChildren(l,0,l.childCount,s);i++}let a=0;for(const l of o)l.offset-=a,l.offset!=t&&(this.mergeAttributes(l).isEqual(l)||(a++,r--));return Re._createFromParentsAndOffsets(e,t,e,r)}_unwrapChildren(e,t,r,s){let i=t;const o=[];for(;i<r;){const l=e.getChild(i);if(l.is("attributeElement"))if(l.isSimilar(s)){const c=l.getChildren(),u=l.childCount;l._remove(),e._insertChild(i,c),this._removeFromClonedElementsGroup(l),o.push(new X(e,i),new X(e,i+u)),i+=u,r+=u-1}else this._unwrapAttributeElement(s,l)?(o.push(new X(e,i),new X(e,i+1)),i++):(this._unwrapChildren(l,0,l.childCount,s),i++);else i++}let a=0;for(const l of o)l.offset-=a,!(l.offset==t||l.offset==r)&&(this.mergeAttributes(l).isEqual(l)||(a++,r--));return Re._createFromParentsAndOffsets(e,t,e,r)}_wrapRange(e,t){const{start:r,end:s}=this._breakAttributesRange(e,!0),i=r.parent,o=this._wrapChildren(i,r.offset,s.offset,t),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const l=this.mergeAttributes(o.end);return new Re(a,l)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return _b(e.clone());e.parent.is("$text")&&(e=rm(e));const r=this.createAttributeElement("_wrapPosition-fake-element");r._priority=Number.POSITIVE_INFINITY,r.isSimilar=()=>!1,e.parent._insertChild(e.offset,r);const s=new Re(e,e.getShiftedBy(1));this.wrap(s,t);const i=new X(r.parent,r.index);r._remove();const o=i.nodeBefore,a=i.nodeAfter;return o instanceof xt&&a instanceof xt?bb(o,a):_b(i)}_wrapAttributeElement(e,t){if(!xb(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const r of e.getAttributeKeys())if(r!=="class"&&r!=="style"&&t.hasAttribute(r)&&t.getAttribute(r)!==e.getAttribute(r))return!1;for(const r of e.getStyleNames())if(t.hasStyle(r)&&t.getStyle(r)!==e.getStyle(r))return!1;for(const r of e.getAttributeKeys())r!=="class"&&r!=="style"&&(t.hasAttribute(r)||this.setAttribute(r,e.getAttribute(r),t));for(const r of e.getStyleNames())t.hasStyle(r)||this.setStyle(r,e.getStyle(r),t);for(const r of e.getClassNames())t.hasClass(r)||this.addClass(r,t);return!0}_unwrapAttributeElement(e,t){if(!xb(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(const r of e.getAttributeKeys())if(r!=="class"&&r!=="style"&&(!t.hasAttribute(r)||t.getAttribute(r)!==e.getAttribute(r)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(const r of e.getStyleNames())if(!t.hasStyle(r)||t.getStyle(r)!==e.getStyle(r))return!1;for(const r of e.getAttributeKeys())r!=="class"&&r!=="style"&&this.removeAttribute(r,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){const r=e.start,s=e.end;if(Kl(e,this.document),e.isCollapsed){const l=this._breakAttributes(e.start,t);return new Re(l,l)}const i=this._breakAttributes(s,t),o=i.parent.childCount,a=this._breakAttributes(r,t);return i.offset+=i.parent.childCount-o,new Re(a,i)}_breakAttributes(e,t=!1){const r=e.offset,s=e.parent;if(e.parent.is("emptyElement"))throw new A("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new A("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new A("view-writer-cannot-break-raw-element",this.document);if(!t&&s.is("$text")&&rg(s.parent)||rg(s))return e.clone();if(s.is("$text"))return this._breakAttributes(rm(e),t);if(r==s.childCount){const i=new X(s.parent,s.index+1);return this._breakAttributes(i,t)}if(r===0){const i=new X(s.parent,s.index);return this._breakAttributes(i,t)}{const i=s.index+1,o=s._clone();s.parent._insertChild(i,o),this._addToClonedElementsGroup(o);const a=s.childCount-r,l=s._removeChildren(r,a);o._appendChild(l);const c=new X(s.parent,i);return this._breakAttributes(c,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const s of e.getChildren())this._addToClonedElementsGroup(s);const t=e.id;if(!t)return;let r=this._cloneGroups.get(t);r||(r=new Set,this._cloneGroups.set(t,r)),r.add(e),e._clonesGroup=r}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const s of e.getChildren())this._removeFromClonedElementsGroup(s);const t=e.id;if(!t)return;const r=this._cloneGroups.get(t);r&&r.delete(e)}}function ng(n){let e=n.parent;for(;!rg(e);){if(!e)return;e=e.parent}return e}function Bj(n,e){return n.priority<e.priority||!(n.priority>e.priority)&&n.getIdentity()<e.getIdentity()}function _b(n){const e=n.nodeBefore;if(e&&e.is("$text"))return new X(e,e.data.length);const t=n.nodeAfter;return t&&t.is("$text")?new X(t,0):n}function rm(n){if(n.offset==n.parent.data.length)return new X(n.parent.parent,n.parent.index+1);if(n.offset===0)return new X(n.parent.parent,n.parent.index);const e=n.parent.data.slice(n.offset);return n.parent._data=n.parent.data.slice(0,n.offset),n.parent.parent._insertChild(n.parent.index+1,new xt(n.root.document,e)),new X(n.parent.parent,n.parent.index+1)}function bb(n,e){const t=n.data.length;return n._data+=e.data,e._remove(),new X(n,t)}const zj=[xt,Po,su,Ky,Qy,ef];function gS(n,e){for(const t of n){if(!zj.some(r=>t instanceof r))throw new A("view-writer-insert-invalid-node-type",e);t.is("$text")||gS(t.getChildren(),e)}}function rg(n){return n&&(n.is("containerElement")||n.is("documentFragment"))}function Kl(n,e){const t=ng(n.start),r=ng(n.end);if(!t||!r||t!==r)throw new A("view-writer-invalid-range-container",e)}function xb(n,e){return n.id===null&&e.id===null}const yS=n=>n.createTextNode(""),vS=n=>{const e=n.createElement("span");return e.dataset.ckeFiller="true",e.innerText="",e},wS=n=>{const e=n.createElement("br");return e.dataset.ckeFiller="true",e},iu="".repeat(7);function Gn(n){return typeof n=="string"?n.substr(0,7)===iu:St(n)&&n.data.substr(0,7)===iu}function Ta(n){return n.data.length==7&&Gn(n)}function kb(n){const e=typeof n=="string"?n:n.data;return Gn(n)?e.slice(7):e}function Uj(n,e){if(e.keyCode==ft.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const r=t.getRangeAt(0).startContainer,s=t.getRangeAt(0).startOffset;Gn(r)&&s<=7&&t.collapse(r,0)}}}let Wj=class extends sn(){constructor(e,t){super();f(this,"domDocuments",new Set);f(this,"domConverter");f(this,"markedAttributes",new Set);f(this,"markedChildren",new Set);f(this,"markedTexts",new Set);f(this,"selection");f(this,"_inlineFiller",null);f(this,"_fakeSelectionContainer",null);this.domConverter=e,this.selection=t,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),kt.isBlink&&!kt.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(e,t){if(e==="text")this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if(e==="attributes")this.markedAttributes.add(t);else{if(e!=="children")throw new A("view-renderer-unknown-type",this);this.markedChildren.add(t)}}}render(){if(this.isComposing&&!kt.isAndroid)return;let e=null;const t=!(kt.isBlink&&!kt.isAndroid)||!this.isSelecting;for(const r of this.markedChildren)this._updateChildrenMappings(r);t?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=X._createBefore(e.parent)));for(const r of this.markedAttributes)this._updateAttrs(r);for(const r of this.markedChildren)this._updateChildren(r,{inlineFillerPosition:e});for(const r of this.markedTexts)!this.markedChildren.has(r.parent)&&this.domConverter.mapViewToDom(r.parent)&&this._updateText(r,{inlineFillerPosition:e});if(t)if(e){const r=this.domConverter.viewPositionToDom(e),s=r.parent.ownerDocument;Gn(r.parent)?this._inlineFiller=r.parent:this._inlineFiller=Eb(s,r.parent,r.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const r=Array.from(t.childNodes),s=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),i=this._diffNodeLists(r,s),o=this._findUpdateActions(i,r,s,qj);if(o.indexOf("update")!==-1){const a={equal:0,insert:0,delete:0};for(const l of o)if(l==="update"){const c=a.equal+a.insert,u=a.equal+a.delete,d=e.getChild(c);!d||d.is("uiElement")||d.is("rawElement")||this._updateElementMappings(d,r[u]),ub(s[c]),a.equal++}else a[l]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?X._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&St(t.parent)&&Gn(t.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!Gn(e))throw new A("view-renderer-filler-was-lost",this);Ta(e)?e.remove():e.data=e.data.substr(7),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=e.parent,r=e.offset;if(!this.domConverter.mapViewToDom(t.root)||!t.is("element")||!function(o){if(o.getAttribute("contenteditable")=="false")return!1;const a=o.findAncestor(l=>l.hasAttribute("contenteditable"));return!a||a.getAttribute("contenteditable")=="true"}(t))return!1;const s=e.nodeBefore,i=e.nodeAfter;return!(s instanceof xt||i instanceof xt)&&!!(r!==t.getFillerOffset()||s&&s.is("element","br"))&&(!kt.isAndroid||!s&&!i)}_updateText(e,t){const r=this.domConverter.findCorrespondingDomText(e);let s=this.domConverter.viewToDom(e).data;const i=t.inlineFillerPosition;i&&i.parent==e.parent&&i.offset==e.index&&(s=iu+s),this._updateTextNode(r,s)}_updateAttrs(e){const t=this.domConverter.mapViewToDom(e);if(t){for(const r of t.attributes){const s=r.name;e.hasAttribute(s)||this.domConverter.removeDomElementAttribute(t,s)}for(const r of e.getAttributeKeys())this.domConverter.setDomElementAttribute(t,r,e.getAttribute(r),e)}}_updateChildren(e,t){const r=this.domConverter.mapViewToDom(e);if(!r)return;if(kt.isAndroid){let d=null;for(const h of Array.from(r.childNodes)){if(d&&St(d)&&St(h)){r.normalize();break}d=h}}const s=t.inlineFillerPosition,i=r.childNodes,o=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));s&&s.parent===e&&Eb(r.ownerDocument,o,s.offset);const a=this._diffNodeLists(i,o),l=this._findUpdateActions(a,i,o,Hj);let c=0;const u=new Set;for(const d of l)d==="delete"?(u.add(i[c]),ub(i[c])):d!=="equal"&&d!=="update"||c++;c=0;for(const d of l)d==="insert"?(nS(r,c,o[c]),c++):d==="update"?(this._updateTextNode(i[c],o[c].data),c++):d==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(o[c])),c++);for(const d of u)d.parentNode||this.domConverter.unbindDomElement(d)}_diffNodeLists(e,t){return e=function(r,s){const i=Array.from(r);return i.length==0||!s||i[i.length-1]==s&&i.pop(),i}(e,this._fakeSelectionContainer),yc(e,t,Kj.bind(null,this.domConverter))}_findUpdateActions(e,t,r,s){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let i=[],o=[],a=[];const l={equal:0,insert:0,delete:0};for(const c of e)c==="insert"?a.push(r[l.equal+l.insert]):c==="delete"?o.push(t[l.equal+l.delete]):(i=i.concat(yc(o,a,s).map(u=>u==="equal"?"update":u)),i.push("equal"),o=[],a=[]),l[c]++;return i.concat(yc(o,a,s).map(c=>c==="equal"?"update":c))}_updateTextNode(e,t){const r=e.data;r!=t&&(kt.isAndroid&&this.isComposing&&r.replace(/\u00A0/g," ")==t.replace(/\u00A0/g," ")||this._updateTextNodeInternal(e,t))}_updateTextNodeInternal(e,t){const r=vE(e.data,t);for(const s of r)s.type==="insert"?e.insertData(s.index,s.values.join("")):e.deleteData(s.index,s.howMany)}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const t of e.getChildren())this._markDescendantTextToSync(t)}}_updateSelection(){if(kt.isBlink&&!kt.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0)return this._removeDomSelection(),void this._removeFakeSelection();const e=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&e&&(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&kt.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){const t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=function(o){const a=o.createElement("div");return a.className="ck-fake-selection-container",Object.assign(a.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),a.textContent="",a}(t));const r=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(r,this.selection),!this._fakeSelectionNeedsUpdate(e))return;r.parentElement&&r.parentElement==e||e.appendChild(r),r.textContent=this.selection.fakeSelectionLabel||"";const s=t.getSelection(),i=t.createRange();s.removeAllRanges(),i.selectNodeContents(r),s.addRange(i)}_updateDomSelection(e){const t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;const r=this.domConverter.viewPositionToDom(this.selection.anchor),s=this.domConverter.viewPositionToDom(this.selection.focus);t.setBaseAndExtent(r.parent,r.offset,s.parent,s.offset),kt.isGecko&&function(i,o){let a=i.parent,l=i.offset;if(St(a)&&Ta(a)&&(l=oc(a)+1,a=a.parentNode),a.nodeType!=Node.ELEMENT_NODE||l!=a.childNodes.length-1)return;const c=a.childNodes[l];c&&c.tagName=="BR"&&o.addRange(o.getRangeAt(0))}(s,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const t=e&&this.domConverter.domSelectionToView(e);return(!t||!this.selection.isEqual(t))&&!(!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){const t=this._fakeSelectionContainer,r=e.ownerDocument.getSelection();return!t||t.parentElement!==e||r.anchorNode!==t&&!t.contains(r.anchorNode)||t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const t=e.getSelection();if(t.rangeCount){const r=e.activeElement,s=this.domConverter.mapDomToView(r);r&&s&&t.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}};function Eb(n,e,t){const r=e instanceof Array?e:e.childNodes,s=r[t];if(St(s))return s.data=iu+s.data,s;{const i=n.createTextNode(iu);return Array.isArray(e)?r.splice(t,0,i):nS(e,t,i),i}}function qj(n,e){return Ii(n)&&Ii(e)&&!St(n)&&!St(e)&&!bc(n)&&!bc(e)&&n.tagName.toLowerCase()===e.tagName.toLowerCase()}function Hj(n,e){return Ii(n)&&Ii(e)&&St(n)&&St(e)}function Kj(n,e,t){return e===t||(St(e)&&St(t)?e.data===t.data:!(!n.isBlockFiller(e)||!n.isBlockFiller(t)))}const Qj=wS(ke.document),Zj=yS(ke.document),Jj=vS(ke.document),id="data-ck-unsafe-attribute-",Sb="data-ck-unsafe-element";class _S{constructor(e,{blockFillerMode:t,renderingMode:r="editing"}={}){f(this,"document");f(this,"renderingMode");f(this,"blockFillerMode");f(this,"preElements");f(this,"blockElements");f(this,"inlineObjectElements");f(this,"unsafeElements");f(this,"_domDocument");f(this,"_domToViewMapping",new WeakMap);f(this,"_viewToDomMapping",new WeakMap);f(this,"_fakeSelectionMapping",new WeakMap);f(this,"_rawContentElementMatcher",new ru);f(this,"_inlineObjectElementMatcher",new ru);f(this,"_elementsWithTemporaryCustomProperties",new Set);this.document=e,this.renderingMode=r,this.blockFillerMode=t||(r==="editing"?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?ke.document:ke.document.implementation.createHTMLDocument("")}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new Si(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const r of e.children)this.unbindDomElement(r)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,r){return this.renderingMode==="data"||!(e=e.toLowerCase()).startsWith("on")&&(e!=="srcdoc"||!t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i))&&(r==="img"&&(e==="src"||e==="srcset")||r==="source"&&e==="srcset"||!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data")return void(e.innerHTML=t);const r=new DOMParser().parseFromString(t,"text/html"),s=r.createDocumentFragment(),i=r.body.childNodes;for(;i.length>0;)s.appendChild(i[0]);const o=r.createTreeWalker(s,NodeFilter.SHOW_ELEMENT),a=[];let l;for(;l=o.nextNode();)a.push(l);for(const c of a){for(const d of c.getAttributeNames())this.setDomElementAttribute(c,d,c.getAttribute(d));const u=c.tagName.toLowerCase();this._shouldRenameElement(u)&&(Tb(u),c.replaceWith(this._createReplacementDomElement(u,c)))}for(;e.firstChild;)e.firstChild.remove();e.append(s)}viewToDom(e,t={}){if(e.is("$text")){const r=this._processDataFromViewText(e);return this._domDocument.createTextNode(r)}{const r=e;if(this.mapViewToDom(r)){if(!r.getCustomProperty("editingPipeline:doNotReuseOnce"))return this.mapViewToDom(r);this._elementsWithTemporaryCustomProperties.add(r)}let s;if(r.is("documentFragment"))s=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(s,r);else{if(r.is("uiElement"))return s=r.name==="$comment"?this._domDocument.createComment(r.getCustomProperty("$rawContent")):r.render(this._domDocument,this),t.bind&&this.bindElements(s,r),s;this._shouldRenameElement(r.name)?(Tb(r.name),s=this._createReplacementDomElement(r.name)):s=r.hasAttribute("xmlns")?this._domDocument.createElementNS(r.getAttribute("xmlns"),r.name):this._domDocument.createElement(r.name),r.is("rawElement")&&r.render(s,this),t.bind&&this.bindElements(s,r);for(const i of r.getAttributeKeys())this.setDomElementAttribute(s,i,r.getAttribute(i),r)}if(t.withChildren!==!1)for(const i of this.viewChildrenToDom(r,t))s instanceof HTMLTemplateElement?s.content.appendChild(i):s.appendChild(i);return s}}setDomElementAttribute(e,t,r,s){const i=this.shouldRenderAttribute(t,r,e.tagName.toLowerCase())||s&&s.shouldRenderUnsafeAttribute(t);i||Pt("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:r}),aj(t)?(e.hasAttribute(t)&&!i?e.removeAttribute(t):e.hasAttribute(id+t)&&i&&e.removeAttribute(id+t),e.setAttribute(i?t:id+t,r)):Pt("domconverter-invalid-attribute-detected",{domElement:e,key:t,value:r})}removeDomElementAttribute(e,t){t!=Sb&&(e.removeAttribute(t),e.removeAttribute(id+t))}*viewChildrenToDom(e,t={}){const r=e.getFillerOffset&&e.getFillerOffset();let s=0;for(const i of e.getChildren()){r===s&&(yield this._getBlockFiller());const o=i.is("element")&&!!i.getCustomProperty("dataPipeline:transparentRendering")&&!Yh(i.getAttributes());if(o&&this.renderingMode=="data")if(i.is("rawElement")){const a=this._domDocument.createElement(i.name);i.render(a,this),yield*[...a.childNodes]}else yield*this.viewChildrenToDom(i,t);else o&&Pt("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:i}),yield this.viewToDom(i,t);s++}r===s&&(yield this._getBlockFiller())}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),r=this.viewPositionToDom(e.end),s=this._domDocument.createRange();return s.setStart(t.parent,t.offset),s.setEnd(r.parent,r.offset),s}viewPositionToDom(e){const t=e.parent;if(t.is("$text")){const r=this.findCorrespondingDomText(t);if(!r)return null;let s=e.offset;return Gn(r)&&(s+=7),{parent:r,offset:s}}{let r,s,i;if(e.offset===0){if(r=this.mapViewToDom(t),!r)return null;i=r.childNodes[0]}else{const o=e.nodeBefore;if(s=o.is("$text")?this.findCorrespondingDomText(o):this.mapViewToDom(o),!s)return null;r=s.parentNode,i=s.nextSibling}return St(i)&&Gn(i)?{parent:i,offset:7}:{parent:r,offset:s?oc(s)+1:0}}}domToView(e,t={}){const r=[],s=this._domToView(e,t,r),i=s.next().value;return i?(s.next(),this._processDomInlineNodes(null,r,t),i.is("$text")&&i.data.length==0?null:i):null}*domChildrenToView(e,t={},r=[]){let s=[];s=e instanceof HTMLTemplateElement?[...e.content.childNodes]:[...e.childNodes];for(let i=0;i<s.length;i++){const o=s[i],a=this._domToView(o,t,r),l=a.next().value;l!==null&&(this._isBlockViewElement(l)&&this._processDomInlineNodes(e,r,t),yield l,a.next())}this._processDomInlineNodes(e,r,t)}domSelectionToView(e){if(function(s){if(!kt.isGecko||!s.rangeCount)return!1;const i=s.getRangeAt(0).startContainer;try{Object.prototype.toString.call(i)}catch{return!0}return!1}(e))return new Si([]);if(e.rangeCount===1){let s=e.getRangeAt(0).startContainer;St(s)&&(s=s.parentNode);const i=this.fakeSelectionToView(s);if(i)return i}const t=this.isDomSelectionBackward(e),r=[];for(let s=0;s<e.rangeCount;s++){const i=e.getRangeAt(s),o=this.domRangeToView(i);o&&r.push(o)}return new Si(r,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),r=this.domPositionToView(e.endContainer,e.endOffset);return t&&r?new Re(t,r):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,oc(e));const r=this.mapDomToView(e);if(r&&(r.is("uiElement")||r.is("rawElement")))return X._createBefore(r);if(St(e)){if(Ta(e))return this.domPositionToView(e.parentNode,oc(e));const s=this.findCorrespondingViewText(e);let i=t;return s?(Gn(e)&&(i-=7,i=i<0?0:i),new X(s,i)):null}if(t===0){const s=this.mapDomToView(e);if(s)return new X(s,0)}else{const s=e.childNodes[t-1];if(St(s)&&Ta(s)||s&&this.isBlockFiller(s))return this.domPositionToView(s.parentNode,oc(s));const i=St(s)?this.findCorrespondingViewText(s):this.mapDomToView(s);if(i&&i.parent)return new X(i.parent,i.index+1)}return null}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(Ta(e))return null;const t=this.getHostViewElement(e);if(t)return t;const r=e.previousSibling;if(r){if(!this.isElement(r))return null;const s=this.mapDomToView(r);if(s){const i=s.nextSibling;return i instanceof xt?i:null}}else{const s=this.mapDomToView(e.parentNode);if(s){const i=s.getChild(0);return i instanceof xt?i:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:r,scrollY:s}=ke.window,i=[];Cb(t,o=>{const{scrollLeft:a,scrollTop:l}=o;i.push([a,l])}),t.focus(),Cb(t,o=>{const[a,l]=i.shift();o.scrollLeft=a,o.scrollTop=l}),ke.window.scrollTo(r,s)}}_clearDomSelection(){const e=this.mapViewToDom(this.document.selection.editableElement);if(!e)return;const t=e.ownerDocument.defaultView.getSelection(),r=this.domSelectionToView(t);r&&r.rangeCount>0&&t.removeAllRanges()}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(Qj):!(e.tagName!=="BR"||!Pb(e,this.blockElements)||e.parentNode.childNodes.length!==1)||e.isEqualNode(Jj)||function(t,r){return t.isEqualNode(Zj)&&Pb(t,r)&&t.parentNode.childNodes.length===1}(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch{return!1}const r=t.collapsed;return t.detach(),r}getHostViewElement(e){const t=ij(e);for(t.pop();t.length;){const r=t.pop(),s=this._domToViewMapping.get(r);if(s&&(s.is("uiElement")||s.is("rawElement")))return s}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}registerInlineObjectMatcher(e){this._inlineObjectElementMatcher.add(e)}_clearTemporaryCustomProperties(){for(const e of this._elementsWithTemporaryCustomProperties)e._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return yS(this._domDocument);case"markedNbsp":return vS(this._domDocument);case"br":return wS(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if(St(e)&&Gn(e)&&t<7||this.isElement(e)&&Gn(e.childNodes[t]))return!1;const r=this.mapDomToView(e);return!r||!r.is("uiElement")&&!r.is("rawElement")}*_domToView(e,t,r){if(this.isBlockFiller(e))return null;const s=this.getHostViewElement(e);if(s)return s;if(bc(e)&&t.skipComments)return null;if(St(e)){if(Ta(e))return null;{const i=e.data;if(i==="")return null;const o=new xt(this.document,i);return r.push(o),o}}{let i=this.mapDomToView(e);if(i)return this._isInlineObjectElement(i)&&r.push(i),i;if(this.isDocumentFragment(e))i=new Fa(this.document),t.bind&&this.bindDocumentFragments(e,i);else{i=this._createViewElement(e,t),t.bind&&this.bindElements(e,i);const a=e.attributes;if(a)for(let l=a.length,c=0;c<l;c++)i._setAttribute(a[c].name,a[c].value);if(this._isViewElementWithRawContent(i,t))return i._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(i)||r.push(i),i;if(bc(e))return i._setCustomProperty("$rawContent",e.data),i}yield i;const o=[];if(t.withChildren!==!1)for(const a of this.domChildrenToView(e,t,o))i._appendChild(a);if(this._isInlineObjectElement(i))r.push(i);else for(const a of o)r.push(a)}}_processDomInlineNodes(e,t,r){if(!t.length||e&&!this.isDocumentFragment(e)&&!this._isBlockDomElement(e))return;let s=!1;for(let i=0;i<t.length;i++){const o=t[i];if(!o.is("$text")){s=!1;continue}let a,l=!1;if(this._isPreFormatted(o))a=kb(o.data);else{a=o.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));const c=i>0?t[i-1]:null,u=i+1<t.length?t[i+1]:null,d=!c||c.is("element")&&c.name=="br"||s,h=!u&&!Gn(o.data);r.withChildren!==!1&&(d&&(a=a.replace(/^ /,"")),h&&(a=a.replace(/ $/,""))),a=kb(a),a=a.replace(/ \u00A0/g,"  ");const p=u&&u.is("element")&&u.name!="br",_=u&&u.is("$text")&&u.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!u||p||_)&&(a=a.replace(/\u00A0$/," ")),(d||c&&c.is("element")&&c.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&o.parent?(o._remove(),t.splice(i,1),i--):(o._data=a,s=l)}t.length=0}_processDataFromViewText(e){let t=e.data;if(this._isPreFormatted(e))return t;if(t.charAt(0)==" "){const r=this._getTouchingInlineViewNode(e,!1);!(r&&r.is("$textProxy")&&this._nodeEndsWithSpace(r))&&r||(t=""+t.substr(1))}if(t.charAt(t.length-1)==" "){const r=this._getTouchingInlineViewNode(e,!0),s=r&&r.is("$textProxy")&&r.data.charAt(0)==" ";t.charAt(t.length-2)!=" "&&r&&!s||(t=t.substr(0,t.length-1)+"")}return t.replace(/ {2}/g," ")}_nodeEndsWithSpace(e){if(this._isPreFormatted(e))return!1;const t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_isPreFormatted(e){if(function(t,r){return t.getAncestors().some(s=>s.is("element")&&r.includes(s.name))}(e,this.preElements))return!0;for(const t of e.getAncestors({parentFirst:!0}))if(t.is("element")&&t.hasStyle("white-space")&&t.getStyle("white-space")!=="inherit")return["pre","pre-wrap","break-spaces"].includes(t.getStyle("white-space"));return!1}_getTouchingInlineViewNode(e,t){const r=new fo({startPosition:t?X._createAfter(e):X._createBefore(e),direction:t?"forward":"backward"});for(const{item:s}of r){if(s.is("$textProxy"))return s;if(!s.is("element")||!s.getCustomProperty("dataPipeline:transparentRendering")){if(s.is("element","br"))return null;if(this._isInlineObjectElement(s))return s;if(s.is("containerElement"))return null}}return null}_isBlockDomElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isBlockViewElement(e){return e.is("element")&&this.blockElements.includes(e.name)}_isInlineObjectElement(e){return!!e.is("element")&&(e.name=="br"||this.inlineObjectElements.includes(e.name)||!!this._inlineObjectElementMatcher.match(e))}_createViewElement(e,t){if(bc(e))return new ef(this.document,"$comment");const r=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new $s(this.document,r)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&e.is("element")&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){const t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){const r=this._domDocument.createElement("span");if(r.setAttribute(Sb,e),t){for(;t.firstChild;)r.appendChild(t.firstChild);for(const s of t.getAttributeNames())r.setAttribute(s,t.getAttribute(s))}return r}}function Cb(n,e){let t=n;for(;t;)e(t),t=t.parentElement}function Pb(n,e){const t=n.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function Tb(n){n==="script"&&Pt("domconverter-unsafe-script-element-detected"),n==="style"&&Pt("domconverter-unsafe-style-element-detected")}class Cl extends Ui(){constructor(t){super();f(this,"view");f(this,"document");f(this,"_isEnabled",!1);this.view=t,this.document=t.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(t){return t&&t.nodeType===3&&(t=t.parentNode),!(!t||t.nodeType!==1)&&t.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class Gj{constructor(e,t,r){f(this,"view");f(this,"document");f(this,"domEvent");f(this,"domTarget");this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,fI(this,r)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class tf extends Cl{constructor(){super(...arguments);f(this,"useCapture",!1);f(this,"usePassive",!1)}observe(t){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(r=>{this.listenTo(t,r,(s,i)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(i.target)&&this.onDomEvent(i)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(t){this.stopListening(t)}fire(t,r,s){this.isEnabled&&this.document.fire(t,new Gj(this.view,r,s))}}class Yj extends tf{constructor(){super(...arguments);f(this,"domEventType",["keydown","keyup"])}onDomEvent(t){const r={keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,get keystroke(){return nu(this)}};this.fire(t.type,t,r)}}class Xj extends Cl{constructor(t){super(t);f(this,"_fireSelectionChangeDoneDebounced");this._fireSelectionChangeDoneDebounced=ml(r=>{this.document.fire("selectionChangeDone",r)},200)}observe(){const t=this.document;t.on("arrowKey",(r,s)=>{t.selection.isFake&&this.isEnabled&&s.preventDefault()},{context:"$capture"}),t.on("arrowKey",(r,s)=>{t.selection.isFake&&this.isEnabled&&this._handleSelectionMove(s.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(t){const r=this.document.selection,s=new Si(r.getRanges(),{backward:r.isBackward,fake:!1});t!=ft.arrowleft&&t!=ft.arrowup||s.setTo(s.getFirstPosition()),t!=ft.arrowright&&t!=ft.arrowdown||s.setTo(s.getLastPosition());const i={oldSelection:r,newSelection:s,domSelection:null};this.document.fire("selectionChange",i),this._fireSelectionChangeDoneDebounced(i)}}let bS=class extends Cl{constructor(e){super(e);f(this,"domConverter");f(this,"_config");f(this,"_domElements");f(this,"_mutationObserver");this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const t=this.domConverter,r=new Set,s=new Set;for(const u of e){const d=t.mapDomToView(u.target);d&&(d.is("uiElement")||d.is("rawElement")||u.type!=="childList"||this._isBogusBrMutation(u)||s.add(d))}for(const u of e){const d=t.mapDomToView(u.target);if((!d||!d.is("uiElement")&&!d.is("rawElement"))&&u.type==="characterData"){const h=t.findCorrespondingViewText(u.target);h&&!s.has(h.parent)?r.add(h):!h&&Gn(u.target)&&s.add(t.mapDomToView(u.target.parentNode))}}const i=[];for(const u of r)i.push({type:"text",node:u});for(const u of s){const d=t.mapViewToDom(u),h=Array.from(u.getChildren()),p=Array.from(t.domChildrenToView(d,{withChildren:!1}));o=h,a=p,c=void 0,((c=(l=typeof(l=e5)=="function"?l:void 0)?l(o,a):void 0)===void 0?Vy(o,a,void 0,l):c)||i.push({type:"children",node:u})}var o,a,l,c;i.length&&this.document.fire("mutations",{mutations:i})}_isBogusBrMutation(e){let t=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}};function e5(n,e){if(!Array.isArray(n))return n===e||!(!n.is("$text")||!e.is("$text"))&&n.data===e.data}class sg extends tf{constructor(t){super(t);f(this,"_renderTimeoutId",null);f(this,"_isFocusChanging",!1);f(this,"domEventType",["focus","blur"]);this.useCapture=!0;const r=this.document;r.on("focus",()=>this._handleFocus()),r.on("blur",(s,i)=>this._handleBlur(i)),r.on("beforeinput",()=>{r.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(t){this.fire(t.type,t)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(t){const r=this.document.selection.editableElement;r!==null&&r!==t.target||(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class t5 extends Cl{constructor(t){super(t);f(this,"mutationObserver");f(this,"focusObserver");f(this,"selection");f(this,"domConverter");f(this,"_documents");f(this,"_fireSelectionChangeDoneDebounced");f(this,"_clearInfiniteLoopInterval");f(this,"_documentIsSelectingInactivityTimeoutDebounced");f(this,"_loopbackCounter");this.mutationObserver=t.getObserver(bS),this.focusObserver=t.getObserver(sg),this.selection=this.document.selection,this.domConverter=t.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=ml(r=>{this.document.fire("selectionChangeDone",r)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=ml(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(t){const r=t.ownerDocument,s=()=>{this.document.isSelecting&&(this._handleSelectionChange(r),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(t,"selectstart",()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},{priority:"highest"}),this.listenTo(t,"keydown",s,{priority:"highest",useCapture:!0}),this.listenTo(t,"keyup",s,{priority:"highest",useCapture:!0}),this._documents.has(r)||(this.listenTo(r,"mouseup",s,{priority:"highest",useCapture:!0}),this.listenTo(r,"selectionchange",()=>{this.document.isComposing&&!kt.isAndroid||(this._handleSelectionChange(r),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(r)},{priority:"lowest"}),this._documents.add(r))}stopObserving(t){this.stopListening(t)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(t){if(!this.isEnabled)return;const r=t.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(r.anchorNode))return;this.mutationObserver.flush();const s=this.domConverter.domSelectionToView(r);if(s.rangeCount!=0){if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!this.selection.isEqual(s)||!this.domConverter.isDomSelectionCorrect(r))if(++this._loopbackCounter>60)this._reportInfiniteLoop();else if(this.selection.isSimilar(s))this.view.forceRender();else{const i={oldSelection:this.selection,newSelection:s,domSelection:r};this.document.fire("selectionChange",i),this._fireSelectionChangeDoneDebounced(i)}}else this.view.hasDomSelection=!1}_clearInfiniteLoop(){this._loopbackCounter=0}}class n5 extends tf{constructor(t){super(t);f(this,"domEventType",["compositionstart","compositionupdate","compositionend"]);const r=this.document;r.on("compositionstart",()=>{r.isComposing=!0},{priority:"low"}),r.on("compositionend",()=>{r.isComposing=!1},{priority:"low"})}onDomEvent(t){this.fire(t.type,t,{data:t.data})}}class r5{constructor(e,t={}){f(this,"_files");f(this,"_native");this._files=t.cacheFiles?Ab(e):null,this._native=e}get files(){return this._files||(this._files=Ab(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,t,r){this._native.setDragImage(e,t,r)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function Ab(n){const e=Array.from(n.files||[]),t=Array.from(n.items||[]);return e.length?e:t.filter(r=>r.kind==="file").map(r=>r.getAsFile())}class s5 extends tf{constructor(){super(...arguments);f(this,"domEventType","beforeinput")}onDomEvent(t){const r=t.getTargetRanges(),s=this.view,i=s.document;let o=null,a=null,l=[];if(t.dataTransfer&&(o=new r5(t.dataTransfer)),t.data!==null?a=t.data:o&&(a=o.getData("text/plain")),i.selection.isFake)l=Array.from(i.selection.getRanges());else if(r.length)l=r.map(c=>{const u=s.domConverter.domPositionToView(c.startContainer,c.startOffset),d=s.domConverter.domPositionToView(c.endContainer,c.endOffset);return u?s.createRange(u,d):d?s.createRange(d):void 0}).filter(c=>!!c);else if(kt.isAndroid){const c=t.target.ownerDocument.defaultView.getSelection();l=Array.from(s.domConverter.domSelectionToView(c).getRanges())}if(kt.isAndroid&&t.inputType=="insertCompositionText"&&a&&a.endsWith(`
`))this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:[s.createRange(l[0].end)]});else if(t.inputType=="insertText"&&a&&a.includes(`
`)){const c=a.split(/\n{1,2}/g);let u=l;for(let d=0;d<c.length;d++){const h=c[d];h!=""&&(this.fire(t.type,t,{data:h,dataTransfer:o,targetRanges:u,inputType:t.inputType,isComposing:t.isComposing}),u=[i.selection.getFirstRange()]),d+1<c.length&&(this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:u}),u=[i.selection.getFirstRange()])}}else this.fire(t.type,t,{data:a,dataTransfer:o,targetRanges:l,inputType:t.inputType,isComposing:t.isComposing})}}class i5 extends Cl{constructor(e){super(e),this.document.on("keydown",(t,r)=>{if(this.isEnabled&&pj(r.keyCode)){const s=new Hy(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(s,r),s.stop.called&&t.stop()}})}observe(){}stopObserving(){}}class o5 extends Cl{constructor(e){super(e);const t=this.document;t.on("keydown",(r,s)=>{if(!this.isEnabled||s.keyCode!=ft.tab||s.ctrlKey)return;const i=new Hy(t,"tab",t.selection.getFirstRange());t.fire(i,s),i.stop.called&&r.stop()})}observe(){}stopObserving(){}}let a5=class extends sn(){constructor(e){super();f(this,"document");f(this,"domConverter");f(this,"domRoots",new Map);f(this,"_renderer");f(this,"_initialDomRootAttributes",new WeakMap);f(this,"_observers",new Map);f(this,"_writer");f(this,"_ongoingChange",!1);f(this,"_postFixersInProgress",!1);f(this,"_renderingDisabled",!1);f(this,"_hasChangedSinceTheLastRendering",!1);this.document=new mS(e),this.domConverter=new _S(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Wj(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new pS(this.document),this.addObserver(bS),this.addObserver(sg),this.addObserver(t5),this.addObserver(Yj),this.addObserver(Xj),this.addObserver(n5),this.addObserver(i5),this.addObserver(s5),this.addObserver(o5),this.document.on("arrowKey",Uj,{priority:"low"}),Lj(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),kt.isiOS&&this.listenTo(this.document,"blur",(t,r)=>{this.domConverter.mapDomToView(r.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(t,{mutations:r})=>{r.forEach(s=>this._renderer.markToSync(s.type,s.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(e,t="main"){const r=this.document.getRoot(t);r._name=e.tagName.toLowerCase();const s={};for(const{name:o,value:a}of Array.from(e.attributes))s[o]=a,o==="class"?this._writer.addClass(a.split(" "),r):r.hasAttribute(o)||this._writer.setAttribute(o,a,r);this._initialDomRootAttributes.set(e,s);const i=()=>{this._writer.setAttribute("contenteditable",(!r.isReadOnly).toString(),r),r.isReadOnly?this._writer.addClass("ck-read-only",r):this._writer.removeClass("ck-read-only",r)};i(),this.domRoots.set(t,e),this.domConverter.bindElements(e,r),this._renderer.markToSync("children",r),this._renderer.markToSync("attributes",r),this._renderer.domDocuments.add(e.ownerDocument),r.on("change:children",(o,a)=>this._renderer.markToSync("children",a)),r.on("change:attributes",(o,a)=>this._renderer.markToSync("attributes",a)),r.on("change:text",(o,a)=>this._renderer.markToSync("text",a)),r.on("change:isReadOnly",()=>this.change(i)),r.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const o of this._observers.values())o.observe(e,t)}detachDomRoot(e){const t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:s})=>t.removeAttribute(s));const r=this._initialDomRootAttributes.get(t);for(const s in r)t.setAttribute(s,r[s]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t);for(const s of this._observers.values())s.stopObserving(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(const[r,s]of this.domRoots)t.observe(s,r);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:t,viewportOffset:r=20,ancestorOffset:s=20}={}){const i=this.document.selection.getFirstRange();if(!i)return;const o=$r({alignToTop:e,forceScroll:t,viewportOffset:r,ancestorOffset:s});typeof r=="number"&&(r={top:r,bottom:r,left:r,right:r});const a={target:this.domConverter.viewRangeToDom(i),viewportOffset:r,ancestorOffset:s,alignToTop:e,forceScroll:t};this.fire("scrollToTheSelection",a,o),lj(a)}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new A("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(t){A.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(sg).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return X._createAt(e,t)}createPositionAfter(e){return X._createAfter(e)}createPositionBefore(e){return X._createBefore(e)}createRange(e,t){return new Re(e,t)}createRangeOn(e){return Re._createOn(e)}createRangeIn(e){return Re._createIn(e)}createSelection(...e){return new Si(...e)}_disableRendering(e){this._renderingDisabled=e,e==0&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};class Hi{is(){throw new Error("is() method is abstract")}}let Qo=class extends Hi{constructor(e){super();f(this,"parent",null);f(this,"_attrs");this._attrs=$o(e)}get document(){return null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))===null)throw new A("model-node-not-found-in-parent",this);return e}get startOffset(){let e;if(!this.parent)return null;if((e=this.parent.getChildStartOffset(this))===null)throw new A("model-node-not-found-in-parent",this);return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent!==null&&this.root.isAttached()}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={}){const t=[];let r=e.includeSelf?this:this.parent;for(;r;)t[e.parentFirst?"push":"unshift"](r),r=r.parent;return t}getCommonAncestor(e,t={}){const r=this.getAncestors(t),s=e.getAncestors(t);let i=0;for(;r[i]==s[i]&&r[i];)i++;return i===0?null:r[i-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),r=e.getPath(),s=Pn(t,r);switch(s){case"prefix":return!0;case"extension":return!1;default:return t[s]<r[s]}}isAfter(e){return this!=e&&this.root===e.root&&!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((t,r)=>(t[r[0]]=r[1],t),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=$o(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};Qo.prototype.is=function(n){return n==="node"||n==="model:node"};class xc{constructor(e){f(this,"_nodes",[]);e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((e,t)=>e+t.offsetSize,0)}getNode(e){return this._nodes[e]||null}getNodeIndex(e){const t=this._nodes.indexOf(e);return t==-1?null:t}getNodeStartOffset(e){const t=this.getNodeIndex(e);if(t===null)return null;let r=0;for(let s=0;s<t;s++)r+=this._nodes[s].offsetSize;return r}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new A("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){let t=0;for(const r of this._nodes){if(e>=t&&e<t+r.offsetSize)return this.getNodeIndex(r);t+=r.offsetSize}if(t!=e)throw new A("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}_insertNodes(e,t){for(const r of t)if(!(r instanceof Qo))throw new A("model-nodelist-insertnodes-not-node",this);this._nodes=_j(this._nodes,Array.from(t),e,0)}_removeNodes(e,t=1){return this._nodes.splice(e,t)}toJSON(){return this._nodes.map(e=>e.toJSON())}}class ot extends Qo{constructor(t,r){super(r);f(this,"_data");this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new ot(this.data,this.getAttributes())}static fromJSON(t){return new ot(t.data,t.attributes)}}ot.prototype.is=function(n){return n==="$text"||n==="model:$text"||n==="text"||n==="model:text"||n==="node"||n==="model:node"};class Dr extends Hi{constructor(t,r,s){super();f(this,"textNode");f(this,"data");f(this,"offsetInText");if(this.textNode=t,r<0||r>t.offsetSize)throw new A("model-textproxy-wrong-offsetintext",this);if(s<0||r+s>t.offsetSize)throw new A("model-textproxy-wrong-length",this);this.data=t.data.substring(r,r+s),this.offsetInText=r}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={}){const r=[];let s=t.includeSelf?this:this.parent;for(;s;)r[t.parentFirst?"push":"unshift"](s),s=s.parent;return r}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}Dr.prototype.is=function(n){return n==="$textProxy"||n==="model:$textProxy"||n==="textProxy"||n==="model:textProxy"};class it extends Qo{constructor(t,r,s){super(r);f(this,"name");f(this,"_children",new xc);this.name=t,s&&this._insertChild(0,s)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(t){return this._children.getNode(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let r=this;for(const s of t)r=r.getChild(r.offsetToIndex(s));return r}findAncestor(t,r={}){let s=r.includeSelf?this:this.parent;for(;s;){if(s.name===t)return s;s=s.parent}return null}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const r of this._children)t.children.push(r.toJSON())}return t}_clone(t=!1){const r=t?Array.from(this._children).map(s=>s._clone(!0)):void 0;return new it(this.name,this.getAttributes(),r)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,r){const s=function(i){return typeof i=="string"?[new ot(i)]:(ar(i)||(i=[i]),Array.from(i).map(o=>typeof o=="string"?new ot(o):o instanceof Dr?new ot(o.data,o.getAttributes()):o))}(r);for(const i of s)i.parent!==null&&i._remove(),i.parent=this;this._children._insertNodes(t,s)}_removeChildren(t,r=1){const s=this._children._removeNodes(t,r);for(const i of s)i.parent=null;return s}static fromJSON(t){let r;if(t.children){r=[];for(const s of t.children)s.name?r.push(it.fromJSON(s)):r.push(ot.fromJSON(s))}return new it(t.name,t.attributes,r)}}it.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="model:element"):n==="element"||n==="model:element"||n==="node"||n==="model:node"};class mi{constructor(e){f(this,"direction");f(this,"boundaries");f(this,"singleCharacters");f(this,"shallow");f(this,"ignoreElementEnd");f(this,"_position");f(this,"_boundaryStartParent");f(this,"_boundaryEndParent");f(this,"_visitedParent");if(!e||!e.boundaries&&!e.startPosition)throw new A("model-tree-walker-no-start-position",null);const t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new A("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=$._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,r,s,i;do s=this.position,i=this._visitedParent,{done:t,value:r}=this.next();while(!t&&e(r));t||(this._position=s,this._visitedParent=i)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const e=this.position,t=this.position.clone(),r=this._visitedParent;if(r.parent===null&&t.offset===r.maxOffset)return{done:!0,value:void 0};if(r===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const s=kc(t,r),i=s||xS(t,r,s);if(i instanceof it){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}else t.path.push(0),this._visitedParent=i;return this._position=t,Gi("elementStart",i,e,t,1)}if(i instanceof ot){let o;if(this.singleCharacters)o=1;else{let c=i.endOffset;this._boundaryEndParent==r&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),o=c-t.offset}const a=t.offset-i.startOffset,l=new Dr(i,a,o);return t.offset+=o,this._position=t,Gi("text",l,e,t,o)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=r.parent,this.ignoreElementEnd?this._next():Gi("elementEnd",r,e,t)}_previous(){const e=this.position,t=this.position.clone(),r=this._visitedParent;if(r.parent===null&&t.offset===0)return{done:!0,value:void 0};if(r==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const s=t.parent,i=kc(t,s),o=i||kS(t,s,i);if(o instanceof it)return t.offset--,this.shallow?(this._position=t,Gi("elementStart",o,e,t,1)):(t.path.push(o.maxOffset),this._position=t,this._visitedParent=o,this.ignoreElementEnd?this._previous():Gi("elementEnd",o,e,t));if(o instanceof ot){let a;if(this.singleCharacters)a=1;else{let u=o.startOffset;this._boundaryStartParent==r&&this.boundaries.start.offset>u&&(u=this.boundaries.start.offset),a=t.offset-u}const l=t.offset-o.startOffset,c=new Dr(o,l-a,a);return t.offset-=a,this._position=t,Gi("text",c,e,t,a)}return t.path.pop(),this._position=t,this._visitedParent=r.parent,Gi("elementStart",r,e,t,1)}}function Gi(n,e,t,r,s){return{done:!1,value:{type:n,item:e,previousPosition:t,nextPosition:r,length:s}}}class $ extends Hi{constructor(t,r,s="toNone"){super();f(this,"root");f(this,"path");f(this,"stickiness");if(!t.is("element")&&!t.is("documentFragment"))throw new A("model-position-root-invalid",t);if(!(r instanceof Array)||r.length===0)throw new A("model-position-path-incorrect-format",t,{path:r});t.is("rootElement")?r=r.slice():(r=[...t.getPath(),...r],t=t.root),this.root=t,this.path=r,this.stickiness=s}get offset(){return this.path[this.path.length-1]}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let r=0;r<this.path.length-1;r++)if(t=t.getChild(t.offsetToIndex(this.path[r])),!t)throw new A("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new A("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return kc(this,this.parent)}get nodeAfter(){const t=this.parent;return xS(this,t,kc(this,t))}get nodeBefore(){const t=this.parent;return kS(this,t,kc(this,t))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const r=Pn(this.path,t.path);switch(r){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[r]<t.path[r]?"before":"after"}}getLastMatchingPosition(t,r={}){r.startPosition=this;const s=new mi(r);return s.skip(t),s.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}findAncestor(t){const r=this.parent;return r.is("element")?r.findAncestor(t,{includeSelf:!0}):null}getCommonPath(t){if(this.root!=t.root)return[];const r=Pn(this.path,t.path),s=typeof r=="string"?Math.min(this.path.length,t.path.length):r;return this.path.slice(0,s)}getCommonAncestor(t){const r=this.getAncestors(),s=t.getAncestors();let i=0;for(;r[i]==s[i]&&r[i];)i++;return i===0?null:r[i-1]}getShiftedBy(t){const r=this.clone(),s=r.offset+t;return r.offset=s<0?0:s,r}isAfter(t){return this.compareWith(t)=="after"}isBefore(t){return this.compareWith(t)=="before"}isEqual(t){return this.compareWith(t)=="same"}isTouching(t){if(this.root!==t.root)return!1;const r=Math.min(this.path.length,t.path.length);for(let s=0;s<r;s++){const i=this.path[s]-t.path[s];if(i<-1||i>1)return!1;if(i===1)return Ob(t,this,s);if(i===-1)return Ob(this,t,s)}return this.path.length===t.path.length||(this.path.length>t.path.length?ig(this.path,r):ig(t.path,r))}hasSameParentAs(t){return this.root!==t.root?!1:Pn(this.getParentPath(),t.getParentPath())=="same"}getTransformedByOperation(t){let r;switch(t.type){case"insert":r=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":r=this._getTransformedByMoveOperation(t);break;case"split":r=this._getTransformedBySplitOperation(t);break;case"merge":r=this._getTransformedByMergeOperation(t);break;default:r=$._createAt(this)}return r}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const r=t.movedRange;return r.containsPosition(this)||r.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const r=t.movedRange;let s;return r.containsPosition(this)||r.start.isEqual(this)?(s=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(s=s._getTransformedByDeletion(t.deletionPosition,1))):s=this.isEqual(t.deletionPosition)?$._createAt(t.deletionPosition):this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),s}_getTransformedByDeletion(t,r){const s=$._createAt(this);if(this.root!=t.root)return s;if(Pn(t.getParentPath(),this.getParentPath())=="same"){if(t.offset<this.offset){if(t.offset+r>this.offset)return null;s.offset-=r}}else if(Pn(t.getParentPath(),this.getParentPath())=="prefix"){const i=t.path.length-1;if(t.offset<=this.path[i]){if(t.offset+r>this.path[i])return null;s.path[i]-=r}}return s}_getTransformedByInsertion(t,r){const s=$._createAt(this);if(this.root!=t.root)return s;if(Pn(t.getParentPath(),this.getParentPath())=="same")(t.offset<this.offset||t.offset==this.offset&&this.stickiness!="toPrevious")&&(s.offset+=r);else if(Pn(t.getParentPath(),this.getParentPath())=="prefix"){const i=t.path.length-1;t.offset<=this.path[i]&&(s.path[i]+=r)}return s}_getTransformedByMove(t,r,s){if(r=r._getTransformedByDeletion(t,s),t.isEqual(r))return $._createAt(this);const i=this._getTransformedByDeletion(t,s);return i===null||t.isEqual(this)&&this.stickiness=="toNext"||t.getShiftedBy(s).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(t,r):i._getTransformedByInsertion(r,s)}_getCombined(t,r){const s=t.path.length-1,i=$._createAt(r);return i.stickiness=this.stickiness,i.offset=i.offset+this.path[s]-t.offset,i.path=[...i.path,...this.path.slice(s+1)],i}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,r,s="toNone"){if(t instanceof $)return new $(t.root,t.path,t.stickiness);{const i=t;if(r=="end")r=i.maxOffset;else{if(r=="before")return this._createBefore(i,s);if(r=="after")return this._createAfter(i,s);if(r!==0&&!r)throw new A("model-createpositionat-offset-required",[this,t])}if(!i.is("element")&&!i.is("documentFragment"))throw new A("model-position-parent-incorrect",[this,t]);const o=i.getPath();return o.push(r),new this(i.root,o,s)}}static _createAfter(t,r){if(!t.parent)throw new A("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,r)}static _createBefore(t,r){if(!t.parent)throw new A("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,r)}static fromJSON(t,r){if(t.root==="$graveyard"){const s=new $(r.graveyard,t.path);return s.stickiness=t.stickiness,s}if(!r.getRoot(t.root))throw new A("model-position-fromjson-no-root",r,{rootName:t.root});return new $(r.getRoot(t.root),t.path,t.stickiness)}}function kc(n,e){const t=e.getChild(e.offsetToIndex(n.offset));return t&&t.is("$text")&&t.startOffset<n.offset?t:null}function xS(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset))}function kS(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset)-1)}function Ob(n,e,t){return t+1!==n.path.length&&!!ig(e.path,t+1)&&!!function(r,s){let i=r.parent,o=r.path.length-1,a=0;for(;o>=s;){if(r.path[o]+a!==i.maxOffset)return!1;a=1,o--,i=i.parent}return!0}(n,t+1)}function ig(n,e){for(;e<n.length;){if(n[e]!==0)return!1;e++}return!0}$.prototype.is=function(n){return n==="position"||n==="model:position"};class D extends Hi{constructor(t,r){super();f(this,"start");f(this,"end");this.start=$._createAt(t),this.end=r?$._createAt(r):$._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new mi({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return Pn(this.start.getParentPath(),this.end.getParentPath())=="same"}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,r=!1){t.isCollapsed&&(r=!1);const s=this.containsPosition(t.start)||r&&this.start.isEqual(t.start),i=this.containsPosition(t.end)||r&&this.end.isEqual(t.end);return s&&i}containsItem(t){const r=$._createBefore(t);return this.containsPosition(r)||this.start.isEqual(r)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const r=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&r.push(new D(this.start,t.start)),this.containsPosition(t.end)&&r.push(new D(t.end,this.end))):r.push(new D(this.start,this.end)),r}getIntersection(t){if(this.isIntersecting(t)){let r=this.start,s=this.end;return this.containsPosition(t.start)&&(r=t.start),this.containsPosition(t.end)&&(s=t.end),new D(r,s)}return null}getJoined(t,r=!1){let s=this.isIntersecting(t);if(s||(s=this.start.isBefore(t.start)?r?this.end.isTouching(t.start):this.end.isEqual(t.start):r?t.end.isTouching(this.start):t.end.isEqual(this.start)),!s)return null;let i=this.start,o=this.end;return t.start.isBefore(i)&&(i=t.start),t.end.isAfter(o)&&(o=t.end),new D(i,o)}getMinimalFlatRanges(){const t=[],r=this.start.getCommonPath(this.end).length,s=$._createAt(this.start);let i=s.parent;for(;s.path.length>r+1;){const o=i.maxOffset-s.offset;o!==0&&t.push(new D(s,s.getShiftedBy(o))),s.path=s.path.slice(0,-1),s.offset++,i=i.parent}for(;s.path.length<=this.end.path.length;){const o=this.end.path[s.path.length-1],a=o-s.offset;a!==0&&t.push(new D(s,s.getShiftedBy(a))),s.offset=o,s.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new mi(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const r=new mi(t);for(const s of r)yield s.item}*getPositions(t={}){t.boundaries=this;const r=new mi(t);yield r.position;for(const s of r)yield s.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new D(this.start,this.end)]}getTransformedByOperations(t){const r=[new D(this.start,this.end)];for(const s of t)for(let i=0;i<r.length;i++){const o=r[i].getTransformedByOperation(s);r.splice(i,1,...o),i+=o.length-1}for(let s=0;s<r.length;s++){const i=r[s];for(let o=s+1;o<r.length;o++){const a=r[o];(i.containsRange(a)||a.containsRange(i)||i.isEqual(a))&&r.splice(o,1)}}return r}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const t=this.start.nodeAfter,r=this.end.nodeBefore;return t&&t.is("element")&&t===r?t:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,r=!1){return this._getTransformedByInsertion(t.position,t.howMany,r)}_getTransformedByMoveOperation(t,r=!1){const s=t.sourcePosition,i=t.howMany,o=t.targetPosition;return this._getTransformedByMove(s,o,i,r)}_getTransformedBySplitOperation(t){const r=this.start._getTransformedBySplitOperation(t);let s=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(s=this.end.getShiftedBy(1)),r.root!=s.root&&(s=this.end.getShiftedBy(-1)),new D(r,s)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new D(this.start);let r=this.start._getTransformedByMergeOperation(t),s=this.end._getTransformedByMergeOperation(t);return r.root!=s.root&&(s=this.end.getShiftedBy(-1)),r.isAfter(s)?(t.sourcePosition.isBefore(t.targetPosition)?(r=$._createAt(s),r.offset=0):(t.deletionPosition.isEqual(r)||(s=t.deletionPosition),r=t.targetPosition),new D(r,s)):new D(r,s)}_getTransformedByInsertion(t,r,s=!1){if(s&&this.containsPosition(t))return[new D(this.start,t),new D(t.getShiftedBy(r),this.end._getTransformedByInsertion(t,r))];{const i=new D(this.start,this.end);return i.start=i.start._getTransformedByInsertion(t,r),i.end=i.end._getTransformedByInsertion(t,r),[i]}}_getTransformedByMove(t,r,s,i=!1){if(this.isCollapsed){const h=this.start._getTransformedByMove(t,r,s);return[new D(h)]}const o=D._createFromPositionAndShift(t,s),a=r._getTransformedByDeletion(t,s);if(this.containsPosition(r)&&!i&&(o.containsPosition(this.start)||o.containsPosition(this.end))){const h=this.start._getTransformedByMove(t,r,s),p=this.end._getTransformedByMove(t,r,s);return[new D(h,p)]}let l;const c=this.getDifference(o);let u=null;const d=this.getIntersection(o);if(c.length==1?u=new D(c[0].start._getTransformedByDeletion(t,s),c[0].end._getTransformedByDeletion(t,s)):c.length==2&&(u=new D(this.start,this.end._getTransformedByDeletion(t,s))),l=u?u._getTransformedByInsertion(a,s,d!==null||i):[],d){const h=new D(d.start._getCombined(o.start,a),d.end._getCombined(o.start,a));l.length==2?l.splice(1,0,h):l.push(h)}return l}_getTransformedByDeletion(t,r){let s=this.start._getTransformedByDeletion(t,r),i=this.end._getTransformedByDeletion(t,r);return s==null&&i==null?null:(s==null&&(s=t),i==null&&(i=t),new D(s,i))}static _createFromPositionAndShift(t,r){const s=t,i=t.getShiftedBy(r);return r>0?new this(s,i):new this(i,s)}static _createIn(t){return new this($._createAt(t,0),$._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift($._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(t.length===0)throw new A("range-create-from-ranges-empty-array",null);if(t.length==1)return t[0].clone();const r=t[0];t.sort((o,a)=>o.start.isAfter(a.start)?1:-1);const s=t.indexOf(r),i=new this(r.start,r.end);for(let o=s-1;o>=0&&t[o].end.isEqual(i.start);o--)i.start=$._createAt(t[o].start);for(let o=s+1;o<t.length&&t[o].start.isEqual(i.end);o++)i.end=$._createAt(t[o].end);return i}static fromJSON(t,r){return new this($.fromJSON(t.start,r),$.fromJSON(t.end,r))}}D.prototype.is=function(n){return n==="range"||n==="model:range"};class ES extends nt(){constructor(){super();f(this,"_modelToViewMapping",new WeakMap);f(this,"_viewToModelMapping",new WeakMap);f(this,"_viewToModelLengthCallbacks",new Map);f(this,"_markerNameToElements",new Map);f(this,"_elementToMarkerNames",new Map);f(this,"_deferredBindingRemovals",new Map);f(this,"_unboundMarkerNames",new Set);this.on("modelToViewPosition",(t,r)=>{if(r.viewPosition)return;const s=this._modelToViewMapping.get(r.modelPosition.parent);if(!s)throw new A("mapping-model-position-view-parent-not-found",this,{modelPosition:r.modelPosition});r.viewPosition=this.findPositionIn(s,r.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(t,r)=>{if(r.modelPosition)return;const s=this.findMappedViewAncestor(r.viewPosition),i=this._viewToModelMapping.get(s),o=this._toModelOffset(r.viewPosition.parent,r.viewPosition.offset,s);r.modelPosition=$._createAt(i,o)},{priority:"low"})}bindElements(t,r){this._modelToViewMapping.set(t,r),this._viewToModelMapping.set(r,t)}unbindViewElement(t,r={}){const s=this.toModelElement(t);if(this._elementToMarkerNames.has(t))for(const i of this._elementToMarkerNames.get(t))this._unboundMarkerNames.add(i);r.defer?this._deferredBindingRemovals.set(t,t.root):(this._viewToModelMapping.delete(t),this._modelToViewMapping.get(s)==t&&this._modelToViewMapping.delete(s))}unbindModelElement(t){const r=this.toViewElement(t);this._modelToViewMapping.delete(t),this._viewToModelMapping.get(r)==t&&this._viewToModelMapping.delete(r)}bindElementToMarker(t,r){const s=this._markerNameToElements.get(r)||new Set;s.add(t);const i=this._elementToMarkerNames.get(t)||new Set;i.add(r),this._markerNameToElements.set(r,s),this._elementToMarkerNames.set(t,i)}unbindElementFromMarkerName(t,r){const s=this._markerNameToElements.get(r);s&&(s.delete(t),s.size==0&&this._markerNameToElements.delete(r));const i=this._elementToMarkerNames.get(t);i&&(i.delete(r),i.size==0&&this._elementToMarkerNames.delete(t))}flushUnboundMarkerNames(){const t=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),t}flushDeferredBindings(){for(const[t,r]of this._deferredBindingRemovals)t.root==r&&this.unbindViewElement(t);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(t){return this._viewToModelMapping.get(t)}toViewElement(t){return this._modelToViewMapping.get(t)}toModelRange(t){return new D(this.toModelPosition(t.start),this.toModelPosition(t.end))}toViewRange(t){return new Re(this.toViewPosition(t.start),this.toViewPosition(t.end))}toModelPosition(t){const r={viewPosition:t,mapper:this};return this.fire("viewToModelPosition",r),r.modelPosition}toViewPosition(t,r={}){const s={modelPosition:t,mapper:this,isPhantom:r.isPhantom};return this.fire("modelToViewPosition",s),s.viewPosition}markerNameToElements(t){const r=this._markerNameToElements.get(t);if(!r)return null;const s=new Set;for(const i of r)if(i.is("attributeElement"))for(const o of i.getElementsWithSameId())s.add(o);else s.add(i);return s}registerViewToModelLength(t,r){this._viewToModelLengthCallbacks.set(t,r)}findMappedViewAncestor(t){let r=t.parent;for(;!this._viewToModelMapping.has(r);)r=r.parent;return r}_toModelOffset(t,r,s){if(s!=t)return this._toModelOffset(t.parent,t.index,s)+this._toModelOffset(t,r,t);if(t.is("$text"))return r;let i=0;for(let o=0;o<r;o++)i+=this.getModelLength(t.getChild(o));return i}getModelLength(t){if(this._viewToModelLengthCallbacks.get(t.name))return this._viewToModelLengthCallbacks.get(t.name)(t);if(this._viewToModelMapping.has(t))return 1;if(t.is("$text"))return t.data.length;if(t.is("uiElement"))return 0;{let r=0;for(const s of t.getChildren())r+=this.getModelLength(s);return r}}findPositionIn(t,r){let s,i=0,o=0,a=0;if(t.is("$text"))return new X(t,r);for(;o<r;)s=t.getChild(a),i=this.getModelLength(s),o+=i,a++;return o==r?this._moveViewPositionToTextNode(new X(t,a)):this.findPositionIn(s,r-(o-i))}_moveViewPositionToTextNode(t){const r=t.nodeBefore,s=t.nodeAfter;return r instanceof xt?new X(r,r.data.length):s instanceof xt?new X(s,0):t}}class l5{constructor(){f(this,"_consumable",new Map);f(this,"_textProxyRegistry",new Map)}add(e,t){t=od(t),e instanceof Dr&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=od(t),e instanceof Dr&&(e=this._getSymbolForTextProxy(e)),!!this.test(e,t)&&(this._consumable.get(e).set(t,!1),!0)}test(e,t){t=od(t),e instanceof Dr&&(e=this._getSymbolForTextProxy(e));const r=this._consumable.get(e);if(r===void 0)return null;const s=r.get(t);return s===void 0?null:s}revert(e,t){t=od(t),e instanceof Dr&&(e=this._getSymbolForTextProxy(e));const r=this.test(e,t);return r===!1?(this._consumable.get(e).set(t,!0),!0):r!==!0&&null}verifyAllConsumed(e){const t=[];for(const[r,s]of this._consumable)for(const[i,o]of s){const a=i.split(":")[0];o&&e==a&&t.push({event:i,item:r.name||r.description})}if(t.length)throw new A("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null;const r=this._textProxyRegistry.get(e.startOffset);if(r){const s=r.get(e.endOffset);s&&(t=s.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){const t=e.startOffset,r=e.endOffset,s=e.parent,i=Symbol("$textProxy:"+e.data);let o,a;return o=this._textProxyRegistry.get(t),o||(o=new Map,this._textProxyRegistry.set(t,o)),a=o.get(r),a||(a=new Map,o.set(r,a)),a.set(s,i),i}}function od(n){const e=n.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?n:e.length>1?e[0]+":"+e[1]:e[0]}class SS extends nt(){constructor(t){super();f(this,"_conversionApi");f(this,"_firedEventsMap");this._conversionApi={dispatcher:this,...t},this._firedEventsMap=new WeakMap}convertChanges(t,r,s){const i=this._createConversionApi(s,t.getRefreshedItems());for(const a of t.getMarkersToRemove())this._convertMarkerRemove(a.name,a.range,i);const o=this._reduceChanges(t.getChanges());for(const a of o)a.type==="insert"?this._convertInsert(D._createFromPositionAndShift(a.position,a.length),i):a.type==="reinsert"?this._convertReinsert(D._createFromPositionAndShift(a.position,a.length),i):a.type==="remove"?this._convertRemove(a.position,a.length,a.name,i):this._convertAttribute(a.range,a.attributeKey,a.attributeOldValue,a.attributeNewValue,i);i.mapper.flushDeferredBindings();for(const a of i.mapper.flushUnboundMarkerNames()){const l=r.get(a).getRange();this._convertMarkerRemove(a,l,i),this._convertMarkerAdd(a,l,i)}for(const a of t.getMarkersToAdd())this._convertMarkerAdd(a.name,a.range,i);i.consumable.verifyAllConsumed("insert")}convert(t,r,s,i={}){const o=this._createConversionApi(s,void 0,i);this._convertInsert(t,o);for(const[a,l]of r)this._convertMarkerAdd(a,l,o);o.consumable.verifyAllConsumed("insert")}convertSelection(t,r,s){const i=this._createConversionApi(s);this.fire("cleanSelection",{selection:t},i);const o=t.getFirstPosition().root;if(!i.mapper.toViewElement(o))return;const a=Array.from(r.getMarkersAtPosition(t.getFirstPosition()));if(this._addConsumablesForSelection(i.consumable,t,a),this.fire("selection",{selection:t},i),t.isCollapsed){for(const l of a)if(i.consumable.test(t,"addMarker:"+l.name)){const c=l.getRange();if(!c5(t.getFirstPosition(),l,i.mapper))continue;const u={item:t,markerName:l.name,markerRange:c};this.fire(`addMarker:${l.name}`,u,i)}for(const l of t.getAttributeKeys())if(i.consumable.test(t,"attribute:"+l)){const c={item:t,range:t.getFirstRange(),attributeKey:l,attributeOldValue:null,attributeNewValue:t.getAttribute(l)};this.fire(`attribute:${l}:$text`,c,i)}}}_convertInsert(t,r,s={}){s.doNotAddConsumables||this._addConsumablesForInsert(r.consumable,t);for(const i of Array.from(t.getWalker({shallow:!0})).map(Nb))this._testAndFire("insert",i,r)}_convertRemove(t,r,s,i){this.fire(`remove:${s}`,{position:t,length:r},i)}_convertAttribute(t,r,s,i,o){this._addConsumablesForRange(o.consumable,t,`attribute:${r}`);for(const a of t){const l={item:a.item,range:D._createFromPositionAndShift(a.previousPosition,a.length),attributeKey:r,attributeOldValue:s,attributeNewValue:i};this._testAndFire(`attribute:${r}`,l,o)}}_convertReinsert(t,r){const s=Array.from(t.getWalker({shallow:!0}));this._addConsumablesForInsert(r.consumable,s);for(const i of s.map(Nb))this._testAndFire("insert",{...i,reconversion:!0},r)}_convertMarkerAdd(t,r,s){if(r.root.rootName=="$graveyard")return;const i=`addMarker:${t}`;if(s.consumable.add(r,i),this.fire(i,{markerName:t,markerRange:r},s),s.consumable.consume(r,i)){this._addConsumablesForRange(s.consumable,r,i);for(const o of r.getItems()){if(!s.consumable.test(o,i))continue;const a={item:o,range:D._createOn(o),markerName:t,markerRange:r};this.fire(i,a,s)}}}_convertMarkerRemove(t,r,s){r.root.rootName!="$graveyard"&&this.fire(`removeMarker:${t}`,{markerName:t,markerRange:r},s)}_reduceChanges(t){const r={changes:t};return this.fire("reduceChanges",r),r.changes}_addConsumablesForInsert(t,r){for(const s of r){const i=s.item;if(t.test(i,"insert")===null){t.add(i,"insert");for(const o of i.getAttributeKeys())t.add(i,"attribute:"+o)}}return t}_addConsumablesForRange(t,r,s){for(const i of r.getItems())t.add(i,s);return t}_addConsumablesForSelection(t,r,s){t.add(r,"selection");for(const i of s)t.add(r,"addMarker:"+i.name);for(const i of r.getAttributeKeys())t.add(r,"attribute:"+i);return t}_testAndFire(t,r,s){const i=function(c,u){const d=u.item.is("element")?u.item.name:"$text";return`${c}:${d}`}(t,r),o=r.item.is("$textProxy")?s.consumable._getSymbolForTextProxy(r.item):r.item,a=this._firedEventsMap.get(s),l=a.get(o);if(l){if(l.has(i))return;l.add(i)}else a.set(o,new Set([i]));this.fire(i,r,s)}_testAndFireAddAttributes(t,r){const s={item:t,range:D._createOn(t)};for(const i of s.item.getAttributeKeys())s.attributeKey=i,s.attributeOldValue=null,s.attributeNewValue=s.item.getAttribute(i),this._testAndFire(`attribute:${i}`,s,r)}_createConversionApi(t,r=new Set,s={}){const i={...this._conversionApi,consumable:new l5,writer:t,options:s,convertItem:o=>this._convertInsert(D._createOn(o),i),convertChildren:o=>this._convertInsert(D._createIn(o),i,{doNotAddConsumables:!0}),convertAttributes:o=>this._testAndFireAddAttributes(o,i),canReuseView:o=>!r.has(i.mapper.toModelElement(o))};return this._firedEventsMap.set(i,new Map),i}}function c5(n,e,t){const r=e.getRange(),s=Array.from(n.getAncestors());return s.shift(),s.reverse(),!s.some(i=>{if(r.containsItem(i))return!!t.toViewElement(i).getCustomProperty("addHighlight")})}function Nb(n){return{item:n.item,range:D._createFromPositionAndShift(n.previousPosition,n.length)}}class Xn extends nt(Hi){constructor(...t){super();f(this,"_lastRangeBackward",!1);f(this,"_attrs",new Map);f(this,"_ranges",[]);t.length&&this.setTo(...t)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return this._ranges.length===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const r of this._ranges){let s=!1;for(const i of t._ranges)if(r.isEqual(i)){s=!0;break}if(!s)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new D(t.start,t.end)}getFirstRange(){let t=null;for(const r of this._ranges)t&&!r.start.isBefore(t.start)||(t=r);return t?new D(t.start,t.end):null}getLastRange(){let t=null;for(const r of this._ranges)t&&!r.end.isAfter(t.end)||(t=r);return t?new D(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(...t){let[r,s,i]=t;if(typeof s=="object"&&(i=s,s=void 0),r===null)this._setRanges([]);else if(r instanceof Xn)this._setRanges(r.getRanges(),r.isBackward);else if(r&&typeof r.getRanges=="function")this._setRanges(r.getRanges(),r.isBackward);else if(r instanceof D)this._setRanges([r],!!i&&!!i.backward);else if(r instanceof $)this._setRanges([new D(r)]);else if(r instanceof Qo){const o=!!i&&!!i.backward;let a;if(s=="in")a=D._createIn(r);else if(s=="on")a=D._createOn(r);else{if(s===void 0)throw new A("model-selection-setto-required-second-parameter",[this,r]);a=new D($._createAt(r,s))}this._setRanges([a],o)}else{if(!ar(r))throw new A("model-selection-setto-not-selectable",[this,r]);this._setRanges(r,i&&!!i.backward)}}_setRanges(t,r=!1){const s=Array.from(t),i=s.some(o=>{if(!(o instanceof D))throw new A("model-selection-set-ranges-not-range",[this,t]);return this._ranges.every(a=>!a.isEqual(o))});(s.length!==this._ranges.length||i)&&(this._replaceAllRanges(s),this._lastRangeBackward=!!r,this.fire("change:range",{directChange:!0}))}setFocus(t,r){if(this.anchor===null)throw new A("model-selection-setfocus-no-ranges",[this,t]);const s=$._createAt(t,r);if(s.compareWith(this.focus)=="same")return;const i=this.anchor;this._ranges.length&&this._popRange(),s.compareWith(i)=="before"?(this._pushRange(new D(s,i)),this._lastRangeBackward=!0):(this._pushRange(new D(i,s)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,r){this.getAttribute(t)!==r&&(this._attrs.set(t,r),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const t=new WeakSet;for(const r of this.getRanges()){const s=Rb(r.start,t);d5(s,r)&&(yield s);for(const o of r.getWalker()){const a=o.item;o.type=="elementEnd"&&u5(a,t,r)&&(yield a)}const i=Rb(r.end,t);h5(i,r)&&(yield i)}}containsEntireContent(t=this.anchor.root){const r=$._createAt(t,0),s=$._createAt(t,"end");return r.isTouching(this.getFirstPosition())&&s.isTouching(this.getLastPosition())}_pushRange(t){this._checkRange(t),this._ranges.push(new D(t.start,t.end))}_checkRange(t){for(let r=0;r<this._ranges.length;r++)if(t.isIntersecting(this._ranges[r]))throw new A("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[r]})}_replaceAllRanges(t){this._removeAllRanges();for(const r of t)this._pushRange(r)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}function CS(n,e){return!e.has(n)&&(e.add(n),n.root.document.model.schema.isBlock(n)&&!!n.parent)}function u5(n,e,t){return CS(n,e)&&Zy(n,t)}function Rb(n,e){const t=n.parent.root.document.model.schema,r=n.parent.getAncestors({parentFirst:!0,includeSelf:!0});let s=!1;const i=r.find(o=>!s&&(s=t.isLimit(o),!s&&CS(o,e)));return r.forEach(o=>e.add(o)),i}function Zy(n,e){const t=function(r){const s=r.root.document.model.schema;let i=r.parent;for(;i;){if(s.isBlock(i))return i;i=i.parent}}(n);return t?!e.containsRange(D._createOn(t),!0):!0}function d5(n,e){return!!n&&(!(!e.isCollapsed&&!n.isEmpty)||!e.start.isTouching($._createAt(n,n.maxOffset))&&Zy(n,e))}function h5(n,e){return!!n&&(!(!e.isCollapsed&&!n.isEmpty)||!e.end.isTouching($._createAt(n,0))&&Zy(n,e))}Xn.prototype.is=function(n){return n==="selection"||n==="model:selection"};class Bo extends nt(D){constructor(e,t){super(e,t),f5.call(this)}detach(){this.stopListening()}toRange(){return new D(this.start,this.end)}static fromRange(e){return new Bo(e.start,e.end)}}function f5(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&m5.call(this,t)},{priority:"low"})}function m5(n){const e=this.getTransformedByOperation(n),t=D._createFromRanges(e),r=!t.isEqual(this),s=function(o,a){switch(a.type){case"insert":return o.containsPosition(a.position);case"move":case"remove":case"reinsert":case"merge":return o.containsPosition(a.sourcePosition)||o.start.isEqual(a.sourcePosition)||o.containsPosition(a.targetPosition);case"split":return o.containsPosition(a.splitPosition)||o.containsPosition(a.insertionPosition)}return!1}(this,n);let i=null;if(r){t.root.rootName=="$graveyard"&&(i=n.type=="remove"?n.sourcePosition:n.deletionPosition);const o=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",o,{deletionPosition:i})}else s&&this.fire("change:content",this.toRange(),{deletionPosition:i})}Bo.prototype.is=function(n){return n==="liveRange"||n==="model:liveRange"||n=="range"||n==="model:range"};const ph="selection:";class Ur extends nt(Hi){constructor(t){super();f(this,"_selection");this._selection=new p5(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(t){this._selection.observeMarkers(t)}_setFocus(t,r){this._selection.setFocus(t,r)}_setTo(...t){this._selection.setTo(...t)}_setAttribute(t,r){this._selection.setAttribute(t,r)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return ph+t}static _isStoreAttributeKey(t){return t.startsWith(ph)}}Ur.prototype.is=function(n){return n==="selection"||n=="model:selection"||n=="documentSelection"||n=="model:documentSelection"};class p5 extends Xn{constructor(t){super();f(this,"markers",new Sl({idProperty:"name"}));f(this,"_model");f(this,"_document");f(this,"_attributePriority",new Map);f(this,"_selectionRestorePosition",null);f(this,"_hasChangedRange",!1);f(this,"_overriddenGravityRegister",new Set);f(this,"_observedMarkers",new Set);this._model=t.model,this._document=t,this.listenTo(this._model,"applyOperation",(r,s)=>{const i=s[0];i.isDocumentOperation&&i.type!="marker"&&i.type!="rename"&&i.type!="noop"&&(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(r,s,i,o)=>{this._updateMarker(s,o)}),this.listenTo(this._document,"change",(r,s)=>{(function(i,o){const a=i.document.differ;for(const l of a.getChanges()){if(l.type!="insert")continue;const c=l.position.parent;l.length===c.maxOffset&&i.enqueueChange(o,u=>{const d=Array.from(c.getAttributeKeys()).filter(h=>h.startsWith(ph));for(const h of d)u.removeAttribute(h,c)})}})(this._model,s)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...t){super.setTo(...t),this._updateAttributes(!0),this.updateMarkers()}setFocus(t,r){super.setFocus(t,r),this._updateAttributes(!0),this.updateMarkers()}setAttribute(t,r){if(this._setAttribute(t,r)){const s=[t];this.fire("change:attribute",{attributeKeys:s,directChange:!0})}}removeAttribute(t){if(this._removeAttribute(t)){const r=[t];this.fire("change:attribute",{attributeKeys:r,directChange:!0})}}overrideGravity(){const t=El();return this._overriddenGravityRegister.add(t),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new A("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(t){this._observedMarkers.add(t),this.updateMarkers()}_replaceAllRanges(t){this._validateSelectionRanges(t),super._replaceAllRanges(t)}_popRange(){this._ranges.pop().detach()}_pushRange(t){const r=this._prepareRange(t);r&&this._ranges.push(r)}_validateSelectionRanges(t){for(const r of t)if(!this._document._validateSelectionRange(r))throw new A("document-selection-wrong-position",this,{range:r})}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const r=Bo.fromRange(t);return r.on("change:range",(s,i,o)=>{if(this._hasChangedRange=!0,r.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;const a=this._ranges.indexOf(r);this._ranges.splice(a,1),r.detach()}}),r}updateMarkers(){if(!this._observedMarkers.size)return;const t=[];let r=!1;for(const i of this._model.markers){const o=i.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;const a=i.getRange();for(const l of this.getRanges())a.containsRange(l,!l.isCollapsed)&&t.push(i)}const s=Array.from(this.markers);for(const i of t)this.markers.has(i)||(this.markers.add(i),r=!0);for(const i of Array.from(this.markers))t.includes(i)||(this.markers.remove(i),r=!0);r&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}_updateMarker(t,r){const s=t.name.split(":",1)[0];if(!this._observedMarkers.has(s))return;let i=!1;const o=Array.from(this.markers),a=this.markers.has(t);if(r){let l=!1;for(const c of this.getRanges())if(r.containsRange(c,!c.isCollapsed)){l=!0;break}l&&!a?(this.markers.add(t),i=!0):!l&&a&&(this.markers.remove(t),i=!0)}else a&&(this.markers.remove(t),i=!0);i&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(t){const r=$o(this._getSurroundingAttributes()),s=$o(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[o,a]of this._attributePriority)a=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(r);const i=[];for(const[o,a]of this.getAttributes())s.has(o)&&s.get(o)===a||i.push(o);for(const[o]of s)this.hasAttribute(o)||i.push(o);i.length>0&&this.fire("change:attribute",{attributeKeys:i,directChange:!1})}_setAttribute(t,r,s=!0){const i=s?"normal":"low";return i=="low"&&this._attributePriority.get(t)=="normal"?!1:super.getAttribute(t)!==r&&(this._attrs.set(t,r),this._attributePriority.set(t,i),!0)}_removeAttribute(t,r=!0){const s=r?"normal":"low";return(s!="low"||this._attributePriority.get(t)!="normal")&&(this._attributePriority.set(t,s),!!super.hasAttribute(t)&&(this._attrs.delete(t),!0))}_setAttributesTo(t){const r=new Set;for(const[s,i]of this.getAttributes())t.get(s)!==i&&this._removeAttribute(s,!1);for(const[s,i]of t)this._setAttribute(s,i,!1)&&r.add(s);return r}*getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const r of t.getAttributeKeys())r.startsWith(ph)&&(yield[r.substr(10),t.getAttribute(r)])}_getSurroundingAttributes(){const t=this.getFirstPosition(),r=this._model.schema;if(t.root.rootName=="$graveyard")return null;let s=null;if(this.isCollapsed){const i=t.textNode?t.textNode:t.nodeBefore,o=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(s=Ql(i,r)),s||(s=Ql(o,r)),!this.isGravityOverridden&&!s){let a=i;for(;a&&!s;)a=a.previousSibling,s=Ql(a,r)}if(!s){let a=o;for(;a&&!s;)a=a.nextSibling,s=Ql(a,r)}s||(s=this.getStoredAttributes())}else{const i=this.getFirstRange();for(const o of i){if(o.item.is("element")&&r.isObject(o.item)){s=Ql(o.item,r);break}if(o.type=="text"){s=o.item.getAttributes();break}}}return s}_fixGraveyardSelection(t){const r=this._model.schema.getNearestSelectionRange(t);r&&this._pushRange(r)}}function Ql(n,e){if(!n)return null;if(n instanceof Dr||n instanceof ot)return n.getAttributes();if(!e.isInline(n))return null;if(!e.isObject(n))return[];const t=[];for(const[r,s]of n.getAttributes())e.checkAttribute("$text",r)&&e.getAttributeProperties(r).copyFromObject!==!1&&t.push([r,s]);return t}class PS{constructor(e){f(this,"_dispatchers");this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}class g5 extends PS{elementToElement(e){return this.add(function(t){const r=jb(t.model),s=Zl(t.view,"container");return r.attributes.length&&(r.children=!0),i=>{i.on(`insert:${r.name}`,v5(s,Vb(r)),{priority:t.converterPriority||"normal"}),(r.children||r.attributes.length)&&i.on("reduceChanges",Lb(r),{priority:"low"})}}(e))}elementToStructure(e){return this.add(function(t){const r=jb(t.model),s=Zl(t.view,"container");return r.children=!0,i=>{if(i._conversionApi.schema.checkChild(r.name,"$text"))throw new A("conversion-element-to-structure-disallowed-text",i,{elementName:r.name});var o,a;i.on(`insert:${r.name}`,(o=s,a=Vb(r),(l,c,u)=>{if(!a(c.item,u.consumable,{preflight:!0}))return;const d=new Map;u.writer._registerSlotFactory(function(_,v,w){return(y,g)=>{const b=y.createContainerElement("$slot");let x=null;if(g==="children")x=Array.from(_.getChildren());else{if(typeof g!="function")throw new A("conversion-slot-mode-unknown",w.dispatcher,{modeOrFilter:g});x=Array.from(_.getChildren()).filter(C=>g(C))}return v.set(b,x),b}}(c.item,d,u));const h=o(c.item,u,c);if(u.writer._clearSlotFactory(),!h)return;(function(_,v,w){const y=Array.from(v.values()).flat(),g=new Set(y);if(g.size!=y.length)throw new A("conversion-slot-filter-overlap",w.dispatcher,{element:_});if(g.size!=_.childCount)throw new A("conversion-slot-filter-incomplete",w.dispatcher,{element:_})})(c.item,d,u),a(c.item,u.consumable);const p=u.mapper.toViewPosition(c.range.start);u.mapper.bindElements(c.item,h),u.writer.insert(p,h),u.convertAttributes(c.item),function(_,v,w,y){w.mapper.on("modelToViewPosition",x,{priority:"highest"});let g=null,b=null;for([g,b]of v)TS(_,b,w,y),w.writer.move(w.writer.createRangeIn(g),w.writer.createPositionBefore(g)),w.writer.remove(g);function x(C,N){const k=N.modelPosition.nodeAfter,P=b.indexOf(k);P<0||(N.viewPosition=N.mapper.findPositionIn(g,P))}w.mapper.off("modelToViewPosition",x)}(h,d,u,{reconversion:c.reconversion})}),{priority:t.converterPriority||"normal"}),i.on("reduceChanges",Lb(r),{priority:"low"})}}(e))}attributeToElement(e){return this.add(function(t){t=$r(t);let r=t.model;typeof r=="string"&&(r={key:r});let s=`attribute:${r.key}`;if(r.name&&(s+=":"+r.name),r.values)for(const o of r.values)t.view[o]=Zl(t.view[o],"attribute");else t.view=Zl(t.view,"attribute");const i=Db(t);return o=>{o.on(s,y5(i),{priority:t.converterPriority||"normal"})}}(e))}attributeToAttribute(e){return this.add(function(t){t=$r(t);let r=t.model;typeof r=="string"&&(r={key:r});let s=`attribute:${r.key}`;if(r.name&&(s+=":"+r.name),r.values)for(const o of r.values)t.view[o]=Fb(t.view[o]);else t.view=Fb(t.view);const i=Db(t);return o=>{var a;o.on(s,(a=i,(l,c,u)=>{if(!u.consumable.test(c.item,l.name))return;const d=a(c.attributeOldValue,u,c),h=a(c.attributeNewValue,u,c);if(!d&&!h)return;u.consumable.consume(c.item,l.name);const p=u.mapper.toViewElement(c.item),_=u.writer;if(!p)throw new A("conversion-attribute-to-attribute-on-text",u.dispatcher,c);if(c.attributeOldValue!==null&&d)if(d.key=="class"){const v=typeof d.value=="string"?d.value.split(/\s+/):d.value;for(const w of v)_.removeClass(w,p)}else if(d.key=="style")if(typeof d.value=="string"){const v=new Xp(_.document.stylesProcessor);v.setTo(d.value);for(const[w]of v.getStylesEntries())_.removeStyle(w,p)}else{const v=Object.keys(d.value);for(const w of v)_.removeStyle(w,p)}else _.removeAttribute(d.key,p);if(c.attributeNewValue!==null&&h)if(h.key=="class"){const v=typeof h.value=="string"?h.value.split(/\s+/):h.value;for(const w of v)_.addClass(w,p)}else if(h.key=="style")if(typeof h.value=="string"){const v=new Xp(_.document.stylesProcessor);v.setTo(h.value);for(const[w,y]of v.getStylesEntries())_.setStyle(w,y,p)}else{const v=Object.keys(h.value);for(const w of v)_.setStyle(w,h.value[w],p)}else _.setAttribute(h.key,h.value,p)}),{priority:t.converterPriority||"normal"})}}(e))}markerToElement(e){return this.add(function(t){const r=Zl(t.view,"ui");return s=>{s.on(`addMarker:${t.model}`,w5(r),{priority:t.converterPriority||"normal"}),s.on(`removeMarker:${t.model}`,(i,o,a)=>{const l=a.mapper.markerNameToElements(o.markerName);if(l){for(const c of l)a.mapper.unbindElementFromMarkerName(c,o.markerName),a.writer.clear(a.writer.createRangeOn(c),c);a.writer.clearClonedElementsGroup(o.markerName),i.stop()}},{priority:t.converterPriority||"normal"})}}(e))}markerToHighlight(e){return this.add(function(t){return r=>{var s;r.on(`addMarker:${t.model}`,(s=t.view,(i,o,a)=>{if(!o.item||!(o.item instanceof Xn||o.item instanceof Ur||o.item.is("$textProxy")))return;const l=sm(s,o,a);if(!l||!a.consumable.consume(o.item,i.name))return;const c=a.writer,u=Mb(c,l),d=c.document.selection;if(o.item instanceof Xn||o.item instanceof Ur)c.wrap(d.getFirstRange(),u);else{const h=a.mapper.toViewRange(o.range),p=c.wrap(h,u);for(const _ of p.getItems())if(_.is("attributeElement")&&_.isSimilar(u)){a.mapper.bindElementToMarker(_,o.markerName);break}}}),{priority:t.converterPriority||"normal"}),r.on(`addMarker:${t.model}`,function(i){return(o,a,l)=>{if(!a.item||!(a.item instanceof it))return;const c=sm(i,a,l);if(!c||!l.consumable.test(a.item,o.name))return;const u=l.mapper.toViewElement(a.item);if(u&&u.getCustomProperty("addHighlight")){l.consumable.consume(a.item,o.name);for(const d of D._createIn(a.item))l.consumable.consume(d.item,o.name);u.getCustomProperty("addHighlight")(u,c,l.writer),l.mapper.bindElementToMarker(u,a.markerName)}}}(t.view),{priority:t.converterPriority||"normal"}),r.on(`removeMarker:${t.model}`,function(i){return(o,a,l)=>{if(a.markerRange.isCollapsed)return;const c=sm(i,a,l);if(!c)return;const u=Mb(l.writer,c),d=l.mapper.markerNameToElements(a.markerName);if(d){for(const h of d)l.mapper.unbindElementFromMarkerName(h,a.markerName),h.is("attributeElement")?l.writer.unwrap(l.writer.createRangeOn(h),u):h.getCustomProperty("removeHighlight")(h,c.id,l.writer);l.writer.clearClonedElementsGroup(a.markerName),o.stop()}}}(t.view),{priority:t.converterPriority||"normal"})}}(e))}markerToData(e){return this.add(function(t){t=$r(t);const r=t.model;let s=t.view;return s||(s=i=>({group:r,name:i.substr(t.model.length+1)})),i=>{var o;i.on(`addMarker:${r}`,(o=s,(a,l,c)=>{const u=o(l.markerName,c);if(!u)return;const d=l.markerRange;c.consumable.consume(d,a.name)&&(Ib(d,!1,c,l,u),Ib(d,!0,c,l,u),a.stop())}),{priority:t.converterPriority||"normal"}),i.on(`removeMarker:${r}`,function(a){return(l,c,u)=>{const d=a(c.markerName,u);if(!d)return;const h=u.mapper.markerNameToElements(c.markerName);if(h){for(const _ of h)u.mapper.unbindElementFromMarkerName(_,c.markerName),_.is("containerElement")?(p(`data-${d.group}-start-before`,_),p(`data-${d.group}-start-after`,_),p(`data-${d.group}-end-before`,_),p(`data-${d.group}-end-after`,_)):u.writer.clear(u.writer.createRangeOn(_),_);u.writer.clearClonedElementsGroup(c.markerName),l.stop()}function p(_,v){if(v.hasAttribute(_)){const w=new Set(v.getAttribute(_).split(","));w.delete(d.name),w.size==0?u.writer.removeAttribute(_,v):u.writer.setAttribute(_,Array.from(w).join(","),v)}}}}(s),{priority:t.converterPriority||"normal"})}}(e))}}function Mb(n,e){const t=n.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function y5(n){return(e,t,r)=>{if(!r.consumable.test(t.item,e.name))return;const s=n(t.attributeOldValue,r,t),i=n(t.attributeNewValue,r,t);if(!s&&!i)return;r.consumable.consume(t.item,e.name);const o=r.writer,a=o.document.selection;if(t.item instanceof Xn||t.item instanceof Ur)o.wrap(a.getFirstRange(),i);else{let l=r.mapper.toViewRange(t.range);t.attributeOldValue!==null&&s&&(l=o.unwrap(l,s)),t.attributeNewValue!==null&&i&&o.wrap(l,i)}}}function v5(n,e=b5){return(t,r,s)=>{if(!e(r.item,s.consumable,{preflight:!0}))return;const i=n(r.item,s,r);if(!i)return;e(r.item,s.consumable);const o=s.mapper.toViewPosition(r.range.start);s.mapper.bindElements(r.item,i),s.writer.insert(o,i),s.convertAttributes(r.item),TS(i,r.item.getChildren(),s,{reconversion:r.reconversion})}}function w5(n){return(e,t,r)=>{t.isOpening=!0;const s=n(t,r);t.isOpening=!1;const i=n(t,r);if(!s||!i)return;const o=t.markerRange;if(o.isCollapsed&&!r.consumable.consume(o,e.name))return;for(const c of o)if(!r.consumable.consume(c.item,e.name))return;const a=r.mapper,l=r.writer;l.insert(a.toViewPosition(o.start),s),r.mapper.bindElementToMarker(s,t.markerName),o.isCollapsed||(l.insert(a.toViewPosition(o.end),i),r.mapper.bindElementToMarker(i,t.markerName)),e.stop()}}function Ib(n,e,t,r,s){const i=e?n.start:n.end,o=i.nodeAfter&&i.nodeAfter.is("element")?i.nodeAfter:null,a=i.nodeBefore&&i.nodeBefore.is("element")?i.nodeBefore:null;if(o||a){let l,c;e&&o||!e&&!a?(l=o,c=!0):(l=a,c=!1);const u=t.mapper.toViewElement(l);if(u)return void function(d,h,p,_,v,w){const y=`data-${w.group}-${h?"start":"end"}-${p?"before":"after"}`,g=d.hasAttribute(y)?d.getAttribute(y).split(","):[];g.unshift(w.name),_.writer.setAttribute(y,g.join(","),d),_.mapper.bindElementToMarker(d,v.markerName)}(u,e,c,t,r,s)}(function(l,c,u,d,h){const p=`${h.group}-${c?"start":"end"}`,_=h.name?{name:h.name}:null,v=u.writer.createUIElement(p,_);u.writer.insert(l,v),u.mapper.bindElementToMarker(v,d.markerName)})(t.mapper.toViewPosition(i),e,t,r,s)}function jb(n){return typeof n=="string"&&(n={name:n}),{name:n.name,attributes:n.attributes?_n(n.attributes):[],children:!!n.children}}function Zl(n,e){return typeof n=="function"?n:(t,r)=>function(s,i,o){typeof s=="string"&&(s={name:s});let a;const l=i.writer,c=Object.assign({},s.attributes);if(o=="container")a=l.createContainerElement(s.name,c);else if(o=="attribute"){const u={priority:s.priority||Po.DEFAULT_PRIORITY};a=l.createAttributeElement(s.name,c,u)}else a=l.createUIElement(s.name,c);if(s.styles){const u=Object.keys(s.styles);for(const d of u)l.setStyle(d,s.styles[d],a)}if(s.classes){const u=s.classes;if(typeof u=="string")l.addClass(u,a);else for(const d of u)l.addClass(d,a)}return a}(n,r,e)}function Db(n){return n.model.values?(e,t,r)=>{const s=n.view[e];return s?s(e,t,r):null}:n.view}function Fb(n){return typeof n=="string"?e=>({key:n,value:e}):typeof n=="object"?n.value?()=>n:e=>({key:n.key,value:e}):n}function sm(n,e,t){const r=typeof n=="function"?n(e,t):n;return r?(r.priority||(r.priority=10),r.id||(r.id=e.markerName),r):null}function Lb(n){const e=function(t){return(r,s)=>{if(!r.is("element",t.name))return!1;if(s.type=="attribute"){if(t.attributes.includes(s.attributeKey))return!0}else if(t.children)return!0;return!1}}(n);return(t,r)=>{const s=[];r.reconvertedElements||(r.reconvertedElements=new Set);for(const i of r.changes){const o=i.type=="attribute"?i.range.start.nodeAfter:i.position.parent;if(o&&e(o,i)){if(!r.reconvertedElements.has(o)){r.reconvertedElements.add(o);const a=$._createBefore(o);let l=s.length;for(let c=s.length-1;c>=0;c--){const u=s[c],d=(u.type=="attribute"?u.range.start:u.position).compareWith(a);if(d=="before"||u.type=="remove"&&d=="same")break;l=c}s.splice(l,0,{type:"remove",name:o.name,position:a,length:1},{type:"reinsert",name:o.name,position:a,length:1})}}else s.push(i)}r.changes=s}}function Vb(n){return(e,t,r={})=>{const s=["insert"];for(const i of n.attributes)e.hasAttribute(i)&&s.push(`attribute:${i}`);return!!s.every(i=>t.test(e,i))&&(r.preflight||s.forEach(i=>t.consume(e,i)),!0)}}function TS(n,e,t,r){for(const s of e)_5(n.root,s,t,r)||t.convertItem(s)}function _5(n,e,t,r){const{writer:s,mapper:i}=t;if(!r.reconversion)return!1;const o=i.toViewElement(e);return!(!o||o.root==n)&&!!t.canReuseView(o)&&(s.move(s.createRangeOn(o),i.toViewPosition($._createBefore(e))),!0)}function b5(n,e,{preflight:t}={}){return t?e.test(n,"insert"):e.consume(n,"insert")}function AS(n){const{schema:e,document:t}=n.model;for(const r of t.getRoots())if(r.isEmpty&&!e.checkChild(r,"$text")&&e.checkChild(r,"paragraph"))return n.insertElement("paragraph",r),!0;return!1}function OS(n,e,t){const r=t.createContext(n);return!!t.checkChild(r,"paragraph")&&!!t.checkChild(r.push("paragraph"),e)}function NS(n,e){const t=e.createElement("paragraph");return e.insert(t,n),e.createPositionAt(t,0)}class x5 extends PS{elementToElement(e){return this.add($b(e))}elementToAttribute(e){return this.add(function(t){t=$r(t),Bb(t);const r=zb(t,!1),s=Jy(t.view),i=s?`element:${s}`:"element";return o=>{o.on(i,r,{priority:t.converterPriority||"low"})}}(e))}attributeToAttribute(e){return this.add(function(t){t=$r(t);let r=null;(typeof t.view=="string"||t.view.key)&&(r=function(i){typeof i.view=="string"&&(i.view={key:i.view});const o=i.view.key,a=i.view.value===void 0?/[\s\S]*/:i.view.value;let l;return o=="class"||o=="style"?l={[o=="class"?"classes":"styles"]:a}:l={attributes:{[o]:a}},i.view.name&&(l.name=i.view.name),i.view=l,o}(t)),Bb(t,r);const s=zb(t,!0);return i=>{i.on("element",s,{priority:t.converterPriority||"low"})}}(e))}elementToMarker(e){return this.add(function(t){const r=function(s){return(i,o)=>{const a=typeof s=="string"?s:s(i,o);return o.writer.createElement("$marker",{"data-name":a})}}(t.model);return $b({...t,model:r})}(e))}dataToMarker(e){return this.add(function(t){t=$r(t),t.model||(t.model=o=>o?t.view+":"+o:t.view);const r={view:t.view,model:t.model},s=og(Ub(r,"start")),i=og(Ub(r,"end"));return o=>{o.on(`element:${t.view}-start`,s,{priority:t.converterPriority||"normal"}),o.on(`element:${t.view}-end`,i,{priority:t.converterPriority||"normal"});const a=Co.low,l=Co.highest,c=Co.get(t.converterPriority)/l;o.on("element",function(u){return(d,h,p)=>{const _=`data-${u.view}`;function v(w,y){for(const g of y){const b=u.model(g,p),x=p.writer.createElement("$marker",{"data-name":b});p.writer.insert(x,w),h.modelCursor.isEqual(w)?h.modelCursor=h.modelCursor.getShiftedBy(1):h.modelCursor=h.modelCursor._getTransformedByInsertion(w,1),h.modelRange=h.modelRange._getTransformedByInsertion(w,1)[0]}}(p.consumable.test(h.viewItem,{attributes:_+"-end-after"})||p.consumable.test(h.viewItem,{attributes:_+"-start-after"})||p.consumable.test(h.viewItem,{attributes:_+"-end-before"})||p.consumable.test(h.viewItem,{attributes:_+"-start-before"}))&&(h.modelRange||Object.assign(h,p.convertChildren(h.viewItem,h.modelCursor)),p.consumable.consume(h.viewItem,{attributes:_+"-end-after"})&&v(h.modelRange.end,h.viewItem.getAttribute(_+"-end-after").split(",")),p.consumable.consume(h.viewItem,{attributes:_+"-start-after"})&&v(h.modelRange.end,h.viewItem.getAttribute(_+"-start-after").split(",")),p.consumable.consume(h.viewItem,{attributes:_+"-end-before"})&&v(h.modelRange.start,h.viewItem.getAttribute(_+"-end-before").split(",")),p.consumable.consume(h.viewItem,{attributes:_+"-start-before"})&&v(h.modelRange.start,h.viewItem.getAttribute(_+"-start-before").split(",")))}}(r),{priority:a+c})}}(e))}}function $b(n){const e=og(n=$r(n)),t=Jy(n.view),r=t?`element:${t}`:"element";return s=>{s.on(r,e,{priority:n.converterPriority||"normal"})}}function Jy(n){return typeof n=="string"?n:typeof n=="object"&&typeof n.name=="string"?n.name:null}function og(n){const e=new ru(n.view);return(t,r,s)=>{const i=e.match(r.viewItem);if(!i)return;const o=i.match;if(o.name=!0,!s.consumable.test(r.viewItem,o))return;const a=function(l,c,u){return l instanceof Function?l(c,u):u.writer.createElement(l)}(n.model,r.viewItem,s);a&&s.safeInsert(a,r.modelCursor)&&(s.consumable.consume(r.viewItem,o),s.convertChildren(r.viewItem,a),s.updateConversionResult(a,r))}}function Bb(n,e=null){const t=e===null||(i=>i.getAttribute(e)),r=typeof n.model!="object"?n.model:n.model.key,s=typeof n.model!="object"||n.model.value===void 0?t:n.model.value;n.model={key:r,value:s}}function zb(n,e){const t=new ru(n.view);return(r,s,i)=>{if(!s.modelRange&&e)return;const o=t.match(s.viewItem);if(!o||(function(u,d){const h=typeof u=="function"?u(d):u;return typeof h=="object"&&!Jy(h)?!1:!h.classes&&!h.attributes&&!h.styles}(n.view,s.viewItem)?o.match.name=!0:delete o.match.name,!i.consumable.test(s.viewItem,o.match)))return;const a=n.model.key,l=typeof n.model.value=="function"?n.model.value(s.viewItem,i):n.model.value;if(l===null)return;s.modelRange||Object.assign(s,i.convertChildren(s.viewItem,s.modelCursor)),function(u,d,h,p){let _=!1;for(const v of Array.from(u.getItems({shallow:h})))p.schema.checkAttribute(v,d.key)&&(_=!0,v.hasAttribute(d.key)||p.writer.setAttribute(d.key,d.value,v));return _}(s.modelRange,{key:a,value:l},e,i)&&(i.consumable.test(s.viewItem,{name:!0})&&(o.match.name=!0),i.consumable.consume(s.viewItem,o.match))}}function Ub(n,e){return{view:`${n.view}-${e}`,model:(t,r)=>{const s=t.getAttribute("name"),i=n.model(s,r);return r.writer.createElement("$marker",{"data-name":i})}}}function k5(n){n.document.registerPostFixer(e=>function(t,r){const s=r.document.selection,i=r.schema,o=[];let a=!1;for(const l of s.getRanges()){const c=RS(l,i);c&&!c.isEqual(l)?(o.push(c),a=!0):o.push(l)}return a&&t.setSelection(function(l){const c=[...l],u=new Set;let d=1;for(;d<c.length;){const h=c[d],p=c.slice(0,d);for(const[_,v]of p.entries())if(!u.has(_)){if(h.isEqual(v))u.add(_);else if(h.isIntersecting(v)){u.add(_),u.add(d);const w=h.getJoined(v);c.push(w)}}d++}return c.filter((h,p)=>!u.has(p))}(o),{backward:s.isBackward}),!1}(e,n))}function RS(n,e){return n.isCollapsed?function(t,r){const s=t.start,i=r.getNearestSelectionRange(s);if(!i){const a=s.getAncestors().reverse().find(l=>r.isObject(l));return a?D._createOn(a):null}if(!i.isCollapsed)return i;const o=i.start;return s.isEqual(o)?null:new D(o)}(n,e):function(t,r){const{start:s,end:i}=t,o=r.checkChild(s,"$text"),a=r.checkChild(i,"$text"),l=r.getLimitElement(s),c=r.getLimitElement(i);if(l===c){if(o&&a)return null;if(function(h,p,_){const v=h.nodeAfter&&!_.isLimit(h.nodeAfter)||_.checkChild(h,"$text"),w=p.nodeBefore&&!_.isLimit(p.nodeBefore)||_.checkChild(p,"$text");return v||w}(s,i,r)){const h=s.nodeAfter&&r.isSelectable(s.nodeAfter)?null:r.getNearestSelectionRange(s,"forward"),p=i.nodeBefore&&r.isSelectable(i.nodeBefore)?null:r.getNearestSelectionRange(i,"backward"),_=h?h.start:s,v=p?p.end:i;return new D(_,v)}}const u=l&&!l.is("rootElement"),d=c&&!c.is("rootElement");if(u||d){const h=s.nodeAfter&&i.nodeBefore&&s.nodeAfter.parent===i.nodeBefore.parent,p=u&&(!h||!qb(s.nodeAfter,r)),_=d&&(!h||!qb(i.nodeBefore,r));let v=s,w=i;return p&&(v=$._createBefore(Wb(l,r))),_&&(w=$._createAfter(Wb(c,r))),new D(v,w)}return null}(n,e)}function Wb(n,e){let t=n,r=t;for(;e.isLimit(r)&&r.parent;)t=r,r=r.parent;return t}function qb(n,e){return n&&e.isSelectable(n)}class E5 extends sn(){constructor(t,r){super();f(this,"model");f(this,"view");f(this,"mapper");f(this,"downcastDispatcher");this.model=t,this.view=new a5(r),this.mapper=new ES,this.downcastDispatcher=new SS({mapper:this.mapper,schema:t.schema});const s=this.model.document,i=s.selection,o=this.model.markers;var a,l,c;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(s,"change",()=>{this.view.change(u=>{this.downcastDispatcher.convertChanges(s.differ,o,u),this.downcastDispatcher.convertSelection(i,o,u)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",function(u,d){return(h,p)=>{const _=p.newSelection,v=[];for(const y of _.getRanges())v.push(d.toModelRange(y));const w=u.createSelection(v,{backward:_.isBackward});w.isEqual(u.document.selection)||u.change(y=>{y.setSelection(w)})}}(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",(a=this.mapper,l=this.model.schema,c=this.view,(u,d)=>{if(!c.document.isComposing||kt.isAndroid)for(let h=0;h<d.targetRanges.length;h++){const p=d.targetRanges[h],_=a.toModelRange(p),v=RS(_,l);v&&!v.isEqual(_)&&(d.targetRanges[h]=a.toViewRange(v))}}),{priority:"high"}),this.downcastDispatcher.on("insert:$text",(u,d,h)=>{if(!h.consumable.consume(d.item,u.name))return;const p=h.writer,_=h.mapper.toViewPosition(d.range.start),v=p.createText(d.item.data);p.insert(_,v)},{priority:"lowest"}),this.downcastDispatcher.on("insert",(u,d,h)=>{h.convertAttributes(d.item),d.reconversion||!d.item.is("element")||d.item.isEmpty||h.convertChildren(d.item)},{priority:"lowest"}),this.downcastDispatcher.on("remove",(u,d,h)=>{const p=h.mapper.toViewPosition(d.position),_=d.position.getShiftedBy(d.length),v=h.mapper.toViewPosition(_,{isPhantom:!0}),w=h.writer.createRange(p,v),y=h.writer.remove(w.getTrimmed());for(const g of h.writer.createRangeIn(y).getItems())h.mapper.unbindViewElement(g,{defer:!0})},{priority:"low"}),this.downcastDispatcher.on("cleanSelection",(u,d,h)=>{const p=h.writer,_=p.document.selection;for(const v of _.getRanges())v.isCollapsed&&v.end.parent.isAttached()&&h.writer.mergeAttributes(v.start);p.setSelection(null)}),this.downcastDispatcher.on("selection",(u,d,h)=>{const p=d.selection;if(p.isCollapsed||!h.consumable.consume(p,"selection"))return;const _=[];for(const v of p.getRanges())_.push(h.mapper.toViewRange(v));h.writer.setSelection(_,{backward:p.isBackward})},{priority:"low"}),this.downcastDispatcher.on("selection",(u,d,h)=>{const p=d.selection;if(!p.isCollapsed||!h.consumable.consume(p,"selection"))return;const _=h.writer,v=p.getFirstPosition(),w=h.mapper.toViewPosition(v),y=_.breakAttributes(w);_.setSelection(y)},{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(u=>{if(u.rootName=="$graveyard")return null;const d=new dS(this.view.document,u.name);return d.rootName=u.rootName,this.mapper.bindElements(u,d),d})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(t){const r=typeof t=="string"?t:t.name,s=this.model.markers.get(r);if(!s)throw new A("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:r});this.model.change(()=>{this.model.markers._refresh(s)})}reconvertItem(t){this.model.change(()=>{this.model.document.differ._refreshItem(t)})}}class Ec{constructor(){f(this,"_consumables",new Map)}add(e,t){let r;e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):(this._consumables.has(e)?r=this._consumables.get(e):(r=new S5(e),this._consumables.set(e,r)),r.add(t))}test(e,t){const r=this._consumables.get(e);return r===void 0?null:e.is("$text")||e.is("documentFragment")?r:r.test(t)}consume(e,t){return!!this.test(e,t)&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0)}revert(e,t){const r=this._consumables.get(e);r!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):r.revert(t))}static consumablesFromElement(e){const t={element:e,name:!0,attributes:[],classes:[],styles:[]},r=e.getAttributeKeys();for(const o of r)o!="style"&&o!="class"&&t.attributes.push(o);const s=e.getClassNames();for(const o of s)t.classes.push(o);const i=e.getStyleNames();for(const o of i)t.styles.push(o);return t}static createFrom(e,t){if(t||(t=new Ec),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,Ec.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(const r of e.getChildren())t=Ec.createFrom(r,t);return t}}const ad=["attributes","classes","styles"];class S5{constructor(e){f(this,"element");f(this,"_canConsumeName");f(this,"_consumables");this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(const t of ad)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const t of ad)if(t in e){const r=this._test(t,e[t]);if(r!==!0)return r}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(const t of ad)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(const t of ad)t in e&&this._revert(t,e[t])}_add(e,t){const r=_n(t),s=this._consumables[e];for(const i of r){if(e==="attributes"&&(i==="class"||i==="style"))throw new A("viewconsumable-invalid-attribute",this);if(s.set(i,!0),e==="styles")for(const o of this.element.document.stylesProcessor.getRelatedStyles(i))s.set(o,!0)}}_test(e,t){const r=_n(t),s=this._consumables[e];for(const i of r)if(e!=="attributes"||i!=="class"&&i!=="style"){const o=s.get(i);if(o===void 0)return null;if(!o)return!1}else{const o=i=="class"?"classes":"styles",a=this._test(o,[...this._consumables[o].keys()]);if(a!==!0)return a}return!0}_consume(e,t){const r=_n(t),s=this._consumables[e];for(const i of r)if(e!=="attributes"||i!=="class"&&i!=="style"){if(s.set(i,!1),e=="styles")for(const o of this.element.document.stylesProcessor.getRelatedStyles(i))s.set(o,!1)}else{const o=i=="class"?"classes":"styles";this._consume(o,[...this._consumables[o].keys()])}}_revert(e,t){const r=_n(t),s=this._consumables[e];for(const i of r)if(e!=="attributes"||i!=="class"&&i!=="style")s.get(i)===!1&&s.set(i,!0);else{const o=i=="class"?"classes":"styles";this._revert(o,[...this._consumables[o].keys()])}}}class C5 extends sn(){constructor(){super();f(this,"_sourceDefinitions",{});f(this,"_attributeProperties",Object.create(null));f(this,"_customChildChecks",new Map);f(this,"_customAttributeChecks",new Map);f(this,"_genericCheckSymbol",Symbol("$generic"));f(this,"_compiledDefinitions");this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(t,r)=>{r[0]=new Ci(r[0])},{priority:"highest"}),this.on("checkChild",(t,r)=>{r[0]=new Ci(r[0]),r[1]=this.getDefinition(r[1])},{priority:"highest"})}register(t,r){if(this._sourceDefinitions[t])throw new A("schema-cannot-register-item-twice",this,{itemName:t});this._sourceDefinitions[t]=[Object.assign({},r)],this._clearCache()}extend(t,r){if(!this._sourceDefinitions[t])throw new A("schema-cannot-extend-missing-item",this,{itemName:t});this._sourceDefinitions[t].push(Object.assign({},r)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(t){let r;return r=typeof t=="string"?t:"is"in t&&(t.is("$text")||t.is("$textProxy"))?"$text":t.name,this.getDefinitions()[r]}isRegistered(t){return!!this.getDefinition(t)}isBlock(t){const r=this.getDefinition(t);return!(!r||!r.isBlock)}isLimit(t){const r=this.getDefinition(t);return!!r&&!(!r.isLimit&&!r.isObject)}isObject(t){const r=this.getDefinition(t);return!!r&&!!(r.isObject||r.isLimit&&r.isSelectable&&r.isContent)}isInline(t){const r=this.getDefinition(t);return!(!r||!r.isInline)}isSelectable(t){const r=this.getDefinition(t);return!!r&&!(!r.isSelectable&&!r.isObject)}isContent(t){const r=this.getDefinition(t);return!!r&&!(!r.isContent&&!r.isObject)}checkChild(t,r){return!!r&&this._checkContextMatch(t,r)}checkAttribute(t,r){const s=this.getDefinition(t.last);if(!s)return!1;const i=this._evaluateAttributeChecks(t,r);return i!==void 0?i:s.allowAttributes.includes(r)}checkMerge(t,r){if(t instanceof $){const s=t.nodeBefore,i=t.nodeAfter;if(!(s instanceof it))throw new A("schema-check-merge-no-element-before",this);if(!(i instanceof it))throw new A("schema-check-merge-no-element-after",this);return this.checkMerge(s,i)}if(this.isLimit(t)||this.isLimit(r))return!1;for(const s of r.getChildren())if(!this.checkChild(t,s))return!1;return!0}addChildCheck(t,r){const s=r!==void 0?r:this._genericCheckSymbol,i=this._customChildChecks.get(s)||[];i.push(t),this._customChildChecks.set(s,i)}addAttributeCheck(t,r){const s=r!==void 0?r:this._genericCheckSymbol,i=this._customAttributeChecks.get(s)||[];i.push(t),this._customAttributeChecks.set(s,i)}setAttributeProperties(t,r){this._attributeProperties[t]=Object.assign(this.getAttributeProperties(t),r)}getAttributeProperties(t){return this._attributeProperties[t]||Object.create(null)}getLimitElement(t){let r;for(t instanceof $?r=t.parent:r=(t instanceof D?[t]:Array.from(t.getRanges())).reduce((s,i)=>{const o=i.getCommonAncestor();return s?s.getCommonAncestor(o,{includeSelf:!0}):o},null);!this.isLimit(r)&&r.parent;)r=r.parent;return r}checkAttributeInSelection(t,r){if(t.isCollapsed){const s=[...t.getFirstPosition().getAncestors(),new ot("",t.getAttributes())];return this.checkAttribute(s,r)}{const s=t.getRanges();for(const i of s)for(const o of i)if(this.checkAttribute(o.item,r))return!0}return!1}*getValidRanges(t,r){t=function*(s){for(const i of s)yield*i.getMinimalFlatRanges()}(t);for(const s of t)yield*this._getValidRangesForRange(s,r)}getNearestSelectionRange(t,r="both"){if(t.root.rootName=="$graveyard")return null;if(this.checkChild(t,"$text"))return new D(t);let s,i;const o=t.getAncestors().reverse().find(a=>this.isLimit(a))||t.root;r!="both"&&r!="backward"||(s=new mi({boundaries:D._createIn(o),startPosition:t,direction:"backward"})),r!="both"&&r!="forward"||(i=new mi({boundaries:D._createIn(o),startPosition:t}));for(const a of function*(l,c){let u=!1;for(;!u;){if(u=!0,l){const d=l.next();d.done||(u=!1,yield{walker:l,value:d.value})}if(c){const d=c.next();d.done||(u=!1,yield{walker:c,value:d.value})}}}(s,i)){const l=a.walker==s?"elementEnd":"elementStart",c=a.value;if(c.type==l&&this.isObject(c.item))return D._createOn(c.item);if(this.checkChild(c.nextPosition,"$text"))return new D(c.nextPosition)}return null}findAllowedParent(t,r){let s=t.parent;for(;s;){if(this.checkChild(s,r))return s;if(this.isLimit(s))return null;s=s.parent}return null}setAllowedAttributes(t,r,s){const i=s.model;for(const[o,a]of Object.entries(r))i.schema.checkAttribute(t,o)&&s.setAttribute(o,a,t)}removeDisallowedAttributes(t,r){for(const s of t)if(s.is("$text"))Hb(this,s,r);else{const i=D._createIn(s).getPositions();for(const o of i)Hb(this,o.nodeBefore||o.parent,r)}}getAttributesWithProperty(t,r,s){const i={};for(const[o,a]of t.getAttributes()){const l=this.getAttributeProperties(o);l[r]!==void 0&&(s!==void 0&&s!==l[r]||(i[o]=a))}return i}createContext(t){return new Ci(t)}_clearCache(){this._compiledDefinitions=null}_compile(){const t={},r=this._sourceDefinitions,s=Object.keys(r);for(const o of s)t[o]=P5(r[o],o);const i=Object.values(t);for(const o of i)T5(t,o),A5(t,o),O5(t,o),N5(t,o);for(const o of i)R5(t,o);for(const o of i)M5(t,o);for(const o of i)I5(t,o);for(const o of i)j5(t,o);for(const o of i)D5(t,o);this._compiledDefinitions=function(o){const a={};for(const l of Object.values(o))a[l.name]={name:l.name,isBlock:!!l.isBlock,isContent:!!l.isContent,isInline:!!l.isInline,isLimit:!!l.isLimit,isObject:!!l.isObject,isSelectable:!!l.isSelectable,allowIn:Array.from(l.allowIn).filter(c=>!!o[c]),allowChildren:Array.from(l.allowChildren).filter(c=>!!o[c]),allowAttributes:Array.from(l.allowAttributes)};return a}(t)}_checkContextMatch(t,r){const s=t.last;let i=this._evaluateChildChecks(t,r);if(i=i!==void 0?i:r.allowIn.includes(s.name),!i)return!1;const o=this.getDefinition(s),a=t.trimLast();return!!o&&(a.length==0||this._checkContextMatch(a,o))}_evaluateChildChecks(t,r){const s=this._customChildChecks.get(this._genericCheckSymbol)||[],i=this._customChildChecks.get(r.name)||[];for(const o of[...s,...i]){const a=o(t,r);if(a!==void 0)return a}}_evaluateAttributeChecks(t,r){const s=this._customAttributeChecks.get(this._genericCheckSymbol)||[],i=this._customAttributeChecks.get(r)||[];for(const o of[...s,...i]){const a=o(t,r);if(a!==void 0)return a}}*_getValidRangesForRange(t,r){let s=t.start,i=t.start;for(const o of t.getItems({shallow:!0}))o.is("element")&&(yield*this._getValidRangesForRange(D._createIn(o),r)),this.checkAttribute(o,r)||(s.isEqual(i)||(yield new D(s,i)),s=$._createAfter(o)),i=$._createAfter(o);s.isEqual(i)||(yield new D(s,i))}findOptimalInsertionRange(t,r){const s=t.getSelectedElement();if(s&&this.isObject(s)&&!this.isInline(s))return r=="before"||r=="after"?new D($._createAt(s,r)):D._createOn(s);const i=Yh(t.getSelectedBlocks());if(!i)return new D(t.focus);if(i.isEmpty)return new D($._createAt(i,0));const o=$._createAfter(i);return t.focus.isTouching(o)?new D(o):new D($._createBefore(i))}}class Ci{constructor(e){f(this,"_items");if(e instanceof Ci)return e;let t;t=typeof e=="string"?[e]:Array.isArray(e)?e:e.getAncestors({includeSelf:!0}),this._items=t.map(F5)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new Ci([e]);return t._items=[...this._items,...t._items],t}trimLast(){const e=new Ci([]);return e._items=this._items.slice(0,-1),e}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function P5(n,e){const t={name:e,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return function(r,s){for(const i of r){const o=Object.keys(i).filter(a=>a.startsWith("is"));for(const a of o)s[a]=!!i[a]}}(n,t),Kr(n,t,"allowIn"),Kr(n,t,"allowChildren"),Kr(n,t,"disallowIn"),Kr(n,t,"disallowChildren"),Kr(n,t,"allowContentOf"),Kr(n,t,"allowWhere"),Kr(n,t,"allowAttributes"),Kr(n,t,"disallowAttributes"),Kr(n,t,"allowAttributesOf"),Kr(n,t,"inheritTypesFrom"),function(r,s){for(const i of r){const o=i.inheritAllFrom;o&&(s.allowContentOf.add(o),s.allowWhere.add(o),s.allowAttributesOf.add(o),s.inheritTypesFrom.add(o))}}(n,t),t}function T5(n,e){for(const t of e.allowIn){const r=n[t];r?r.allowChildren.add(e.name):e.allowIn.delete(t)}}function A5(n,e){for(const t of e.allowChildren){const r=n[t];r?r.allowIn.add(e.name):e.allowChildren.delete(t)}}function O5(n,e){for(const t of e.disallowIn){const r=n[t];r?r.disallowChildren.add(e.name):e.disallowIn.delete(t)}}function N5(n,e){for(const t of e.disallowChildren){const r=n[t];r?r.disallowIn.add(e.name):e.disallowChildren.delete(t)}}function R5(n,e){for(const t of e.disallowChildren)e.allowChildren.delete(t);for(const t of e.disallowIn)e.allowIn.delete(t);for(const t of e.disallowAttributes)e.allowAttributes.delete(t)}function M5(n,e){for(const t of e.allowContentOf){const r=n[t];r&&(r.disallowChildren.forEach(s=>{e.allowChildren.has(s)||(e.disallowChildren.add(s),n[s].disallowIn.add(e.name))}),r.allowChildren.forEach(s=>{e.disallowChildren.has(s)||(e.allowChildren.add(s),n[s].allowIn.add(e.name))}))}}function I5(n,e){for(const t of e.allowWhere){const r=n[t];r&&(r.disallowIn.forEach(s=>{e.allowIn.has(s)||(e.disallowIn.add(s),n[s].disallowChildren.add(e.name))}),r.allowIn.forEach(s=>{e.disallowIn.has(s)||(e.allowIn.add(s),n[s].allowChildren.add(e.name))}))}}function j5(n,e){for(const t of e.allowAttributesOf){const r=n[t];if(!r)return;r.allowAttributes.forEach(s=>{e.disallowAttributes.has(s)||e.allowAttributes.add(s)})}}function D5(n,e){for(const t of e.inheritTypesFrom){const r=n[t];if(r){const s=Object.keys(r).filter(i=>i.startsWith("is"));for(const i of s)i in e||(e[i]=r[i])}}}function Kr(n,e,t){for(const r of n){let s=r[t];typeof s=="string"&&(s=[s]),Array.isArray(s)&&s.forEach(i=>e[t].add(i))}}function F5(n){return typeof n=="string"||n.is("documentFragment")?{name:typeof n=="string"?n:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:n.is("element")?n.name:"$text",*getAttributeKeys(){yield*n.getAttributeKeys()},getAttribute:e=>n.getAttribute(e)}}function Hb(n,e,t){for(const r of e.getAttributeKeys())n.checkAttribute(e,r)||t.removeAttribute(r,e)}class L5 extends nt(){constructor(t){super();f(this,"conversionApi");f(this,"_splitParts",new Map);f(this,"_cursorParents",new Map);f(this,"_modelCursor",null);f(this,"_emptyElementsToKeep",new Set);this.conversionApi={...t,consumable:null,writer:null,store:null,convertItem:(r,s)=>this._convertItem(r,s),convertChildren:(r,s)=>this._convertChildren(r,s),safeInsert:(r,s)=>this._safeInsert(r,s),updateConversionResult:(r,s)=>this._updateConversionResult(r,s),splitToAllowedParent:(r,s)=>this._splitToAllowedParent(r,s),getSplitParts:r=>this._getSplitParts(r),keepEmptyElement:r=>this._keepEmptyElement(r)}}convert(t,r,s=["$root"]){this.fire("viewCleanup",t),this._modelCursor=function(a,l){let c;for(const u of new Ci(a)){const d={};for(const p of u.getAttributeKeys())d[p]=u.getAttribute(p);const h=l.createElement(u.name,d);c&&l.insert(h,c),c=$._createAt(h,0)}return c}(s,r),this.conversionApi.writer=r,this.conversionApi.consumable=Ec.createFrom(t),this.conversionApi.store={};const{modelRange:i}=this._convertItem(t,this._modelCursor),o=r.createDocumentFragment();if(i){this._removeEmptyElements();for(const a of Array.from(this._modelCursor.parent.getChildren()))r.append(a,o);o.markers=function(a,l){const c=new Set,u=new Map,d=D._createIn(a).getItems();for(const h of d)h.is("element","$marker")&&c.add(h);for(const h of c){const p=h.getAttribute("data-name"),_=l.createPositionBefore(h);u.has(p)?u.get(p).end=_.clone():u.set(p,new D(_.clone())),l.remove(h)}return u}(o,r)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(t,r){const s={viewItem:t,modelCursor:r,modelRange:null};if(t.is("element")?this.fire(`element:${t.name}`,s,this.conversionApi):t.is("$text")?this.fire("text",s,this.conversionApi):this.fire("documentFragment",s,this.conversionApi),s.modelRange&&!(s.modelRange instanceof D))throw new A("view-conversion-dispatcher-incorrect-result",this);return{modelRange:s.modelRange,modelCursor:s.modelCursor}}_convertChildren(t,r){let s=r.is("position")?r:$._createAt(r,0);const i=new D(s);for(const o of Array.from(t.getChildren())){const a=this._convertItem(o,s);a.modelRange instanceof D&&(i.end=a.modelRange.end,s=a.modelCursor)}return{modelRange:i,modelCursor:s}}_safeInsert(t,r){const s=this._splitToAllowedParent(t,r);return!!s&&(this.conversionApi.writer.insert(t,s.position),!0)}_updateConversionResult(t,r){const s=this._getSplitParts(t),i=this.conversionApi.writer;r.modelRange||(r.modelRange=i.createRange(i.createPositionBefore(t),i.createPositionAfter(s[s.length-1])));const o=this._cursorParents.get(t);r.modelCursor=o?i.createPositionAt(o,0):r.modelRange.end}_splitToAllowedParent(t,r){const{schema:s,writer:i}=this.conversionApi;let o=s.findAllowedParent(r,t);if(o){if(o===r.parent)return{position:r};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return OS(r,t,s)?{position:NS(r,i)}:null;const a=this.conversionApi.writer.split(r,o),l=[];for(const u of a.range.getWalker())if(u.type=="elementEnd")l.push(u.item);else{const d=l.pop(),h=u.item;this._registerSplitPair(d,h)}const c=a.range.end.parent;return this._cursorParents.set(t,c),{position:a.position,cursorParent:c}}_registerSplitPair(t,r){this._splitParts.has(t)||this._splitParts.set(t,[t]);const s=this._splitParts.get(t);this._splitParts.set(r,s),s.push(r)}_getSplitParts(t){let r;return r=this._splitParts.has(t)?this._splitParts.get(t):[t],r}_keepEmptyElement(t){this._emptyElementsToKeep.add(t)}_removeEmptyElements(){let t=!1;for(const r of this._splitParts.keys())r.isEmpty&&!this._emptyElementsToKeep.has(r)&&(this.conversionApi.writer.remove(r),this._splitParts.delete(r),t=!0);t&&this._removeEmptyElements()}}class V5{getHtml(e){const t=ke.document.implementation.createHTMLDocument("").createElement("div");return t.appendChild(e),t.innerHTML}}class $5{constructor(e){f(this,"domParser");f(this,"domConverter");f(this,"htmlWriter");f(this,"skipComments",!0);this.domParser=new DOMParser,this.domConverter=new _S(e,{renderingMode:"data"}),this.htmlWriter=new V5}toData(e){const t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(e.trim().slice(0,1e4))||(e=`<body>${e}</body>`);const t=this.domParser.parseFromString(e,"text/html"),r=t.createDocumentFragment(),s=t.body.childNodes;for(;s.length>0;)r.appendChild(s[0]);return r}}class B5 extends nt(){constructor(t,r){super();f(this,"model");f(this,"mapper");f(this,"downcastDispatcher");f(this,"upcastDispatcher");f(this,"viewDocument");f(this,"stylesProcessor");f(this,"htmlProcessor");f(this,"processor");f(this,"_viewWriter");this.model=t,this.mapper=new ES,this.downcastDispatcher=new SS({mapper:this.mapper,schema:t.schema}),this.downcastDispatcher.on("insert:$text",(s,i,o)=>{if(!o.consumable.consume(i.item,s.name))return;const a=o.writer,l=o.mapper.toViewPosition(i.range.start),c=a.createText(i.item.data);a.insert(l,c)},{priority:"lowest"}),this.downcastDispatcher.on("insert",(s,i,o)=>{o.convertAttributes(i.item),i.reconversion||!i.item.is("element")||i.item.isEmpty||o.convertChildren(i.item)},{priority:"lowest"}),this.upcastDispatcher=new L5({schema:t.schema}),this.viewDocument=new mS(r),this.stylesProcessor=r,this.htmlProcessor=new $5(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new pS(this.viewDocument),this.upcastDispatcher.on("text",(s,i,{schema:o,consumable:a,writer:l})=>{let c=i.modelCursor;if(!a.test(i.viewItem))return;if(!o.checkChild(c,"$text")){if(!OS(c,"$text",o)||i.viewItem.data.trim().length==0)return;c=NS(c,l)}a.consume(i.viewItem);const u=l.createText(i.viewItem.data);l.insert(u,c),i.modelRange=l.createRange(c,c.getShiftedBy(u.offsetSize)),i.modelCursor=i.modelRange.end},{priority:"lowest"}),this.upcastDispatcher.on("element",(s,i,o)=>{if(!i.modelRange&&o.consumable.consume(i.viewItem,{name:!0})){const{modelRange:a,modelCursor:l}=o.convertChildren(i.viewItem,i.modelCursor);i.modelRange=a,i.modelCursor=l}},{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",(s,i,o)=>{if(!i.modelRange&&o.consumable.consume(i.viewItem,{name:!0})){const{modelRange:a,modelCursor:l}=o.convertChildren(i.viewItem,i.modelCursor);i.modelRange=a,i.modelCursor=l}},{priority:"lowest"}),sn().prototype.decorate.call(this,"init"),sn().prototype.decorate.call(this,"set"),sn().prototype.decorate.call(this,"get"),sn().prototype.decorate.call(this,"toView"),sn().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},AS)},{priority:"lowest"})}get(t={}){const{rootName:r="main",trim:s="empty"}=t;if(!this._checkIfRootsExists([r]))throw new A("datacontroller-get-non-existent-root",this);const i=this.model.document.getRoot(r);return i.isAttached()||Pt("datacontroller-get-detached-root",this),s!=="empty"||this.model.hasContent(i,{ignoreWhitespaces:!0})?this.stringify(i,t):""}stringify(t,r={}){const s=this.toView(t,r);return this.processor.toData(s)}toView(t,r={}){const s=this.viewDocument,i=this._viewWriter;this.mapper.clearBindings();const o=D._createIn(t),a=new Fa(s);this.mapper.bindElements(t,a);const l=t.is("documentFragment")?t.markers:function(c){const u=[],d=c.root.document;if(!d)return new Map;const h=D._createIn(c);for(const p of d.model.markers){const _=p.getRange(),v=_.isCollapsed,w=_.start.isEqual(h.start)||_.end.isEqual(h.end);if(v&&w)u.push([p.name,_]);else{const y=h.getIntersection(_);y&&u.push([p.name,y])}}return u.sort(([p,_],[v,w])=>{if(_.end.compareWith(w.start)!=="after")return 1;if(_.start.compareWith(w.end)!=="before")return-1;switch(_.start.compareWith(w.start)){case"before":return 1;case"after":return-1;default:switch(_.end.compareWith(w.end)){case"before":return 1;case"after":return-1;default:return v.localeCompare(p)}}}),new Map(u)}(t);return this.downcastDispatcher.convert(o,l,i,r),a}init(t){if(this.model.document.version)throw new A("datacontroller-init-document-not-empty",this);let r={};if(typeof t=="string"?r.main=t:r=t,!this._checkIfRootsExists(Object.keys(r)))throw new A("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},s=>{for(const i of Object.keys(r)){const o=this.model.document.getRoot(i);s.insert(this.parse(r[i],o),o,0)}}),Promise.resolve()}set(t,r={}){let s={};if(typeof t=="string"?s.main=t:s=t,!this._checkIfRootsExists(Object.keys(s)))throw new A("datacontroller-set-non-existent-root",this);this.model.enqueueChange(r.batchType||{},i=>{i.setSelection(null),i.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const o of Object.keys(s)){const a=this.model.document.getRoot(o);i.remove(i.createRangeIn(a)),i.insert(this.parse(s[o],a),a,0)}})}parse(t,r="$root"){const s=this.processor.toView(t);return this.toModel(s,r)}toModel(t,r="$root"){return this.model.change(s=>this.upcastDispatcher.convert(t,s,r))}addStyleProcessorRules(t){t(this.stylesProcessor)}registerRawContentMatcher(t){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(t),this.htmlProcessor.registerRawContentMatcher(t)}destroy(){this.stopListening()}_checkIfRootsExists(t){for(const r of t)if(!this.model.document.getRoot(r))return!1;return!0}}class z5{constructor(e,t){f(this,"_helpers",new Map);f(this,"_downcast");f(this,"_upcast");this._downcast=_n(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=_n(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){const r=this._downcast.includes(t);if(!this._upcast.includes(t)&&!r)throw new A("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:r})}for(e){if(!this._helpers.has(e))throw new A("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:t,view:r}of im(e))this.for("upcast").elementToElement({model:t,view:r,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:t,view:r}of im(e))this.for("upcast").elementToAttribute({view:r,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:t,view:r}of im(e))this.for("upcast").attributeToAttribute({view:r,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:r}){if(this._helpers.has(e))throw new A("conversion-group-exists",this);const s=r?new g5(t):new x5(t);this._helpers.set(e,s)}}function*im(n){if(n.model.values)for(const e of n.model.values){const t={key:n.model.key,value:e},r=n.view[e],s=n.upcastAlso?n.upcastAlso[e]:void 0;yield*Kb(t,r,s)}else yield*Kb(n.model,n.view,n.upcastAlso)}function*Kb(n,e,t){if(yield{model:n,view:e},t)for(const r of _n(t))yield{model:n,view:r}}class lr{constructor(e){f(this,"baseVersion");f(this,"isDocumentOperation");f(this,"batch");this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}}function Gy(n,e){const t=IS(e),r=t.reduce((o,a)=>o+a.offsetSize,0),s=n.parent;lu(n);const i=n.index;return s._insertChild(i,t),au(s,i+t.length),au(s,i),new D(n,n.getShiftedBy(r))}function MS(n){if(!n.isFlat)throw new A("operation-utils-remove-range-not-flat",this);const e=n.start.parent;lu(n.start),lu(n.end);const t=e._removeChildren(n.start.index,n.end.index-n.start.index);return au(e,n.start.index),t}function ou(n,e){if(!n.isFlat)throw new A("operation-utils-move-range-not-flat",this);const t=MS(n);return Gy(e=e._getTransformedByDeletion(n.start,n.end.offset-n.start.offset),t)}function IS(n){const e=[];(function t(r){if(typeof r=="string")e.push(new ot(r));else if(r instanceof Dr)e.push(new ot(r.data,r.getAttributes()));else if(r instanceof Qo)e.push(r);else if(ar(r))for(const s of r)t(s)})(n);for(let t=1;t<e.length;t++){const r=e[t],s=e[t-1];r instanceof ot&&s instanceof ot&&jS(r,s)&&(e.splice(t-1,2,new ot(s.data+r.data,s.getAttributes())),t--)}return e}function au(n,e){const t=n.getChild(e-1),r=n.getChild(e);if(t&&r&&t.is("$text")&&r.is("$text")&&jS(t,r)){const s=new ot(t.data+r.data,t.getAttributes());n._removeChildren(e-1,2),n._insertChild(e-1,s)}}function lu(n){const e=n.textNode,t=n.parent;if(e){const r=n.offset-e.startOffset,s=e.index;t._removeChildren(s,1);const i=new ot(e.data.substr(0,r),e.getAttributes()),o=new ot(e.data.substr(r),e.getAttributes());t._insertChild(s,[i,o])}}function jS(n,e){const t=n.getAttributes(),r=e.getAttributes();for(const s of t){if(s[1]!==e.getAttribute(s[0]))return!1;r.next()}return r.next().done}class st extends lr{constructor(t,r,s,i){super(i);f(this,"sourcePosition");f(this,"howMany");f(this,"targetPosition");this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=r,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[D._createFromPositionAndShift(this.sourcePosition,this.howMany),D._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new st(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new st(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,r=this.targetPosition.parent,s=this.sourcePosition.offset,i=this.targetPosition.offset;if(s+this.howMany>t.maxOffset)throw new A("move-operation-nodes-do-not-exist",this);if(t===r&&s<i&&i<s+this.howMany)throw new A("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&Pn(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=s&&this.targetPosition.path[o]<s+this.howMany)throw new A("move-operation-node-into-itself",this)}}_execute(){ou(D._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,r){const s=$.fromJSON(t.sourcePosition,r),i=$.fromJSON(t.targetPosition,r);return new this(s,t.howMany,i,t.baseVersion)}}class tn extends lr{constructor(t,r,s){super(s);f(this,"position");f(this,"nodes");f(this,"shouldReceiveAttributes");this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new xc(IS(r)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const t=new xc([...this.nodes].map(s=>s._clone(!0))),r=new tn(this.position,t,this.baseVersion);return r.shouldReceiveAttributes=this.shouldReceiveAttributes,r}getReversed(){const t=this.position.root.document.graveyard,r=new $(t,[0]);return new st(this.position,this.nodes.maxOffset,r,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new A("insert-operation-position-invalid",this)}_execute(){const t=this.nodes;this.nodes=new xc([...t].map(r=>r._clone(!0))),Gy(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,r){const s=[];for(const o of t.nodes)o.name?s.push(it.fromJSON(o)):s.push(ot.fromJSON(o));const i=new tn($.fromJSON(t.position,r),s,t.baseVersion);return i.shouldReceiveAttributes=t.shouldReceiveAttributes,i}}class dt extends lr{constructor(t,r,s,i,o){super(o);f(this,"splitPosition");f(this,"howMany");f(this,"insertionPosition");f(this,"graveyardPosition");this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=r,this.insertionPosition=s,this.graveyardPosition=i?i.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new $(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new D(this.splitPosition,t)}get affectedSelectable(){const t=[D._createFromPositionAndShift(this.splitPosition,0),D._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&t.push(D._createFromPositionAndShift(this.graveyardPosition,0)),t}clone(){return new dt(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.splitPosition.root.document.graveyard,r=new $(t,[0]);return new dn(this.moveTargetPosition,this.howMany,this.splitPosition,r,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent,r=this.splitPosition.offset;if(!t||t.maxOffset<r)throw new A("split-operation-position-invalid",this);if(!t.parent)throw new A("split-operation-split-in-root",this);if(this.howMany!=t.maxOffset-this.splitPosition.offset)throw new A("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new A("split-operation-graveyard-position-invalid",this)}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)ou(D._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const r=t._clone();Gy(this.insertionPosition,r)}ou(new D($._createAt(t,this.splitPosition.offset),$._createAt(t,t.maxOffset)),this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const r=t.path.slice(0,-1);return r[r.length-1]++,new $(t.root,r,"toPrevious")}static fromJSON(t,r){const s=$.fromJSON(t.splitPosition,r),i=$.fromJSON(t.insertionPosition,r),o=t.graveyardPosition?$.fromJSON(t.graveyardPosition,r):null;return new this(s,t.howMany,i,o,t.baseVersion)}}class dn extends lr{constructor(t,r,s,i,o){super(o);f(this,"sourcePosition");f(this,"howMany");f(this,"targetPosition");f(this,"graveyardPosition");this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=r,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=i.clone()}get type(){return"merge"}get deletionPosition(){return new $(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new D(this.sourcePosition,t)}get affectedSelectable(){const t=this.sourcePosition.parent;return[D._createOn(t),D._createFromPositionAndShift(this.targetPosition,0),D._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new dn(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),r=this.sourcePosition.path.slice(0,-1),s=new $(this.sourcePosition.root,r)._getTransformedByMergeOperation(this);return new dt(t,this.howMany,s,this.graveyardPosition,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,r=this.targetPosition.parent;if(!t.parent)throw new A("merge-operation-source-position-invalid",this);if(!r.parent)throw new A("merge-operation-target-position-invalid",this);if(this.howMany!=t.maxOffset)throw new A("merge-operation-how-many-invalid",this)}_execute(){const t=this.sourcePosition.parent;ou(D._createIn(t),this.targetPosition),ou(D._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,r){const s=$.fromJSON(t.sourcePosition,r),i=$.fromJSON(t.targetPosition,r),o=$.fromJSON(t.graveyardPosition,r);return new this(s,t.howMany,i,o,t.baseVersion)}}class Yn extends lr{constructor(t,r,s,i,o,a){super(a);f(this,"name");f(this,"oldRange");f(this,"newRange");f(this,"affectsData");f(this,"_markers");this.name=t,this.oldRange=r?r.clone():null,this.newRange=s?s.clone():null,this.affectsData=o,this._markers=i}get type(){return"marker"}get affectedSelectable(){const t=[];return this.oldRange&&t.push(this.oldRange.clone()),this.newRange&&(this.oldRange?t.push(...this.newRange.getDifference(this.oldRange)):t.push(this.newRange.clone())),t}clone(){return new Yn(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Yn(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,r){return new Yn(t.name,t.oldRange?D.fromJSON(t.oldRange,r):null,t.newRange?D.fromJSON(t.newRange,r):null,r.model.markers,t.affectsData,t.baseVersion)}}class jt extends lr{constructor(t,r,s,i,o){super(o);f(this,"range");f(this,"key");f(this,"oldValue");f(this,"newValue");this.range=t.clone(),this.key=r,this.oldValue=s===void 0?null:s,this.newValue=i===void 0?null:i}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new jt(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new jt(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new A("attribute-operation-range-not-flat",this);for(const t of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!Y_(t.getAttribute(this.key),this.oldValue))throw new A("attribute-operation-wrong-old-value",this,{item:t,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&t.hasAttribute(this.key))throw new A("attribute-operation-attribute-exists",this,{node:t,key:this.key})}}_execute(){Y_(this.oldValue,this.newValue)||function(t,r,s){lu(t.start),lu(t.end);for(const i of t.getItems({shallow:!0})){const o=i.is("$textProxy")?i.textNode:i;s!==null?o._setAttribute(r,s):o._removeAttribute(r),au(o.parent,o.index)}au(t.end.parent,t.end.index)}(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,r){return new jt(D.fromJSON(t.range,r),t.key,t.oldValue,t.newValue,t.baseVersion)}}class en extends lr{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new en(this.baseVersion)}getReversed(){return new en(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class Ln extends lr{constructor(t,r,s,i){super(i);f(this,"position");f(this,"oldName");f(this,"newName");this.position=t,this.position.stickiness="toNext",this.oldName=r,this.newName=s}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Ln(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Ln(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(!(t instanceof it))throw new A("rename-operation-wrong-position",this);if(t.name!==this.oldName)throw new A("rename-operation-wrong-name",this)}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,r){return new Ln($.fromJSON(t.position,r),t.oldName,t.newName,t.baseVersion)}}class Ns extends lr{constructor(t,r,s,i,o){super(o);f(this,"root");f(this,"key");f(this,"oldValue");f(this,"newValue");this.root=t,this.key=r,this.oldValue=s===void 0?null:s,this.newValue=i===void 0?null:i}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new Ns(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Ns(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new A("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new A("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new A("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,r){if(!r.getRoot(t.root))throw new A("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new Ns(r.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class os extends lr{constructor(t,r,s,i,o){super(o);f(this,"rootName");f(this,"elementName");f(this,"isAdd");f(this,"_document");this.rootName=t,this.elementName=r,this.isAdd=s,this._document=i,!this._document.getRoot(this.rootName)&&(this._document.createRoot(this.elementName,this.rootName)._isAttached=!1)}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new os(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new os(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const t=super.toJSON();return delete t._document,t}static get className(){return"RootOperation"}static fromJSON(t,r){return new os(t.rootName,t.elementName,t.isAdd,r,t.baseVersion)}}const fr={};fr[jt.className]=jt,fr[tn.className]=tn,fr[Yn.className]=Yn,fr[st.className]=st,fr[en.className]=en,fr[lr.className]=lr,fr[Ln.className]=Ln,fr[Ns.className]=Ns,fr[os.className]=os,fr[dt.className]=dt,fr[dn.className]=dn;class U5{static fromJSON(e,t){return fr[e.__className].fromJSON(e,t)}}const Qb=new Map;function Ue(n,e,t){let r=Qb.get(n);r||(r=new Map,Qb.set(n,r)),r.set(e,t)}function Zb(n,e,t){const r=n.nodes.getNode(0).getAttribute(e);if(r==t)return null;const s=new D(n.position,n.position.getShiftedBy(n.howMany));return new jt(s,e,r,t,0)}function Jb(n,e){return n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function sa(n,e){const t=[];for(let r=0;r<n.length;r++){const s=n[r],i=new st(s.start,s.end.offset-s.start.offset,e,0);t.push(i);for(let o=r+1;o<n.length;o++)n[o]=n[o]._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany)[0];e=e._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany)}return t}Ue(jt,jt,(n,e,t)=>{if(n.key===e.key&&n.range.start.hasSameParentAs(e.range.start)){const r=n.range.getDifference(e.range).map(i=>new jt(i,n.key,n.oldValue,n.newValue,0)),s=n.range.getIntersection(e.range);return s&&t.aIsStrong&&r.push(new jt(s,e.key,e.newValue,n.newValue,0)),r.length==0?[new en(0)]:r}return[n]}),Ue(jt,tn,(n,e)=>{if(n.range.start.hasSameParentAs(e.position)&&n.range.containsPosition(e.position)){const t=n.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(r=>new jt(r,n.key,n.oldValue,n.newValue,n.baseVersion));if(e.shouldReceiveAttributes){const r=Zb(e,n.key,n.oldValue);r&&t.unshift(r)}return t}return n.range=n.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[n]}),Ue(jt,dn,(n,e)=>{const t=[];n.range.start.hasSameParentAs(e.deletionPosition)&&(n.range.containsPosition(e.deletionPosition)||n.range.start.isEqual(e.deletionPosition))&&t.push(D._createFromPositionAndShift(e.graveyardPosition,1));const r=n.range._getTransformedByMergeOperation(e);return r.isCollapsed||t.push(r),t.map(s=>new jt(s,n.key,n.oldValue,n.newValue,n.baseVersion))}),Ue(jt,st,(n,e)=>function(r,s){const i=D._createFromPositionAndShift(s.sourcePosition,s.howMany);let o=null,a=[];i.containsRange(r,!0)?o=r:r.start.hasSameParentAs(i.start)?(a=r.getDifference(i),o=r.getIntersection(i)):a=[r];const l=[];for(let c of a){c=c._getTransformedByDeletion(s.sourcePosition,s.howMany);const u=s.getMovedRangeStart(),d=c.start.hasSameParentAs(u),h=c._getTransformedByInsertion(u,s.howMany,d);l.push(...h)}return o&&l.push(o._getTransformedByMove(s.sourcePosition,s.targetPosition,s.howMany,!1)[0]),l}(n.range,e).map(r=>new jt(r,n.key,n.oldValue,n.newValue,n.baseVersion))),Ue(jt,dt,(n,e)=>{if(n.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.range.end.offset++,[n];if(n.range.start.hasSameParentAs(e.splitPosition)&&n.range.containsPosition(e.splitPosition)){const t=n.clone();return t.range=new D(e.moveTargetPosition.clone(),n.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),n.range.end=e.splitPosition.clone(),n.range.end.stickiness="toPrevious",[n,t]}return n.range=n.range._getTransformedBySplitOperation(e),[n]}),Ue(tn,jt,(n,e)=>{const t=[n];if(n.shouldReceiveAttributes&&n.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(n.position)){const r=Zb(n,e.key,e.newValue);r&&t.push(r)}return t}),Ue(tn,tn,(n,e,t)=>(n.position.isEqual(e.position)&&t.aIsStrong||(n.position=n.position._getTransformedByInsertOperation(e)),[n])),Ue(tn,st,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n])),Ue(tn,dt,(n,e)=>(n.position=n.position._getTransformedBySplitOperation(e),[n])),Ue(tn,dn,(n,e)=>(n.position=n.position._getTransformedByMergeOperation(e),[n])),Ue(Yn,tn,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByInsertOperation(e)[0]),n.newRange&&(n.newRange=n.newRange._getTransformedByInsertOperation(e)[0]),[n])),Ue(Yn,Yn,(n,e,t)=>{if(n.name==e.name){if(!t.aIsStrong)return[new en(0)];n.oldRange=e.newRange?e.newRange.clone():null}return[n]}),Ue(Yn,dn,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByMergeOperation(e)),n.newRange&&(n.newRange=n.newRange._getTransformedByMergeOperation(e)),[n])),Ue(Yn,st,(n,e)=>{const t=[n];if(n.oldRange&&(n.oldRange=D._createFromRanges(n.oldRange._getTransformedByMoveOperation(e))),n.newRange){const r=n.newRange._getTransformedByMoveOperation(e);n.newRange=r[0];for(let s=1;s<r.length;s++){const i=n.clone();i.oldRange=null,i.newRange=r[s],i.baseVersion=-1,t.push(i)}}return t}),Ue(Yn,dt,(n,e,t)=>{if(n.oldRange&&(n.oldRange=n.oldRange._getTransformedBySplitOperation(e)),n.newRange){if(t.abRelation){const r=n.newRange._getTransformedBySplitOperation(e);return n.newRange.start.isEqual(e.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?n.newRange.start=$._createAt(e.insertionPosition):n.newRange.start.isEqual(e.splitPosition)&&!t.abRelation.wasInLeftElement?n.newRange.start=$._createAt(e.moveTargetPosition):n.newRange.start=r.start,n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasInRightElement?n.newRange.end=$._createAt(e.moveTargetPosition):n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?n.newRange.end=$._createAt(e.insertionPosition):n.newRange.end=r.end,[n]}n.newRange=n.newRange._getTransformedBySplitOperation(e)}return[n]}),Ue(dn,tn,(n,e)=>(n.sourcePosition.hasSameParentAs(e.position)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByInsertOperation(e),n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e),[n])),Ue(dn,dn,(n,e,t)=>{if(n.sourcePosition.isEqual(e.sourcePosition)&&n.targetPosition.isEqual(e.targetPosition)){if(t.bWasUndone){const r=e.graveyardPosition.path.slice();return r.push(0),n.sourcePosition=new $(e.graveyardPosition.root,r),n.howMany=0,[n]}return[new en(0)]}if(n.sourcePosition.isEqual(e.sourcePosition)&&!n.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const r=n.targetPosition.root.rootName=="$graveyard",s=e.targetPosition.root.rootName=="$graveyard";if(s&&!r||!(r&&!s)&&t.aIsStrong){const i=e.targetPosition._getTransformedByMergeOperation(e),o=n.targetPosition._getTransformedByMergeOperation(e);return[new st(i,n.howMany,o,0)]}return[new en(0)]}return n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByMergeOperation(e),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),n.graveyardPosition.isEqual(e.graveyardPosition)&&t.aIsStrong||(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]}),Ue(dn,st,(n,e,t)=>{const r=D._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&n.deletionPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(n.sourcePosition)?[new en(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(n.sourcePosition)?n.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(n.sourcePosition)&&t.abRelation=="mergeSourceAffected"?n.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(n.targetPosition)?(n.targetPosition.stickiness="toNone",n.howMany-=e.howMany):e.targetPosition.isEqual(n.targetPosition)&&t.abRelation=="mergeTargetWasBefore"?(n.targetPosition.stickiness="toPrevious",n.howMany+=e.howMany):(n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition.hasSameParentAs(e.sourcePosition)&&(n.howMany-=e.howMany)),n.sourcePosition=n.sourcePosition._getTransformedByMoveOperation(e),n.targetPosition=n.targetPosition._getTransformedByMoveOperation(e),n.sourcePosition.stickiness="toPrevious",n.targetPosition.stickiness="toNext",n.graveyardPosition.isEqual(e.targetPosition)||(n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)),[n])}),Ue(dn,dt,(n,e,t)=>{if(e.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),n.deletionPosition.isEqual(e.graveyardPosition)&&(n.howMany=e.howMany)),n.targetPosition.isEqual(e.splitPosition)&&(e.graveyardPosition&&n.deletionPosition.isEqual(e.graveyardPosition)||t.abRelation=="mergeTargetNotMoved"))return n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),[n];if(n.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return n.howMany=0,n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n];if(t.abRelation=="mergeSameElement"||n.sourcePosition.offset>0)return n.sourcePosition=e.moveTargetPosition.clone(),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]}return n.sourcePosition.hasSameParentAs(e.splitPosition)&&(n.howMany=e.splitPosition.offset),n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]}),Ue(st,tn,(n,e)=>{const t=D._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByInsertOperation(e,!1)[0];return n.sourcePosition=t.start,n.howMany=t.end.offset-t.start.offset,n.targetPosition.isEqual(e.position)||(n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e)),[n]}),Ue(st,st,(n,e,t)=>{const r=D._createFromPositionAndShift(n.sourcePosition,n.howMany),s=D._createFromPositionAndShift(e.sourcePosition,e.howMany);let i,o=t.aIsStrong,a=!t.aIsStrong;if(t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?a=!0:t.abRelation!="insertAfter"&&t.baRelation!="insertBefore"||(a=!1),i=n.targetPosition.isEqual(e.targetPosition)&&a?n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):n.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Jb(n,e)&&Jb(e,n))return[e.getReversed()];if(r.containsPosition(e.targetPosition)&&r.containsRange(s,!0))return r.start=r.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),r.end=r.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),sa([r],i);if(s.containsPosition(n.targetPosition)&&s.containsRange(r,!0))return r.start=r.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),r.end=r.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),sa([r],i);const l=Pn(n.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(l=="prefix"||l=="extension")return r.start=r.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),r.end=r.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),sa([r],i);n.type!="remove"||e.type=="remove"||t.aWasUndone||t.forceWeakRemove?n.type=="remove"||e.type!="remove"||t.bWasUndone||t.forceWeakRemove||(o=!1):o=!0;const c=[],u=r.getDifference(s);for(const h of u){h.start=h.start._getTransformedByDeletion(e.sourcePosition,e.howMany),h.end=h.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const p=Pn(h.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",_=h._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,p);c.push(..._)}const d=r.getIntersection(s);return d!==null&&o&&(d.start=d.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),d.end=d.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),c.length===0?c.push(d):c.length==1?s.start.isBefore(r.start)||s.start.isEqual(r.start)?c.unshift(d):c.push(d):c.splice(1,0,d)),c.length===0?[new en(n.baseVersion)]:sa(c,i)}),Ue(st,dt,(n,e,t)=>{let r=n.targetPosition.clone();n.targetPosition.isEqual(e.insertionPosition)&&e.graveyardPosition&&t.abRelation!="moveTargetAfter"||(r=n.targetPosition._getTransformedBySplitOperation(e));const s=D._createFromPositionAndShift(n.sourcePosition,n.howMany);if(s.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.howMany++,n.targetPosition=r,[n];if(s.start.hasSameParentAs(e.splitPosition)&&s.containsPosition(e.splitPosition)){let o=new D(e.splitPosition,s.end);return o=o._getTransformedBySplitOperation(e),sa([new D(s.start,e.splitPosition),o],r)}n.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(r=e.moveTargetPosition),n.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(r=n.targetPosition);const i=[s._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const o=s.start.isEqual(e.graveyardPosition)||s.containsPosition(e.graveyardPosition);n.howMany>1&&o&&!t.aWasUndone&&i.push(D._createFromPositionAndShift(e.insertionPosition,1))}return sa(i,r)}),Ue(st,dn,(n,e,t)=>{const r=D._createFromPositionAndShift(n.sourcePosition,n.howMany);if(e.deletionPosition.hasSameParentAs(n.sourcePosition)&&r.containsPosition(e.sourcePosition)){if(n.type!="remove"||t.forceWeakRemove){if(n.howMany==1)return t.bWasUndone?(n.sourcePosition=e.graveyardPosition.clone(),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]):[new en(0)]}else if(!t.aWasUndone){const i=[];let o=e.graveyardPosition.clone(),a=e.targetPosition._getTransformedByMergeOperation(e);const l=n.targetPosition.getTransformedByOperation(e);n.howMany>1&&(i.push(new st(n.sourcePosition,n.howMany-1,l,0)),o=o._getTransformedByMove(n.sourcePosition,l,n.howMany-1),a=a._getTransformedByMove(n.sourcePosition,l,n.howMany-1));const c=e.deletionPosition._getCombined(n.sourcePosition,l),u=new st(o,1,c,0),d=u.getMovedRangeStart().path.slice();d.push(0);const h=new $(u.targetPosition.root,d);a=a._getTransformedByMove(o,c,1);const p=new st(a,e.howMany,h,0);return i.push(u),i.push(p),i}}const s=D._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByMergeOperation(e);return n.sourcePosition=s.start,n.howMany=s.end.offset-s.start.offset,n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]}),Ue(Ln,tn,(n,e)=>(n.position=n.position._getTransformedByInsertOperation(e),[n])),Ue(Ln,dn,(n,e)=>n.position.isEqual(e.deletionPosition)?(n.position=e.graveyardPosition.clone(),n.position.stickiness="toNext",[n]):(n.position=n.position._getTransformedByMergeOperation(e),[n])),Ue(Ln,st,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n])),Ue(Ln,Ln,(n,e,t)=>{if(n.position.isEqual(e.position)){if(!t.aIsStrong)return[new en(0)];n.oldName=e.newName}return[n]}),Ue(Ln,dt,(n,e)=>{if(Pn(n.position.path,e.splitPosition.getParentPath())=="same"&&!e.graveyardPosition){const t=new Ln(n.position.getShiftedBy(1),n.oldName,n.newName,0);return[n,t]}return n.position=n.position._getTransformedBySplitOperation(e),[n]}),Ue(Ns,Ns,(n,e,t)=>{if(n.root===e.root&&n.key===e.key){if(!t.aIsStrong||n.newValue===e.newValue)return[new en(0)];n.oldValue=e.newValue}return[n]}),Ue(os,os,(n,e)=>n.rootName===e.rootName&&n.isAdd===e.isAdd?[new en(0)]:[n]),Ue(dt,tn,(n,e)=>(n.splitPosition.hasSameParentAs(e.position)&&n.splitPosition.offset<e.position.offset&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByInsertOperation(e),n.insertionPosition=n.insertionPosition._getTransformedByInsertOperation(e),[n])),Ue(dt,dn,(n,e,t)=>{if(!n.graveyardPosition&&!t.bWasUndone&&n.splitPosition.hasSameParentAs(e.sourcePosition)){const r=e.graveyardPosition.path.slice();r.push(0);const s=new $(e.graveyardPosition.root,r),i=dt.getInsertionPosition(new $(e.graveyardPosition.root,r)),o=new dt(s,0,i,null,0);return n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=dt.getInsertionPosition(n.splitPosition),n.graveyardPosition=o.insertionPosition.clone(),n.graveyardPosition.stickiness="toNext",[o,n]}return n.splitPosition.hasSameParentAs(e.deletionPosition)&&!n.splitPosition.isAfter(e.deletionPosition)&&n.howMany--,n.splitPosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=dt.getInsertionPosition(n.splitPosition),n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]}),Ue(dt,st,(n,e,t)=>{const r=D._createFromPositionAndShift(e.sourcePosition,e.howMany);if(n.graveyardPosition){const i=r.start.isEqual(n.graveyardPosition)||r.containsPosition(n.graveyardPosition);if(!t.bWasUndone&&i){const o=n.splitPosition._getTransformedByMoveOperation(e),a=n.graveyardPosition._getTransformedByMoveOperation(e),l=a.path.slice();l.push(0);const c=new $(a.root,l);return[new st(o,n.howMany,c,0)]}n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)}const s=n.splitPosition.isEqual(e.targetPosition);if(s&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return n.howMany+=e.howMany,n.splitPosition=n.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),n.insertionPosition=dt.getInsertionPosition(n.splitPosition),[n];if(s&&t.abRelation&&t.abRelation.howMany){const{howMany:i,offset:o}=t.abRelation;return n.howMany+=i,n.splitPosition=n.splitPosition.getShiftedBy(o),[n]}if(n.splitPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(n.splitPosition)){const i=e.howMany-(n.splitPosition.offset-e.sourcePosition.offset);return n.howMany-=i,n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany),n.splitPosition=e.sourcePosition.clone(),n.insertionPosition=dt.getInsertionPosition(n.splitPosition),[n]}return e.sourcePosition.isEqual(e.targetPosition)||(n.splitPosition.hasSameParentAs(e.sourcePosition)&&n.splitPosition.offset<=e.sourcePosition.offset&&(n.howMany-=e.howMany),n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany)),n.splitPosition.stickiness="toNone",n.splitPosition=n.splitPosition._getTransformedByMoveOperation(e),n.splitPosition.stickiness="toNext",n.graveyardPosition?n.insertionPosition=n.insertionPosition._getTransformedByMoveOperation(e):n.insertionPosition=dt.getInsertionPosition(n.splitPosition),[n]}),Ue(dt,dt,(n,e,t)=>{if(n.splitPosition.isEqual(e.splitPosition)){if(!n.graveyardPosition&&!e.graveyardPosition)return[new en(0)];if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition))return[new en(0)];if(t.abRelation=="splitBefore")return n.howMany=0,n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e),[n]}if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition)){const r=n.splitPosition.root.rootName=="$graveyard",s=e.splitPosition.root.rootName=="$graveyard";if(s&&!r||!(r&&!s)&&t.aIsStrong){const i=[];return e.howMany&&i.push(new st(e.moveTargetPosition,e.howMany,e.splitPosition,0)),n.howMany&&i.push(new st(n.splitPosition,n.howMany,n.moveTargetPosition,0)),i}return[new en(0)]}if(n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e)),n.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return n.howMany++,[n];if(e.splitPosition.isEqual(n.insertionPosition)&&t.baRelation=="splitBefore"){const r=e.insertionPosition.path.slice();r.push(0);const s=new $(e.insertionPosition.root,r);return[n,new st(n.insertionPosition,1,s,0)]}return n.splitPosition.hasSameParentAs(e.splitPosition)&&n.splitPosition.offset<e.splitPosition.offset&&(n.howMany-=e.howMany),n.splitPosition=n.splitPosition._getTransformedBySplitOperation(e),n.insertionPosition=dt.getInsertionPosition(n.splitPosition),[n]});class Mn extends nt($){constructor(e,t,r="toNone"){if(super(e,t,r),!this.root.is("rootElement"))throw new A("model-liveposition-root-not-rootelement",e);W5.call(this)}detach(){this.stopListening()}toPosition(){return new $(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}function W5(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&q5.call(this,t)},{priority:"low"})}function q5(n){const e=this.getTransformedByOperation(n);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}Mn.prototype.is=function(n){return n==="livePosition"||n==="model:livePosition"||n=="position"||n==="model:position"};class ia{constructor(e={}){f(this,"operations");f(this,"isUndoable");f(this,"isLocal");f(this,"isUndo");f(this,"isTyping");typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},Pt("batch-constructor-deprecated-string-type"));const{isUndoable:t=!0,isLocal:r=!0,isUndo:s=!1,isTyping:i=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=r,this.isUndo=s,this.isTyping=i}get type(){return Pt("batch-type-deprecated"),"default"}get baseVersion(){for(const e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}}const Oc=class Oc{constructor(e){f(this,"_markerCollection");f(this,"_changesInElement",new Map);f(this,"_elementsSnapshots",new Map);f(this,"_elementChildrenSnapshots",new Map);f(this,"_elementState",new Map);f(this,"_changedMarkers",new Map);f(this,"_changedRoots",new Map);f(this,"_changeCount",0);f(this,"_cachedChanges",null);f(this,"_cachedChangesWithGraveyard",null);f(this,"_refreshedItems",new Set);this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(e){const t=e;switch(t.type){case"insert":if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":for(const r of t.range.getItems({shallow:!0}))this._isInInsertedElement(r.parent)||this._markAttribute(r);break;case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const r=this._isInInsertedElement(t.sourcePosition.parent),s=this._isInInsertedElement(t.targetPosition.parent);r||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),s||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);const i=D._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const o of i.getItems({shallow:!0}))this._setElementState(o,"move");break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const r=D._createFromPositionAndShift(t.position,1);for(const s of this._markerCollection.getMarkersIntersectingRange(r)){const i=s.getData();this.bufferMarkerChange(s.name,i,i)}this._setElementState(t.position.nodeAfter,"rename");break}case"split":{const r=t.splitPosition.parent;if(!this._isInInsertedElement(r)){this._markRemove(r,t.splitPosition.offset,t.howMany);const s=D._createFromPositionAndShift(t.splitPosition,t.howMany);for(const i of s.getItems({shallow:!0}))this._setElementState(i,"move")}this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&(this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1),this._setElementState(t.graveyardPosition.nodeAfter,"move"));break}case"merge":{const r=t.sourcePosition.parent;this._isInInsertedElement(r.parent)||this._markRemove(r.parent,r.startOffset,1);const s=t.graveyardPosition.parent;this._markInsert(s,t.graveyardPosition.offset,1),this._setElementState(r,"move");const i=t.targetPosition.parent;if(!this._isInInsertedElement(i)){this._markInsert(i,t.targetPosition.offset,r.maxOffset);const o=D._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const a of o.getItems({shallow:!0}))this._setElementState(a,"move")}break}case"detachRoot":case"addRoot":{const r=t.affectedSelectable;if(!r._isLoaded||r.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;const r=t.root.rootName;this._bufferRootAttributeChange(r,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(e,t,r){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),r.range&&r.range.root.is("rootElement")&&!r.range.root._isLoaded&&(r.range=null);let s=this._changedMarkers.get(e);s?s.newMarkerData=r:(s={newMarkerData:r,oldMarkerData:t},this._changedMarkers.set(e,s)),s.oldMarkerData.range==null&&r.range==null&&this._changedMarkers.delete(e)}getMarkersToRemove(){const e=[];for(const[t,r]of this._changedMarkers)r.oldMarkerData.range!=null&&e.push({name:t,range:r.oldMarkerData.range});return e}getMarkersToAdd(){const e=[];for(const[t,r]of this._changedMarkers)r.newMarkerData.range!=null&&e.push({name:t,range:r.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){const r=e.range&&!t.range,s=!e.range&&t.range,i=e.range&&t.range&&!e.range.isEqual(t.range);if(r||s||i)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const r of this._changesInElement.keys()){const s=this._changesInElement.get(r).sort((u,d)=>u.offset===d.offset?u.type!=d.type?u.type=="remove"?-1:1:0:u.offset<d.offset?-1:1),i=this._elementChildrenSnapshots.get(r),o=Yb(r.getChildren()),a=H5(i.length,s);let l=0,c=0;for(const u of a)if(u==="i"){const d=this._getDiffActionForNode(o[l].node,"insert"),h=this._elementsSnapshots.get(o[l].node),p=this._getInsertDiff(r,l,d,o[l],h);t.push(p),l++}else if(u==="r"){const d=this._getDiffActionForNode(i[c].node,"remove"),h=this._getRemoveDiff(r,l,d,i[c]);t.push(h),c++}else if(u==="a"){const d=i[c].attributes,h=o[l].attributes;let p;if(o[l].name=="$text")p=new D($._createAt(r,l),$._createAt(r,l+1));else{const v=r.offsetToIndex(l);p=new D($._createAt(r,l),$._createAt(r.getChild(v),0))}const _=this._getAttributesDiff(p,d,h);t.push(..._),l++,c++}else l++,c++}t.sort((r,s)=>r.position.root!=s.position.root?r.position.root.rootName<s.position.root.rootName?-1:1:r.position.isEqual(s.position)?r.changeCount-s.changeCount:r.position.isBefore(s.position)?-1:1);for(let r=1,s=0;r<t.length;r++){const i=t[s],o=t[r],a=i.type=="remove"&&o.type=="remove"&&i.name=="$text"&&o.name=="$text"&&i.position.isEqual(o.position),l=i.type=="insert"&&o.type=="insert"&&i.name=="$text"&&o.name=="$text"&&i.position.parent==o.position.parent&&i.position.offset+i.length==o.position.offset,c=i.type=="attribute"&&o.type=="attribute"&&i.position.parent==o.position.parent&&i.range.isFlat&&o.range.isFlat&&i.position.offset+i.length==o.position.offset&&i.attributeKey==o.attributeKey&&i.attributeOldValue==o.attributeOldValue&&i.attributeNewValue==o.attributeNewValue;a||l||c?(i.length++,c&&(i.range.end=i.range.end.getShiftedBy(1)),t[r]=null):s=r}t=t.filter(r=>r);for(const r of t)delete r.changeCount,r.type=="attribute"&&(delete r.position,delete r.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(K5),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{const t={...e};return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e),this._setElementState(e,"refresh");const t=D._createOn(e);for(const r of this._markerCollection.getMarkersIntersectingRange(t)){const s=r.getData();this.bufferMarkerChange(r.name,s,s)}this._cachedChanges=null}_bufferRootLoad(e){if(e.isAttached()){this._bufferRootStateChange(e.rootName,!0),this._markInsert(e,0,e.maxOffset);for(const t of e.getAttributeKeys())this._bufferRootAttributeChange(e.rootName,t,null,e.getAttribute(t));for(const t of this._markerCollection)if(t.getRange().root==e){const r=t.getData();this.bufferMarkerChange(t.name,{...r,range:null},r)}}}_bufferRootStateChange(e,t){if(!this._changedRoots.has(e))return void this._changedRoots.set(e,{name:e,state:t?"attached":"detached"});const r=this._changedRoots.get(e);r.state!==void 0?(delete r.state,r.attributes===void 0&&this._changedRoots.delete(e)):r.state=t?"attached":"detached"}_bufferRootAttributeChange(e,t,r,s){const i=this._changedRoots.get(e)||{name:e},o=i.attributes||{};if(o[t]){const a=o[t];s===a.oldValue?delete o[t]:a.newValue=s}else o[t]={oldValue:r,newValue:s};Object.entries(o).length===0?(delete i.attributes,i.state===void 0&&this._changedRoots.delete(e)):(i.attributes=o,this._changedRoots.set(e,i))}_markInsert(e,t,r){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const s={type:"insert",offset:t,howMany:r,count:this._changeCount++};this._markChange(e,s)}_markRemove(e,t,r){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const s={type:"remove",offset:t,howMany:r,count:this._changeCount++};this._markChange(e,s),this._removeAllNestedChanges(e,t,r)}_markAttribute(e){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshots(e);const r=this._getChangesForElement(e);this._handleChange(t,r),r.push(t);for(let s=0;s<r.length;s++)r[s].howMany<1&&(r.splice(s,1),s--)}_setElementState(e,t){if(!e.is("element"))return;const r=Oc._statesPriority.indexOf(this._elementState.get(e));Oc._statesPriority.indexOf(t)>r&&this._elementState.set(e,t)}_getDiffActionForNode(e,t){if(!e.is("element")||!this._elementsSnapshots.has(e))return t;const r=this._elementState.get(e);return r&&r!="move"?r:t}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshots(e){if(this._elementChildrenSnapshots.has(e))return;const t=Yb(e.getChildren());this._elementChildrenSnapshots.set(e,t);for(const r of t)this._elementsSnapshots.set(r.node,r)}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const r of t){const s=e.offset+e.howMany,i=r.offset+r.howMany;if(e.type=="insert"&&(r.type=="insert"&&(e.offset<=r.offset?r.offset+=e.howMany:e.offset<i&&(r.howMany+=e.nodesToHandle,e.nodesToHandle=0)),r.type=="remove"&&e.offset<r.offset&&(r.offset+=e.howMany),r.type=="attribute")){if(e.offset<=r.offset)r.offset+=e.howMany;else if(e.offset<i){const o=r.howMany;r.howMany=e.offset-r.offset,t.unshift({type:"attribute",offset:s,howMany:o-r.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(r.type=="insert"){if(s<=r.offset)r.offset-=e.howMany;else if(s<=i)if(e.offset<r.offset){const o=s-r.offset;r.offset=e.offset,r.howMany-=o,e.nodesToHandle-=o}else r.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=r.offset)e.nodesToHandle-=r.howMany,r.howMany=0;else if(e.offset<i){const o=i-e.offset;r.howMany-=o,e.nodesToHandle-=o}}if(r.type=="remove"&&(s<=r.offset?r.offset-=e.howMany:e.offset<r.offset&&(e.nodesToHandle+=r.howMany,r.howMany=0)),r.type=="attribute"){if(s<=r.offset)r.offset-=e.howMany;else if(e.offset<r.offset){const o=s-r.offset;r.offset=e.offset,r.howMany-=o}else if(e.offset<i)if(s<=i){const o=r.howMany;r.howMany=e.offset-r.offset;const a=o-r.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:a,count:this._changeCount++})}else r.howMany-=i-e.offset}}if(e.type=="attribute"){if(r.type=="insert")if(e.offset<r.offset&&s>r.offset){if(s>i){const o={type:"attribute",offset:i,howMany:s-i,count:this._changeCount++};this._handleChange(o,t),t.push(o)}e.nodesToHandle=r.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=r.offset&&e.offset<i&&(s>i?(e.nodesToHandle=s-i,e.offset=i):e.nodesToHandle=0);if(r.type=="remove"&&e.offset<r.offset&&s>r.offset){const o={type:"attribute",offset:r.offset,howMany:s-r.offset,count:this._changeCount++};this._handleChange(o,t),t.push(o),e.nodesToHandle=r.offset-e.offset,e.howMany=e.nodesToHandle}r.type=="attribute"&&(e.offset>=r.offset&&s<=i?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=r.offset&&s>=i&&(r.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,r,s,i){const o={type:"insert",position:$._createAt(e,t),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++,action:r};return r!="insert"&&i&&(o.before={name:i.name,attributes:new Map(i.attributes)}),o}_getRemoveDiff(e,t,r,s){return{type:"remove",action:r,position:$._createAt(e,t),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,r){const s=[];r=new Map(r);for(const[i,o]of t){const a=r.has(i)?r.get(i):null;a!==o&&s.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:i,attributeOldValue:o,attributeNewValue:a,changeCount:this._changeCount++}),r.delete(i)}for(const[i,o]of r)s.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:i,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return s}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const r=this._changesInElement.get(t),s=e.startOffset;if(r){for(const i of r)if(i.type=="insert"&&s>=i.offset&&s<i.offset+i.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,r){const s=new D($._createAt(e,t),$._createAt(e,t+r));for(const i of s.getItems({shallow:!0}))i.is("element")&&(this._changesInElement.delete(i),this._removeAllNestedChanges(i,0,i.maxOffset))}};f(Oc,"_statesPriority",[void 0,"refresh","rename","move"]);let ag=Oc;function Gb(n){return{node:n,name:n.is("$text")?"$text":n.name,attributes:new Map(n.getAttributes())}}function Yb(n){const e=[];for(const t of n)if(t.is("$text"))for(let r=0;r<t.data.length;++r)e.push(Gb(t));else e.push(Gb(t));return e}function H5(n,e){const t=[];let r=0,s=0;for(const i of e){if(i.offset>r){for(let o=0;o<i.offset-r;o++)t.push("e");s+=i.offset-r}if(i.type=="insert"){for(let o=0;o<i.howMany;o++)t.push("i");r=i.offset+i.howMany}else if(i.type=="remove"){for(let o=0;o<i.howMany;o++)t.push("r");r=i.offset,s+=i.howMany}else{if(i.howMany>1500)for(let o=0;o<i.howMany;o++)t.push("a");else t.push(..."a".repeat(i.howMany).split(""));r=i.offset+i.howMany,s+=i.howMany}}if(s<n)for(let i=0;i<n-s-r;i++)t.push("e");return t}function K5(n){const e="position"in n&&n.position.root.rootName=="$graveyard",t="range"in n&&n.range.root.rootName=="$graveyard";return!e&&!t}class Q5{constructor(){f(this,"_operations",[]);f(this,"_undoPairs",new Map);f(this,"_undoneOperations",new Set);f(this,"_baseVersionToOperationIndex",new Map);f(this,"_version",0);f(this,"_gaps",new Map)}get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new A("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];const r=this._operations[0];e===void 0&&(e=r.baseVersion);let s=t-1;for(const[a,l]of this._gaps)e>a&&e<l&&(e=l),s>a&&s<l&&(s=a-1);if(s<r.baseVersion||e>this.lastOperation.baseVersion)return[];let i=this._baseVersionToOperationIndex.get(e);i===void 0&&(i=0);let o=this._baseVersionToOperationIndex.get(s);return o===void 0&&(o=this._operations.length-1),this._operations.slice(i,o+1)}getOperation(e){const t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class gh extends it{constructor(t,r,s="main"){super(r);f(this,"rootName");f(this,"_document");f(this,"_isAttached",!0);f(this,"_isLoaded",!0);this._document=t,this.rootName=s}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}gh.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"):n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"||n==="node"||n==="model:node"};const Xb="$graveyard";class Z5 extends nt(){constructor(t){super();f(this,"model");f(this,"history");f(this,"selection");f(this,"roots");f(this,"differ");f(this,"isReadOnly");f(this,"_postFixers");f(this,"_hasSelectionChangedFromTheLastChangeBlock");this.model=t,this.history=new Q5,this.selection=new Ur(this),this.roots=new Sl({idProperty:"rootName"}),this.differ=new ag(t.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",Xb),this.listenTo(t,"applyOperation",(r,s)=>{const i=s[0];i.isDocumentOperation&&this.differ.bufferOperation(i)},{priority:"high"}),this.listenTo(t,"applyOperation",(r,s)=>{const i=s[0];i.isDocumentOperation&&this.history.addOperation(i)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(t.markers,"update",(r,s,i,o,a)=>{const l={...s.getData(),range:o};this.differ.bufferMarkerChange(s.name,a,l),i===null&&s.on("change",(c,u)=>{const d=s.getData();this.differ.bufferMarkerChange(s.name,{...d,range:u},d)})}),this.registerPostFixer(r=>{let s=!1;for(const i of this.roots)i.isAttached()||i.isEmpty||(r.remove(r.createRangeIn(i)),s=!0);for(const i of this.model.markers)i.getRange().root.isAttached()||(r.removeMarker(i),s=!0);return s})}get version(){return this.history.version}set version(t){this.history.version=t}get graveyard(){return this.getRoot(Xb)}createRoot(t="$root",r="main"){if(this.roots.get(r))throw new A("model-document-createroot-name-exists",this,{name:r});const s=new gh(this,t,r);return this.roots.add(s),s}destroy(){this.selection.destroy(),this.stopListening()}getRoot(t="main"){return this.roots.get(t)}getRootNames(t=!1){return this.getRoots(t).map(r=>r.rootName)}getRoots(t=!1){return this.roots.filter(r=>r!=this.graveyard&&(t||r.isAttached())&&r._isLoaded)}registerPostFixer(t){this._postFixers.add(t)}toJSON(){const t=QE(this);return t.selection="[engine.model.DocumentSelection]",t.model="[engine.model.Model]",t}_handleChangeBlock(t){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(t),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",t.batch):this.fire("change",t.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const t=this.getRoots();return t.length?t[0]:this.graveyard}_getDefaultRange(){const t=this._getDefaultRoot(),r=this.model,s=r.schema,i=r.createPositionFromPath(t,[0]);return s.getNearestSelectionRange(i)||r.createRange(i)}_validateSelectionRange(t){return e0(t.start)&&e0(t.end)}_callPostFixers(t){let r=!1;do for(const s of this._postFixers)if(this.selection.refresh(),r=s(t),r)break;while(r)}}function e0(n){const e=n.textNode;if(e){const t=e.data,r=n.offset-e.startOffset;return!aS(t,r)&&!lS(t,r)}return!0}class J5 extends nt(){constructor(){super(...arguments);f(this,"_markers",new Map)}[Symbol.iterator](){return this._markers.values()}has(t){const r=t instanceof da?t.name:t;return this._markers.has(r)}get(t){return this._markers.get(t)||null}_set(t,r,s=!1,i=!1){const o=t instanceof da?t.name:t;if(o.includes(","))throw new A("markercollection-incorrect-marker-name",this);const a=this._markers.get(o);if(a){const u=a.getData(),d=a.getRange();let h=!1;return d.isEqual(r)||(a._attachLiveRange(Bo.fromRange(r)),h=!0),s!=a.managedUsingOperations&&(a._managedUsingOperations=s,h=!0),typeof i=="boolean"&&i!=a.affectsData&&(a._affectsData=i,h=!0),h&&this.fire(`update:${o}`,a,d,r,u),a}const l=Bo.fromRange(r),c=new da(o,l,s,i);return this._markers.set(o,c),this.fire(`update:${o}`,c,null,r,{...c.getData(),range:null}),c}_remove(t){const r=t instanceof da?t.name:t,s=this._markers.get(r);return!!s&&(this._markers.delete(r),this.fire(`update:${r}`,s,s.getRange(),null,s.getData()),this._destroyMarker(s),!0)}_refresh(t){const r=t instanceof da?t.name:t,s=this._markers.get(r);if(!s)throw new A("markercollection-refresh-marker-not-exists",this);const i=s.getRange();this.fire(`update:${r}`,s,i,i,s.getData())}*getMarkersAtPosition(t){for(const r of this)r.getRange().containsPosition(t)&&(yield r)}*getMarkersIntersectingRange(t){for(const r of this)r.getRange().getIntersection(t)!==null&&(yield r)}destroy(){for(const t of this._markers.values())this._destroyMarker(t);this._markers=null,this.stopListening()}*getMarkersGroup(t){for(const r of this._markers.values())r.name.startsWith(t+":")&&(yield r)}_destroyMarker(t){t.stopListening(),t._detachLiveRange()}}class da extends nt(Hi){constructor(t,r,s,i){super();f(this,"name");f(this,"_managedUsingOperations");f(this,"_affectsData");f(this,"_liveRange");this.name=t,this._liveRange=this._attachLiveRange(r),this._managedUsingOperations=s,this._affectsData=i}get managedUsingOperations(){if(!this._liveRange)throw new A("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new A("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new A("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new A("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new A("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}da.prototype.is=function(n){return n==="marker"||n==="model:marker"};class G5 extends lr{constructor(t,r){super(null);f(this,"sourcePosition");f(this,"howMany");this.sourcePosition=t.clone(),this.howMany=r}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t}_validate(){if(this.sourcePosition.root.document)throw new A("detach-operation-on-document-node",this)}_execute(){MS(D._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class vs extends Hi{constructor(t){super();f(this,"markers",new Map);f(this,"_children",new xc);t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(t){return this._children.getNode(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let r=this;for(const s of t)r=r.getChild(r.offsetToIndex(s));return r}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const r of this._children)t.push(r.toJSON());return t}static fromJSON(t){const r=[];for(const s of t)s.name?r.push(it.fromJSON(s)):r.push(ot.fromJSON(s));return new vs(r)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,r){const s=function(i){return typeof i=="string"?[new ot(i)]:(ar(i)||(i=[i]),Array.from(i).map(o=>typeof o=="string"?new ot(o):o instanceof Dr?new ot(o.data,o.getAttributes()):o))}(r);for(const i of s)i.parent!==null&&i._remove(),i.parent=this;this._children._insertNodes(t,s)}_removeChildren(t,r=1){const s=this._children._removeNodes(t,r);for(const i of s)i.parent=null;return s}}vs.prototype.is=function(n){return n==="documentFragment"||n==="model:documentFragment"};class Y5{constructor(e,t){f(this,"model");f(this,"batch");this.model=e,this.batch=t}createText(e,t){return new ot(e,t)}createElement(e,t){return new it(e,t)}createDocumentFragment(){return new vs}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,r=0){if(this._assertWriterUsedCorrectly(),e instanceof ot&&e.data=="")return;const s=$._createAt(t,r);if(e.parent){if(r0(e.root,s.root))return void this.move(D._createOn(e),s);if(e.root.document)throw new A("model-writer-insert-forbidden-move",this);this.remove(e)}const i=s.root.document?s.root.document.version:null,o=new tn(s,e,i);if(e instanceof ot&&(o.shouldReceiveAttributes=!0),this.batch.addOperation(o),this.model.applyOperation(o),e instanceof vs)for(const[a,l]of e.markers){const c=$._createAt(l.root,0),u={range:new D(l.start._getCombined(c,s),l.end._getCombined(c,s)),usingOperation:!0,affectsData:!0};this.model.markers.has(a)?this.updateMarker(a,u):this.addMarker(a,u)}}insertText(e,t,r,s){t instanceof vs||t instanceof it||t instanceof $?this.insert(this.createText(e),t,r):this.insert(this.createText(e,t),r,s)}insertElement(e,t,r,s){t instanceof vs||t instanceof it||t instanceof $?this.insert(this.createElement(e),t,r):this.insert(this.createElement(e,t),r,s)}append(e,t){this.insert(e,t,"end")}appendText(e,t,r){t instanceof vs||t instanceof it?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),r,"end")}appendElement(e,t,r){t instanceof vs||t instanceof it?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),r,"end")}setAttribute(e,t,r){if(this._assertWriterUsedCorrectly(),r instanceof D){const s=r.getMinimalFlatRanges();for(const i of s)t0(this,e,t,i)}else n0(this,e,t,r)}setAttributes(e,t){for(const[r,s]of $o(e))this.setAttribute(r,s,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof D){const r=t.getMinimalFlatRanges();for(const s of r)t0(this,e,null,s)}else n0(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=r=>{for(const s of r.getAttributeKeys())this.removeAttribute(s,r)};if(e instanceof D)for(const r of e.getItems())t(r);else t(e)}move(e,t,r){if(this._assertWriterUsedCorrectly(),!(e instanceof D))throw new A("writer-move-invalid-range",this);if(!e.isFlat)throw new A("writer-move-range-not-flat",this);const s=$._createAt(t,r);if(s.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!r0(e.root,s.root))throw new A("writer-move-different-document",this);const i=e.root.document?e.root.document.version:null,o=new st(e.start,e.end.offset-e.start.offset,s,i);this.batch.addOperation(o),this.model.applyOperation(o)}remove(e){this._assertWriterUsedCorrectly();const t=(e instanceof D?e:D._createOn(e)).getMinimalFlatRanges().reverse();for(const r of t)this._addOperationForAffectedMarkers("move",r),X5(r.start,r.end.offset-r.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const t=e.nodeBefore,r=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof it))throw new A("writer-merge-no-element-before",this);if(!(r instanceof it))throw new A("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,r){return this.model.createPositionFromPath(e,t,r)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){const t=e.nodeBefore,r=e.nodeAfter;this.move(D._createIn(r),$._createAt(t,"end")),this.remove(r)}_merge(e){const t=$._createAt(e.nodeBefore,"end"),r=$._createAt(e.nodeAfter,0),s=e.root.document.graveyard,i=new $(s,[0]),o=e.root.document.version,a=new dn(r,e.nodeAfter.maxOffset,t,i,o);this.batch.addOperation(a),this.model.applyOperation(a)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof it))throw new A("writer-rename-not-element-instance",this);const r=e.root.document?e.root.document.version:null,s=new Ln($._createBefore(e),e.name,t,r);this.batch.addOperation(s),this.model.applyOperation(s)}split(e,t){this._assertWriterUsedCorrectly();let r,s,i=e.parent;if(!i.parent)throw new A("writer-split-element-no-parent",this);if(t||(t=i.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new A("writer-split-invalid-limit-element",this);do{const o=i.root.document?i.root.document.version:null,a=i.maxOffset-e.offset,l=dt.getInsertionPosition(e),c=new dt(e,a,l,null,o);this.batch.addOperation(c),this.model.applyOperation(c),r||s||(r=i,s=e.parent.nextSibling),i=(e=this.createPositionAfter(e.parent)).parent}while(i!==t);return{position:e,range:new D($._createAt(r,"end"),$._createAt(s,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new A("writer-wrap-range-not-flat",this);const r=t instanceof it?t:new it(t);if(r.childCount>0)throw new A("writer-wrap-element-not-empty",this);if(r.parent!==null)throw new A("writer-wrap-element-attached",this);this.insert(r,e.start);const s=new D(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(s,$._createAt(r,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new A("writer-unwrap-element-no-parent",this);this.move(D._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new A("writer-addmarker-no-usingoperation",this);const r=t.usingOperation,s=t.range,i=t.affectsData!==void 0&&t.affectsData;if(this.model.markers.has(e))throw new A("writer-addmarker-marker-exists",this);if(!s)throw new A("writer-addmarker-no-range",this);return r?(Jl(this,e,null,s,i),this.model.markers.get(e)):this.model.markers._set(e,s,r,i)}updateMarker(e,t){this._assertWriterUsedCorrectly();const r=typeof e=="string"?e:e.name,s=this.model.markers.get(r);if(!s)throw new A("writer-updatemarker-marker-not-exists",this);if(!t)return Pt("writer-updatemarker-reconvert-using-editingcontroller",{markerName:r}),void this.model.markers._refresh(s);const i=typeof t.usingOperation=="boolean",o=typeof t.affectsData=="boolean",a=o?t.affectsData:s.affectsData;if(!i&&!t.range&&!o)throw new A("writer-updatemarker-wrong-options",this);const l=s.getRange(),c=t.range?t.range:l;i&&t.usingOperation!==s.managedUsingOperations?t.usingOperation?Jl(this,r,null,c,a):(Jl(this,r,l,null,a),this.model.markers._set(r,c,void 0,a)):s.managedUsingOperations?Jl(this,r,l,c,a):this.model.markers._set(r,c,void 0,a)}removeMarker(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new A("writer-removemarker-no-marker",this);const r=this.model.markers.get(t);if(!r.managedUsingOperations)return void this.model.markers._remove(t);Jl(this,t,r.getRange(),null,r.affectsData)}addRoot(e,t="$root"){this._assertWriterUsedCorrectly();const r=this.model.document.getRoot(e);if(r&&r.isAttached())throw new A("writer-addroot-root-exists",this);const s=this.model.document,i=new os(e,t,!0,s,s.version);return this.batch.addOperation(i),this.model.applyOperation(i),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?this.model.document.getRoot(e):e;if(!t||!t.isAttached())throw new A("writer-detachroot-no-root",this);for(const i of this.model.markers)i.getRange().root===t&&this.removeMarker(i);for(const i of t.getAttributeKeys())this.removeAttribute(i,t);this.remove(this.createRangeIn(t));const r=this.model.document,s=new os(t.rootName,t.name,!1,r,r.version);this.batch.addOperation(s),this.model.applyOperation(s)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(const[r,s]of $o(e))this._setSelectionAttribute(r,s)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const r=this.model.document.selection;if(r.isCollapsed&&r.anchor.parent.isEmpty){const s=Ur._getStoreAttributeKey(e);this.setAttribute(s,t,r.anchor.parent)}r._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const r=Ur._getStoreAttributeKey(e);this.removeAttribute(r,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new A("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(const r of this.model.markers){if(!r.managedUsingOperations)continue;const s=r.getRange();let i=!1;if(e==="move"){const o=t;i=o.containsPosition(s.start)||o.start.isEqual(s.start)||o.containsPosition(s.end)||o.end.isEqual(s.end)}else{const o=t,a=o.nodeBefore,l=o.nodeAfter,c=s.start.parent==a&&s.start.isAtEnd,u=s.end.parent==l&&s.end.offset==0,d=s.end.nodeAfter==l,h=s.start.nodeAfter==l;i=c||u||d||h}i&&this.updateMarker(r.name,{range:s})}}}function t0(n,e,t,r){const s=n.model,i=s.document;let o,a,l,c=r.start;for(const d of r.getWalker({shallow:!0}))l=d.item.getAttribute(e),o&&a!=l&&(a!=t&&u(),c=o),o=d.nextPosition,a=l;function u(){const d=new D(c,o),h=d.root.document?i.version:null,p=new jt(d,e,a,t,h);n.batch.addOperation(p),s.applyOperation(p)}o instanceof $&&o!=c&&a!=t&&u()}function n0(n,e,t,r){const s=n.model,i=s.document,o=r.getAttribute(e);let a,l;if(o!=t){if(r.root===r){const c=r.document?i.version:null;l=new Ns(r,e,o,t,c)}else{a=new D($._createBefore(r),n.createPositionAfter(r));const c=a.root.document?i.version:null;l=new jt(a,e,o,t,c)}n.batch.addOperation(l),s.applyOperation(l)}}function Jl(n,e,t,r,s){const i=n.model,o=i.document,a=new Yn(e,t,r,i.markers,!!s,o.version);n.batch.addOperation(a),i.applyOperation(a)}function X5(n,e,t,r){let s;if(n.root.document){const i=r.document,o=new $(i.graveyard,[0]);s=new st(n,e,o,i.version)}else s=new G5(n,e);t.addOperation(s),r.applyOperation(s)}function r0(n,e){return n===e||n instanceof gh&&e instanceof gh}function eD(n,e,t={}){if(e.isCollapsed)return;const r=e.getFirstRange();if(r.root.rootName=="$graveyard")return;const s=n.schema;n.change(i=>{if(!t.doNotResetEntireContent&&function(c,u){const d=c.getLimitElement(u);if(!u.containsEntireContent(d))return!1;const h=u.getFirstRange();return h.start.parent==h.end.parent?!1:c.checkChild(d,"paragraph")}(s,e))return void function(c,u){const d=c.model.schema.getLimitElement(u);c.remove(c.createRangeIn(d)),s0(c,c.createPositionAt(d,0),u)}(i,e);const o={};if(!t.doNotAutoparagraph){const c=e.getSelectedElement();c&&Object.assign(o,s.getAttributesWithProperty(c,"copyOnReplace",!0))}const[a,l]=function(c){const u=c.root.document.model,d=c.start;let h=c.end;if(u.hasContent(c,{ignoreMarkers:!0})){const p=function(_){const v=_.parent,w=v.root.document.model.schema,y=v.getAncestors({parentFirst:!0,includeSelf:!0});for(const g of y){if(w.isLimit(g))return null;if(w.isBlock(g))return g}}(h);if(p&&h.isTouching(u.createPositionAt(p,0))){const _=u.createSelection(c);u.modifySelection(_,{direction:"backward"});const v=_.getLastPosition(),w=u.createRange(v,h);u.hasContent(w,{ignoreMarkers:!0})||(h=v)}}return[Mn.fromPosition(d,"toPrevious"),Mn.fromPosition(h,"toNext")]}(r);a.isTouching(l)||i.remove(i.createRange(a,l)),t.leaveUnmerged||(function(c,u,d){const h=c.model;if(!Yy(c.model.schema,u,d))return;const[p,_]=function(v,w){const y=v.getAncestors(),g=w.getAncestors();let b=0;for(;y[b]&&y[b]==g[b];)b++;return[y[b],g[b]]}(u,d);!p||!_||(!h.hasContent(p,{ignoreMarkers:!0})&&h.hasContent(_,{ignoreMarkers:!0})?FS(c,u,d,p.parent):DS(c,u,d,p.parent))}(i,a,l),s.removeDisallowedAttributes(a.parent.getChildren(),i)),LS(i,e,a),!t.doNotAutoparagraph&&function(c,u){const d=c.checkChild(u,"$text"),h=c.checkChild(u,"paragraph");return!d&&h}(s,a)&&s0(i,a,e,o),a.detach(),l.detach()})}function DS(n,e,t,r){const s=e.parent,i=t.parent;if(s!=r&&i!=r){for(e=n.createPositionAfter(s),(t=n.createPositionBefore(i)).isEqual(e)||n.insert(i,e),n.merge(e);t.parent.isEmpty;){const o=t.parent;t=n.createPositionBefore(o),n.remove(o)}Yy(n.model.schema,e,t)&&DS(n,e,t,r)}}function FS(n,e,t,r){const s=e.parent,i=t.parent;if(s!=r&&i!=r){for(e=n.createPositionAfter(s),(t=n.createPositionBefore(i)).isEqual(e)||n.insert(s,t);e.parent.isEmpty;){const o=e.parent;e=n.createPositionBefore(o),n.remove(o)}t=n.createPositionBefore(i),function(o,a){const l=a.nodeBefore,c=a.nodeAfter;l.name!=c.name&&o.rename(l,c.name),o.clearAttributes(l),o.setAttributes(Object.fromEntries(c.getAttributes()),l),o.merge(a)}(n,t),Yy(n.model.schema,e,t)&&FS(n,e,t,r)}}function Yy(n,e,t){const r=e.parent,s=t.parent;return r!=s&&!n.isLimit(r)&&!n.isLimit(s)&&function(i,o,a){const l=new D(i,o);for(const c of l.getWalker())if(a.isLimit(c.item))return!1;return!0}(e,t,n)}function s0(n,e,t,r={}){const s=n.createElement("paragraph");n.model.schema.setAllowedAttributes(s,r,n),n.insert(s,e),LS(n,t,n.createPositionAt(s,0))}function LS(n,e,t){e instanceof Ur?n.setSelection(t):e.setTo(t)}function i0(n,e){const t=[];Array.from(n.getItems({direction:"backward"})).map(r=>e.createRangeOn(r)).filter(r=>(r.start.isAfter(n.start)||r.start.isEqual(n.start))&&(r.end.isBefore(n.end)||r.end.isEqual(n.end))).forEach(r=>{t.push(r.start.parent),e.remove(r)}),t.forEach(r=>{let s=r;for(;s.parent&&s.isEmpty;){const i=e.createRangeOn(s);s=s.parent,e.remove(i)}})}class tD{constructor(e,t,r){f(this,"model");f(this,"writer");f(this,"position");f(this,"canMergeWith");f(this,"schema");f(this,"_documentFragment");f(this,"_documentFragmentPosition");f(this,"_firstNode",null);f(this,"_lastNode",null);f(this,"_lastAutoParagraph",null);f(this,"_filterAttributesOf",[]);f(this,"_affectedStart",null);f(this,"_affectedEnd",null);f(this,"_nodeToSelect",null);this.model=e,this.writer=t,this.position=r,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(const t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),r=this.writer.createPositionAfter(e);if(r.isAfter(t)){if(this._lastNode=e,this.position.parent!=e||!this.position.isAtEnd)throw new A("insertcontent-invalid-insertion-position",this);this.position=r,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?D._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new D(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){this._checkAndSplitToAllowedPosition(e)?(this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e):this.schema.isObject(e)||this._handleDisallowedNode(e)}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=Mn.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleDisallowedNode(e){e.is("element")&&this.handleNodes(e.getChildren())}_appendToFragment(e){if(!this.schema.checkChild(this.position,e))throw new A("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=Mn.fromPosition(e,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(e)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Mn.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof it)||!this._canMergeLeft(e))return;const t=Mn._createBefore(e);t.stickiness="toNext";const r=Mn.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=Mn._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Mn._createAt(t.nodeBefore,"end","toNext")),this.position=r.toPosition(),r.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof it)||!this._canMergeRight(e))return;const t=Mn._createAfter(e);if(t.stickiness="toNext",!this.position.isEqual(t))throw new A("insertcontent-invalid-insertion-position",this);this.position=$._createAt(t.nodeBefore,"end");const r=Mn.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=Mn._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Mn._createAt(t.nodeBefore,0,"toPrevious")),this.position=r.toPosition(),r.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){const t=e.previousSibling;return t instanceof it&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){const t=e.nextSibling;return t instanceof it&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_insertAutoParagraph(){this._insertPartialFragment();const e=this.writer.createElement("paragraph");this.writer.insert(e,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=e,this.position=this.writer.createPositionAt(e,0)}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const r=this.position.parent;this.position=this.writer.createPositionBefore(r),r.isEmpty&&r.parent===t&&this.writer.remove(r)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const r=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=r,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,e)||this._insertAutoParagraph(),!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)||this.schema.checkChild(e,"paragraph")&&this.schema.checkChild("paragraph",t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}function nD(n,e,t,r={}){if(!n.schema.isObject(e))throw new A("insertobject-element-not-an-object",n,{object:e});const s=t||n.document.selection;let i=s;r.findOptimalPosition&&n.schema.isBlock(e)&&(i=n.createSelection(n.schema.findOptimalInsertionRange(s,r.findOptimalPosition)));const o=Yh(s.getSelectedBlocks()),a={};return o&&Object.assign(a,n.schema.getAttributesWithProperty(o,"copyOnReplace",!0)),n.change(l=>{i.isCollapsed||n.deleteContent(i,{doNotAutoparagraph:!0});let c=e;const u=i.anchor.parent;!n.schema.checkChild(u,e)&&n.schema.checkChild(u,"paragraph")&&n.schema.checkChild("paragraph",e)&&(c=l.createElement("paragraph"),l.insert(e,c)),n.schema.setAllowedAttributes(c,a,l);const d=n.insertContent(c,i);return d.isCollapsed||r.setSelection&&function(h,p,_,v){const w=h.model;if(_=="on")return void h.setSelection(p,"on");if(_!="after")throw new A("insertobject-invalid-place-parameter-value",w);let y=p.nextSibling;if(w.schema.isInline(p))return void h.setSelection(p,"after");!(y&&w.schema.checkChild(y,"$text"))&&w.schema.checkChild(p.parent,"paragraph")&&(y=h.createElement("paragraph"),w.schema.setAllowedAttributes(y,v,h),w.insertContent(y,h.createPositionAfter(p))),y&&h.setSelection(y,0)}(l,e,r.setSelection,a),d})}function rD(n,e){const{isForward:t,walker:r,unit:s,schema:i,treatEmojiAsSingleUnit:o}=n,{type:a,item:l,nextPosition:c}=e;if(a=="text")return n.unit==="word"?function(u,d){let h=u.position.textNode;for(h||(h=d?u.position.nodeAfter:u.position.nodeBefore);h&&h.is("$text");){const p=u.position.offset-h.startOffset;if(oD(h,p,d))h=d?u.position.nodeAfter:u.position.nodeBefore;else{if(iD(h.data,p,d))break;u.next()}}return u.position}(r,t):function(u,d,h){const p=u.position.textNode;if(p){const _=p.data;let v=u.position.offset-p.startOffset;for(;aS(_,v)||d=="character"&&lS(_,v)||h&&Pj(_,v);)u.next(),v=u.position.offset-p.startOffset}return u.position}(r,s,o);if(a==(t?"elementStart":"elementEnd")){if(i.isSelectable(l))return $._createAt(l,t?"after":"before");if(i.checkChild(c,"$text"))return c}else{if(i.isLimit(l))return void r.skip(()=>!0);if(i.checkChild(c,"$text"))return c}}function sD(n,e){const t=n.root,r=$._createAt(t,e?"end":0);return e?new D(n,r):new D(r,n)}function iD(n,e,t){const r=e+(t?0:-1);return' ,.?!:;"-()'.includes(n.charAt(r))}function oD(n,e,t){return e===(t?n.offsetSize:0)}let aD=class extends sn(){constructor(){super();f(this,"markers");f(this,"document");f(this,"schema");f(this,"_pendingChanges");f(this,"_currentWriter");this.markers=new J5,this.document=new Z5(this),this.schema=new C5,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,t)=>{t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),k5(this),this.document.registerPostFixer(AS),this.on("insertContent",(e,[t,r])=>{e.return=function(s,i,o){return s.change(a=>{const l=o||s.document.selection;l.isCollapsed||s.deleteContent(l,{doNotAutoparagraph:!0});const c=new tD(s,a,l.anchor),u=[];let d;if(i.is("documentFragment")){if(i.markers.size){const _=[];for(const[v,w]of i.markers){const{start:y,end:g}=w,b=y.isEqual(g);_.push({position:y,name:v,isCollapsed:b},{position:g,name:v,isCollapsed:b})}_.sort(({position:v},{position:w})=>v.isBefore(w)?1:-1);for(const{position:v,name:w,isCollapsed:y}of _){let g=null,b=null;const x=v.parent===i&&v.isAtStart,C=v.parent===i&&v.isAtEnd;x||C?y&&(b=x?"start":"end"):(g=a.createElement("$marker"),a.insert(g,v)),u.push({name:w,element:g,collapsed:b})}}d=i.getChildren()}else d=[i];c.handleNodes(d);let h=c.getSelectionRange();if(i.is("documentFragment")&&u.length){const _=h?Bo.fromRange(h):null,v={};for(let w=u.length-1;w>=0;w--){const{name:y,element:g,collapsed:b}=u[w],x=!v[y];if(x&&(v[y]=[]),g){const C=a.createPositionAt(g,"before");v[y].push(C),a.remove(g)}else{const C=c.getAffectedRange();if(!C){b&&v[y].push(c.position);continue}b?v[y].push(C[b]):v[y].push(x?C.start:C.end)}}for(const[w,[y,g]]of Object.entries(v))y&&g&&y.root===g.root&&y.root.document&&!a.model.markers.has(w)&&a.addMarker(w,{usingOperation:!0,affectsData:!0,range:new D(y,g)});_&&(h=_.toRange(),_.detach())}h&&(l instanceof Ur?a.setSelection(h):l.setTo(h));const p=c.getAffectedRange()||s.createRange(l.anchor);return c.destroy(),p})}(this,t,r)}),this.on("insertObject",(e,[t,r,s])=>{e.return=nD(this,t,r,s)}),this.on("canEditAt",e=>{const t=!this.document.isReadOnly;e.return=t,t||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new ia,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(t){A.rethrowUnexpectedError(t,this)}}enqueueChange(e,t){try{e?typeof e=="function"?(t=e,e=new ia):e instanceof ia||(e=new ia(e)):e=new ia,this._pendingChanges.push({batch:e,callback:t}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(r){A.rethrowUnexpectedError(r,this)}}applyOperation(e){e._execute()}insertContent(e,t,r,...s){const i=om(t,r);return this.fire("insertContent",[e,i,r,...s])}insertObject(e,t,r,s,...i){const o=om(t,r);return this.fire("insertObject",[e,o,s,s,...i])}deleteContent(e,t){eD(this,e,t)}modifySelection(e,t){(function(r,s,i={}){const o=r.schema,a=i.direction!="backward",l=i.unit?i.unit:"character",c=!!i.treatEmojiAsSingleUnit,u=s.focus,d=new mi({boundaries:sD(u,a),singleCharacters:!0,direction:a?"forward":"backward"}),h={walker:d,schema:o,isForward:a,unit:l,treatEmojiAsSingleUnit:c};let p;for(;p=d.next();){if(p.done)return;const _=rD(h,p.value);if(_)return void(s instanceof Ur?r.change(v=>{v.setSelectionFocus(_)}):s.setFocus(_))}})(this,e,t)}getSelectedContent(e){return function(t,r){return t.change(s=>{const i=s.createDocumentFragment(),o=r.getFirstRange();if(!o||o.isCollapsed)return i;const a=o.start.root,l=o.start.getCommonPath(o.end),c=a.getNodeByPath(l);let u;u=o.start.parent==o.end.parent?o:s.createRange(s.createPositionAt(c,o.start.path[l.length]),s.createPositionAt(c,o.end.path[l.length]+1));const d=u.end.offset-u.start.offset;for(const h of u.getItems({shallow:!0}))h.is("$textProxy")?s.appendText(h.data,h.getAttributes(),i):s.append(s.cloneElement(h,!0),i);if(u!=o){const h=o._getTransformedByMove(u.start,s.createPositionAt(i,0),d)[0],p=s.createRange(s.createPositionAt(i,0),h.start);i0(s.createRange(h.end,s.createPositionAt(i,"end")),s),i0(p,s)}return i})}(this,e)}hasContent(e,t={}){const r=e instanceof D?e:D._createIn(e);if(r.isCollapsed)return!1;const{ignoreWhitespaces:s=!1,ignoreMarkers:i=!1}=t;if(!i){for(const o of this.markers.getMarkersIntersectingRange(r))if(o.affectsData)return!0}for(const o of r.getItems())if(this.schema.isContent(o)&&(!o.is("$textProxy")||!s||o.data.search(/\S/)!==-1))return!0;return!1}canEditAt(e){const t=om(e);return this.fire("canEditAt",[t])}createPositionFromPath(e,t,r){return new $(e,t,r)}createPositionAt(e,t){return $._createAt(e,t)}createPositionAfter(e){return $._createAfter(e)}createPositionBefore(e){return $._createBefore(e)}createRange(e,t){return new D(e,t)}createRangeIn(e){return D._createIn(e)}createRangeOn(e){return D._createOn(e)}createSelection(...e){return new Xn(...e)}createBatch(e){return new ia(e)}createOperationFromJSON(e){return U5.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const t=this._pendingChanges[0].batch;this._currentWriter=new Y5(this,t);const r=this._pendingChanges[0].callback(this._currentWriter);e.push(r),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function om(n,e){if(n)return n instanceof Xn||n instanceof Ur?n:n instanceof Qo?e||e===0?new Xn(n,e):n.is("rootElement")?new Xn(n,"in"):new Xn(n,"on"):new Xn(n)}class VS{constructor(e){f(this,"crashes",[]);f(this,"state","initializing");f(this,"_crashNumberLimit");f(this,"_now",Date.now);f(this,"_minimumNonErrorTimePeriod");f(this,"_boundErrorHandler");f(this,"_listeners");if(this.crashes=[],this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const r="error"in t?t.error:t.reason;r instanceof Error&&this._handleError(r,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]=this._listeners[e].filter(r=>r!==t)}_fire(e,...t){const r=this._listeners[e]||[];for(const s of r)s.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});const r=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:r}),r?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit?!0:(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}function lg(n,e=new Set){const t=[n],r=new Set;let s=0;for(;t.length>s;){const i=t[s++];if(!r.has(i)&&lD(i)&&!e.has(i))if(r.add(i),Symbol.iterator in i)try{for(const o of i)t.push(o)}catch{}else for(const o in i)o!=="defaultValue"&&t.push(i[o])}return r}function lD(n){const e=Object.prototype.toString.call(n),t=typeof n;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||n==null||n._watchdogExcluded||n instanceof EventTarget||n instanceof Event)}function $S(n,e,t=new Set){if(n===e&&typeof(r=n)=="object"&&r!==null)return!0;var r;const s=lg(n,t),i=lg(e,t);for(const o of s)if(i.has(o))return!0;return!1}class BS extends VS{constructor(t,r={}){super(r);f(this,"_editor",null);f(this,"_lifecyclePromise",null);f(this,"_throttledSave");f(this,"_data");f(this,"_lastDocumentVersion");f(this,"_elementOrData");f(this,"_initUsingData",!0);f(this,"_editables",{});f(this,"_config");f(this,"_excludedProps");this._throttledSave=ZE(this._save.bind(this),typeof r.saveInterval=="number"?r.saveInterval:5e3),t&&(this._creator=(s,i)=>t.create(s,i)),this._destructor=s=>s.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(t=>{console.error("An error happened during the editor destroying.",t)}).then(()=>{const t={},r=[],s=this._config.rootsAttributes||{},i={};for(const[a,l]of Object.entries(this._data.roots))l.isLoaded?(t[a]="",i[a]=s[a]||{}):r.push(a);const o={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:r,rootsAttributes:i,_watchdogInitialData:this._data};return delete o.initialData,o.extraPlugins.push(cD),this._initUsingData?this.create(t,o,o.context):Vo(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(t=this._elementOrData,r=this._config,s){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=t,this._initUsingData=typeof t=="string"||Object.keys(t).length>0&&typeof Object.values(t)[0]=="string",this._config=this._cloneEditorConfiguration(r)||{},this._config.context=s,this._creator(t,this._config))).then(i=>{this._editor=i,i.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=i.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const t=this._editor;return this._editor=null,t.model.document.off("change:data",this._throttledSave),this._destructor(t)})}_save(){const t=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=t}catch(r){console.error(r,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(t){this._excludedProps=t}_getData(){const t=this._editor,r=t.model.document.roots.filter(l=>l.isAttached()&&l.rootName!="$graveyard"),{plugins:s}=t,i=s.has("CommentsRepository")&&s.get("CommentsRepository"),o=s.has("TrackChanges")&&s.get("TrackChanges"),a={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};r.forEach(l=>{a.roots[l.rootName]={content:JSON.stringify(Array.from(l.getChildren())),attributes:JSON.stringify(Array.from(l.getAttributes())),isLoaded:l._isLoaded}});for(const l of t.model.markers)l._affectsData&&(a.markers[l.name]={rangeJSON:l.getRange().toJSON(),usingOperation:l._managedUsingOperations,affectsData:l._affectsData});return i&&(a.commentThreads=JSON.stringify(i.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(a.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),a}_getEditables(){const t={};for(const r of this.editor.model.document.getRootNames()){const s=this.editor.ui.getEditableElement(r);s&&(t[r]=s)}return t}_isErrorComingFromThisItem(t){return $S(this._editor,t.context,this._excludedProps)}_cloneEditorConfiguration(t){return Ly(t,(r,s)=>Vo(r)||s==="context"?r:void 0)}}class cD{constructor(e){f(this,"editor");f(this,"_data");this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,t){if("name"in t){const r=e.createElement(t.name,t.attributes);if(t.children)for(const s of t.children)r._appendChild(this._createNode(e,s));return r}return e.createText(t.data,t.attributes)}_restoreEditorData(e){const t=this.editor;Object.entries(this._data.roots).forEach(([r,{content:s,attributes:i}])=>{const o=JSON.parse(s),a=JSON.parse(i),l=t.model.document.getRoot(r);for(const[c,u]of a)e.setAttribute(c,u,l);for(const c of o){const u=this._createNode(e,c);e.insert(u,l,"end")}}),Object.entries(this._data.markers).forEach(([r,s])=>{const{document:i}=t.model,{rangeJSON:{start:o,end:a},...l}=s,c=i.getRoot(o.root),u=e.createPositionFromPath(c,o.path,o.stickiness),d=e.createPositionFromPath(c,a.path,a.stickiness),h=e.createRange(u,d);e.addMarker(r,{range:h,...l})})}_restoreCollaborationData(){const e=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);e.forEach(r=>{const s=this.editor.config.get("collaboration.channelId"),i=this.editor.plugins.get("CommentsRepository");i.hasCommentThread(r.threadId)&&i.getCommentThread(r.threadId).remove(),i.addCommentThread({channelId:s,...r})}),t.forEach(r=>{const s=this.editor.plugins.get("TrackChangesEditing");s.hasSuggestion(r.id)?s.getSuggestion(r.id).attributes=r.attributes:s.addSuggestionData(r)})}}const Sc=Symbol("MainQueueId");class uD extends VS{constructor(t,r={}){super(r);f(this,"_watchdogs",new Map);f(this,"_watchdogConfig");f(this,"_context",null);f(this,"_contextProps",new Set);f(this,"_actionQueues",new dD);f(this,"_contextConfig");f(this,"_item");this._watchdogConfig=r,this._creator=s=>t.create(s),this._destructor=s=>s.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}get context(){return this._context}create(t={}){return this._actionQueues.enqueue(Sc,()=>(this._contextConfig=t,this._create()))}getItem(t){return this._getWatchdog(t)._item}getItemState(t){return this._getWatchdog(t).state}add(t){const r=o0(t);return Promise.all(r.map(s=>this._actionQueues.enqueue(s.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let i;if(this._watchdogs.has(s.id))throw new Error(`Item with the given id is already added: '${s.id}'.`);if(s.type==="editor")return i=new BS(null,this._watchdogConfig),i.setCreator(s.creator),i._setExcludedProperties(this._contextProps),s.destructor&&i.setDestructor(s.destructor),this._watchdogs.set(s.id,i),i.on("error",(o,{error:a,causesRestart:l})=>{this._fire("itemError",{itemId:s.id,error:a}),l&&this._actionQueues.enqueue(s.id,()=>new Promise(c=>{const u=()=>{i.off("restart",u),this._fire("itemRestart",{itemId:s.id}),c()};i.on("restart",u)}))}),i.create(s.sourceElementOrData,s.config,this._context);throw new Error(`Not supported item type: '${s.type}'.`)})))}remove(t){const r=o0(t);return Promise.all(r.map(s=>this._actionQueues.enqueue(s,()=>{const i=this._getWatchdog(s);return this._watchdogs.delete(s),i.destroy()})))}destroy(){return this._actionQueues.enqueue(Sc,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(Sc,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(t=>{console.error("An error happened during destroying the context or items.",t)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(t=>(this._context=t,this._contextProps=lg(this._context),Promise.all(Array.from(this._watchdogs.values()).map(r=>(r._setExcludedProperties(this._contextProps),r.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const t=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(r=>r.destroy())).then(()=>this._destructor(t))})}_getWatchdog(t){const r=this._watchdogs.get(t);if(!r)throw new Error(`Item with the given id was not registered: ${t}.`);return r}_isErrorComingFromThisItem(t){for(const r of this._watchdogs.values())if(r._isErrorComingFromThisItem(t))return!1;return $S(this._context,t.context)}}class dD{constructor(){f(this,"_onEmptyCallbacks",[]);f(this,"_queues",new Map);f(this,"_activeActions",0)}onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,t){const r=e===Sc;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());const s=(r?Promise.all(this._queues.values()):Promise.all([this._queues.get(Sc),this._queues.get(e)])).then(t),i=s.catch(()=>{});return this._queues.set(e,i),s.finally(()=>{this._activeActions--,this._queues.get(e)===i&&this._activeActions===0&&this._onEmptyCallbacks.forEach(o=>o())})}}function o0(n){return Array.isArray(n)?n:[n]}class hD{constructor(){f(this,"_commands");this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const r=this.get(e);if(!r)throw new A("commandcollection-command-not-found",this,{commandName:e});return r.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}class fD extends qi{constructor(t){super();f(this,"editor");this.editor=t}set(t,r,s={}){if(typeof r=="string"){const i=r;r=(o,a)=>{this.editor.execute(i),a()}}super.set(t,r,s)}}const am="contentEditing",a0="common";class mD{constructor(e){f(this,"keystrokeInfos",new Map);f(this,"_editor");this._editor=e;const t=e.config.get("menuBar.isVisible"),r=e.locale.t;this.addKeystrokeInfoCategory({id:am,label:r("Content editing keystrokes"),description:r("These keyboard shortcuts allow for quick access to content editing features.")});const s=[{label:r("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:r("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:r("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:r("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:r("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:r("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];t&&s.push({label:r("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:r("User interface and content navigation keystrokes"),description:r("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:s}]})}addKeystrokeInfoCategory({id:e,label:t,description:r,groups:s}){this.keystrokeInfos.set(e,{id:e,label:t,description:r,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:e,id:a0}),s&&s.forEach(i=>{this.addKeystrokeInfoGroup({categoryId:e,...i})})}addKeystrokeInfoGroup({categoryId:e=am,id:t,label:r,keystrokes:s}){const i=this.keystrokeInfos.get(e);if(!i)throw new A("accessibility-unknown-keystroke-info-category",this._editor,{groupId:t,categoryId:e});i.groups.set(t,{id:t,label:r,keystrokes:s||[]})}addKeystrokeInfos({categoryId:e=am,groupId:t=a0,keystrokes:r}){if(!this.keystrokeInfos.has(e))throw new A("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:e,keystrokes:r});const s=this.keystrokeInfos.get(e);if(!s.groups.has(t))throw new A("accessibility-unknown-keystroke-info-group",this._editor,{groupId:t,categoryId:e,keystrokes:r});s.groups.get(t).keystrokes.push(...r)}}class ha extends sn(){constructor(t={}){super();f(this,"accessibility");f(this,"commands");f(this,"config");f(this,"conversion");f(this,"data");f(this,"editing");f(this,"locale");f(this,"model");f(this,"plugins");f(this,"keystrokes");f(this,"t");f(this,"_context");f(this,"_readOnlyLocks");if("sanitizeHtml"in t)throw new A("editor-config-sanitizehtml-not-supported");const r=this.constructor,{translations:s,...i}=r.defaultConfig||{},{translations:o=s,...a}=t,l=t.language||i.language;this._context=t.context||new mh({language:l,translations:o}),this._context._addEditor(this,!t.context);const c=Array.from(r.builtinPlugins||[]);this.config=new GE(a,i),this.config.define("plugins",c),this.config.define(this._context._getEditorConfig()),this.plugins=new cS(this,c,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new hD,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new aD,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const u=new Ij;this.data=new B5(this.model,u),this.editing=new E5(this.model,u),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new z5([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new fD(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new mD(this)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(t){throw new A("editor-isreadonly-has-no-setter")}enableReadOnlyMode(t){if(typeof t!="string"&&typeof t!="symbol")throw new A("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)||(this._readOnlyLocks.add(t),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(t){if(typeof t!="string"&&typeof t!="symbol")throw new A("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)&&(this._readOnlyLocks.delete(t),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(t){this.data.set(t)}getData(t){return this.data.get(t)}initPlugins(){const t=this.config,r=t.get("plugins"),s=t.get("removePlugins")||[],i=t.get("extraPlugins")||[],o=t.get("substitutePlugins")||[];return this.plugins.init(r.concat(i),s,o)}destroy(){let t=Promise.resolve();return this.state=="initializing"&&(t=new Promise(r=>this.once("ready",r))),t.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(t,...r){try{return this.commands.execute(t,...r)}catch(s){A.rethrowUnexpectedError(s,this)}}focus(){this.editing.view.focus()}static create(...t){throw new Error("This is an abstract method.")}}f(ha,"defaultConfig"),f(ha,"builtinPlugins"),f(ha,"Context",mh),f(ha,"EditorWatchdog",BS),f(ha,"ContextWatchdog",uD);function pD(n){if(!Lo(n.updateSourceElement))throw new A("attachtoform-missing-elementapi-interface",n);const e=n.sourceElement;if(function(t){return!!t&&t.tagName.toLowerCase()==="textarea"}(e)&&e.form){let t;const r=e.form,s=()=>n.updateSourceElement();Lo(r.submit)&&(t=r.submit,r.submit=()=>{s(),t.apply(r)}),r.addEventListener("submit",s),n.on("destroy",()=>{r.removeEventListener("submit",s),t&&(r.submit=t)})}}function cg(n){return class extends n{constructor(){super(...arguments);f(this,"sourceElement")}updateSourceElement(t){if(!this.sourceElement)throw new A("editor-missing-sourceelement",this);const r=this.config.get("updateSourceElementOnDestroy"),s=this.sourceElement instanceof HTMLTextAreaElement;if(!r&&!s)return void ab(this.sourceElement,"");const i=typeof t=="string"?t:this.data.get();ab(this.sourceElement,i)}}}cg.updateSourceElement=cg(Object).prototype.updateSourceElement;const Qn={bold:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',cancel:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',check:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',importExport:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',paragraph:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',plus:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',text:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',alignLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',pilcrow:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',threeVerticalDots:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',dragIndicator:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>'};class Zo extends Sl{constructor(t=[]){super(t,{idProperty:"viewUid"});f(this,"_parentElement");this.on("add",(r,s,i)=>{this._renderViewIntoCollectionParent(s,i)}),this.on("remove",(r,s)=>{s.element&&this._parentElement&&s.element.remove()}),this._parentElement=null}destroy(){this.map(t=>t.destroy())}setParent(t){this._parentElement=t;for(const r of this)this._renderViewIntoCollectionParent(r)}delegate(...t){if(!t.length||!t.every(r=>typeof r=="string"))throw new A("ui-viewcollection-delegate-wrong-events",this);return{to:r=>{for(const s of this)for(const i of t)s.delegate(i).to(r);this.on("add",(s,i)=>{for(const o of t)i.delegate(o).to(r)}),this.on("remove",(s,i)=>{for(const o of t)i.stopDelegating(o,r)})}}}_renderViewIntoCollectionParent(t,r){t.isRendered||t.render(),t.element&&this._parentElement&&this._parentElement.insertBefore(t.element,this._parentElement.children[r])}remove(t){return super.remove(t)}}class Pi extends nt(){constructor(t){super();f(this,"ns");f(this,"tag");f(this,"text");f(this,"attributes");f(this,"children");f(this,"eventListeners");f(this,"_isRendered");f(this,"_revertData");Object.assign(this,c0(l0(t))),this._isRendered=!1,this._revertData=null}render(){const t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t}apply(t){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:t,intoFragment:!1,isApplying:!0,revertData:this._revertData}),t}revert(t){if(!this._revertData)throw new A("ui-template-revert-not-applied",[this,t]);this._revertTemplateFromNode(t,this._revertData)}*getViews(){yield*function*t(r){if(r.children)for(const s of r.children)yh(s)?yield s:Xy(s)&&(yield*t(s))}(this)}static bind(t,r){return{to:(s,i)=>new gD({eventNameOrFunction:s,attribute:s,observable:t,emitter:r,callback:i}),if:(s,i,o)=>new zS({observable:t,emitter:r,attribute:s,valueIfTrue:i,callback:o})}}static extend(t,r){if(t._isRendered)throw new A("template-extend-render",[this,t]);qS(t,c0(l0(r)))}_renderNode(t){let r;if(r=t.node?this.tag&&this.text:this.tag?this.text:!this.text,r)throw new A("ui-template-wrong-syntax",this);return this.text?this._renderText(t):this._renderElement(t)}_renderElement(t){let r=t.node;return r||(r=t.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(t),this._renderElementChildren(t),this._setUpListeners(t),r}_renderText(t){let r=t.node;return r?t.revertData.text=r.textContent:r=t.node=document.createTextNode(""),Cd(this.text)?this._bindToObservable({schema:this.text,updater:yD(r),data:t}):r.textContent=this.text.join(""),r}_renderAttributes(t){if(!this.attributes)return;const r=t.node,s=t.revertData;for(const i in this.attributes){const o=r.getAttribute(i),a=this.attributes[i];s&&(s.attributes[i]=o);const l=h0(a)?a[0].ns:null;if(Cd(a)){const c=h0(a)?a[0].value:a;s&&f0(i)&&c.unshift(o),this._bindToObservable({schema:c,updater:vD(r,i,l),data:t})}else if(i=="style"&&typeof a[0]!="string")this._renderStyleAttribute(a[0],t);else{s&&o&&f0(i)&&a.unshift(o);const c=a.map(u=>u&&u.value||u).reduce((u,d)=>u.concat(d),[]).reduce(WS,"");pl(c)||r.setAttributeNS(l,i,c)}}}_renderStyleAttribute(t,r){const s=r.node;for(const i in t){const o=t[i];Cd(o)?this._bindToObservable({schema:[o],updater:wD(s,i),data:r}):s.style[i]=o}}_renderElementChildren(t){const r=t.node,s=t.intoFragment?document.createDocumentFragment():r,i=t.isApplying;let o=0;for(const a of this.children)if(ev(a)){if(!i){a.setParent(r);for(const l of a)s.appendChild(l.element)}}else if(yh(a))i||(a.isRendered||a.render(),s.appendChild(a.element));else if(Ii(a))s.appendChild(a);else if(i){const l={children:[],bindings:[],attributes:{}};t.revertData.children.push(l),a._renderNode({intoFragment:!1,node:s.childNodes[o++],isApplying:!0,revertData:l})}else s.appendChild(a.render());t.intoFragment&&r.appendChild(s)}_setUpListeners(t){if(this.eventListeners)for(const r in this.eventListeners){const s=this.eventListeners[r].map(i=>{const[o,a]=r.split("@");return i.activateDomEventListener(o,a,t)});t.revertData&&t.revertData.bindings.push(s)}}_bindToObservable({schema:t,updater:r,data:s}){const i=s.revertData;US(t,r,s);const o=t.filter(a=>!pl(a)).filter(a=>a.observable).map(a=>a.activateAttributeListener(t,r,s));i&&i.bindings.push(o)}_revertTemplateFromNode(t,r){for(const i of r.bindings)for(const o of i)o();if(r.text)return void(t.textContent=r.text);const s=t;for(const i in r.attributes){const o=r.attributes[i];o===null?s.removeAttribute(i):s.setAttribute(i,o)}for(let i=0;i<r.children.length;++i)this._revertTemplateFromNode(s.childNodes[i],r.children[i])}}class Eu{constructor(e){f(this,"attribute");f(this,"observable");f(this,"emitter");f(this,"callback");this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){const t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,r){const s=()=>US(e,t,r);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,s),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,s)}}}class gD extends Eu{constructor(t){super(t);f(this,"eventNameOrFunction");this.eventNameOrFunction=t.eventNameOrFunction}activateDomEventListener(t,r,s){const i=(o,a)=>{r&&!a.target.matches(r)||(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(a):this.observable.fire(this.eventNameOrFunction,a))};return this.emitter.listenTo(s.node,t,i),()=>{this.emitter.stopListening(s.node,t,i)}}}class zS extends Eu{constructor(t){super(t);f(this,"valueIfTrue");this.valueIfTrue=t.valueIfTrue}getValue(t){return!pl(super.getValue(t))&&(this.valueIfTrue||!0)}}function Cd(n){return!!n&&(n.value&&(n=n.value),Array.isArray(n)?n.some(Cd):n instanceof Eu)}function US(n,e,{node:t}){const r=function(i,o){return i.map(a=>a instanceof Eu?a.getValue(o):a)}(n,t);let s;s=n.length==1&&n[0]instanceof zS?r[0]:r.reduce(WS,""),pl(s)?e.remove():e.set(s)}function yD(n){return{set(e){n.textContent=e},remove(){n.textContent=""}}}function vD(n,e,t){return{set(r){n.setAttributeNS(t,e,r)},remove(){n.removeAttributeNS(t,e)}}}function wD(n,e){return{set(t){n.style[e]=t},remove(){n.style[e]=null}}}function l0(n){return Ly(n,e=>{if(e&&(e instanceof Eu||Xy(e)||yh(e)||ev(e)))return e})}function c0(n){if(typeof n=="string"?n=function(e){return{text:[e]}}(n):n.text&&function(e){e.text=_n(e.text)}(n),n.on&&(n.eventListeners=function(e){for(const t in e)u0(e,t);return e}(n.on),delete n.on),!n.text){n.attributes&&function(t){for(const r in t)t[r].value&&(t[r].value=_n(t[r].value)),u0(t,r)}(n.attributes);const e=[];if(n.children)if(ev(n.children))e.push(n.children);else for(const t of n.children)Xy(t)||yh(t)||Ii(t)?e.push(t):e.push(new Pi(t));n.children=e}return n}function u0(n,e){n[e]=_n(n[e])}function WS(n,e){return pl(e)?n:pl(n)?e:`${n} ${e}`}function d0(n,e){for(const t in e)n[t]?n[t].push(...e[t]):n[t]=e[t]}function qS(n,e){if(e.attributes&&(n.attributes||(n.attributes={}),d0(n.attributes,e.attributes)),e.eventListeners&&(n.eventListeners||(n.eventListeners={}),d0(n.eventListeners,e.eventListeners)),e.text&&n.text.push(...e.text),e.children&&e.children.length){if(n.children.length!=e.children.length)throw new A("ui-template-extend-children-mismatch",n);let t=0;for(const r of e.children)qS(n.children[t++],r)}}function pl(n){return!n&&n!==0}function yh(n){return n instanceof De}function Xy(n){return n instanceof Pi}function ev(n){return n instanceof Zo}function h0(n){return At(n[0])&&n[0].ns}function f0(n){return n=="class"||n=="style"}class De extends Ui(sn()){constructor(t){super();f(this,"element");f(this,"isRendered");f(this,"locale");f(this,"t");f(this,"template");f(this,"_viewCollections");f(this,"_unboundChildren");f(this,"_bindTemplate");this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new Sl,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(r,s)=>{s.locale=t,s.t=t&&t.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Pi.bind(this,this)}createCollection(t){const r=new Zo(t);return this._viewCollections.add(r),r}registerChild(t){ar(t)||(t=[t]);for(const r of t)this._unboundChildren.add(r)}deregisterChild(t){ar(t)||(t=[t]);for(const r of t)this._unboundChildren.remove(r)}setTemplate(t){this.template=new Pi(t)}extendTemplate(t){Pi.extend(this.template,t)}render(){if(this.isRendered)throw new A("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(t=>t.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}function HS({emitter:n,activator:e,callback:t,contextElements:r,listenerOptions:s}){n.listenTo(document,"mousedown",(i,o)=>{if(!e())return;const a=typeof o.composedPath=="function"?o.composedPath():[],l=typeof r=="function"?r():r;for(const c of l)if(c.contains(o.target)||a.includes(c))return;t()},s)}const Eh=class Eh extends De{constructor(){super();const e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",e.if("isVisible","ck-hidden",t=>!t),"ck-reset_all-excluded",e.if("isColorInherited","ck-icon_inherit-color")],viewBox:e.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const e=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),t=e.getAttribute("viewBox");t&&(this.viewBox=t);for(const{name:r,value:s}of Array.from(e.attributes))Eh.presentationalAttributeNames.includes(r)&&this.element.setAttribute(r,s);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;e.childNodes.length>0;)this.element.appendChild(e.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(e=>{e.style.fill=this.fillColor})}};f(Eh,"presentationalAttributeNames",["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"]);let ji=Eh;class KS extends De{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:e.to("style"),id:e.to("id")},children:[{text:e.to("text")}]})}}class Di extends De{constructor(t,r=new KS){super(t);f(this,"children");f(this,"labelView");f(this,"iconView");f(this,"keystrokeView");f(this,"_focusDelayed",null);const s=this.bindTemplate,i=El();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${i}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(r),this.iconView=new ji,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const o={tag:"button",attributes:{class:["ck","ck-button",s.to("class"),s.if("isEnabled","ck-disabled",a=>!a),s.if("isVisible","ck-hidden",a=>!a),s.to("isOn",a=>a?"ck-on":"ck-off"),s.if("withText","ck-button_with-text"),s.if("withKeystroke","ck-button_with-keystroke")],role:s.to("role"),type:s.to("type",a=>a||"button"),tabindex:s.to("tabindex"),"aria-checked":s.to("_ariaChecked"),"aria-pressed":s.to("_ariaPressed"),"aria-label":s.to("ariaLabel"),"aria-labelledby":s.to("ariaLabelledBy"),"aria-disabled":s.if("isEnabled",!0,a=>!a),"data-cke-tooltip-text":s.to("_tooltipString"),"data-cke-tooltip-position":s.to("tooltipPosition")},children:this.children,on:{click:s.to(a=>{this.isEnabled?this.fire("execute"):a.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(a,l,c)=>!(!l||m0(c))&&String(!!a)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(a,l,c)=>!(!l||!m0(c))&&String(!!a)),kt.isSafari&&(this._focusDelayed||(this._focusDelayed=bj(()=>this.focus(),0)),o.on.mousedown=s.to(()=>{this._focusDelayed()}),o.on.mouseup=s.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(t){return t.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),t}_createKeystrokeView(){const t=new De;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",r=>fb(r))}]}),t}_getTooltipString(t,r,s){return t?typeof t=="string"?t:(s&&(s=fb(s)),t instanceof Function?t(r,s):`${r}${s?` (${s})`:""}`):""}}function m0(n){switch(n){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class _D extends De{constructor(t,r={}){super(t);f(this,"children");f(this,"iconView");const s=this.bindTemplate;this.set("label",r.label||""),this.set("class",r.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",s.to("class")]},children:this.children}),r.icon&&(this.iconView=new ji,this.iconView.content=r.icon,this.children.add(this.iconView));const i=new De(t);i.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:s.to("label")}]}),this.children.add(i)}}class Su extends nt(){constructor(t){super();f(this,"focusables");f(this,"focusTracker");f(this,"keystrokeHandler");f(this,"actions");if(this.focusables=t.focusables,this.focusTracker=t.focusTracker,this.keystrokeHandler=t.keystrokeHandler,this.actions=t.actions,t.actions&&t.keystrokeHandler)for(const r in t.actions){let s=t.actions[r];typeof s=="string"&&(s=[s]);for(const i of s)t.keystrokeHandler.set(i,(o,a)=>{this[r](),a()},t.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(lm)||null}get last(){return this.focusables.filter(lm).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let t=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((r,s)=>{const i=r.element===this.focusTracker.focusedElement;return i&&(t=s),i}),t)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const t=this.next;t&&this.focusables.getIndex(t)===this.current||t===this.first?this.fire("forwardCycle"):this._focus(t,1)}focusPrevious(){const t=this.previous;t&&this.focusables.getIndex(t)===this.current||t===this.last?this.fire("backwardCycle"):this._focus(t,-1)}chain(t){const r=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(t,"forwardCycle",s=>{const i=r();this.focusNext(),i!==r()&&s.stop()},{priority:"low"}),this.listenTo(t,"backwardCycle",s=>{const i=r();this.focusPrevious(),i!==r()&&s.stop()},{priority:"low"})}unchain(t){this.stopListening(t)}_focus(t,r){t&&this.focusTracker.focusedElement!==t.element&&t.focus(r)}_getDomFocusableItem(t){const r=this.focusables.length;if(!r)return null;const s=this.current;if(s===null)return this[t===1?"first":"last"];let i=this.focusables.get(s),o=(s+r+t)%r;do{const a=this.focusables.get(o);if(lm(a)){i=a;break}o=(o+r+t)%r}while(o!==s);return i}}function lm(n){return Cu(n)&&Vs(n.element)}function Cu(n){return!(!("focus"in n)||typeof n.focus!="function")}function bD(n){return Cu(n)&&"focusCycler"in n&&n.focusCycler instanceof Su}function xD(n){return class extends n{constructor(...t){super(...t);f(this,"_onDragBound",this._onDrag.bind(this));f(this,"_onDragEndBound",this._onDragEnd.bind(this));f(this,"_lastDraggingCoordinates",{x:0,y:0});this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(ke.document,"mouseup",this._onDragEndBound),this.listenTo(ke.document,"touchend",this._onDragEndBound),this.listenTo(ke.document,"mousemove",this._onDragBound),this.listenTo(ke.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(ke.document,"mouseup",this._onDragEndBound),this.stopListening(ke.document,"touchend",this._onDragEndBound),this.stopListening(ke.document,"mousemove",this._onDragBound),this.stopListening(ke.document,"touchmove",this._onDragBound)}_onDragStart(t,r){if(!this._isHandleElementPressed(r))return;this._attachDragListeners();let s=0,i=0;r instanceof MouseEvent?(s=r.clientX,i=r.clientY):(s=r.touches[0].clientX,i=r.touches[0].clientY),this._lastDraggingCoordinates={x:s,y:i},this.isDragging=!0}_onDrag(t,r){if(!this.isDragging)return void this._detachDragListeners();let s=0,i=0;r instanceof MouseEvent?(s=r.clientX,i=r.clientY):(s=r.touches[0].clientX,i=r.touches[0].clientY),r.preventDefault(),this.fire("drag",{deltaX:Math.round(s-this._lastDraggingCoordinates.x),deltaY:Math.round(i-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:s,y:i}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(t){return!!this.dragHandleElement&&(this.dragHandleElement===t.target||t.target instanceof HTMLElement&&this.dragHandleElement.contains(t.target))}}}class kD extends De{constructor(t){super(t);f(this,"children");f(this,"keystrokes");f(this,"focusCycler");f(this,"_focusTracker");f(this,"_focusables");this.children=this.createCollection(),this.keystrokes=new qi,this._focusTracker=new Wi,this._focusables=new Zo,this.focusCycler=new Su({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(t){for(const r of t){const s=new Di(this.locale);let i;for(i in s.on("execute",()=>r.onExecute()),r.onCreate&&r.onCreate(s),r)i!="onExecute"&&i!="onCreate"&&s.set(i,r[i]);this.children.add(s)}this._updateFocusCyclableItems()}focus(t){t===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(t=>{this._focusables.add(t),this._focusTracker.add(t.element)})}}class ED extends De{constructor(t){super(t);f(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const hs={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},p0=zy("px"),Sh=class Sh extends xD(De){constructor(t,{getCurrentDomRoot:r,getViewportOffset:s}){super(t);f(this,"parts");f(this,"headerView");f(this,"closeButtonView");f(this,"actionsView");f(this,"contentView");f(this,"keystrokes");f(this,"focusTracker");f(this,"wasMoved",!1);f(this,"_getCurrentDomRoot");f(this,"_getViewportOffset");f(this,"_focusables");f(this,"_focusCycler");const i=this.bindTemplate,o=t.t;this.set("className",""),this.set("ariaLabel",o("Editor dialog")),this.set("isModal",!1),this.set("position",hs.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=r,this._getViewportOffset=s,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new qi,this.focusTracker=new Wi,this._focusables=new Zo,this._focusCycler=new Su({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",i.if("isModal","ck-dialog-overlay__transparent",a=>!a),i.if("_isVisible","ck-hidden",a=>!a)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",i.to("className")],role:"dialog","aria-label":i.to("ariaLabel"),style:{top:i.to("_top",a=>p0(a)),left:i.to("_left",a=>p0(a)),visibility:i.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(t,r)=>{this.fire("close",{source:"escKeyPress"}),r()}),this.on("drag",(t,{deltaX:r,deltaY:s})=>{this.wasMoved=!0,this.moveBy(r,s)}),this.listenTo(ke.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(ke.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(t,r,s)=>{s&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView?this.headerView.element:null}setupParts({icon:t,title:r,hasCloseButton:s=!0,content:i,actionButtons:o}){r&&(this.headerView=new _D(this.locale,{icon:t}),s&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=r,this.ariaLabel=r,this.parts.add(this.headerView,0)),i&&(i instanceof De&&(i=[i]),this.contentView=new ED(this.locale),this.contentView.children.addMany(i),this.parts.add(this.contentView)),o&&(this.actionsView=new kD(this.locale),this.actionsView.setButtons(o),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(t,r){const s=this._getViewportRect(),i=this._getDialogRect();t+i.width>s.right&&(t=s.right-i.width),t<s.left&&(t=s.left),r<s.top&&(r=s.top),this._moveTo(t,r)}_moveTo(t,r){this._left=t,this._top=r}moveBy(t,r){this.moveTo(this._left+t,this._top+r)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const t=this._getViewportRect();let r,s=this.position;this._getCurrentDomRoot()?r=this._getVisibleDomRootRect(t):s=hs.SCREEN_CENTER;const i=Sh.defaultOffset,o=this._getDialogRect();switch(s){case hs.EDITOR_TOP_SIDE:if(r){const a=this.locale.contentLanguageDirection==="ltr"?r.right-o.width-i:r.left+i;this.moveTo(a,r.top+i)}else this._moveOffScreen();break;case hs.EDITOR_CENTER:r?this.moveTo(Math.round(r.left+r.width/2-o.width/2),Math.round(r.top+r.height/2-o.height/2)):this._moveOffScreen();break;case hs.SCREEN_CENTER:this.moveTo(Math.round((t.width-o.width)/2),Math.round((t.height-o.height)/2));break;case hs.EDITOR_TOP_CENTER:r?this.moveTo(Math.round(r.left+r.width/2-o.width/2),r.top+i):this._moveOffScreen();break;case hs.EDITOR_BOTTOM_CENTER:r?this.moveTo(Math.round(r.left+r.width/2-o.width/2),r.bottom-o.height-i):this._moveOffScreen();break;case hs.EDITOR_ABOVE_CENTER:r?this.moveTo(Math.round(r.left+r.width/2-o.width/2),r.top-o.height-i):this._moveOffScreen();break;case hs.EDITOR_BELOW_CENTER:r?this.moveTo(Math.round(r.left+r.width/2-o.width/2),r.bottom+i):this._moveOffScreen()}}_getVisibleDomRootRect(t){let r=new Je(this._getCurrentDomRoot()).getVisible();return r?(r=t.getIntersection(r),r||null):null}_getDialogRect(){return new Je(this.element.firstElementChild)}_getViewportRect(){return function(t){t=Object.assign({top:0,bottom:0,left:0,right:0},t);const r=new Je(ke.window);return r.top+=t.top,r.height-=t.top,r.bottom-=t.bottom,r.height-=t.bottom,r.left+=t.left,r.right-=t.right,r.width-=t.left+t.right,r}(this._getViewportOffset())}_updateFocusCyclableItems(){const t=[];if(this.contentView)for(const r of this.contentView.children)Cu(r)&&t.push(r);this.actionsView&&t.push(this.actionsView),this.closeButtonView&&t.push(this.closeButtonView),t.forEach(r=>{this._focusables.add(r),this.focusTracker.add(r.element),bD(r)&&this._focusCycler.chain(r.focusCycler)})}_createCloseButton(){const t=new Di(this.locale),r=this.locale.t;return t.set({label:r("Close"),tooltip:!0,icon:Qn.cancel}),t.on("execute",()=>this.fire("close",{source:"closeButton"})),t}};f(Sh,"defaultOffset",15);let vh=Sh;class nf extends Di{constructor(t,r=new KS){super(t,r);f(this,"_checkIconHolderView",new SD);this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const s=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",s.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(i,o)=>i||o)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",t=>this.isToggleable&&t),this.on("change:_hasCheck",(t,r,s)=>{const{children:i,_checkIconHolderView:o}=this;s?i.add(o,0):i.remove(o)})}}class SD extends De{constructor(){super();f(this,"children");f(this,"_checkIconView",this._createCheckIconView());const t=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",t.to("isOn",r=>r?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(t,r,s)=>{const{children:i,_checkIconView:o}=this;s&&!i.has(o)?i.add(o):!s&&i.has(o)&&i.remove(o)})}_createCheckIconView(){const t=new ji;return t.content=Qn.check,t.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),t}}class CD extends nf{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class QS extends De{constructor(t){super(t);f(this,"id");this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${El()}`;const r=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:r.to("for")},children:[{text:r.to("text")}]})}}class PD extends Zo{constructor(t,r=[]){super(r);f(this,"locale");f(this,"_bodyCollectionContainer");this.locale=t}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Pi({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render();let t=document.querySelector(".ck-body-wrapper");t||(t=nj(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(t)),t.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const t=document.querySelector(".ck-body-wrapper");t&&t.childElementCount==0&&t.remove()}}class TD extends Di{constructor(t){super(t);f(this,"toggleSwitchView");this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const t=new De;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),t}}class AD extends OD(nf){}function OD(n){return class extends n{constructor(...t){super(...t);f(this,"buttonView");f(this,"_fileInputView");this.buttonView=this,this._fileInputView=new ND(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}}class ND extends De{constructor(e){super(e),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}var tv='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>',RD={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const Cc=RD,ZS={};for(const n of Object.keys(Cc))ZS[Cc[n]]=n;const ce={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var JS=ce;for(const n of Object.keys(ce)){if(!("channels"in ce[n]))throw new Error("missing channels property: "+n);if(!("labels"in ce[n]))throw new Error("missing channel labels property: "+n);if(ce[n].labels.length!==ce[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=ce[n];delete ce[n].channels,delete ce[n].labels,Object.defineProperty(ce[n],"channels",{value:e}),Object.defineProperty(ce[n],"labels",{value:t})}function MD(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}ce.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,s=Math.min(e,t,r),i=Math.max(e,t,r),o=i-s;let a,l;i===s?a=0:e===i?a=(t-r)/o:t===i?a=2+(r-e)/o:r===i&&(a=4+(e-t)/o),a=Math.min(60*a,360),a<0&&(a+=360);const c=(s+i)/2;return l=i===s?0:c<=.5?o/(i+s):o/(2-i-s),[a,100*l,100*c]},ce.rgb.hsv=function(n){let e,t,r,s,i;const o=n[0]/255,a=n[1]/255,l=n[2]/255,c=Math.max(o,a,l),u=c-Math.min(o,a,l),d=function(h){return(c-h)/6/u+.5};return u===0?(s=0,i=0):(i=u/c,e=d(o),t=d(a),r=d(l),o===c?s=r-t:a===c?s=1/3+e-r:l===c&&(s=2/3+t-e),s<0?s+=1:s>1&&(s-=1)),[360*s,100*i,100*c]},ce.rgb.hwb=function(n){const e=n[0],t=n[1];let r=n[2];const s=ce.rgb.hsl(n)[0],i=1/255*Math.min(e,Math.min(t,r));return r=1-1/255*Math.max(e,Math.max(t,r)),[s,100*i,100*r]},ce.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,s=Math.min(1-e,1-t,1-r);return[100*((1-e-s)/(1-s)||0),100*((1-t-s)/(1-s)||0),100*((1-r-s)/(1-s)||0),100*s]},ce.rgb.keyword=function(n){const e=ZS[n];if(e)return e;let t,r=1/0;for(const s of Object.keys(Cc)){const i=MD(n,Cc[s]);i<r&&(r=i,t=s)}return t},ce.keyword.rgb=function(n){return Cc[n]},ce.rgb.xyz=function(n){let e=n[0]/255,t=n[1]/255,r=n[2]/255;return e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,[100*(.4124*e+.3576*t+.1805*r),100*(.2126*e+.7152*t+.0722*r),100*(.0193*e+.1192*t+.9505*r)]},ce.rgb.lab=function(n){const e=ce.rgb.xyz(n);let t=e[0],r=e[1],s=e[2];return t/=95.047,r/=100,s/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,[116*r-16,500*(t-r),200*(r-s)]},ce.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;let s,i,o;if(t===0)return o=255*r,[o,o,o];s=r<.5?r*(1+t):r+t-r*t;const a=2*r-s,l=[0,0,0];for(let c=0;c<3;c++)i=e+1/3*-(c-1),i<0&&i++,i>1&&i--,o=6*i<1?a+6*(s-a)*i:2*i<1?s:3*i<2?a+(s-a)*(2/3-i)*6:a,l[c]=255*o;return l},ce.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,r=n[2]/100,s=t;const i=Math.max(r,.01);return r*=2,t*=r<=1?r:2-r,s*=i<=1?i:2-i,[e,100*(r===0?2*s/(i+s):2*t/(r+t)),100*((r+t)/2)]},ce.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let r=n[2]/100;const s=Math.floor(e)%6,i=e-Math.floor(e),o=255*r*(1-t),a=255*r*(1-t*i),l=255*r*(1-t*(1-i));switch(r*=255,s){case 0:return[r,l,o];case 1:return[a,r,o];case 2:return[o,r,l];case 3:return[o,a,r];case 4:return[l,o,r];case 5:return[r,o,a]}},ce.hsv.hsl=function(n){const e=n[0],t=n[1]/100,r=n[2]/100,s=Math.max(r,.01);let i,o;o=(2-t)*r;const a=(2-t)*s;return i=t*s,i/=a<=1?a:2-a,i=i||0,o/=2,[e,100*i,100*o]},ce.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,r=n[2]/100;const s=t+r;let i;s>1&&(t/=s,r/=s);const o=Math.floor(6*e),a=1-r;i=6*e-o,1&o&&(i=1-i);const l=t+i*(a-t);let c,u,d;switch(o){default:case 6:case 0:c=a,u=l,d=t;break;case 1:c=l,u=a,d=t;break;case 2:c=t,u=a,d=l;break;case 3:c=t,u=l,d=a;break;case 4:c=l,u=t,d=a;break;case 5:c=a,u=t,d=l}return[255*c,255*u,255*d]},ce.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100,s=n[3]/100;return[255*(1-Math.min(1,e*(1-s)+s)),255*(1-Math.min(1,t*(1-s)+s)),255*(1-Math.min(1,r*(1-s)+s))]},ce.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,r=n[2]/100;let s,i,o;return s=3.2406*e+-1.5372*t+-.4986*r,i=-.9689*e+1.8758*t+.0415*r,o=.0557*e+-.204*t+1.057*r,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,s=Math.min(Math.max(0,s),1),i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),[255*s,255*i,255*o]},ce.xyz.lab=function(n){let e=n[0],t=n[1],r=n[2];return e/=95.047,t/=100,r/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,[116*t-16,500*(e-t),200*(t-r)]},ce.lab.xyz=function(n){let e,t,r;t=(n[0]+16)/116,e=n[1]/500+t,r=t-n[2]/200;const s=t**3,i=e**3,o=r**3;return t=s>.008856?s:(t-16/116)/7.787,e=i>.008856?i:(e-16/116)/7.787,r=o>.008856?o:(r-16/116)/7.787,e*=95.047,t*=100,r*=108.883,[e,t,r]},ce.lab.lch=function(n){const e=n[0],t=n[1],r=n[2];let s;return s=360*Math.atan2(r,t)/2/Math.PI,s<0&&(s+=360),[e,Math.sqrt(t*t+r*r),s]},ce.lch.lab=function(n){const e=n[0],t=n[1],r=n[2]/360*2*Math.PI;return[e,t*Math.cos(r),t*Math.sin(r)]},ce.rgb.ansi16=function(n,e=null){const[t,r,s]=n;let i=e===null?ce.rgb.hsv(n)[2]:e;if(i=Math.round(i/50),i===0)return 30;let o=30+(Math.round(s/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return i===2&&(o+=60),o},ce.hsv.ansi16=function(n){return ce.rgb.ansi16(ce.hsv.rgb(n),n[2])},ce.rgb.ansi256=function(n){const e=n[0],t=n[1],r=n[2];return e===t&&t===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5)},ce.ansi16.rgb=function(n){let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=.5*(1+~~(n>50));return[(1&e)*t*255,(e>>1&1)*t*255,(e>>2&1)*t*255]},ce.ansi256.rgb=function(n){if(n>=232){const t=10*(n-232)+8;return[t,t,t]}let e;return n-=16,[Math.floor(n/36)/5*255,Math.floor((e=n%36)/6)/5*255,e%6/5*255]},ce.rgb.hex=function(n){const e=(((255&Math.round(n[0]))<<16)+((255&Math.round(n[1]))<<8)+(255&Math.round(n[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},ce.hex.rgb=function(n){const e=n.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(s=>s+s).join(""));const r=parseInt(t,16);return[r>>16&255,r>>8&255,255&r]},ce.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,r=n[2]/255,s=Math.max(Math.max(e,t),r),i=Math.min(Math.min(e,t),r),o=s-i;let a,l;return a=o<1?i/(1-o):0,l=o<=0?0:s===e?(t-r)/o%6:s===t?2+(r-e)/o:4+(e-t)/o,l/=6,l%=1,[360*l,100*o,100*a]},ce.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=t<.5?2*e*t:2*e*(1-t);let s=0;return r<1&&(s=(t-.5*r)/(1-r)),[n[0],100*r,100*s]},ce.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,r=e*t;let s=0;return r<1&&(s=(t-r)/(1-r)),[n[0],100*r,100*s]},ce.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,r=n[2]/100;if(t===0)return[255*r,255*r,255*r];const s=[0,0,0],i=e%1*6,o=i%1,a=1-o;let l=0;switch(Math.floor(i)){case 0:s[0]=1,s[1]=o,s[2]=0;break;case 1:s[0]=a,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=o;break;case 3:s[0]=0,s[1]=a,s[2]=1;break;case 4:s[0]=o,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=a}return l=(1-t)*r,[255*(t*s[0]+l),255*(t*s[1]+l),255*(t*s[2]+l)]},ce.hcg.hsv=function(n){const e=n[1]/100,t=e+n[2]/100*(1-e);let r=0;return t>0&&(r=e/t),[n[0],100*r,100*t]},ce.hcg.hsl=function(n){const e=n[1]/100,t=n[2]/100*(1-e)+.5*e;let r=0;return t>0&&t<.5?r=e/(2*t):t>=.5&&t<1&&(r=e/(2*(1-t))),[n[0],100*r,100*t]},ce.hcg.hwb=function(n){const e=n[1]/100,t=e+n[2]/100*(1-e);return[n[0],100*(t-e),100*(1-t)]},ce.hwb.hcg=function(n){const e=n[1]/100,t=1-n[2]/100,r=t-e;let s=0;return r<1&&(s=(t-r)/(1-r)),[n[0],100*r,100*s]},ce.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]},ce.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]},ce.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]},ce.gray.hsl=function(n){return[0,0,n[0]]},ce.gray.hsv=ce.gray.hsl,ce.gray.hwb=function(n){return[0,100,n[0]]},ce.gray.cmyk=function(n){return[0,0,0,n[0]]},ce.gray.lab=function(n){return[n[0],0,0]},ce.gray.hex=function(n){const e=255&Math.round(n[0]/100*255),t=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(t.length)+t},ce.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};const wh=JS;function ID(n){const e=function(){const r={},s=Object.keys(wh);for(let i=s.length,o=0;o<i;o++)r[s[o]]={distance:-1,parent:null};return r}(),t=[n];for(e[n].distance=0;t.length;){const r=t.pop(),s=Object.keys(wh[r]);for(let i=s.length,o=0;o<i;o++){const a=s[o],l=e[a];l.distance===-1&&(l.distance=e[r].distance+1,l.parent=r,t.unshift(a))}}return e}function jD(n,e){return function(t){return e(n(t))}}function DD(n,e){const t=[e[n].parent,n];let r=wh[e[n].parent][n],s=e[n].parent;for(;e[s].parent;)t.unshift(e[s].parent),r=jD(wh[e[s].parent][s],r),s=e[s].parent;return r.conversion=t,r}const cm=JS,FD=function(n){const e=ID(n),t={},r=Object.keys(e);for(let s=r.length,i=0;i<s;i++){const o=r[i];e[o].parent!==null&&(t[o]=DD(o,e))}return t},io={};Object.keys(cm).forEach(n=>{io[n]={},Object.defineProperty(io[n],"channels",{value:cm[n].channels}),Object.defineProperty(io[n],"labels",{value:cm[n].labels});const e=FD(n);Object.keys(e).forEach(t=>{const r=e[t];io[n][t]=function(s){const i=function(...o){const a=o[0];if(a==null)return a;a.length>1&&(o=a);const l=s(o);if(typeof l=="object")for(let c=l.length,u=0;u<c;u++)l[u]=Math.round(l[u]);return l};return"conversion"in s&&(i.conversion=s.conversion),i}(r),io[n][t].raw=function(s){const i=function(...o){const a=o[0];return a==null?a:(a.length>1&&(o=a),s(o))};return"conversion"in s&&(i.conversion=s.conversion),i}(r)})});_M({__proto__:null,default:io},[io]);class LD extends De{constructor(t){super(t);f(this,"children");const r=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",r.to("position",s=>`ck-dropdown__panel_${s}`),r.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:r.to(s=>{s.target.tagName.toLocaleLowerCase()!=="input"&&s.preventDefault()})}})}focus(){if(this.children.length){const t=this.children.first;typeof t.focus=="function"?t.focus():Pt("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const t=this.children.last;typeof t.focusLast=="function"?t.focusLast():t.focus()}}}const Aa=class Aa extends De{constructor(t,r,s){super(t);f(this,"buttonView");f(this,"panelView");f(this,"focusTracker");f(this,"keystrokes");f(this,"listView");f(this,"toolbarView");f(this,"menuView");const i=this.bindTemplate;this.buttonView=r,this.panelView=s,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new qi,this.focusTracker=new Wi,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",i.to("class"),i.if("isEnabled","ck-disabled",o=>!o)],id:i.to("id"),"aria-describedby":i.to("ariaDescribedById")},children:[r,s]}),r.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":i.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(r,s,i)=>{if(i)if(this.panelPosition==="auto"){const o=Aa._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._panelPositions[0].name}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const t=(r,s)=>{this.isOpen&&(this.isOpen=!1,s())};this.keystrokes.set("arrowdown",(r,s)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,s())}),this.keystrokes.set("arrowright",(r,s)=>{this.isOpen&&s()}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:t,north:r,southEast:s,southWest:i,northEast:o,northWest:a,southMiddleEast:l,southMiddleWest:c,northMiddleEast:u,northMiddleWest:d}=Aa.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[s,i,l,c,t,o,a,u,d,r]:[i,s,c,l,t,a,o,d,u,r]}};f(Aa,"defaultPanelPositions",{south:(t,r)=>({top:t.bottom,left:t.left-(r.width-t.width)/2,name:"s"}),southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,r)=>({top:t.bottom,left:t.left-r.width+t.width,name:"sw"}),southMiddleEast:(t,r)=>({top:t.bottom,left:t.left-(r.width-t.width)/4,name:"sme"}),southMiddleWest:(t,r)=>({top:t.bottom,left:t.left-3*(r.width-t.width)/4,name:"smw"}),north:(t,r)=>({top:t.top-r.height,left:t.left-(r.width-t.width)/2,name:"n"}),northEast:(t,r)=>({top:t.top-r.height,left:t.left,name:"ne"}),northWest:(t,r)=>({top:t.top-r.height,left:t.left-r.width+t.width,name:"nw"}),northMiddleEast:(t,r)=>({top:t.top-r.height,left:t.left-(r.width-t.width)/4,name:"nme"}),northMiddleWest:(t,r)=>({top:t.top-r.height,left:t.left-3*(r.width-t.width)/4,name:"nmw"})}),f(Aa,"_getOptimalPosition",Uy);let ug=Aa;class VD extends Di{constructor(t){super(t);f(this,"arrowView");this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",r=>String(r))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new ji;return t.content=tv,t.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),t}}class cu extends De{constructor(t){super(t);f(this,"children");const r=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",r.if("isVisible","ck-hidden",s=>!s)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class GS extends De{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class um extends De{constructor(t,r=new QS){super(t);f(this,"labelView");f(this,"items");f(this,"children");const s=this.bindTemplate,i=new YS(t);this.set({label:"",isVisible:!0}),this.labelView=r,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,i]),i.set({role:"group",ariaLabelledBy:r.id}),i.focusTracker.destroy(),i.keystrokes.destroy(),this.items=i.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",s.if("isVisible","ck-hidden",o=>!o)]},children:this.children})}focus(){if(this.items){const t=this.items.find(r=>!(r instanceof GS));t&&t.focus()}}}class YS extends De{constructor(t){super(t);f(this,"focusables");f(this,"items");f(this,"focusTracker");f(this,"keystrokes");f(this,"_focusCycler");f(this,"_listItemGroupToChangeListeners",new WeakMap);const r=this.bindTemplate;this.focusables=new Zo,this.items=this.createCollection(),this.focusTracker=new Wi,this.keystrokes=new qi,this._focusCycler=new Su({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:r.to("role"),"aria-label":r.to("ariaLabel"),"aria-labelledby":r.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const t of this.items)t instanceof um?this._registerFocusableItemsGroup(t):t instanceof cu&&this._registerFocusableListItem(t);this.items.on("change",(t,r)=>{for(const s of r.removed)s instanceof um?this._deregisterFocusableItemsGroup(s):s instanceof cu&&this._deregisterFocusableListItem(s);for(const s of Array.from(r.added).reverse())s instanceof um?this._registerFocusableItemsGroup(s,r.index):this._registerFocusableListItem(s,r.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(t,r){this.focusTracker.add(t.element),this.focusables.add(t,r)}_deregisterFocusableListItem(t){this.focusTracker.remove(t.element),this.focusables.remove(t)}_getOnGroupItemsChangeCallback(t){return(r,s)=>{for(const i of s.removed)this._deregisterFocusableListItem(i);for(const i of Array.from(s.added).reverse())this._registerFocusableListItem(i,this.items.getIndex(t)+s.index)}}_registerFocusableItemsGroup(t,r){Array.from(t.items).forEach((i,o)=>{const a=r!==void 0?r+o:void 0;this._registerFocusableListItem(i,a)});const s=this._getOnGroupItemsChangeCallback(t);this._listItemGroupToChangeListeners.set(t,s),t.items.on("change",s)}_deregisterFocusableItemsGroup(t){for(const r of t.items)this._deregisterFocusableListItem(r);t.items.off("change",this._listItemGroupToChangeListeners.get(t)),this._listItemGroupToChangeListeners.delete(t)}}const g0=zy("px"),$D={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},Kn=class Kn extends De{constructor(t){super(t);f(this,"content");f(this,"_pinWhenIsVisibleCallback");f(this,"_resizeObserver");const r=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",r.to("position",s=>`ck-balloon-panel_${s}`),r.if("isVisible","ck-balloon-panel_visible"),r.if("withArrow","ck-balloon-panel_with-arrow"),r.to("class")],style:{top:r.to("top",g0),left:r.to("left",g0)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(t){const r=Pd(t.target);if(r&&!Vs(r))return!1;this.show();const s=Kn.defaultPositions,i=Object.assign({},{element:this.element,positions:[s.southArrowNorth,s.southArrowNorthMiddleWest,s.southArrowNorthMiddleEast,s.southArrowNorthWest,s.southArrowNorthEast,s.northArrowSouth,s.northArrowSouthMiddleWest,s.northArrowSouthMiddleEast,s.northArrowSouthWest,s.northArrowSouthEast,s.viewportStickyNorth],limiter:ke.document.body,fitInViewport:!0},t),o=Kn._getOptimalPosition(i)||$D,a=parseInt(o.left),l=parseInt(o.top),c=o.name,u=o.config||{},{withArrow:d=!0}=u;return this.top=l,this.left=a,this.position=c,this.withArrow=d,!0}pin(t){this.unpin(),this._startPinning(t)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(t):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(t){if(!this.attachTo(t))return!1;let r=Pd(t.target);const s=t.limiter?Pd(t.limiter):ke.document.body;if(this.listenTo(ke.document,"scroll",(i,o)=>{const a=o.target,l=r&&a.contains(r),c=s&&a.contains(s);!l&&!c&&r&&s||this.attachTo(t)},{useCapture:!0}),this.listenTo(ke.window,"resize",()=>{this.attachTo(t)}),!this._resizeObserver&&(r&&St(r)&&(r=r.parentElement),r)){const i=()=>{Vs(r)||this.unpin()};this._resizeObserver=new fh(r,i)}return!0}_stopPinning(){this.stopListening(ke.document,"scroll"),this.stopListening(ke.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(t={}){const{sideOffset:r=Kn.arrowSideOffset,heightOffset:s=Kn.arrowHeightOffset,stickyVerticalOffset:i=Kn.stickyVerticalOffset,config:o}=t;return{northWestArrowSouthWest:(c,u)=>({top:a(c,u),left:c.left-r,name:"arrow_sw",...o&&{config:o}}),northWestArrowSouthMiddleWest:(c,u)=>({top:a(c,u),left:c.left-.25*u.width-r,name:"arrow_smw",...o&&{config:o}}),northWestArrowSouth:(c,u)=>({top:a(c,u),left:c.left-u.width/2,name:"arrow_s",...o&&{config:o}}),northWestArrowSouthMiddleEast:(c,u)=>({top:a(c,u),left:c.left-.75*u.width+r,name:"arrow_sme",...o&&{config:o}}),northWestArrowSouthEast:(c,u)=>({top:a(c,u),left:c.left-u.width+r,name:"arrow_se",...o&&{config:o}}),northArrowSouthWest:(c,u)=>({top:a(c,u),left:c.left+c.width/2-r,name:"arrow_sw",...o&&{config:o}}),northArrowSouthMiddleWest:(c,u)=>({top:a(c,u),left:c.left+c.width/2-.25*u.width-r,name:"arrow_smw",...o&&{config:o}}),northArrowSouth:(c,u)=>({top:a(c,u),left:c.left+c.width/2-u.width/2,name:"arrow_s",...o&&{config:o}}),northArrowSouthMiddleEast:(c,u)=>({top:a(c,u),left:c.left+c.width/2-.75*u.width+r,name:"arrow_sme",...o&&{config:o}}),northArrowSouthEast:(c,u)=>({top:a(c,u),left:c.left+c.width/2-u.width+r,name:"arrow_se",...o&&{config:o}}),northEastArrowSouthWest:(c,u)=>({top:a(c,u),left:c.right-r,name:"arrow_sw",...o&&{config:o}}),northEastArrowSouthMiddleWest:(c,u)=>({top:a(c,u),left:c.right-.25*u.width-r,name:"arrow_smw",...o&&{config:o}}),northEastArrowSouth:(c,u)=>({top:a(c,u),left:c.right-u.width/2,name:"arrow_s",...o&&{config:o}}),northEastArrowSouthMiddleEast:(c,u)=>({top:a(c,u),left:c.right-.75*u.width+r,name:"arrow_sme",...o&&{config:o}}),northEastArrowSouthEast:(c,u)=>({top:a(c,u),left:c.right-u.width+r,name:"arrow_se",...o&&{config:o}}),southWestArrowNorthWest:c=>({top:l(c),left:c.left-r,name:"arrow_nw",...o&&{config:o}}),southWestArrowNorthMiddleWest:(c,u)=>({top:l(c),left:c.left-.25*u.width-r,name:"arrow_nmw",...o&&{config:o}}),southWestArrowNorth:(c,u)=>({top:l(c),left:c.left-u.width/2,name:"arrow_n",...o&&{config:o}}),southWestArrowNorthMiddleEast:(c,u)=>({top:l(c),left:c.left-.75*u.width+r,name:"arrow_nme",...o&&{config:o}}),southWestArrowNorthEast:(c,u)=>({top:l(c),left:c.left-u.width+r,name:"arrow_ne",...o&&{config:o}}),southArrowNorthWest:c=>({top:l(c),left:c.left+c.width/2-r,name:"arrow_nw",...o&&{config:o}}),southArrowNorthMiddleWest:(c,u)=>({top:l(c),left:c.left+c.width/2-.25*u.width-r,name:"arrow_nmw",...o&&{config:o}}),southArrowNorth:(c,u)=>({top:l(c),left:c.left+c.width/2-u.width/2,name:"arrow_n",...o&&{config:o}}),southArrowNorthMiddleEast:(c,u)=>({top:l(c),left:c.left+c.width/2-.75*u.width+r,name:"arrow_nme",...o&&{config:o}}),southArrowNorthEast:(c,u)=>({top:l(c),left:c.left+c.width/2-u.width+r,name:"arrow_ne",...o&&{config:o}}),southEastArrowNorthWest:c=>({top:l(c),left:c.right-r,name:"arrow_nw",...o&&{config:o}}),southEastArrowNorthMiddleWest:(c,u)=>({top:l(c),left:c.right-.25*u.width-r,name:"arrow_nmw",...o&&{config:o}}),southEastArrowNorth:(c,u)=>({top:l(c),left:c.right-u.width/2,name:"arrow_n",...o&&{config:o}}),southEastArrowNorthMiddleEast:(c,u)=>({top:l(c),left:c.right-.75*u.width+r,name:"arrow_nme",...o&&{config:o}}),southEastArrowNorthEast:(c,u)=>({top:l(c),left:c.right-u.width+r,name:"arrow_ne",...o&&{config:o}}),westArrowEast:(c,u)=>({top:c.top+c.height/2-u.height/2,left:c.left-u.width-s,name:"arrow_e",...o&&{config:o}}),eastArrowWest:(c,u)=>({top:c.top+c.height/2-u.height/2,left:c.right+s,name:"arrow_w",...o&&{config:o}}),viewportStickyNorth:(c,u,d,h)=>{const p=h||d;return c.getIntersection(p)?p.height-c.height>i?null:{top:p.top+i,left:c.left+c.width/2-u.width/2,name:"arrowless",config:{withArrow:!1,...o}}:null}};function a(c,u){return c.top-u.height-s}function l(c){return c.bottom+s}}};f(Kn,"arrowSideOffset",25),f(Kn,"arrowHeightOffset",10),f(Kn,"stickyVerticalOffset",20),f(Kn,"_getOptimalPosition",Uy),f(Kn,"defaultPositions",Kn.generatePositions());let gr=Kn;function Pd(n){return Vo(n)?n:Gh(n)?n.commonAncestorContainer:typeof n=="function"?Pd(n()):null}class XS extends De{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class BD extends De{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}function eC(n){if(Array.isArray(n))return{items:n,removeItems:[]};const e={items:[],removeItems:[]};return n?{...e,...n}:e}const zD={alignLeft:Qn.alignLeft,bold:Qn.bold,importExport:Qn.importExport,paragraph:Qn.paragraph,plus:Qn.plus,text:Qn.text,threeVerticalDots:Qn.threeVerticalDots,pilcrow:Qn.pilcrow,dragIndicator:Qn.dragIndicator};class tC extends De{constructor(t,r){super(t);f(this,"options");f(this,"items");f(this,"focusTracker");f(this,"keystrokes");f(this,"itemsView");f(this,"children");f(this,"focusables");f(this,"_focusCycler");f(this,"_behavior");const s=this.bindTemplate,i=this.t;this.options=r||{},this.set("ariaLabel",i("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new Wi,this.keystrokes=new qi,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new UD(t),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const o=t.uiLanguageDirection==="rtl";this._focusCycler=new Su({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});const a=["ck","ck-toolbar",s.to("class"),s.if("isCompact","ck-toolbar_compact")];var l;this.options.shouldGroupWhenFull&&this.options.isFloating&&a.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:a,role:"toolbar","aria-label":s.to("ariaLabel"),style:{maxWidth:s.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:(l=this,l.bindTemplate.to(c=>{c.target===l.element&&c.preventDefault()}))}}),this._behavior=this.options.shouldGroupWhenFull?new qD(this):new WD(this)}render(){super.render(),this.focusTracker.add(this.element);for(const t of this.items)this.focusTracker.add(t.element);this.items.on("add",(t,r)=>{this.focusTracker.add(r.element)}),this.items.on("remove",(t,r)=>{this.focusTracker.remove(r.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(t,r,s){this.items.addMany(this._buildItemsFromConfig(t,r,s))}_buildItemsFromConfig(t,r,s){const i=eC(t),o=s||i.removeItems;return this._cleanItemsConfiguration(i.items,r,o).map(a=>At(a)?this._createNestedToolbarDropdown(a,r,o):a==="|"?new XS:a==="-"?new BD:r.create(a)).filter(a=>!!a)}_cleanItemsConfiguration(t,r,s){const i=t.filter((o,a,l)=>o==="|"||s.indexOf(o)===-1&&(o==="-"?!this.options.shouldGroupWhenFull||(Pt("toolbarview-line-break-ignored-when-grouping-items",l),!1):!(!At(o)&&!r.has(o))||(Pt("toolbarview-item-unavailable",{item:o}),!1)));return this._cleanSeparatorsAndLineBreaks(i)}_cleanSeparatorsAndLineBreaks(t){const r=a=>a!=="-"&&a!=="|",s=t.length,i=t.findIndex(r);if(i===-1)return[];const o=s-t.slice().reverse().findIndex(r);return t.slice(i,o).filter((a,l,c)=>r(a)?!0:!(l>0&&c[l-1]===a))}_createNestedToolbarDropdown(t,r,s){let{label:i,icon:o,items:a,tooltip:l=!0,withText:c=!1}=t;if(a=this._cleanItemsConfiguration(a,r,s),!a.length)return null;const u=nC(this.locale);return i||Pt("toolbarview-nested-toolbar-dropdown-missing-label",t),u.class="ck-toolbar__nested-toolbar-dropdown",u.buttonView.set({label:i,tooltip:l,withText:!!c}),o!==!1?u.buttonView.icon=zD[o]||o||Qn.threeVerticalDots:u.buttonView.withText=!0,rC(u,()=>u.toolbarView._buildItemsFromConfig(a,r,s)),u}}class UD extends De{constructor(t){super(t);f(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class WD{constructor(e){const t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(r=>r),e.focusables.bindTo(e.items).using(r=>Cu(r)?r:null),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class qD{constructor(e){f(this,"view");f(this,"viewChildren");f(this,"viewFocusables");f(this,"viewItemsView");f(this,"viewFocusTracker");f(this,"viewLocale");f(this,"ungroupedItems");f(this,"groupedItems");f(this,"groupedItemsDropdown");f(this,"resizeObserver",null);f(this,"cachedPadding",null);f(this,"shouldUpdateGroupingOnNextResize",!1);f(this,"viewElement");this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),e.children.on("change",this._updateFocusCyclableItems.bind(this)),e.items.on("change",(t,r)=>{const s=r.index,i=Array.from(r.added);for(const o of r.removed)s>=this.ungroupedItems.length?this.groupedItems.remove(o):this.ungroupedItems.remove(o);for(let o=s;o<s+i.length;o++){const a=i[o-s];o>this.ungroupedItems.length?this.groupedItems.add(a,o-this.ungroupedItems.length):this.ungroupedItems.add(a,o)}this._updateGrouping()}),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!Vs(this.viewElement))return void(this.shouldUpdateGroupingOnNextResize=!0);const e=this.groupedItems.length;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const e=this.viewElement,t=this.viewLocale.uiLanguageDirection,r=new Je(e.lastChild),s=new Je(e);if(!this.cachedPadding){const i=ke.window.getComputedStyle(e),o=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(i[o])}return t==="ltr"?r.right>s.right-this.cachedPadding:r.left<s.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new fh(this.viewElement,t=>{e&&e===t.contentRect.width&&!this.shouldUpdateGroupingOnNextResize||(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new XS),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const e=this.viewLocale,t=e.t,r=nC(e);return r.class="ck-toolbar__grouped-dropdown",r.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",rC(r,this.groupedItems),r.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:Qn.threeVerticalDots}),r}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{Cu(e)&&this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class HD extends De{constructor(t,r){super(t);f(this,"children");f(this,"actionView");f(this,"arrowView");f(this,"keystrokes");f(this,"focusTracker");const s=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(r),this.arrowView=this._createArrowView(),this.keystrokes=new qi,this.focusTracker=new Wi,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",s.to("class"),s.if("isVisible","ck-hidden",i=>!i),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(t,r)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),r())}),this.keystrokes.set("arrowleft",(t,r)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),r())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(t){const r=t||new Di;return t||r.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),r.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),r.delegate("execute").to(this),r}_createArrowView(){const t=new Di,r=t.bindTemplate;return t.icon=tv,t.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":r.to("isOn"),"aria-haspopup":!0,"aria-expanded":r.to("isOn",s=>String(s))}}),t.bind("isEnabled").to(this),t.bind("label").to(this),t.bind("tooltip").to(this),t.delegate("execute").to(this,"open"),t}}function nC(n,e=VD){const t=typeof e=="function"?new e(n):e,r=new LD(n),s=new ug(n,t,r);return t.bind("isEnabled").to(s),t instanceof HD?t.arrowView.bind("isOn").to(s,"isOpen"):t.bind("isOn").to(s,"isOpen"),function(i){(function(o){HS({emitter:o,activator:()=>o.isRendered&&o.isOpen,callback:()=>{o.isOpen=!1},contextElements:()=>[o.element,...o.focusTracker.elements]})})(i),function(o){o.on("execute",a=>{a.source instanceof TD||(o.isOpen=!1)})}(i),function(o){o.focusTracker.on("change:isFocused",(a,l,c)=>{!c&&o.isOpen&&(o.isOpen=!1)})}(i),function(o){o.keystrokes.set("arrowdown",(a,l)=>{o.isOpen&&(o.panelView.focus(),l())}),o.keystrokes.set("arrowup",(a,l)=>{o.isOpen&&(o.panelView.focusLast(),l())})}(i),function(o){o.on("change:isOpen",(a,l,c)=>{c||o.focusTracker.elements.some(u=>u.contains(ke.document.activeElement))&&o.buttonView.focus()})}(i),function(o){o.on("change:isOpen",(a,l,c)=>{c&&o.panelView.focus()},{priority:"low"})}(i)}(s),s}function rC(n,e,t={}){n.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),n.isOpen?y0(n,e,t):n.once("change:isOpen",()=>y0(n,e,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&KD(n,()=>n.toolbarView.items.find(r=>r.isOn))}function y0(n,e,t){const r=n.locale,s=r.t,i=n.toolbarView=new tC(r),o=typeof e=="function"?e():e;i.ariaLabel=t.ariaLabel||s("Dropdown toolbar"),t.maxWidth&&(i.maxWidth=t.maxWidth),t.class&&(i.class=t.class),t.isCompact&&(i.isCompact=t.isCompact),t.isVertical&&(i.isVertical=!0),o instanceof Zo?i.items.bindTo(o).using(a=>a):i.items.addMany(o),n.panelView.children.add(i),i.items.delegate("execute").to(n)}function KD(n,e){n.on("change:isOpen",()=>{if(!n.isOpen)return;const t=e();t&&(typeof t.focus=="function"?t.focus():Pt("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:Co.low-10})}class QD{constructor(e){f(this,"editor");f(this,"_components",new Map);this.editor=e}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){this._components.set(dm(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new A("componentfactory-item-missing",this,{name:e});return this._components.get(dm(e)).callback(this.editor.locale)}has(e){return this._components.has(dm(e))}}function dm(n){return String(n).toLowerCase()}const v0="ck-tooltip",Yt=class Yt extends Ui(){constructor(t){super();f(this,"tooltipTextView");f(this,"balloonPanelView");f(this,"_currentElementWithTooltip",null);f(this,"_currentTooltipPosition",null);f(this,"_mutationObserver",null);f(this,"_pinTooltipDebounced");f(this,"_unpinTooltipDebounced");f(this,"_watchdogExcluded");if(Yt._editors.add(t),Yt._instance)return Yt._instance;Yt._instance=this,this.tooltipTextView=new De(t.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new gr(t.locale),this.balloonPanelView.class=v0,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=function(r){const s=new MutationObserver(()=>{r()});return{attach(i){s.observe(i,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){s.disconnect()}}}(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=ml(this._pinTooltip,600),this._unpinTooltipDebounced=ml(this._unpinTooltip,400),this.listenTo(ke.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(ke.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(ke.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(ke.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(ke.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(ke.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(t){const r=t.ui.view&&t.ui.view.body;Yt._editors.delete(t),this.stopListening(t.ui),r&&r.has(this.balloonPanelView)&&r.remove(this.balloonPanelView),Yt._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Yt._instance=null)}static getPositioningFunctions(t){const r=Yt.defaultBalloonPositions;return{s:[r.southArrowNorth,r.southArrowNorthEast,r.southArrowNorthWest],n:[r.northArrowSouth],e:[r.eastArrowWest],w:[r.westArrowEast],sw:[r.southArrowNorthEast],se:[r.southArrowNorthWest]}[t]}_onKeyDown(t,r){r.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),r.stopPropagation())}_onEnterOrFocus(t,{target:r}){const s=hm(r);s?s!==this._currentElementWithTooltip&&(this._unpinTooltip(),t.name!=="focus"||s.matches(":hover")?this._pinTooltipDebounced(s,fm(s)):this._pinTooltip(s,fm(s))):t.name==="focus"&&this._unpinTooltip()}_onLeaveOrBlur(t,{target:r,relatedTarget:s}){if(t.name==="mouseleave"){if(!Vo(r))return;const i=this.balloonPanelView.element,o=i&&(i===s||i.contains(s)),a=!o&&r===i;if(o)return void this._unpinTooltipDebounced.cancel();if(!a&&this._currentElementWithTooltip&&r!==this._currentElementWithTooltip)return;const l=hm(r),c=hm(s);(a||l&&l!==c)&&this._unpinTooltipDebounced()}else{if(this._currentElementWithTooltip&&r!==this._currentElementWithTooltip)return;this._unpinTooltipDebounced()}}_onScroll(t,{target:r}){this._currentElementWithTooltip&&(r.contains(this.balloonPanelView.element)&&r.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(t,{text:r,position:s,cssClass:i}){this._unpinTooltip();const o=Yh(Yt._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=r,this.balloonPanelView.class=[v0,i].filter(a=>a).join(" "),this.balloonPanelView.pin({target:t,positions:Yt.getPositioningFunctions(s)}),this._mutationObserver.attach(t);for(const a of Yt._editors)this.listenTo(a.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=t,this._currentTooltipPosition=s}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const t of Yt._editors)this.stopListening(t.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const t=fm(this._currentElementWithTooltip);Vs(this._currentElementWithTooltip)&&t.text?this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Yt.getPositioningFunctions(t.position)}):this._unpinTooltip()}};f(Yt,"defaultBalloonPositions",gr.generatePositions({heightOffset:5,sideOffset:13})),f(Yt,"_editors",new Set),f(Yt,"_instance",null);let dg=Yt;function hm(n){return Vo(n)?n.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function fm(n){return{text:n.dataset.ckeTooltipText,position:n.dataset.ckeTooltipPosition||"s",cssClass:n.dataset.ckeTooltipClass||""}}class ZD extends Ui(){constructor(t){super();f(this,"editor");f(this,"_balloonView");f(this,"_showBalloonThrottled");f(this,"_lastFocusedEditableElement");this.editor=t,this._balloonView=null,this._lastFocusedEditableElement=null,this._showBalloonThrottled=ZE(this._showBalloon.bind(this),50,{leading:!0}),t.on("ready",this._handleEditorReady.bind(this))}destroy(){const t=this._balloonView;t&&(t.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const t=this.editor;(t.config.get("ui.poweredBy.forceVisible")||xj(t.config.get("licenseKey"))!=="VALID")&&t.ui.view&&(t.ui.focusTracker.on("change:isFocused",(r,s,i)=>{this._updateLastFocusedEditableElement(),i?this._showBalloon():this._hideBalloon()}),t.ui.focusTracker.on("change:focusedElement",(r,s,i)=>{this._updateLastFocusedEditableElement(),i&&this._showBalloon()}),t.ui.on("update",()=>{this._showBalloonThrottled()}))}_createBalloonView(){const t=this.editor,r=this._balloonView=new gr,s=_0(t),i=new JD(t.locale,s.label);r.content.add(i),r.set({class:"ck-powered-by-balloon"}),t.ui.view.body.add(r),this._balloonView=r}_showBalloon(){if(!this._lastFocusedEditableElement)return;const t=function(r,s){const i=_0(r),o=i.side==="right"?function(a,l){return w0(a,l,(c,u)=>c.left+c.width-u.width-l.horizontalOffset)}(s,i):function(a,l){return w0(a,l,c=>c.left+l.horizontalOffset)}(s,i);return{target:s,positions:[o]}}(this.editor,this._lastFocusedEditableElement);t&&(this._balloonView||this._createBalloonView(),this._balloonView.pin(t))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_updateLastFocusedEditableElement(){const t=this.editor,r=t.ui.focusTracker.isFocused,s=t.ui.focusTracker.focusedElement;if(!r||!s)return void(this._lastFocusedEditableElement=null);const i=Array.from(t.ui.getEditableElementsNames()).map(o=>t.ui.getEditableElement(o));i.includes(s)?this._lastFocusedEditableElement=s:this._lastFocusedEditableElement=i[0]}}class JD extends De{constructor(e,t){super(e);const r=new ji,s=this.bindTemplate;r.set({content:`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`,isColorInherited:!1}),r.extendTemplate({attributes:{style:{width:"53px",height:"10px"}}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],r],on:{dragstart:s.to(i=>i.preventDefault())}}]})}}function w0(n,e,t){return(r,s)=>{const i=new Je(n);if(i.width<350||i.height<50)return null;let o;o=e.position==="inside"?i.bottom-s.height:i.bottom-s.height/2,o-=e.verticalOffset;const a=t(i,s),l=r.clone().moveTo(a,o).getIntersection(s.clone().moveTo(a,o)).getVisible();return!l||l.getArea()<s.getArea()?null:{top:o,left:a,name:`position_${e.position}-side_${e.side}`,config:{withArrow:!1}}}}function _0(n){const e=n.config.get("ui.poweredBy"),t=e&&e.position||"border";return{position:t,label:"Powered by",verticalOffset:t==="inside"?5:0,horizontalOffset:5,side:n.locale.contentLanguageDirection==="ltr"?"right":"left",...e}}const b0={POLITE:"polite",ASSERTIVE:"assertive"};class GD{constructor(e){f(this,"editor");f(this,"view");this.editor=e,e.once("ready",()=>{for(const t of Object.values(b0))this.announce("",t)})}announce(e,t=b0.POLITE){const r=this.editor;if(!r.ui.view)return;this.view||(this.view=new YD(r.locale),r.ui.view.body.add(this.view));const{politeness:s,isUnsafeHTML:i}=typeof t=="string"?{politeness:t}:t;let o=this.view.regionViews.find(a=>a.politeness===s);o||(o=new XD(r,s),this.view.regionViews.add(o)),o.announce({announcement:e,isUnsafeHTML:i})}}class YD extends De{constructor(t){super(t);f(this,"regionViews");this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class XD extends De{constructor(t,r){super(t.locale);f(this,"politeness");f(this,"_domConverter");f(this,"_pruneAnnouncementsInterval");this.setTemplate({tag:"div",attributes:{"aria-live":r,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),t.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=r,this._domConverter=t.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:t,isUnsafeHTML:r}){if(!t.trim().length)return;const s=document.createElement("li");r?this._domConverter.setContentOf(s,t):s.innerText=t,this._listElement.appendChild(s)}get _listElement(){return this.element.querySelector("ul")}}class sC extends cu{constructor(e,t){super(e);const r=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:r.to("mouseenter")}}),this.delegate("mouseenter").to(t)}}const oa={toggleMenusAndFocusItemsOnHover(n){n.on("menu:mouseenter",e=>{if(n.isFocusBorderEnabled||n.isOpen){if(n.isOpen)for(const t of n.menus){const r=e.path[0],s=r instanceof sC&&r.children.first===t;t.isOpen=(e.path.includes(t)||s)&&t.isEnabled}e.source.focus()}})},focusCycleMenusOnArrows(n){const e=n.locale.uiLanguageDirection==="rtl";function t(r,s){const i=n.children.getIndex(r),o=r.isOpen,a=n.children.length,l=n.children.get((i+a+s)%a);r.isOpen=!1,o&&(l.isOpen=!0),l.buttonView.focus()}n.on("menu:arrowright",r=>{t(r.source,e?-1:1)}),n.on("menu:arrowleft",r=>{t(r.source,e?1:-1)})},closeMenusWhenTheBarCloses(n){n.on("change:isOpen",()=>{n.isOpen||n.menus.forEach(e=>{e.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(n){n.on("menu:change:isOpen",(e,t,r)=>{r&&n.menus.filter(s=>e.source.parentMenuView===s.parentMenuView&&e.source!==s&&s.isOpen).forEach(s=>{s.isOpen=!1})})},closeOnClickOutside(n){HS({emitter:n,activator:()=>n.isOpen,callback:()=>n.close(),contextElements:()=>n.children.map(e=>e.element)})},enableFocusHighlightOnInteraction(n){let e=!1;n.on("change:isOpen",(t,r,s)=>{s||(e||(n.isFocusBorderEnabled=!1),e=!1)}),n.listenTo(n.element,"keydown",()=>{e=!0},{useCapture:!0}),n.listenTo(n.element,"keyup",()=>{e=!1},{useCapture:!0}),n.listenTo(n.element,"focus",()=>{e&&(n.isFocusBorderEnabled=!0)},{useCapture:!0})}},Ws={openAndFocusPanelOnArrowDownKey(n){n.keystrokes.set("arrowdown",(e,t)=>{n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen||(n.isOpen=!0),n.panelView.focus(),t())})},openOnArrowRightKey(n){const e=n.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";n.keystrokes.set(e,(t,r)=>{n.focusTracker.focusedElement===n.buttonView.element&&n.isEnabled&&(n.isOpen||(n.isOpen=!0),n.panelView.focus(),r())})},openOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!0})},toggleOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!n.isOpen})},openAndFocusOnEnterKeyPress(n){n.keystrokes.set("enter",(e,t)=>{n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen=!0,n.panelView.focus(),t())})},closeOnArrowLeftKey(n){const e=n.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";n.keystrokes.set(e,(t,r)=>{n.isOpen&&(n.isOpen=!1,n.focus(),r())})},closeOnEscKey(n){n.keystrokes.set("esc",(e,t)=>{n.isOpen&&(n.isOpen=!1,n.focus(),t())})},closeOnParentClose(n){n.parentMenuView.on("change:isOpen",(e,t,r)=>{r||e.source!==n.parentMenuView||(n.isOpen=!1)})}},eF={southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,e)=>({top:n.bottom,left:n.left-e.width+n.width,name:"sw"}),northEast:(n,e)=>({top:n.top-e.height,left:n.left,name:"ne"}),northWest:(n,e)=>({top:n.top-e.height,left:n.left-e.width+n.width,name:"nw"}),eastSouth:n=>({top:n.top,left:n.right-5,name:"es"}),eastNorth:(n,e)=>({top:n.top-e.height,left:n.right-5,name:"en"}),westSouth:(n,e)=>({top:n.top,left:n.left-e.width+5,name:"ws"}),westNorth:(n,e)=>({top:n.top-e.height,left:n.left-e.width+5,name:"wn"})},tF=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:comment","menuBar:insertMergeField"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function nF(n){let e;return e="items"in n&&n.items?{items:n.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...n}:{items:$r(tF),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...n},e}function rF({normalizedConfig:n,locale:e,componentFactory:t,extraItems:r}){const s=$r(n);return x0(n,s,r),function(i,o){const a=o.removeItems,l=[];o.items=o.items.filter(({menuId:c})=>!a.includes(c)||(l.push(c),!1)),La(o.items,c=>{c.groups=c.groups.filter(({groupId:u})=>!a.includes(u)||(l.push(u),!1));for(const u of c.groups)u.items=u.items.filter(d=>{const h=oC(d);return!a.includes(h)||(l.push(h),!1)})});for(const c of a)l.includes(c)||Pt("menu-bar-item-could-not-be-removed",{menuBarConfig:i,itemName:c})}(n,s),x0(n,s,s.addItems),function(i,o,a){La(o.items,l=>{for(const c of l.groups)c.items=c.items.filter(u=>{const d=typeof u=="string"&&!a.has(u);return d&&!o.isUsingDefaultConfig&&Pt("menu-bar-item-unavailable",{menuBarConfig:i,parentMenuConfig:$r(l),componentName:u}),!d})})}(n,s,t),iC(n,s),function(i,o){const a=o.t,l={File:a({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:a({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:a({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:a({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:a({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:a({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:a({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:a({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:a({string:"Font",id:"MENU_BAR_MENU_FONT"})};La(i.items,c=>{c.label in l&&(c.label=l[c.label])})}(s,e),s}function x0(n,e,t){const r=[];if(t.length!=0){for(const i of t){const o=iF(i.position),a=oF(i.position);if(typeof(s=i)=="object"&&"menu"in s)if(a){const l=e.items.findIndex(c=>c.menuId===a);l!=-1?o==="before"?(e.items.splice(l,0,i.menu),r.push(i)):o==="after"&&(e.items.splice(l+1,0,i.menu),r.push(i)):k0(e,i.menu,a,o)&&r.push(i)}else o==="start"?(e.items.unshift(i.menu),r.push(i)):o==="end"&&(e.items.push(i.menu),r.push(i));else sF(i)?La(e.items,l=>{if(l.menuId===a)o==="start"?(l.groups.unshift(i.group),r.push(i)):o==="end"&&(l.groups.push(i.group),r.push(i));else{const c=l.groups.findIndex(u=>u.groupId===a);c!==-1&&(o==="before"?(l.groups.splice(c,0,i.group),r.push(i)):o==="after"&&(l.groups.splice(c+1,0,i.group),r.push(i)))}}):k0(e,i.item,a,o)&&r.push(i)}var s;for(const i of t)r.includes(i)||Pt("menu-bar-item-could-not-be-added",{menuBarConfig:n,addedItemConfig:i})}}function k0(n,e,t,r){let s=!1;return La(n.items,i=>{for(const{groupId:o,items:a}of i.groups){if(s)return;if(o===t)r==="start"?(a.unshift(e),s=!0):r==="end"&&(a.push(e),s=!0);else{const l=a.findIndex(c=>oC(c)===t);l!==-1&&(r==="before"?(a.splice(l,0,e),s=!0):r==="after"&&(a.splice(l+1,0,e),s=!0))}}}),s}function iC(n,e){const t=e.isUsingDefaultConfig;let r=!1;e.items=e.items.filter(s=>!!s.groups.length||(mm(n,s,t),!1)),e.items.length?(La(e.items,s=>{s.groups=s.groups.filter(i=>!!i.items.length||(r=!0,!1));for(const i of s.groups)i.items=i.items.filter(o=>!(aC(o)&&!o.groups.length)||(mm(n,o,t),r=!0,!1))}),r&&iC(n,e)):mm(n,n,t)}function mm(n,e,t){t||Pt("menu-bar-menu-empty",{menuBarConfig:n,emptyMenuConfig:e})}function La(n,e){if(Array.isArray(n))for(const r of n)t(r);function t(r){e(r);for(const s of r.groups)for(const i of s.items)aC(i)&&t(i)}}function sF(n){return typeof n=="object"&&"group"in n}function iF(n){return n.startsWith("start")?"start":n.startsWith("end")?"end":n.startsWith("after")?"after":"before"}function oF(n){const e=n.match(/^[^:]+:(.+)/);return e?e[1]:null}function oC(n){return typeof n=="string"?n:n.menuId}function aC(n){return typeof n=="object"&&"menuId"in n}class aF extends sn(){constructor(t){super();f(this,"editor");f(this,"componentFactory");f(this,"focusTracker");f(this,"tooltipManager");f(this,"poweredBy");f(this,"ariaLiveAnnouncer");f(this,"isReady",!1);f(this,"_editableElementsMap",new Map);f(this,"_focusableToolbarDefinitions",[]);f(this,"_extraMenuBarElements",[]);f(this,"_lastFocusedForeignElement",null);const r=t.editing.view;this.editor=t,this.componentFactory=new QD(t),this.focusTracker=new Wi,this.tooltipManager=new dg(t),this.poweredBy=new ZD(t),this.ariaLiveAnnouncer=new GD(t),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(r.document,"layoutChanged",this.update.bind(this)),this.listenTo(r,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy();for(const t of this._editableElementsMap.values())t.ckeditorInstance=null,this.editor.keystrokes.stopListening(t);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(t,r){this._editableElementsMap.set(t,r),r.ckeditorInstance||(r.ckeditorInstance=this.editor),this.focusTracker.add(r);const s=()=>{this.editor.editing.view.getDomRoot(t)||this.editor.keystrokes.listenTo(r)};this.isReady?s():this.once("ready",s)}removeEditableElement(t){const r=this._editableElementsMap.get(t);r&&(this._editableElementsMap.delete(t),this.editor.keystrokes.stopListening(r),this.focusTracker.remove(r),r.ckeditorInstance=null)}getEditableElement(t="main"){return this._editableElementsMap.get(t)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(t,r={}){t.isRendered?(this.focusTracker.add(t.element),this.editor.keystrokes.listenTo(t.element)):t.once("render",()=>{this.focusTracker.add(t.element),this.editor.keystrokes.listenTo(t.element)}),this._focusableToolbarDefinitions.push({toolbarView:t,options:r})}extendMenuBar(t){this._extraMenuBarElements.push(t)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_initMenuBar(t){const r=t.element;this.focusTracker.add(r),this.editor.keystrokes.listenTo(r);const s=nF(this.editor.config.get("menuBar")||{});t.fillFromConfig(s,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(i,o)=>{r.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),o())}),this.editor.keystrokes.set("Alt+F9",(i,o)=>{r.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),t.isFocusBorderEnabled=!0,t.focus(),o())})}_readViewportOffsetFromConfig(){const t=this.editor,r=t.config.get("ui.viewportOffset");if(r)return r;const s=t.config.get("toolbar.viewportTopOffset");return s?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:s}):{top:0}}_initFocusTracking(){const t=this.editor;let r;t.keystrokes.set("Alt+F10",(s,i)=>{this._saveLastFocusedForeignElement();const o=this._getCurrentFocusedToolbarDefinition();o&&r||(r=this._getFocusableCandidateToolbarDefinitions());for(let a=0;a<r.length;a++){const l=r.shift();if(r.push(l),l!==o&&this._focusFocusableCandidateToolbar(l)){o&&o.options.afterBlur&&o.options.afterBlur();break}}i()}),t.keystrokes.set("Esc",(s,i)=>{const o=this._getCurrentFocusedToolbarDefinition();o&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):t.editing.view.focus(),o.options.afterBlur&&o.options.afterBlur(),i())})}_saveLastFocusedForeignElement(){const t=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(t)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(t)&&(this._lastFocusedForeignElement=t)}_getFocusableCandidateToolbarDefinitions(){const t=[];for(const r of this._focusableToolbarDefinitions){const{toolbarView:s,options:i}=r;(Vs(s.element)||i.beforeFocus)&&t.push(r)}return t.sort((r,s)=>E0(r)-E0(s)),t}_getCurrentFocusedToolbarDefinition(){for(const t of this._focusableToolbarDefinitions)if(t.toolbarView.element&&t.toolbarView.element.contains(this.focusTracker.focusedElement))return t;return null}_focusFocusableCandidateToolbar(t){const{toolbarView:r,options:{beforeFocus:s}}=t;return s&&s(),!!Vs(r.element)&&(r.focus(),!0)}_handleScrollToTheSelection(t,r){const s={top:0,bottom:0,left:0,right:0,...this.viewportOffset};r.viewportOffset.top+=s.top,r.viewportOffset.bottom+=s.bottom,r.viewportOffset.left+=s.left,r.viewportOffset.right+=s.right}_bindBodyCollectionWithFocusTracker(){const t=this.view.body;for(const r of t)this.focusTracker.add(r.element);t.on("add",(r,s)=>{this.focusTracker.add(s.element)}),t.on("remove",(r,s)=>{this.focusTracker.remove(s.element)})}}function E0(n){const{toolbarView:e,options:t}=n;let r=10;return Vs(e.element)&&r--,t.isContextual&&r--,r}class lF extends De{constructor(t){super(t);f(this,"body");f(this,"menuBarView");this.body=new PD(t)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class cF extends lF{constructor(t){super(t);f(this,"top");f(this,"main");f(this,"_voiceLabelView");this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:t.uiLanguageDirection,lang:t.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const t=this.t,r=new QS;return r.text=t("Rich Text Editor"),r.extendTemplate({attributes:{class:"ck-voice-label"}}),r}}class uF extends De{constructor(t,r,s){super(t);f(this,"name",null);f(this,"_editingView");f(this,"_editableElement");f(this,"_hasExternalElement");this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:t.contentLanguage,dir:t.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=s,this._hasExternalElement=!!this._editableElement,this._editingView=r}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const t=this._editingView;function r(s){t.change(i=>{const o=t.document.getRoot(s.name);i.addClass(s.isFocused?"ck-focused":"ck-blurred",o),i.removeClass(s.isFocused?"ck-blurred":"ck-focused",o)})}t.isRenderingInProgress?function s(i){t.once("change:isRenderingInProgress",(o,a,l)=>{l?s(i):r(i)})}(this):r(this)}}class dF extends uF{constructor(t,r,s,i={}){super(t,r,s);f(this,"_options");this._options=i,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const t=this._editingView;t.change(r=>{const s=t.document.getRoot(this.name);r.setAttribute("aria-label",this.getEditableAriaLabel(),s)})}getEditableAriaLabel(){const t=this.locale.t,r=this._options.label,s=this._editableElement,i=this.name;if(typeof r=="string")return r;if(typeof r=="object")return r[i];if(typeof r=="function")return r(this);if(s){const o=s.getAttribute("aria-label");if(o)return o}return t("Rich Text Editor. Editing area: %0",i)}}const aa=zy("px");class hF extends De{constructor(t){super(t);f(this,"content");f(this,"contentPanelElement");f(this,"_contentPanelPlaceholder");const r=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Pi({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:r.to("isSticky",s=>s?"block":"none"),height:r.to("isSticky",s=>s?aa(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Pi({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",r.if("isSticky","ck-sticky-panel__content_sticky"),r.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:r.to("isSticky",s=>s?aa(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:r.to("_stickyTopOffset",s=>s&&aa(s)),bottom:r.to("_stickyBottomOffset",s=>s&&aa(s)),marginLeft:r.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(ke.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive)return void this._unstick();const t=new Je(this.limiterElement);let r=t.getVisible();if(r){const s=new Je(ke.window);s.top+=this.viewportTopOffset,s.height-=this.viewportTopOffset,r=r.getIntersection(s)}if(r&&t.top<r.top){const s=r.top;if(s+this._contentPanelRect.height+this.limiterBottomOffset>r.bottom){const i=Math.max(t.bottom-r.bottom,0)+this.limiterBottomOffset;t.bottom-i>t.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(i):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<t.height?this._stickToTopOfAncestors(s):this._unstick()}else this._unstick()}_stickToTopOfAncestors(t){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=t,this._stickyBottomOffset=null,this._marginLeft=aa(-ke.window.scrollX)}_stickToBottomOfLimiter(t){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=t,this._marginLeft=aa(-ke.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Je(this.contentPanelElement)}}class fF extends nf{constructor(t){super(t);f(this,"arrowView");const r=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",s=>String(s)),"data-cke-tooltip-disabled":r.to("isOn")},on:{mouseenter:r.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new ji;return t.content=tv,t.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),t}}class mF extends De{constructor(t){super(t);f(this,"children");const r=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",r.to("position",s=>`ck-menu-bar__menu__panel_position_${s}`),r.if("isVisible","ck-hidden",s=>!s)],tabindex:"-1"},children:this.children,on:{selectstart:r.to(s=>{s.target.tagName.toLocaleLowerCase()!=="input"&&s.preventDefault()})}})}focus(t=1){this.children.length&&(t===1?this.children.first.focus():this.children.last.focus())}}const Ch=class Ch extends De{constructor(t){super(t);f(this,"buttonView");f(this,"panelView");f(this,"focusTracker");f(this,"keystrokes");const r=this.bindTemplate;this.buttonView=new fF(t),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new mF(t),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new qi,this.focusTracker=new Wi,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",r.to("class"),r.if("isEnabled","ck-disabled",s=>!s),r.if("parentMenuView","ck-menu-bar__menu_top-level",s=>!s)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),Ws.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(Ws.openOnButtonClick(this),Ws.openOnArrowRightKey(this),Ws.closeOnArrowLeftKey(this),Ws.openAndFocusOnEnterKeyPress(this),Ws.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),Ws.openAndFocusPanelOnArrowDownKey(this),Ws.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(t,r)=>{this.fire("arrowright"),r()}),this.keystrokes.set("arrowleft",(t,r)=>{this.fire("arrowleft"),r()})}_repositionPanelOnOpen(){this.on("change:isOpen",(t,r,s)=>{if(!s)return;const i=Ch._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=i?i.name:this._panelPositions[0].name})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:t,southWest:r,northEast:s,northWest:i,westSouth:o,eastSouth:a,westNorth:l,eastNorth:c}=eF;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[a,c,o,l]:[t,r,s,i]:this.parentMenuView?[o,l,a,c]:[r,t,i,s]}};f(Ch,"_getOptimalPosition",Uy);let Pc=Ch;class S0 extends YS{constructor(e){super(e),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const e=Array.from(this.items).some(t=>{const r=C0(t);return r&&r.isToggleable});this.items.forEach(t=>{const r=C0(t);r&&(r.hasCheckSpace=e)})}}function C0(n){return n instanceof cu?n.children.map(e=>function(t){return typeof t=="object"&&"buttonView"in t&&t.buttonView instanceof Di}(e)?e.buttonView:e).find(e=>e instanceof nf):null}class pF extends AD{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const P0=["mouseenter","arrowleft","arrowright","change:isOpen"];class gF extends De{constructor(t){super(t);f(this,"children");f(this,"menus",[]);const r=t.t,s=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",s.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":r("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(t,r,s=[]){const i=rF({normalizedConfig:t,locale:this.locale,componentFactory:r,extraItems:s}).items.map(o=>this._createMenu({componentFactory:r,menuDefinition:o}));this.children.addMany(i)}render(){super.render(),oa.toggleMenusAndFocusItemsOnHover(this),oa.closeMenusWhenTheBarCloses(this),oa.closeMenuWhenAnotherOnTheSameLevelOpens(this),oa.focusCycleMenusOnArrows(this),oa.closeOnClickOutside(this),oa.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const t of this.children)t.isOpen=!1}registerMenu(t,r=null){r?(t.delegate(...P0).to(r),t.parentMenuView=r):t.delegate(...P0).to(this,s=>"menu:"+s),t._attachBehaviors(),this.menus.push(t)}_createMenu({componentFactory:t,menuDefinition:r,parentMenuView:s}){const i=this.locale,o=new Pc(i);return this.registerMenu(o,s),o.buttonView.set({label:r.label}),o.once("change:isOpen",()=>{const a=new S0(i);a.ariaLabel=r.label,o.panelView.children.add(a),a.items.addMany(this._createMenuItems({menuDefinition:r,parentMenuView:o,componentFactory:t}))}),o}_createMenuItems({menuDefinition:t,parentMenuView:r,componentFactory:s}){const i=this.locale,o=[];for(const a of t.groups){for(const l of a.items){const c=new sC(i,r);if(At(l))c.children.add(this._createMenu({componentFactory:s,menuDefinition:l,parentMenuView:r}));else{const u=this._createMenuItemContentFromFactory({componentName:l,componentFactory:s,parentMenuView:r});if(!u)continue;c.children.add(u)}o.push(c)}a!==t.groups[t.groups.length-1]&&o.push(new GS(i))}return o}_createMenuItemContentFromFactory({componentName:t,parentMenuView:r,componentFactory:s}){const i=s.create(t);return i instanceof Pc||i instanceof CD||i instanceof pF?(this._registerMenuTree(i,r),i.on("execute",()=>{this.close()}),i):(Pt("menu-bar-component-unsupported",{componentName:t,componentView:i}),null)}_registerMenuTree(t,r){if(!(t instanceof Pc))return void t.delegate("mouseenter").to(r);this.registerMenu(t,r);const s=t.panelView.children.filter(o=>o instanceof S0)[0];if(!s)return void t.delegate("mouseenter").to(r);const i=s.items.filter(o=>o instanceof cu);for(const o of i)this._registerMenuTree(o.children.get(0),t)}_setupIsOpenUpdater(){let t;this.on("menu:change:isOpen",(r,s,i)=>{clearTimeout(t),i?this.isOpen=!0:t=setTimeout(()=>{this.isOpen=Array.from(this.children).some(o=>o.isOpen)},0)})}}class A3 extends nt(){constructor(){super(...arguments);f(this,"_stack",[])}add(t,r){const s=this._stack,i=s[0];this._insertDescriptor(t);const o=s[0];i===o||pm(i,o)||this.fire("change:top",{oldDescriptor:i,newDescriptor:o,writer:r})}remove(t,r){const s=this._stack,i=s[0];this._removeDescriptor(t);const o=s[0];i===o||pm(i,o)||this.fire("change:top",{oldDescriptor:i,newDescriptor:o,writer:r})}_insertDescriptor(t){const r=this._stack,s=r.findIndex(o=>o.id===t.id);if(pm(t,r[s]))return;s>-1&&r.splice(s,1);let i=0;for(;r[i]&&yF(r[i],t);)i++;r.splice(i,0,t)}_removeDescriptor(t){const r=this._stack,s=r.findIndex(i=>i.id===t);s>-1&&r.splice(s,1)}}function pm(n,e){return n&&e&&n.priority==e.priority&&_h(n.classes)==_h(e.classes)}function yF(n,e){return n.priority>e.priority||!(n.priority<e.priority)&&_h(n.classes)>_h(e.classes)}function _h(n){return Array.isArray(n)?n.sort().join(","):n}new DOMParser().parseFromString('<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',"image/svg+xml").firstChild;const gm=/^data:(\S*?);base64,/;class O3 extends nt(){constructor(t,r,s){super();f(this,"file");f(this,"xhr");f(this,"_token");f(this,"_apiAddress");if(!t)throw new A("fileuploader-missing-file",null);if(!r)throw new A("fileuploader-missing-token",null);if(!s)throw new A("fileuploader-missing-api-address",null);this.file=function(i){if(typeof i!="string")return!1;const o=i.match(gm);return!(!o||!o.length)}(t)?function(i,o=512){try{const a=i.match(gm)[1],l=atob(i.replace(gm,"")),c=[];for(let u=0;u<l.length;u+=o){const d=l.slice(u,u+o),h=new Array(d.length);for(let p=0;p<d.length;p++)h[p]=d.charCodeAt(p);c.push(new Uint8Array(h))}return new Blob(c,{type:a})}catch{throw new A("fileuploader-decoding-image-data-error",null)}}(t):t,this._token=r,this._apiAddress=s}onProgress(t){return this.on("progress",(r,s)=>t(s)),this}onError(t){return this.once("error",(r,s)=>t(s)),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const t=new XMLHttpRequest;t.open("POST",this._apiAddress),t.setRequestHeader("Authorization",this._token.value),t.responseType="json",this.xhr=t}_attachXHRListeners(){const t=this.xhr,r=s=>()=>this.fire("error",s);t.addEventListener("error",r("Network Error")),t.addEventListener("abort",r("Abort")),t.upload&&t.upload.addEventListener("progress",s=>{s.lengthComputable&&this.fire("progress",{total:s.total,uploaded:s.loaded})}),t.addEventListener("load",()=>{const s=t.status,i=t.response;if(s<200||s>299)return this.fire("error",i.message||i.error)})}_sendRequest(){const t=new FormData,r=this.xhr;return t.append("file",this.file),new Promise((s,i)=>{r.addEventListener("load",()=>{const o=r.status,a=r.response;return o<200||o>299?a.message?i(new A("fileuploader-uploading-data-failed",this,{message:a.message})):i(a.error):s(a)}),r.addEventListener("error",()=>i(new Error("Network Error"))),r.addEventListener("abort",()=>i(new Error("Abort"))),r.send(t)})}}class vF extends aF{constructor(t,r){super(t);f(this,"view");f(this,"_toolbarConfig");f(this,"_elementReplacer");this.view=r,this._toolbarConfig=eC(t.config.get("toolbar")),this._elementReplacer=new tj,this.listenTo(t.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(t){const r=this.editor,s=this.view,i=r.editing.view,o=s.editable,a=i.document.getRoot();o.name=a.rootName,s.render();const l=o.element;this.setEditableElement(o.name,l),s.editable.bind("isFocused").to(this.focusTracker),i.attachDomRoot(l),t&&this._elementReplacer.replace(t,this.element),this._initPlaceholder(),this._initToolbar(),s.menuBarView&&this._initMenuBar(s.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const t=this.view,r=this.editor.editing.view;this._elementReplacer.restore(),r.getDomRoot(t.editable.name)&&r.detachDomRoot(t.editable.name),t.destroy()}_initToolbar(){const t=this.view;t.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),t.stickyPanel.limiterElement=t.element,t.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:r})=>r||0),t.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(t.toolbar)}_initPlaceholder(){const t=this.editor,r=t.editing.view,s=r.document.getRoot(),i=t.sourceElement;let o;const a=t.config.get("placeholder");a&&(o=typeof a=="string"?a:a[this.view.editable.name]),!o&&i&&i.tagName.toLowerCase()==="textarea"&&(o=i.getAttribute("placeholder")),o&&(s.placeholder=o),Aj({view:r,element:s,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:t}=this.view,r=this.editor.plugins.get("ContextualBalloon");r.on("getPositionOptions",i=>{const o=i.return;if(!o||!t.isSticky||!t.element)return;const a=new Je(t.element).height,l=typeof o.target=="function"?o.target():o.target,c=typeof o.limiter=="function"?o.limiter():o.limiter;if(l&&c&&new Je(l).height>=new Je(c).height-a)return;const u={...o.viewportOffsetConfig},d=(u.top||0)+a;i.return={...o,viewportOffsetConfig:{...u,top:d}}},{priority:"low"});const s=()=>{r.visibleView&&r.updatePosition()};this.listenTo(t,"change:isSticky",s),this.listenTo(this.editor.ui,"change:viewportOffset",s)}_handleScrollToTheSelectionWithStickyPanel(t,r,s){const i=this.view.stickyPanel;if(i.isSticky){const o=new Je(i.element).height;r.viewportOffset.top+=o}else{const o=()=>{this.editor.editing.view.scrollToTheSelection(s)};this.listenTo(i,"change:isSticky",o),setTimeout(()=>{this.stopListening(i,"change:isSticky",o)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const t=this.view.stickyPanel,r=this.editor.plugins.get("Dialog");r.on("show",()=>{const s=r.view;s.on("moveTo",(i,o)=>{if(!t.isSticky||s.wasMoved)return;const a=new Je(t.contentPanelElement);o[1]<a.bottom+vh.defaultOffset&&(o[1]=a.bottom+vh.defaultOffset)},{priority:"high"})},{priority:"low"})}}class wF extends cF{constructor(t,r,s={}){super(t);f(this,"stickyPanel");f(this,"toolbar");f(this,"editable");this.stickyPanel=new hF(t),this.toolbar=new tC(t,{shouldGroupWhenFull:s.shouldToolbarGroupWhenFull}),s.useMenuBar&&(this.menuBarView=new gF(t)),this.editable=new dF(t,r,void 0,{label:s.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class _F extends cg(ha){constructor(t,r={}){if(!ld(t)&&r.initialData!==void 0)throw new A("editor-create-initial-data",null);super(r);f(this,"ui");this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",function(a){return ld(a)?oj(a):a}(t)),ld(t)&&(this.sourceElement=t),this.model.document.createRoot();const s=!this.config.get("toolbar.shouldNotGroupWhenFull"),i=this.config.get("menuBar"),o=new wF(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:s,useMenuBar:i.isVisible,label:this.config.get("label")});this.ui=new vF(this,o),pD(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(t,r={}){return new Promise(s=>{const i=new this(t,r);s(i.initPlugins().then(()=>i.ui.init(ld(t)?t:null)).then(()=>i.data.init(i.config.get("initialData"))).then(()=>i.fire("ready")).then(()=>i))})}}function ld(n){return Vo(n)}ku("Ctrl+A");const bF=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:n,typeAttribute:e,listType:t}of bF);ku("Ctrl+Enter");ku("Ctrl+Enter");function xF(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let gl={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const kF=/[&<>"']/,EF=/[&<>"']/g,SF=/[<>"']|&(?!#?\w+;)/,CF=/[<>"']|&(?!#?\w+;)/g,PF={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},T0=n=>PF[n];function nn(n,e){if(e){if(kF.test(n))return n.replace(EF,T0)}else if(SF.test(n))return n.replace(CF,T0);return n}const TF=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function lC(n){return n.replace(TF,(e,t)=>(t=t.toLowerCase())==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const AF=/(^|[^\[])\^/g;function lt(n,e){n=n.source||n,e=e||"";const t={replace:(r,s)=>(s=(s=s.source||s).replace(AF,"$1"),n=n.replace(r,s),t),getRegex:()=>new RegExp(n,e)};return t}const OF=/[^\w:]/g,NF=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function A0(n,e,t){if(n){let r;try{r=decodeURIComponent(lC(t)).replace(OF,"").toLowerCase()}catch{return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}e&&!NF.test(t)&&(t=function(r,s){cd[" "+r]||(RF.test(r)?cd[" "+r]=r+"/":cd[" "+r]=Td(r,"/",!0)),r=cd[" "+r];const i=r.indexOf(":")===-1;return s.substring(0,2)==="//"?i?s:r.replace(MF,"$1")+s:s.charAt(0)==="/"?i?s:r.replace(IF,"$1")+s:r+s}(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const cd={},RF=/^[^:]+:\/*[^/]*$/,MF=/^([^:]+:)[\s\S]*$/,IF=/^([^:]+:\/*[^/]*)[\s\S]*$/,bh={exec:function(){}};function Fr(n){let e,t,r=1;for(;r<arguments.length;r++)for(t in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function O0(n,e){const t=n.replace(/\|/g,(s,i,o)=>{let a=!1,l=i;for(;--l>=0&&o[l]==="\\";)a=!a;return a?"|":" |"}).split(/ \|/);let r=0;if(t[0].trim()||t.shift(),t.length>0&&!t[t.length-1].trim()&&t.pop(),t.length>e)t.splice(e);else for(;t.length<e;)t.push("");for(;r<t.length;r++)t[r]=t[r].trim().replace(/\\\|/g,"|");return t}function Td(n,e,t){const r=n.length;if(r===0)return"";let s=0;for(;s<r;){const i=n.charAt(r-s-1);if(i!==e||t){if(i===e||!t)break;s++}else s++}return n.substr(0,r-s)}function cC(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function N0(n,e){if(e<1)return"";let t="";for(;e>1;)1&e&&(t+=n),e>>=1,n+=n;return t+n}function R0(n,e,t,r){const s=e.href,i=e.title?nn(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:t,href:s,title:i,text:o,tokens:r.inlineTokens(o,[])};return r.state.inLink=!1,a}return{type:"image",raw:t,href:s,title:i,text:nn(o)}}class hg{constructor(e){this.options=e||gl}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Td(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],s=function(i,o){const a=i.match(/^(\s+)(?:```)/);if(a===null)return o;const l=a[1];return o.split(`
`).map(c=>{const u=c.match(/^\s+/);if(u===null)return c;const[d]=u;return d.length>=l.length?c.slice(l.length):c}).join(`
`)}(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim():t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=Td(r,"#");this.options.pedantic?r=i.trim():i&&!/ $/.test(i)||(r=i.trim())}const s={type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const r=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(r,[]),text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r,s,i,o,a,l,c,u,d,h,p,_,v=t[1].trim();const w=v.length>1,y={type:"list",raw:"",ordered:w,start:w?+v.slice(0,-1):"",loose:!1,items:[]};v=w?`\\d{1,9}\\${v.slice(-1)}`:`\\${v}`,this.options.pedantic&&(v=w?v:"[*+-]");const g=new RegExp(`^( {0,3}${v})((?: [^\\n]*)?(?:\\n|$))`);for(;e&&(_=!1,t=g.exec(e))&&!this.rules.block.hr.test(e);){if(r=t[0],e=e.substring(r.length),u=t[2].split(`
`,1)[0],d=e.split(`
`,1)[0],this.options.pedantic?(o=2,p=u.trimLeft()):(o=t[2].search(/[^ ]/),o=o>4?1:o,p=u.slice(o),o+=t[1].length),l=!1,!u&&/^ *$/.test(d)&&(r+=d+`
`,e=e.substring(d.length+1),_=!0),!_){const x=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;e&&(h=e.split(`
`,1)[0],u=h,this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!x.test(u));){if(u.search(/[^ ]/)>=o||!u.trim())p+=`
`+u.slice(o);else{if(l)break;p+=`
`+u}l||u.trim()||(l=!0),r+=h+`
`,e=e.substring(h.length+1)}}y.loose||(c?y.loose=!0:/\n *\n *$/.test(r)&&(c=!0)),this.options.gfm&&(s=/^\[[ xX]\] /.exec(p),s&&(i=s[0]!=="[ ] ",p=p.replace(/^\[[ xX]\] +/,""))),y.items.push({type:"list_item",raw:r,task:!!s,checked:i,loose:!1,text:p}),y.raw+=r}y.items[y.items.length-1].raw=r.trimRight(),y.items[y.items.length-1].text=p.trimRight(),y.raw=y.raw.trimRight();const b=y.items.length;for(a=0;a<b;a++){this.lexer.state.top=!1,y.items[a].tokens=this.lexer.blockTokens(y.items[a].text,[]);const x=y.items[a].tokens.filter(N=>N.type==="space"),C=x.every(N=>{const k=N.raw.split("");let P=0;for(const j of k)if(j===`
`&&(P+=1),P>1)return!0;return!1});!y.loose&&x.length&&C&&(y.loose=!0,y.items[a].loose=!0)}return y}}html(e){const t=this.rules.block.html.exec(e);if(t){const r={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};return this.options.sanitize&&(r.type="paragraph",r.text=this.options.sanitizer?this.options.sanitizer(t[0]):nn(t[0]),r.tokens=[],this.lexer.inline(r.text,r.tokens)),r}}def(e){const t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}table(e){const t=this.rules.block.table.exec(e);if(t){const r={type:"table",header:O0(t[1]).map(s=>({text:s})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=t[0];let s,i,o,a,l=r.align.length;for(s=0;s<l;s++)/^ *-+: *$/.test(r.align[s])?r.align[s]="right":/^ *:-+: *$/.test(r.align[s])?r.align[s]="center":/^ *:-+ *$/.test(r.align[s])?r.align[s]="left":r.align[s]=null;for(l=r.rows.length,s=0;s<l;s++)r.rows[s]=O0(r.rows[s],r.header.length).map(c=>({text:c}));for(l=r.header.length,i=0;i<l;i++)r.header[i].tokens=[],this.lexer.inlineTokens(r.header[i].text,r.header[i].tokens);for(l=r.rows.length,i=0;i<l;i++)for(a=r.rows[i],o=0;o<a.length;o++)a[o].tokens=[],this.lexer.inlineTokens(a[o].text,a[o].tokens);return r}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const r={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}text(e){const t=this.rules.block.text.exec(e);if(t){const r={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:nn(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):nn(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const o=Td(r.slice(0,-1),"\\");if((r.length-o.length)%2==0)return}else{const o=function(a,l){if(a.indexOf(l[1])===-1)return-1;const c=a.length;let u=0,d=0;for(;d<c;d++)if(a[d]==="\\")d++;else if(a[d]===l[0])u++;else if(a[d]===l[1]&&(u--,u<0))return d;return-1}(t[2],"()");if(o>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let s=t[2],i="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);o&&(s=o[1],i=o[3])}else i=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(r)?s.slice(1):s.slice(1,-1)),R0(t,{href:s&&s.replace(this.rules.inline._escapes,"$1"),title:i&&i.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let s=(r[2]||r[1]).replace(/\s+/g," ");if(s=t[s.toLowerCase()],!s||!s.href){const i=r[0].charAt(0);return{type:"text",raw:i,text:i}}return R0(r,s,r[0],this.lexer)}}emStrong(e,t,r=""){let s=this.rules.inline.emStrong.lDelim.exec(e);if(!s||s[3]&&r.match(/[\p{L}\p{N}]/u))return;const i=s[1]||s[2]||"";if(!i||i&&(r===""||this.rules.inline.punctuation.exec(r))){const o=s[0].length-1;let a,l,c=o,u=0;const d=s[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+o);(s=d.exec(t))!=null;){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(l=a.length,s[3]||s[4]){c+=l;continue}if((s[5]||s[6])&&o%3&&!((o+l)%3)){u+=l;continue}if(c-=l,c>0)continue;if(l=Math.min(l,l+c+u),Math.min(o,l)%2){const p=e.slice(1,o+s.index+l);return{type:"em",raw:e.slice(0,o+s.index+l+1),text:p,tokens:this.lexer.inlineTokens(p,[])}}const h=e.slice(2,o+s.index+l-1);return{type:"strong",raw:e.slice(0,o+s.index+l+1),text:h,tokens:this.lexer.inlineTokens(h,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const s=/[^ ]/.test(r),i=/^ /.test(r)&&/ $/.test(r);return s&&i&&(r=r.substring(1,r.length-1)),r=nn(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){const r=this.rules.inline.autolink.exec(e);if(r){let s,i;return r[2]==="@"?(s=nn(this.options.mangle?t(r[1]):r[1]),i="mailto:"+s):(s=nn(r[1]),i=s),{type:"link",raw:r[0],text:s,href:i,tokens:[{type:"text",raw:s,text:s}]}}}url(e,t){let r;if(r=this.rules.inline.url.exec(e)){let s,i;if(r[2]==="@")s=nn(this.options.mangle?t(r[0]):r[0]),i="mailto:"+s;else{let o;do o=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(o!==r[0]);s=nn(r[0]),i=r[1]==="www."?"http://"+s:s}return{type:"link",raw:r[0],text:s,href:i,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(e,t){const r=this.rules.inline.text.exec(e);if(r){let s;return s=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):nn(r[0]):r[0]:nn(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:s}}}}const _e={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:bh,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};_e.def=lt(_e.def).replace("label",_e._label).replace("title",_e._title).getRegex(),_e.bullet=/(?:[*+-]|\d{1,9}[.)])/,_e.listItemStart=lt(/^( *)(bull) */).replace("bull",_e.bullet).getRegex(),_e.list=lt(_e.list).replace(/bull/g,_e.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+_e.def.source+")").getRegex(),_e._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",_e._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,_e.html=lt(_e.html,"i").replace("comment",_e._comment).replace("tag",_e._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),_e.paragraph=lt(_e._paragraph).replace("hr",_e.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_e._tag).getRegex(),_e.blockquote=lt(_e.blockquote).replace("paragraph",_e.paragraph).getRegex(),_e.normal=Fr({},_e),_e.gfm=Fr({},_e.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),_e.gfm.table=lt(_e.gfm.table).replace("hr",_e.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_e._tag).getRegex(),_e.gfm.paragraph=lt(_e._paragraph).replace("hr",_e.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",_e.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",_e._tag).getRegex(),_e.pedantic=Fr({},_e.normal,{html:lt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",_e._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:bh,paragraph:lt(_e.normal._paragraph).replace("hr",_e.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",_e.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const re={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:bh,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:bh,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function jF(n){return n.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function M0(n){let e,t,r="";const s=n.length;for(e=0;e<s;e++)t=n.charCodeAt(e),Math.random()>.5&&(t="x"+t.toString(16)),r+="&#"+t+";";return r}re._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",re.punctuation=lt(re.punctuation).replace(/punctuation/g,re._punctuation).getRegex(),re.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,re.escapedEmSt=/\\\*|\\_/g,re._comment=lt(_e._comment).replace("(?:-->|$)","-->").getRegex(),re.emStrong.lDelim=lt(re.emStrong.lDelim).replace(/punct/g,re._punctuation).getRegex(),re.emStrong.rDelimAst=lt(re.emStrong.rDelimAst,"g").replace(/punct/g,re._punctuation).getRegex(),re.emStrong.rDelimUnd=lt(re.emStrong.rDelimUnd,"g").replace(/punct/g,re._punctuation).getRegex(),re._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,re._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,re._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,re.autolink=lt(re.autolink).replace("scheme",re._scheme).replace("email",re._email).getRegex(),re._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,re.tag=lt(re.tag).replace("comment",re._comment).replace("attribute",re._attribute).getRegex(),re._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,re._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,re._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,re.link=lt(re.link).replace("label",re._label).replace("href",re._href).replace("title",re._title).getRegex(),re.reflink=lt(re.reflink).replace("label",re._label).replace("ref",_e._label).getRegex(),re.nolink=lt(re.nolink).replace("ref",_e._label).getRegex(),re.reflinkSearch=lt(re.reflinkSearch,"g").replace("reflink",re.reflink).replace("nolink",re.nolink).getRegex(),re.normal=Fr({},re),re.pedantic=Fr({},re.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:lt(/^!?\[(label)\]\((.*?)\)/).replace("label",re._label).getRegex(),reflink:lt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",re._label).getRegex()}),re.gfm=Fr({},re.normal,{escape:lt(re.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),re.gfm.url=lt(re.gfm.url,"i").replace("email",re.gfm._extended_email).getRegex(),re.breaks=Fr({},re.gfm,{br:lt(re.br).replace("{2,}","*").getRegex(),text:lt(re.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});class Ps{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||gl,this.options.tokenizer=this.options.tokenizer||new hg,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:_e.normal,inline:re.normal};this.options.pedantic?(t.block=_e.pedantic,t.inline=re.pedantic):this.options.gfm&&(t.block=_e.gfm,this.options.breaks?t.inline=re.breaks:t.inline=re.gfm),this.tokenizer.rules=t}static get rules(){return{block:_e,inline:re}}static lex(e,t){return new Ps(t).lex(e)}static lexInline(e,t){return new Ps(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let r,s,i,o;for(this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(r=a.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0))))if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);else if(r=this.tokenizer.code(e))e=e.substring(r.raw.length),s=t[t.length-1],!s||s.type!=="paragraph"&&s.type!=="text"?t.push(r):(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.list(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.def(e))e=e.substring(r.raw.length),s=t[t.length-1],!s||s.type!=="paragraph"&&s.type!=="text"?this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title}):(s.raw+=`
`+r.raw,s.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text);else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else{if(i=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(function(u){c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(i=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i)))s=t[t.length-1],o&&s.type==="paragraph"?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(r),o=i.length!==e.length,e=e.substring(r.raw.length);else if(r=this.tokenizer.text(e))e=e.substring(r.raw.length),s=t[t.length-1],s&&s.type==="text"?(s.raw+=`
`+r.raw,s.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(r);else if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let r,s,i,o,a,l,c=e;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(c))!=null;)u.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,o.index)+"["+N0("a",o[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(c))!=null;)c=c.slice(0,o.index)+"["+N0("a",o[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.escapedEmSt.exec(c))!=null;)c=c.slice(0,o.index)+"++"+c.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(a||(l=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>!!(r=u.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0))))if(r=this.tokenizer.escape(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.tag(e))e=e.substring(r.raw.length),s=t[t.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):t.push(r);else if(r=this.tokenizer.link(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(r.raw.length),s=t[t.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):t.push(r);else if(r=this.tokenizer.emStrong(e,c,l))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.codespan(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.br(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.del(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.autolink(e,M0))e=e.substring(r.raw.length),t.push(r);else if(this.state.inLink||!(r=this.tokenizer.url(e,M0))){if(i=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const d=e.slice(1);let h;this.options.extensions.startInline.forEach(function(p){h=p.call({lexer:this},d),typeof h=="number"&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(i=e.substring(0,u+1))}if(r=this.tokenizer.inlineText(i,jF))e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(l=r.raw.slice(-1)),a=!0,s=t[t.length-1],s&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):t.push(r);else if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}else e=e.substring(r.raw.length),t.push(r);return t}}class fg{constructor(e){this.options=e||gl}code(e,t,r){const s=(t||"").match(/\S*/)[0];if(this.options.highlight){const i=this.options.highlight(e,s);i!=null&&i!==e&&(r=!0,e=i)}return e=e.replace(/\n$/,"")+`
`,s?'<pre><code class="'+this.options.langPrefix+nn(s,!0)+'">'+(r?e:nn(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:nn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
`+e+`</blockquote>
`}html(e){return e}heading(e,t,r,s){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+s.slug(r)+'">'+e+"</h"+t+`>
`:"<h"+t+">"+e+"</h"+t+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,r){const s=t?"ol":"ul";return"<"+s+(t&&r!==1?' start="'+r+'"':"")+`>
`+e+"</"+s+`>
`}listitem(e){return"<li>"+e+`</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+`</p>
`}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
`+e+`</tr>
`}tablecell(e,t){const r=t.header?"th":"td";return(t.align?"<"+r+' align="'+t.align+'">':"<"+r+">")+e+"</"+r+`>
`}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,r){if((e=A0(this.options.sanitize,this.options.baseUrl,e))===null)return r;let s='<a href="'+nn(e)+'"';return t&&(s+=' title="'+t+'"'),s+=">"+r+"</a>",s}image(e,t,r){if((e=A0(this.options.sanitize,this.options.baseUrl,e))===null)return r;let s='<img src="'+e+'" alt="'+r+'"';return t&&(s+=' title="'+t+'"'),s+=this.options.xhtml?"/>":">",s}text(e){return e}}class uC{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}}class dC{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let r=e,s=0;if(this.seen.hasOwnProperty(r)){s=this.seen[e];do s++,r=e+"-"+s;while(this.seen.hasOwnProperty(r))}return t||(this.seen[e]=s,this.seen[r]=0),r}slug(e,t={}){const r=this.serialize(e);return this.getNextSafeSlug(r,t.dryrun)}}class Ts{constructor(e){this.options=e||gl,this.options.renderer=this.options.renderer||new fg,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new uC,this.slugger=new dC}static parse(e,t){return new Ts(t).parse(e)}static parseInline(e,t){return new Ts(t).parseInline(e)}parse(e,t=!0){let r,s,i,o,a,l,c,u,d,h,p,_,v,w,y,g,b,x,C,N="";const k=e.length;for(r=0;r<k;r++)if(h=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(C=this.options.extensions.renderers[h.type].call({parser:this},h),C!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)))N+=C||"";else switch(h.type){case"space":continue;case"hr":N+=this.renderer.hr();continue;case"heading":N+=this.renderer.heading(this.parseInline(h.tokens),h.depth,lC(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue;case"code":N+=this.renderer.code(h.text,h.lang,h.escaped);continue;case"table":for(u="",c="",o=h.header.length,s=0;s<o;s++)c+=this.renderer.tablecell(this.parseInline(h.header[s].tokens),{header:!0,align:h.align[s]});for(u+=this.renderer.tablerow(c),d="",o=h.rows.length,s=0;s<o;s++){for(l=h.rows[s],c="",a=l.length,i=0;i<a;i++)c+=this.renderer.tablecell(this.parseInline(l[i].tokens),{header:!1,align:h.align[i]});d+=this.renderer.tablerow(c)}N+=this.renderer.table(u,d);continue;case"blockquote":d=this.parse(h.tokens),N+=this.renderer.blockquote(d);continue;case"list":for(p=h.ordered,_=h.start,v=h.loose,o=h.items.length,d="",s=0;s<o;s++)y=h.items[s],g=y.checked,b=y.task,w="",y.task&&(x=this.renderer.checkbox(g),v?y.tokens.length>0&&y.tokens[0].type==="paragraph"?(y.tokens[0].text=x+" "+y.tokens[0].text,y.tokens[0].tokens&&y.tokens[0].tokens.length>0&&y.tokens[0].tokens[0].type==="text"&&(y.tokens[0].tokens[0].text=x+" "+y.tokens[0].tokens[0].text)):y.tokens.unshift({type:"text",text:x}):w+=x),w+=this.parse(y.tokens,v),d+=this.renderer.listitem(w,b,g);N+=this.renderer.list(d,p,_);continue;case"html":N+=this.renderer.html(h.text);continue;case"paragraph":N+=this.renderer.paragraph(this.parseInline(h.tokens));continue;case"text":for(d=h.tokens?this.parseInline(h.tokens):h.text;r+1<k&&e[r+1].type==="text";)h=e[++r],d+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);N+=t?this.renderer.paragraph(d):d;continue;default:{const P='Token with "'+h.type+'" type was not found.';if(this.options.silent)return void console.error(P);throw new Error(P)}}return N}parseInline(e,t){t=t||this.renderer;let r,s,i,o="";const a=e.length;for(r=0;r<a;r++)if(s=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(i=this.options.extensions.renderers[s.type].call({parser:this},s),i!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)))o+=i||"";else switch(s.type){case"escape":case"text":o+=t.text(s.text);break;case"html":o+=t.html(s.text);break;case"link":o+=t.link(s.href,s.title,this.parseInline(s.tokens,t));break;case"image":o+=t.image(s.href,s.title,s.text);break;case"strong":o+=t.strong(this.parseInline(s.tokens,t));break;case"em":o+=t.em(this.parseInline(s.tokens,t));break;case"codespan":o+=t.codespan(s.text);break;case"br":o+=t.br();break;case"del":o+=t.del(this.parseInline(s.tokens,t));break;default:{const l='Token with "'+s.type+'" type was not found.';if(this.options.silent)return void console.error(l);throw new Error(l)}}return o}}function xe(n,e,t){if(n==null)throw new Error("marked(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if(typeof e=="function"&&(t=e,e=null),cC(e=Fr({},xe.defaults,e||{})),t){const r=e.highlight;let s;try{s=Ps.lex(n,e)}catch(a){return t(a)}const i=function(a){let l;if(!a)try{e.walkTokens&&xe.walkTokens(s,e.walkTokens),l=Ts.parse(s,e)}catch(c){a=c}return e.highlight=r,a?t(a):t(null,l)};if(!r||r.length<3||(delete e.highlight,!s.length))return i();let o=0;return xe.walkTokens(s,function(a){a.type==="code"&&(o++,setTimeout(()=>{r(a.text,a.lang,function(l,c){if(l)return i(l);c!=null&&c!==a.text&&(a.text=c,a.escaped=!0),o--,o===0&&i()})},0))}),void(o===0&&i())}try{const r=Ps.lex(n,e);return e.walkTokens&&xe.walkTokens(r,e.walkTokens),Ts.parse(r,e)}catch(r){if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+nn(r.message+"",!0)+"</pre>";throw r}}xe.options=xe.setOptions=function(n){var e;return Fr(xe.defaults,n),e=xe.defaults,gl=e,xe},xe.getDefaults=xF,xe.defaults=gl,xe.use=function(...n){const e=Fr({},...n),t=xe.defaults.extensions||{renderers:{},childTokens:{}};let r;n.forEach(s=>{if(s.extensions&&(r=!0,s.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if(i.renderer){const o=t.renderers?t.renderers[i.name]:null;t.renderers[i.name]=o?function(...a){let l=i.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:i.renderer}if(i.tokenizer){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[i.level]?t[i.level].unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}i.childTokens&&(t.childTokens[i.name]=i.childTokens)})),s.renderer){const i=xe.defaults.renderer||new fg;for(const o in s.renderer){const a=i[o];i[o]=(...l)=>{let c=s.renderer[o].apply(i,l);return c===!1&&(c=a.apply(i,l)),c}}e.renderer=i}if(s.tokenizer){const i=xe.defaults.tokenizer||new hg;for(const o in s.tokenizer){const a=i[o];i[o]=(...l)=>{let c=s.tokenizer[o].apply(i,l);return c===!1&&(c=a.apply(i,l)),c}}e.tokenizer=i}if(s.walkTokens){const i=xe.defaults.walkTokens;e.walkTokens=function(o){s.walkTokens.call(this,o),i&&i.call(this,o)}}r&&(e.extensions=t),xe.setOptions(e)})},xe.walkTokens=function(n,e){for(const t of n)switch(e.call(xe,t),t.type){case"table":for(const r of t.header)xe.walkTokens(r.tokens,e);for(const r of t.rows)for(const s of r)xe.walkTokens(s.tokens,e);break;case"list":xe.walkTokens(t.items,e);break;default:xe.defaults.extensions&&xe.defaults.extensions.childTokens&&xe.defaults.extensions.childTokens[t.type]?xe.defaults.extensions.childTokens[t.type].forEach(function(r){xe.walkTokens(t[r],e)}):t.tokens&&xe.walkTokens(t.tokens,e)}},xe.parseInline=function(n,e){if(n==null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");cC(e=Fr({},xe.defaults,e||{}));try{const t=Ps.lexInline(n,e);return e.walkTokens&&xe.walkTokens(t,e.walkTokens),Ts.parseInline(t,e)}catch(t){if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+nn(t.message+"",!0)+"</pre>";throw t}},xe.Parser=Ts,xe.parser=Ts.parse,xe.Renderer=fg,xe.TextRenderer=uC,xe.Lexer=Ps,xe.lexer=Ps.lex,xe.Tokenizer=hg,xe.Slugger=dC,xe.parse=xe,xe.options,xe.setOptions,xe.use,xe.walkTokens,xe.parseInline,Ts.parse,Ps.lex;var ym=typeof window<"u"?window:{};(function(){var n=ym.DOMParser,e=!1;try{new n().parseFromString("","text/html")&&(e=!0)}catch{}return e})()?ym.DOMParser:function(){var n=function(){};return function(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch{ym.ActiveXObject&&(e=!0)}return e}()?n.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:n.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},n}();ft.arrowup,ft.arrowdown,ft.esc;ft.enter,ft.tab;[gr.defaultPositions.northArrowSouth,gr.defaultPositions.northArrowSouthWest,gr.defaultPositions.northArrowSouthEast,gr.defaultPositions.southArrowNorth,gr.defaultPositions.southArrowNorthWest,gr.defaultPositions.southArrowNorthEast,gr.defaultPositions.viewportStickyNorth];const DF=typeof window<"u"?`${window.location.origin}/api/ImageUpload/Upload`:"/api/ImageUpload/Upload",FF={language:"fa",placeholder:"    ...",extraAllowedContent:"img[!src,alt,width,height,style];",toolbar:{items:["undo","redo","|","heading","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","bold","italic","underline","removeFormat","|","specialCharacters","link","insertImage","mediaEmbed","insertTable","blockQuote","|","bulletedList","alignment","numberedList","todoList","outdent","indent"],shouldNotGroupWhenFull:!0},fontFamily:{supportAllValues:!0},fontSize:{options:[8,10,12,14,"default",18,20,22],supportAllValues:!0},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},image:{toolbar:["imageTextAlternative","imageStyle:inline","imageStyle:block","imageStyle:side","|","resizeImage:25","resizeImage:50","resizeImage:75","resizeImage:original"],resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}],resizeUnit:"%",upload:{types:["png","jpeg","jpg","gif"]}},simpleUpload:{uploadUrl:DF,withCredentials:!1},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},link:{addTargetToExternalLinks:!0,defaultProtocol:"https://",decorators:{toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},mention:{feeds:[{marker:"@",feed:[]}]},menuBar:{isVisible:!0},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableProperties","tableCellProperties"]}};function hC({value:n,onChange:e}){return m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"label mb-1",children:" "}),m.jsx("div",{className:"border rounded bg-white",children:m.jsx(wM.CKEditor,{editor:_F,data:n||"",config:FF,onChange:(t,r)=>{e(r.getData())}})})]})}function LF({product:n}){const{data:e}=xy(),t=dR(n.id),[r,s]=O.useState(""),[i,o]=O.useState(!1),[a,l]=O.useState(!1),c=O.useMemo(()=>{var k;const N=r||((k=e==null?void 0:e[0])==null?void 0:k.id)||"";return{sid:N,seo:n.seos.find(P=>P.storeId===N)}},[r,e,n.seos]),[u,d]=O.useState(""),[h,p]=O.useState(""),[_,v]=O.useState(""),[w,y]=O.useState(""),[g,b]=O.useState(""),x=c.sid,C=c.seo;return O.useEffect(()=>{d((C==null?void 0:C.metaTitle)??""),p((C==null?void 0:C.metaDescription)??""),v((C==null?void 0:C.canonicalUrl)??""),y((C==null?void 0:C.robots)??""),b((C==null?void 0:C.jsonLd)??"")},[x,C==null?void 0:C.metaTitle,C==null?void 0:C.metaDescription,C==null?void 0:C.canonicalUrl,C==null?void 0:C.robots,C==null?void 0:C.jsonLd]),m.jsxs("div",{className:"card p-4 space-y-3",children:[m.jsx("h3",{className:"font-semibold",children:"  "}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:""}),m.jsx("select",{className:"input",value:x,onChange:N=>s(N.target.value),children:(e??[]).map(N=>m.jsxs("option",{value:N.id,children:[N.name," ",N.domain?`(${N.domain})`:""]},N.id))}),m.jsxs("label",{className:"mt-2 inline-flex items-center gap-2 text-sm",children:[m.jsx("input",{type:"checkbox",checked:i,onChange:N=>o(N.target.checked)}),m.jsx("span",{children:"    "})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"label",children:"Meta Title"}),m.jsx("input",{className:"input",value:u,onChange:N=>d(N.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:"Meta Description"}),m.jsx("input",{className:"input",value:h,onChange:N=>p(N.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:"Canonical URL"}),m.jsx("input",{className:"input",value:_,onChange:N=>v(N.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:"Robots"}),m.jsx("input",{className:"input",value:w,onChange:N=>y(N.target.value)})]}),m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{className:"label",children:"JSON-LD"}),m.jsx("textarea",{className:"input min-h-28",value:g,onChange:N=>b(N.target.value)})]})]}),m.jsx("div",{className:"pt-2",children:m.jsx("button",{className:"btn",disabled:(i?((e==null?void 0:e.length)??0)===0:!x)||a,onClick:async()=>{const N=i?(e??[]).map(P=>P.id):x?[x]:[];if(N.length===0)return;const k={metaTitle:(u||"").trim()||null,metaDescription:(h||"").trim()||null,canonicalUrl:(_||"").trim()||null,robots:(w||"").trim()||null,jsonLd:(g||"").trim()||null};l(!0);try{const P=await Promise.allSettled(N.map(V=>t.mutateAsync({storeId:V,...k}))),j=P.filter(V=>V.status==="fulfilled").length,I=P.length-j;alert(I===0?`SEO updated for ${j} store(s)`:`SEO saved for ${j}, failed for ${I}`)}catch(P){alert((P==null?void 0:P.message)||"Failed to update SEO")}finally{l(!1)}},children:""})})]})}function VF({product:n}){const{data:e}=xy(),t=hR(n.id),r=fR(n.id),s=Ye(),i=O.useMemo(()=>new Map(n.stores.map(h=>[h.storeId,h])),[n.stores]),[o,a]=O.useState(()=>{const h={};for(const p of n.stores)h[p.storeId]={inStore:!0,isVisible:p.isVisible,slug:p.slug||"",titleOverride:p.titleOverride??"",descriptionOverride:p.descriptionOverride??""};return h}),[l,c]=O.useState(!1),u=(e??[]).length>0&&(e??[]).every(h=>{var p;return((p=o[h.id])==null?void 0:p.inStore)??!1}),d=h=>{const p={...o};for(const _ of e??[]){const v=p[_.id]||{inStore:!1,isVisible:!1,slug:"",titleOverride:"",descriptionOverride:""};p[_.id]={...v,inStore:h,isVisible:h?v.isVisible:!1}}a(p)};return m.jsxs("div",{className:"card p-4 space-y-3",children:[m.jsx("h3",{className:"font-semibold",children:"   "}),m.jsxs("div",{className:"border rounded overflow-x-auto",children:[m.jsxs("div",{className:"grid grid-cols-12 gap-2 px-3 py-2 bg-gray-50 text-xs",children:[m.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[m.jsx("input",{id:"chk-all",type:"checkbox",checked:u,onChange:h=>d(h.target.checked)}),m.jsx("label",{htmlFor:"chk-all",className:"font-medium",children:"  "})]}),m.jsx("div",{className:"col-span-2",children:" "}),m.jsx("div",{className:"col-span-3",children:""}),m.jsx("div",{className:"col-span-3",children:"Slug"}),m.jsx("div",{className:"col-span-2",children:" "}),m.jsx("div",{className:"col-span-2",children:" "})]}),(e??[]).map(h=>{const p=o[h.id]||{inStore:!1,isVisible:!1,slug:"",titleOverride:"",descriptionOverride:""},_=n.defaultSlug;return m.jsxs("div",{className:"grid grid-cols-12 gap-2 px-3 py-2 border-t items-center text-sm",children:[m.jsx("div",{className:"col-span-2",children:m.jsx("input",{type:"checkbox",checked:p.inStore,onChange:v=>a(w=>({...w,[h.id]:{...p,inStore:v.target.checked,isVisible:v.target.checked?p.isVisible:!1}}))})}),m.jsx("div",{className:"col-span-2",children:m.jsx("input",{type:"checkbox",disabled:!p.inStore,checked:p.isVisible,onChange:v=>a(w=>({...w,[h.id]:{...p,isVisible:v.target.checked}}))})}),m.jsxs("div",{className:"col-span-3 truncate",children:[h.name," ",h.domain?`(${h.domain})`:""]}),m.jsx("div",{className:"col-span-3",children:m.jsx("input",{className:"input",disabled:!p.inStore,placeholder:_,value:p.slug,onChange:v=>a(w=>({...w,[h.id]:{...p,slug:v.target.value}}))})}),m.jsx("div",{className:"col-span-2",children:m.jsx("input",{className:"input",disabled:!p.inStore,placeholder:"Optional",value:p.titleOverride,onChange:v=>a(w=>({...w,[h.id]:{...p,titleOverride:v.target.value}}))})}),m.jsx("div",{className:"col-span-2",children:m.jsx("input",{className:"input",disabled:!p.inStore,placeholder:"Optional",value:p.descriptionOverride,onChange:v=>a(w=>({...w,[h.id]:{...p,descriptionOverride:v.target.value}}))})})]},h.id)})]}),m.jsx("div",{children:m.jsx("button",{className:"btn",disabled:l||(e??[]).length===0,onClick:async()=>{c(!0);try{const h=(e??[]).flatMap(w=>{var P,j,I;const y=o[w.id]||{inStore:!1,isVisible:!1,slug:"",titleOverride:"",descriptionOverride:""},g=i.get(w.id),b=!!y.isVisible,x=!!y.inStore,C=((P=y.slug)==null?void 0:P.trim())||(g==null?void 0:g.slug)||n.defaultSlug,N=((j=y.titleOverride)==null?void 0:j.trim())||null,k=((I=y.descriptionOverride)==null?void 0:I.trim())||null;return!x&&g?[{kind:"delete",name:w.name,p:r.mutateAsync(w.id)}]:x&&!(g&&g.isVisible===b&&g.slug===C&&(g.titleOverride??null)===N&&(g.descriptionOverride??null)===k)?[{kind:"upsert",name:w.name,p:t.mutateAsync({storeId:w.id,isVisible:b,slug:C,titleOverride:N,descriptionOverride:k})}]:[]}),p=await Promise.allSettled(h.map(w=>w.p)),_=p.filter(w=>w.status==="fulfilled").length,v=h.length;if(_===v)alert(`   ${_}/${v} `);else{const w=[];p.forEach((y,g)=>{var b;y.status==="rejected"&&w.push(((b=h[g])==null?void 0:b.name)||`#${g+1}`)}),alert(`Saved ${_}/${v}. Failed for: ${w.join(", ")}`)}await s.invalidateQueries({queryKey:["products","detail",n.id]})}catch(h){alert((h==null?void 0:h.message)||"    ")}finally{c(!1)}},children:""})})]})}function fC({value:n,onChange:e}){const{data:t}=Qh(),[r,s]=O.useState(!1),[i,o]=O.useState(""),a=O.useMemo(()=>{const c=t??[];if(!i.trim())return c;const u=i.toLowerCase();return c.filter(d=>d.name.toLowerCase().includes(u))},[t,i]),l=O.useMemo(()=>t==null?void 0:t.find(c=>c.id===n),[t,n]);return O.useEffect(()=>{const c=()=>s(!1);return window.addEventListener("click",c),()=>window.removeEventListener("click",c)},[]),m.jsxs("div",{className:"relative",onClick:c=>c.stopPropagation(),children:[m.jsx("div",{className:"label mb-1",children:""}),m.jsxs("button",{type:"button",className:"input text-right flex items-center justify-between",onClick:()=>s(c=>!c),children:[m.jsx("span",{children:l?l.name:" "}),m.jsx("span",{className:"text-xs text-gray-500",children:""})]}),r&&m.jsxs("div",{className:"absolute z-10 mt-1 w-full bg-white border rounded shadow",children:[m.jsx("div",{className:"p-2",children:m.jsx("input",{className:"input",placeholder:" ",value:i,onChange:c=>o(c.target.value)})}),m.jsxs("ul",{className:"max-h-60 overflow-y-auto text-sm",children:[(a??[]).map(c=>m.jsx("li",{className:`px-3 py-2 hover:bg-gray-100 cursor-pointer ${c.id===n?"bg-gray-50":""}`,onClick:()=>{e(c.id),s(!1)},children:c.name},c.id)),!(a!=null&&a.length)&&m.jsx("li",{className:"px-3 py-2 text-gray-500",children:" "})]})]})]})}function mC({value:n,onChange:e,primaryId:t,onSetPrimary:r}){const{data:s}=aE(),[i,o]=O.useState(""),a=O.useMemo(()=>{const c=s??[];if(!i.trim())return c;const u=i.toLowerCase();return c.filter(d=>d.name.toLowerCase().includes(u)||d.slug.toLowerCase().includes(u))},[s,i]),l=c=>{n.includes(c)?e(n.filter(u=>u!==c)):e([...n,c])};return m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{children:[m.jsx("div",{className:"label mb-1",children:""}),m.jsx("input",{className:"input",placeholder:" ",value:i,onChange:c=>o(c.target.value)})]}),m.jsxs("ul",{className:"border rounded max-h-72 overflow-y-auto text-sm divide-y",children:[(a??[]).map(c=>{const u=n.includes(c.id),d=!!t&&t===c.id;return m.jsxs("li",{className:"px-3 py-2 flex items-center justify-between hover:bg-gray-50 group",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"checkbox",checked:u,onChange:()=>l(c.id)}),m.jsx("span",{className:"text-gray-400",children:"".repeat(Math.max(0,(c.depth??1)-1))}),m.jsx("span",{className:d?"font-medium":"",children:c.name}),d&&m.jsx("span",{className:"text-xs text-gray-500",children:"(Primary)"})]}),r&&m.jsx("button",{type:"button",className:"opacity-0 group-hover:opacity-100 text-xs underline px-2 py-1",onClick:()=>r(c.id),disabled:!u,title:u?"  ":"    ",children:"  "})]},c.id)}),!(a!=null&&a.length)&&m.jsx("li",{className:"px-3 py-2 text-gray-500",children:"  "})]})]})}function $F(){const{id:n}=Wk(),{data:e,isLoading:t}=tR(n),r=Ye(),s=n??"",i=oR(s),o=lR(s),a=aR(s),l=cR(s),c=uR(s),{data:u}=Qh(),{data:d}=Ey(),{data:h}=aE(),{data:p,isLoading:_}=ky(),[v,w]=O.useState(""),[y,g]=O.useState(""),[b,x]=O.useState(""),[C,N]=O.useState(""),[k,P]=O.useState(""),[j,I]=O.useState(""),[V,H]=O.useState([]),[J,ge]=O.useState(""),[Ee,Oe]=O.useState(""),[Xe,z]=O.useState(null),[ne,ue]=O.useState(""),[Ie,Le]=O.useState(""),[Ht,Vt]=O.useState(!0);return vn.useEffect(()=>{e&&(Oe(e.description??""),ge(e.primaryCategoryId||""),P(e.countryCode||""))},[e==null?void 0:e.id]),t?m.jsx(Oi,{}):e?m.jsxs("div",{className:"space-y-4",children:[m.jsx(Fs,{title:` : ${e.name}`}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[m.jsxs("div",{className:"lg:col-span-2 card p-4 space-y-2",children:[m.jsx("h3",{className:"font-semibold",children:" ( )"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"label",children:""}),m.jsx("input",{className:"input",value:v||e.name,onChange:U=>w(U.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:"Slug"}),m.jsx("input",{className:"input",value:y||e.defaultSlug,onChange:U=>g(U.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:""}),m.jsx("input",{className:"input",value:b||e.code,onChange:U=>x(U.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:" "}),m.jsx("input",{className:"input",value:C||e.warehouseCode||"",onChange:U=>N(U.target.value)})]}),m.jsx("div",{className:"md:col-span-2",children:m.jsx(fC,{value:j||e.brandId,onChange:U=>I(U)})}),m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{className:"label",children:" "}),_?m.jsx("div",{className:"text-xs text-gray-500",children:"Loading..."}):m.jsxs("select",{className:"input",value:k||e.countryCode||"",onChange:U=>P(U.target.value),children:[m.jsx("option",{value:"",children:""}),p==null?void 0:p.map(U=>m.jsx("option",{value:U.code2,children:(U.nameFa||U.nameEn)+` (${U.code2})`},U.code2))]})]})]}),m.jsx("div",{className:"pt-2",children:m.jsx("button",{className:"btn",onClick:async()=>{try{await l.mutateAsync({name:v||e.name,slug:y||e.defaultSlug,code:b||e.code,warehouseCode:C!==""?C:e.warehouseCode??null,brandId:j||e.brandId,countryCode:k!==""?k:e.countryCode??null}),alert(" ")}catch(U){alert((U==null?void 0:U.message)||"   ")}},children:" "})}),m.jsx("div",{className:"pt-3 flex gap-2",children:e.status==="Active"?m.jsx("button",{className:"btn-red",onClick:async()=>{try{await oE(e.id),await r.invalidateQueries({queryKey:["products","detail",e.id]}),alert(" ")}catch(U){alert((U==null?void 0:U.message)||"  ")}},children:" "}):m.jsx("button",{className:"btn-green",onClick:async()=>{try{await iE(e.id),await r.invalidateQueries({queryKey:["products","detail",e.id]}),alert(" ")}catch(U){alert((U==null?void 0:U.message)||"  ")}},children:""})})]}),m.jsx(OR,{product:e})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[m.jsxs("div",{className:"lg:col-span-2 card p-4 space-y-3",children:[m.jsx("h3",{className:"font-semibold",children:" "}),m.jsx(hC,{value:Ee,onChange:Oe}),m.jsx("button",{className:"btn",onClick:async()=>{try{await nE(e.id,Ee),await r.invalidateQueries({queryKey:["products","detail",e.id]}),alert(" ")}catch(U){alert((U==null?void 0:U.message)||"   ")}},children:" "}),m.jsxs("div",{className:"pt-4 space-y-2",children:[m.jsx("h3",{className:"font-semibold",children:" "}),m.jsxs("div",{className:"text-xs text-gray-600",children:["  : ",e.variationKey??""]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{id:"vk",className:"input",placeholder:"Variation Key ( )"}),m.jsx("button",{className:"btn",onClick:async()=>{var we;const U=((we=document.getElementById("vk"))==null?void 0:we.value)||"";try{await Dp(e.id,U||null),await r.invalidateQueries({queryKey:["products","detail",e.id]}),alert(" ")}catch(rt){alert((rt==null?void 0:rt.message)||"   Variation Key")}},children:""})]}),m.jsxs("div",{className:"border rounded",children:[m.jsxs("div",{className:"grid grid-cols-5 gap-2 px-3 py-2 bg-gray-50 text-xs",children:[m.jsx("div",{className:"col-span-2",children:""}),m.jsx("div",{className:"col-span-2",children:"SKU"}),m.jsx("div",{children:""})]}),e.variants.map(U=>m.jsxs("div",{className:"grid grid-cols-5 gap-2 px-3 py-2 border-b last:border-0 text-sm items-center",children:[m.jsx("div",{className:"col-span-2",children:m.jsx("span",{className:"cursor-pointer underline",onClick:()=>{z(U.id),ue(U.value),Le(U.sku),Vt(U.isActive)},children:U.value})}),m.jsx("div",{className:"col-span-2 font-mono",children:U.sku}),m.jsxs("div",{className:"flex items-center justify-end gap-2 text-xs whitespace-nowrap",children:[m.jsx("button",{className:"btn px-2 py-1 text-xs flex-shrink-0",onClick:async()=>{try{await i.mutateAsync({value:U.value,sku:U.sku,isActive:!U.isActive})}catch(we){alert((we==null?void 0:we.message)||"Update failed")}},children:U.isActive?"Deactivate":"Activate"}),m.jsx("span",{className:"text-xs flex-shrink-0",children:U.isActive?"":""}),m.jsx("button",{className:"btn-red px-2 py-1 text-xs flex-shrink-0",onClick:async()=>{if(confirm(" "))try{await o.mutateAsync(U.id)}catch(we){alert((we==null?void 0:we.message)||"  ")}},children:""})]})]},U.id)),Xe&&m.jsxs("div",{className:"px-3 py-3 border-t space-y-2",children:[m.jsx("div",{className:"text-sm font-semibold",children:" "}),m.jsxs("div",{className:"grid grid-cols-5 gap-2 items-center",children:[m.jsx("input",{className:"input col-span-2",placeholder:"Value",value:ne,onChange:U=>ue(U.target.value)}),m.jsx("input",{className:"input col-span-2 font-mono",placeholder:"SKU",value:Ie,onChange:U=>Le(U.target.value)}),m.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[m.jsx("input",{type:"checkbox",checked:Ht,onChange:U=>Vt(U.target.checked)})," Active"]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{className:"btn",onClick:async()=>{try{await a.mutateAsync({variantId:Xe,value:ne,sku:Ie,isActive:Ht}),z(null)}catch(U){alert(U&&U.message||U&&U.toString()||"Update failed")}},children:"Save"}),m.jsx("button",{className:"btn-secondary",onClick:()=>z(null),children:"Cancel"})]})]}),m.jsxs("div",{className:"grid grid-cols-5 gap-2 px-3 py-2",children:[m.jsx("input",{id:"nv",className:"input sm:col-span-2",placeholder:" ( )"}),m.jsx("input",{id:"ns",className:"input sm:col-span-2",placeholder:"SKU"}),m.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[m.jsx("input",{id:"na",type:"checkbox",defaultChecked:!0})," "]}),m.jsx("div",{className:"col-span-5",children:m.jsx("button",{className:"btn",onClick:async()=>{var vt,dr,an;const U=((vt=document.getElementById("nv"))==null?void 0:vt.value)||"",we=((dr=document.getElementById("ns"))==null?void 0:dr.value)||"",rt=((an=document.getElementById("na"))==null?void 0:an.checked)??!0;try{await i.mutateAsync({value:U,sku:we,isActive:rt})}catch(cs){alert((cs==null?void 0:cs.message)||"   ")}},children:" "})})]})]})]})]}),m.jsxs("div",{className:"card p-4 space-y-2",children:[m.jsx("h3",{className:"font-semibold",children:""}),m.jsxs("div",{className:"border rounded",children:[m.jsxs("div",{className:"grid grid-cols-6 gap-2 px-3 py-2 bg-gray-50 text-xs",children:[m.jsx("div",{className:"col-span-2",children:""}),m.jsx("div",{className:"col-span-3",children:""}),m.jsx("div",{children:""})]}),e.properties.map(U=>m.jsxs("div",{className:"grid grid-cols-6 gap-2 px-3 py-2 border-b last:border-0 items-center text-sm",children:[m.jsx("div",{className:"col-span-2 font-mono",children:U.key}),m.jsx("div",{className:"col-span-3 truncate",children:U.valueString??""}),m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("button",{className:"btn-red px-2 py-1",onClick:async()=>{if(confirm(" "))try{await GN(e.id,U.id),await r.invalidateQueries({queryKey:["products","detail",e.id]}),alert(" ")}catch(we){alert((we==null?void 0:we.message)||"  ")}},children:""})})]},U.id))]}),m.jsxs("div",{className:"pt-2",children:[m.jsx("h4",{className:"font-semibold",children:"  "}),m.jsx(lE,{value:[],onChange:async U=>{try{for(const we of U)we.key.trim()&&await rE(e.id,{key:we.key.trim(),valueString:we.value});await r.invalidateQueries({queryKey:["products","detail",e.id]}),alert(" ")}catch(we){alert((we==null?void 0:we.message)||"   ")}}})]}),m.jsxs("div",{className:"pt-4 space-y-2",children:[m.jsx("h3",{className:"font-semibold",children:" "}),m.jsx(mC,{value:V.length?V:e.categories.map(U=>U.categoryId),onChange:H,primaryId:J,onSetPrimary:async U=>{try{ge(U);const we=V.length?V:e.categories.map(an=>an.categoryId),rt=we.includes(U)?we:[...we,U],vt=new Set((h??[]).map(an=>an.id)),dr=rt.filter(an=>vt.has(an)||an===U);H(dr),await JN(e.id,U),await r.invalidateQueries({queryKey:["products","detail",e.id]}),alert("Saved")}catch(we){alert((we==null?void 0:we.message)||"Failed to set primary")}}}),m.jsx("button",{className:"btn",onClick:async()=>{const U=new Set((h??[]).map(vt=>vt.id)),rt=(V.length?V:e.categories.map(vt=>vt.categoryId)).filter(vt=>U.has(vt));try{await c.mutateAsync({categoryIds:rt,primaryCategoryId:J||void 0}),alert("Saved")}catch(vt){alert((vt==null?void 0:vt.message)||"Failed to update categories")}},children:" "})]})]})]}),m.jsx(LF,{product:e}),m.jsx(VF,{product:e})]}):m.jsx("div",{className:"text-sm",children:"  ."})}var Pu=n=>n.type==="checkbox",mo=n=>n instanceof Date,Fn=n=>n==null;const pC=n=>typeof n=="object";var qt=n=>!Fn(n)&&!Array.isArray(n)&&pC(n)&&!mo(n),BF=n=>qt(n)&&n.target?Pu(n.target)?n.target.checked:n.target.value:n,zF=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,UF=(n,e)=>n.has(zF(e)),WF=n=>{const e=n.constructor&&n.constructor.prototype;return qt(e)&&e.hasOwnProperty("isPrototypeOf")},nv=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Gt(n){let e;const t=Array.isArray(n),r=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(!(nv&&(n instanceof Blob||r))&&(t||qt(n)))if(e=t?[]:Object.create(Object.getPrototypeOf(n)),!t&&!WF(n))e=n;else for(const s in n)n.hasOwnProperty(s)&&(e[s]=Gt(n[s]));else return n;return e}var rf=n=>/^\w*$/.test(n),Dt=n=>n===void 0,rv=n=>Array.isArray(n)?n.filter(Boolean):[],sv=n=>rv(n.replace(/["|']|\]/g,"").split(/\.|\[/)),oe=(n,e,t)=>{if(!e||!qt(n))return t;const r=(rf(e)?[e]:sv(e)).reduce((s,i)=>Fn(s)?s:s[i],n);return Dt(r)||r===n?Dt(n[e])?t:n[e]:r},Jr=n=>typeof n=="boolean",at=(n,e,t)=>{let r=-1;const s=rf(e)?[e]:sv(e),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let l=t;if(r!==o){const c=n[a];l=qt(c)||Array.isArray(c)?c:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;n[a]=l,n=n[a]}};const I0={BLUR:"blur",FOCUS_OUT:"focusout"},Ir={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},fs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},qF=vn.createContext(null);qF.displayName="HookFormContext";var HF=(n,e,t,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in n)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==Ir.all&&(e._proxyFormState[o]=!r||Ir.all),n[o]}});return s};const KF=typeof window<"u"?vn.useLayoutEffect:vn.useEffect;var er=n=>typeof n=="string",QF=(n,e,t,r,s)=>er(n)?(r&&e.watch.add(n),oe(t,n,s)):Array.isArray(n)?n.map(i=>(r&&e.watch.add(i),oe(t,i))):(r&&(e.watchAll=!0),t),mg=n=>Fn(n)||!pC(n);function ei(n,e,t=new WeakSet){if(mg(n)||mg(e))return n===e;if(mo(n)&&mo(e))return n.getTime()===e.getTime();const r=Object.keys(n),s=Object.keys(e);if(r.length!==s.length)return!1;if(t.has(n)||t.has(e))return!0;t.add(n),t.add(e);for(const i of r){const o=n[i];if(!s.includes(i))return!1;if(i!=="ref"){const a=e[i];if(mo(o)&&mo(a)||qt(o)&&qt(a)||Array.isArray(o)&&Array.isArray(a)?!ei(o,a,t):o!==a)return!1}}return!0}var gC=(n,e,t,r,s)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[r]:s||!0}}:{},Tc=n=>Array.isArray(n)?n:[n],j0=()=>{let n=[];return{get observers(){return n},next:s=>{for(const i of n)i.next&&i.next(s)},subscribe:s=>(n.push(s),{unsubscribe:()=>{n=n.filter(i=>i!==s)}}),unsubscribe:()=>{n=[]}}};function yC(n,e){const t={};for(const r in n)if(n.hasOwnProperty(r)){const s=n[r],i=e[r];if(s&&qt(s)&&i){const o=yC(s,i);qt(o)&&(t[r]=o)}else n[r]&&(t[r]=i)}return t}var En=n=>qt(n)&&!Object.keys(n).length,iv=n=>n.type==="file",jr=n=>typeof n=="function",xh=n=>{if(!nv)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},vC=n=>n.type==="select-multiple",ov=n=>n.type==="radio",ZF=n=>ov(n)||Pu(n),vm=n=>xh(n)&&n.isConnected;function JF(n,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)n=Dt(n)?r++:n[e[r++]];return n}function GF(n){for(const e in n)if(n.hasOwnProperty(e)&&!Dt(n[e]))return!1;return!0}function Bt(n,e){const t=Array.isArray(e)?e:rf(e)?[e]:sv(e),r=t.length===1?n:JF(n,t),s=t.length-1,i=t[s];return r&&delete r[i],s!==0&&(qt(r)&&En(r)||Array.isArray(r)&&GF(r))&&Bt(n,t.slice(0,-1)),n}var YF=n=>{for(const e in n)if(jr(n[e]))return!0;return!1};function wC(n){return Array.isArray(n)||qt(n)&&!YF(n)}function pg(n,e={}){for(const t in n)wC(n[t])?(e[t]=Array.isArray(n[t])?[]:{},pg(n[t],e[t])):Dt(n[t])||(e[t]=!0);return e}function fa(n,e,t){t||(t=pg(e));for(const r in n)wC(n[r])?Dt(e)||mg(t[r])?t[r]=pg(n[r],Array.isArray(n[r])?[]:{}):fa(n[r],Fn(e)?{}:e[r],t[r]):t[r]=!ei(n[r],e[r]);return t}const D0={value:!1,isValid:!1},F0={value:!0,isValid:!0};var _C=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!Dt(n[0].attributes.value)?Dt(n[0].value)||n[0].value===""?F0:{value:n[0].value,isValid:!0}:F0:D0}return D0},bC=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>Dt(n)?n:e?n===""?NaN:n&&+n:t&&er(n)?new Date(n):r?r(n):n;const L0={isValid:!1,value:null};var xC=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,L0):L0;function V0(n){const e=n.ref;return iv(e)?e.files:ov(e)?xC(n.refs).value:vC(e)?[...e.selectedOptions].map(({value:t})=>t):Pu(e)?_C(n.refs).value:bC(Dt(e.value)?n.ref.value:e.value,n)}var XF=(n,e,t,r)=>{const s={};for(const i of n){const o=oe(e,i);o&&at(s,i,o._f)}return{criteriaMode:t,names:[...n],fields:s,shouldUseNativeValidation:r}},kh=n=>n instanceof RegExp,Gl=n=>Dt(n)?n:kh(n)?n.source:qt(n)?kh(n.value)?n.value.source:n.value:n,$0=n=>({isOnSubmit:!n||n===Ir.onSubmit,isOnBlur:n===Ir.onBlur,isOnChange:n===Ir.onChange,isOnAll:n===Ir.all,isOnTouch:n===Ir.onTouched});const B0="AsyncFunction";var e3=n=>!!n&&!!n.validate&&!!(jr(n.validate)&&n.validate.constructor.name===B0||qt(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===B0)),t3=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),z0=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(r=>n.startsWith(r)&&/^\.\w+/.test(n.slice(r.length))));const Ac=(n,e,t,r)=>{for(const s of t||Object.keys(n)){const i=oe(n,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Ac(a,e))break}else if(qt(a)&&Ac(a,e))break}}};function U0(n,e,t){const r=oe(n,t);if(r||rf(t))return{error:r,name:t};const s=t.split(".");for(;s.length;){const i=s.join("."),o=oe(e,i),a=oe(n,i);if(o&&!Array.isArray(o)&&t!==i)return{name:t};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};s.pop()}return{name:t}}var n3=(n,e,t,r)=>{t(n);const{name:s,...i}=n;return En(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||Ir.all))},r3=(n,e,t)=>!n||!e||n===e||Tc(n).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r))),s3=(n,e,t,r,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(e||n):(t?r.isOnBlur:s.isOnBlur)?!n:(t?r.isOnChange:s.isOnChange)?n:!0,i3=(n,e)=>!rv(oe(n,e)).length&&Bt(n,e),o3=(n,e,t)=>{const r=Tc(oe(n,t));return at(r,"root",e[t]),at(n,t,r),n};function W0(n,e,t="validate"){if(er(n)||Array.isArray(n)&&n.every(er)||Jr(n)&&!n)return{type:t,message:er(n)?n:"",ref:e}}var la=n=>qt(n)&&!kh(n)?n:{value:n,message:""},q0=async(n,e,t,r,s,i)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:d,max:h,pattern:p,validate:_,name:v,valueAsNumber:w,mount:y}=n._f,g=oe(t,v);if(!y||e.has(v))return{};const b=a?a[0]:o,x=H=>{s&&b.reportValidity&&(b.setCustomValidity(Jr(H)?"":H||""),b.reportValidity())},C={},N=ov(o),k=Pu(o),P=N||k,j=(w||iv(o))&&Dt(o.value)&&Dt(g)||xh(o)&&o.value===""||g===""||Array.isArray(g)&&!g.length,I=gC.bind(null,v,r,C),V=(H,J,ge,Ee=fs.maxLength,Oe=fs.minLength)=>{const Xe=H?J:ge;C[v]={type:H?Ee:Oe,message:Xe,ref:o,...I(H?Ee:Oe,Xe)}};if(i?!Array.isArray(g)||!g.length:l&&(!P&&(j||Fn(g))||Jr(g)&&!g||k&&!_C(a).isValid||N&&!xC(a).isValid)){const{value:H,message:J}=er(l)?{value:!!l,message:l}:la(l);if(H&&(C[v]={type:fs.required,message:J,ref:b,...I(fs.required,J)},!r))return x(J),C}if(!j&&(!Fn(d)||!Fn(h))){let H,J;const ge=la(h),Ee=la(d);if(!Fn(g)&&!isNaN(g)){const Oe=o.valueAsNumber||g&&+g;Fn(ge.value)||(H=Oe>ge.value),Fn(Ee.value)||(J=Oe<Ee.value)}else{const Oe=o.valueAsDate||new Date(g),Xe=ue=>new Date(new Date().toDateString()+" "+ue),z=o.type=="time",ne=o.type=="week";er(ge.value)&&g&&(H=z?Xe(g)>Xe(ge.value):ne?g>ge.value:Oe>new Date(ge.value)),er(Ee.value)&&g&&(J=z?Xe(g)<Xe(Ee.value):ne?g<Ee.value:Oe<new Date(Ee.value))}if((H||J)&&(V(!!H,ge.message,Ee.message,fs.max,fs.min),!r))return x(C[v].message),C}if((c||u)&&!j&&(er(g)||i&&Array.isArray(g))){const H=la(c),J=la(u),ge=!Fn(H.value)&&g.length>+H.value,Ee=!Fn(J.value)&&g.length<+J.value;if((ge||Ee)&&(V(ge,H.message,J.message),!r))return x(C[v].message),C}if(p&&!j&&er(g)){const{value:H,message:J}=la(p);if(kh(H)&&!g.match(H)&&(C[v]={type:fs.pattern,message:J,ref:o,...I(fs.pattern,J)},!r))return x(J),C}if(_){if(jr(_)){const H=await _(g,t),J=W0(H,b);if(J&&(C[v]={...J,...I(fs.validate,J.message)},!r))return x(J.message),C}else if(qt(_)){let H={};for(const J in _){if(!En(H)&&!r)break;const ge=W0(await _[J](g,t),b,J);ge&&(H={...ge,...I(J,ge.message)},x(ge.message),r&&(C[v]=H))}if(!En(H)&&(C[v]={ref:b,...H},!r))return C}}return x(!0),C};const a3={mode:Ir.onSubmit,reValidateMode:Ir.onChange,shouldFocusError:!0};function l3(n={}){let e={...a3,...n},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:jr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},s=qt(e.defaultValues)||qt(e.values)?Gt(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:Gt(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d={...u};const h={array:j0(),state:j0()},p=e.criteriaMode===Ir.all,_=E=>M=>{clearTimeout(c),c=setTimeout(E,M)},v=async E=>{if(!e.disabled&&(u.isValid||d.isValid||E)){const M=e.resolver?En((await k()).errors):await j(r,!0);M!==t.isValid&&h.state.next({isValid:M})}},w=(E,M)=>{!e.disabled&&(u.isValidating||u.validatingFields||d.isValidating||d.validatingFields)&&((E||Array.from(a.mount)).forEach(L=>{L&&(M?at(t.validatingFields,L,M):Bt(t.validatingFields,L))}),h.state.next({validatingFields:t.validatingFields,isValidating:!En(t.validatingFields)}))},y=(E,M=[],L,K,B=!0,W=!0)=>{if(K&&L&&!e.disabled){if(o.action=!0,W&&Array.isArray(oe(r,E))){const fe=L(oe(r,E),K.argA,K.argB);B&&at(r,E,fe)}if(W&&Array.isArray(oe(t.errors,E))){const fe=L(oe(t.errors,E),K.argA,K.argB);B&&at(t.errors,E,fe),i3(t.errors,E)}if((u.touchedFields||d.touchedFields)&&W&&Array.isArray(oe(t.touchedFields,E))){const fe=L(oe(t.touchedFields,E),K.argA,K.argB);B&&at(t.touchedFields,E,fe)}(u.dirtyFields||d.dirtyFields)&&(t.dirtyFields=fa(s,i)),h.state.next({name:E,isDirty:V(E,M),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else at(i,E,M)},g=(E,M)=>{at(t.errors,E,M),h.state.next({errors:t.errors})},b=E=>{t.errors=E,h.state.next({errors:t.errors,isValid:!1})},x=(E,M,L,K)=>{const B=oe(r,E);if(B){const W=oe(i,E,Dt(L)?oe(s,E):L);Dt(W)||K&&K.defaultChecked||M?at(i,E,M?W:V0(B._f)):ge(E,W),o.mount&&v()}},C=(E,M,L,K,B)=>{let W=!1,fe=!1;const We={name:E};if(!e.disabled){if(!L||K){(u.isDirty||d.isDirty)&&(fe=t.isDirty,t.isDirty=We.isDirty=V(),W=fe!==We.isDirty);const Ve=ei(oe(s,E),M);fe=!!oe(t.dirtyFields,E),Ve?Bt(t.dirtyFields,E):at(t.dirtyFields,E,!0),We.dirtyFields=t.dirtyFields,W=W||(u.dirtyFields||d.dirtyFields)&&fe!==!Ve}if(L){const Ve=oe(t.touchedFields,E);Ve||(at(t.touchedFields,E,L),We.touchedFields=t.touchedFields,W=W||(u.touchedFields||d.touchedFields)&&Ve!==L)}W&&B&&h.state.next(We)}return W?We:{}},N=(E,M,L,K)=>{const B=oe(t.errors,E),W=(u.isValid||d.isValid)&&Jr(M)&&t.isValid!==M;if(e.delayError&&L?(l=_(()=>g(E,L)),l(e.delayError)):(clearTimeout(c),l=null,L?at(t.errors,E,L):Bt(t.errors,E)),(L?!ei(B,L):B)||!En(K)||W){const fe={...K,...W&&Jr(M)?{isValid:M}:{},errors:t.errors,name:E};t={...t,...fe},h.state.next(fe)}},k=async E=>{w(E,!0);const M=await e.resolver(i,e.context,XF(E||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return w(E),M},P=async E=>{const{errors:M}=await k(E);if(E)for(const L of E){const K=oe(M,L);K?at(t.errors,L,K):Bt(t.errors,L)}else t.errors=M;return M},j=async(E,M,L={valid:!0})=>{for(const K in E){const B=E[K];if(B){const{_f:W,...fe}=B;if(W){const We=a.array.has(W.name),Ve=B._f&&e3(B._f);Ve&&u.validatingFields&&w([W.name],!0);const Ot=await q0(B,a.disabled,i,p,e.shouldUseNativeValidation&&!M,We);if(Ve&&u.validatingFields&&w([W.name]),Ot[W.name]&&(L.valid=!1,M))break;!M&&(oe(Ot,W.name)?We?o3(t.errors,Ot,W.name):at(t.errors,W.name,Ot[W.name]):Bt(t.errors,W.name))}!En(fe)&&await j(fe,M,L)}}return L.valid},I=()=>{for(const E of a.unMount){const M=oe(r,E);M&&(M._f.refs?M._f.refs.every(L=>!vm(L)):!vm(M._f.ref))&&rt(E)}a.unMount=new Set},V=(E,M)=>!e.disabled&&(E&&M&&at(i,E,M),!ei(ue(),s)),H=(E,M,L)=>QF(E,a,{...o.mount?i:Dt(M)?s:er(E)?{[E]:M}:M},L,M),J=E=>rv(oe(o.mount?i:s,E,e.shouldUnregister?oe(s,E,[]):[])),ge=(E,M,L={})=>{const K=oe(r,E);let B=M;if(K){const W=K._f;W&&(!W.disabled&&at(i,E,bC(M,W)),B=xh(W.ref)&&Fn(M)?"":M,vC(W.ref)?[...W.ref.options].forEach(fe=>fe.selected=B.includes(fe.value)):W.refs?Pu(W.ref)?W.refs.forEach(fe=>{(!fe.defaultChecked||!fe.disabled)&&(Array.isArray(B)?fe.checked=!!B.find(We=>We===fe.value):fe.checked=B===fe.value||!!B)}):W.refs.forEach(fe=>fe.checked=fe.value===B):iv(W.ref)?W.ref.value="":(W.ref.value=B,W.ref.type||h.state.next({name:E,values:Gt(i)})))}(L.shouldDirty||L.shouldTouch)&&C(E,B,L.shouldTouch,L.shouldDirty,!0),L.shouldValidate&&ne(E)},Ee=(E,M,L)=>{for(const K in M){if(!M.hasOwnProperty(K))return;const B=M[K],W=E+"."+K,fe=oe(r,W);(a.array.has(E)||qt(B)||fe&&!fe._f)&&!mo(B)?Ee(W,B,L):ge(W,B,L)}},Oe=(E,M,L={})=>{const K=oe(r,E),B=a.array.has(E),W=Gt(M);at(i,E,W),B?(h.array.next({name:E,values:Gt(i)}),(u.isDirty||u.dirtyFields||d.isDirty||d.dirtyFields)&&L.shouldDirty&&h.state.next({name:E,dirtyFields:fa(s,i),isDirty:V(E,W)})):K&&!K._f&&!Fn(W)?Ee(E,W,L):ge(E,W,L),z0(E,a)&&h.state.next({...t,name:E}),h.state.next({name:o.mount?E:void 0,values:Gt(i)})},Xe=async E=>{o.mount=!0;const M=E.target;let L=M.name,K=!0;const B=oe(r,L),W=Ve=>{K=Number.isNaN(Ve)||mo(Ve)&&isNaN(Ve.getTime())||ei(Ve,oe(i,L,Ve))},fe=$0(e.mode),We=$0(e.reValidateMode);if(B){let Ve,Ot;const Ki=M.type?V0(B._f):BF(E),Hn=E.type===I0.BLUR||E.type===I0.FOCUS_OUT,sf=!t3(B._f)&&!e.resolver&&!oe(t.errors,L)&&!B._f.deps||s3(Hn,oe(t.touchedFields,L),t.isSubmitted,We,fe),hr=z0(L,a,Hn);at(i,L,Ki),Hn?(!M||!M.readOnly)&&(B._f.onBlur&&B._f.onBlur(E),l&&l(0)):B._f.onChange&&B._f.onChange(E);const Jo=C(L,Ki,Hn),Tu=!En(Jo)||hr;if(!Hn&&h.state.next({name:L,type:E.type,values:Gt(i)}),sf)return(u.isValid||d.isValid)&&(e.mode==="onBlur"?Hn&&v():Hn||v()),Tu&&h.state.next({name:L,...hr?{}:Jo});if(!Hn&&hr&&h.state.next({...t}),e.resolver){const{errors:Pl}=await k([L]);if(W(Ki),K){const of=U0(t.errors,r,L),Tl=U0(Pl,r,of.name||L);Ve=Tl.error,L=Tl.name,Ot=En(Pl)}}else w([L],!0),Ve=(await q0(B,a.disabled,i,p,e.shouldUseNativeValidation))[L],w([L]),W(Ki),K&&(Ve?Ot=!1:(u.isValid||d.isValid)&&(Ot=await j(r,!0)));K&&(B._f.deps&&(!Array.isArray(B._f.deps)||B._f.deps.length>0)&&ne(B._f.deps),N(L,Ot,Ve,Jo))}},z=(E,M)=>{if(oe(t.errors,M)&&E.focus)return E.focus(),1},ne=async(E,M={})=>{let L,K;const B=Tc(E);if(e.resolver){const W=await P(Dt(E)?E:B);L=En(W),K=E?!B.some(fe=>oe(W,fe)):L}else E?(K=(await Promise.all(B.map(async W=>{const fe=oe(r,W);return await j(fe&&fe._f?{[W]:fe}:fe)}))).every(Boolean),!(!K&&!t.isValid)&&v()):K=L=await j(r);return h.state.next({...!er(E)||(u.isValid||d.isValid)&&L!==t.isValid?{}:{name:E},...e.resolver||!E?{isValid:L}:{},errors:t.errors}),M.shouldFocus&&!K&&Ac(r,z,E?B:a.mount),K},ue=(E,M)=>{let L={...o.mount?i:s};return M&&(L=yC(M.dirtyFields?t.dirtyFields:t.touchedFields,L)),Dt(E)?L:er(E)?oe(L,E):E.map(K=>oe(L,K))},Ie=(E,M)=>({invalid:!!oe((M||t).errors,E),isDirty:!!oe((M||t).dirtyFields,E),error:oe((M||t).errors,E),isValidating:!!oe(t.validatingFields,E),isTouched:!!oe((M||t).touchedFields,E)}),Le=E=>{E&&Tc(E).forEach(M=>Bt(t.errors,M)),h.state.next({errors:E?t.errors:{}})},Ht=(E,M,L)=>{const K=(oe(r,E,{_f:{}})._f||{}).ref,B=oe(t.errors,E)||{},{ref:W,message:fe,type:We,...Ve}=B;at(t.errors,E,{...Ve,...M,ref:K}),h.state.next({name:E,errors:t.errors,isValid:!1}),L&&L.shouldFocus&&K&&K.focus&&K.focus()},Vt=(E,M)=>jr(E)?h.state.subscribe({next:L=>"values"in L&&E(H(void 0,M),L)}):H(E,M,!0),U=E=>h.state.subscribe({next:M=>{r3(E.name,M.name,E.exact)&&n3(M,E.formState||u,Wn,E.reRenderRoot)&&E.callback({values:{...i},...t,...M,defaultValues:s})}}).unsubscribe,we=E=>(o.mount=!0,d={...d,...E.formState},U({...E,formState:d})),rt=(E,M={})=>{for(const L of E?Tc(E):a.mount)a.mount.delete(L),a.array.delete(L),M.keepValue||(Bt(r,L),Bt(i,L)),!M.keepError&&Bt(t.errors,L),!M.keepDirty&&Bt(t.dirtyFields,L),!M.keepTouched&&Bt(t.touchedFields,L),!M.keepIsValidating&&Bt(t.validatingFields,L),!e.shouldUnregister&&!M.keepDefaultValue&&Bt(s,L);h.state.next({values:Gt(i)}),h.state.next({...t,...M.keepDirty?{isDirty:V()}:{}}),!M.keepIsValid&&v()},vt=({disabled:E,name:M})=>{(Jr(E)&&o.mount||E||a.disabled.has(M))&&(E?a.disabled.add(M):a.disabled.delete(M))},dr=(E,M={})=>{let L=oe(r,E);const K=Jr(M.disabled)||Jr(e.disabled);return at(r,E,{...L||{},_f:{...L&&L._f?L._f:{ref:{name:E}},name:E,mount:!0,...M}}),a.mount.add(E),L?vt({disabled:Jr(M.disabled)?M.disabled:e.disabled,name:E}):x(E,!0,M.value),{...K?{disabled:M.disabled||e.disabled}:{},...e.progressive?{required:!!M.required,min:Gl(M.min),max:Gl(M.max),minLength:Gl(M.minLength),maxLength:Gl(M.maxLength),pattern:Gl(M.pattern)}:{},name:E,onChange:Xe,onBlur:Xe,ref:B=>{if(B){dr(E,M),L=oe(r,E);const W=Dt(B.value)&&B.querySelectorAll&&B.querySelectorAll("input,select,textarea")[0]||B,fe=ZF(W),We=L._f.refs||[];if(fe?We.find(Ve=>Ve===W):W===L._f.ref)return;at(r,E,{_f:{...L._f,...fe?{refs:[...We.filter(vm),W,...Array.isArray(oe(s,E))?[{}]:[]],ref:{type:W.type,name:E}}:{ref:W}}}),x(E,!1,void 0,W)}else L=oe(r,E,{}),L._f&&(L._f.mount=!1),(e.shouldUnregister||M.shouldUnregister)&&!(UF(a.array,E)&&o.action)&&a.unMount.add(E)}}},an=()=>e.shouldFocusError&&Ac(r,z,a.mount),cs=E=>{Jr(E)&&(h.state.next({disabled:E}),Ac(r,(M,L)=>{const K=oe(r,L);K&&(M.disabled=K._f.disabled||E,Array.isArray(K._f.refs)&&K._f.refs.forEach(B=>{B.disabled=K._f.disabled||E}))},0,!1))},ye=(E,M)=>async L=>{let K;L&&(L.preventDefault&&L.preventDefault(),L.persist&&L.persist());let B=Gt(i);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:W,values:fe}=await k();t.errors=W,B=Gt(fe)}else await j(r);if(a.disabled.size)for(const W of a.disabled)Bt(B,W);if(Bt(t.errors,"root"),En(t.errors)){h.state.next({errors:{}});try{await E(B,L)}catch(W){K=W}}else M&&await M({...t.errors},L),an(),setTimeout(an);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:En(t.errors)&&!K,submitCount:t.submitCount+1,errors:t.errors}),K)throw K},Be=(E,M={})=>{oe(r,E)&&(Dt(M.defaultValue)?Oe(E,Gt(oe(s,E))):(Oe(E,M.defaultValue),at(s,E,Gt(M.defaultValue))),M.keepTouched||Bt(t.touchedFields,E),M.keepDirty||(Bt(t.dirtyFields,E),t.isDirty=M.defaultValue?V(E,Gt(oe(s,E))):V()),M.keepError||(Bt(t.errors,E),u.isValid&&v()),h.state.next({...t}))},Ne=(E,M={})=>{const L=E?Gt(E):s,K=Gt(L),B=En(E),W=B?s:K;if(M.keepDefaultValues||(s=L),!M.keepValues){if(M.keepDirtyValues){const fe=new Set([...a.mount,...Object.keys(fa(s,i))]);for(const We of Array.from(fe))oe(t.dirtyFields,We)?at(W,We,oe(i,We)):Oe(We,oe(W,We))}else{if(nv&&Dt(E))for(const fe of a.mount){const We=oe(r,fe);if(We&&We._f){const Ve=Array.isArray(We._f.refs)?We._f.refs[0]:We._f.ref;if(xh(Ve)){const Ot=Ve.closest("form");if(Ot){Ot.reset();break}}}}if(M.keepFieldsRef)for(const fe of a.mount)Oe(fe,oe(W,fe));else r={}}i=e.shouldUnregister?M.keepDefaultValues?Gt(s):{}:Gt(W),h.array.next({values:{...W}}),h.state.next({values:{...W}})}a={mount:M.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!M.keepIsValid||!!M.keepDirtyValues||!e.shouldUnregister&&!En(W),o.watch=!!e.shouldUnregister,h.state.next({submitCount:M.keepSubmitCount?t.submitCount:0,isDirty:B?!1:M.keepDirty?t.isDirty:!!(M.keepDefaultValues&&!ei(E,s)),isSubmitted:M.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:B?{}:M.keepDirtyValues?M.keepDefaultValues&&i?fa(s,i):t.dirtyFields:M.keepDefaultValues&&E?fa(s,E):M.keepDirty?t.dirtyFields:{},touchedFields:M.keepTouched?t.touchedFields:{},errors:M.keepErrors?t.errors:{},isSubmitSuccessful:M.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},ln=(E,M)=>Ne(jr(E)?E(i):E,M),Jt=(E,M={})=>{const L=oe(r,E),K=L&&L._f;if(K){const B=K.refs?K.refs[0]:K.ref;B.focus&&(B.focus(),M.shouldSelect&&jr(B.select)&&B.select())}},Wn=E=>{t={...t,...E}},mn={control:{register:dr,unregister:rt,getFieldState:Ie,handleSubmit:ye,setError:Ht,_subscribe:U,_runSchema:k,_focusError:an,_getWatch:H,_getDirty:V,_setValid:v,_setFieldArray:y,_setDisabledField:vt,_setErrors:b,_getFieldArray:J,_reset:Ne,_resetDefaultValues:()=>jr(e.defaultValues)&&e.defaultValues().then(E=>{ln(E,e.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:I,_disableForm:cs,_subjects:h,_proxyFormState:u,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(E){o=E},get _defaultValues(){return s},get _names(){return a},set _names(E){a=E},get _formState(){return t},get _options(){return e},set _options(E){e={...e,...E}}},subscribe:we,trigger:ne,register:dr,handleSubmit:ye,watch:Vt,setValue:Oe,getValues:ue,reset:ln,resetField:Be,clearErrors:Le,unregister:rt,setError:Ht,setFocus:Jt,getFieldState:Ie};return{...mn,formControl:mn}}function c3(n={}){const e=vn.useRef(void 0),t=vn.useRef(void 0),[r,s]=vn.useState({isDirty:!1,isValidating:!1,isLoading:jr(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:jr(n.defaultValues)?void 0:n.defaultValues});if(!e.current)if(n.formControl)e.current={...n.formControl,formState:r},n.defaultValues&&!jr(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions);else{const{formControl:o,...a}=l3(n);e.current={...a,formState:r}}const i=e.current.control;return i._options=n,KF(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),vn.useEffect(()=>i._disableForm(n.disabled),[i,n.disabled]),vn.useEffect(()=>{n.mode&&(i._options.mode=n.mode),n.reValidateMode&&(i._options.reValidateMode=n.reValidateMode)},[i,n.mode,n.reValidateMode]),vn.useEffect(()=>{n.errors&&(i._setErrors(n.errors),i._focusError())},[i,n.errors]),vn.useEffect(()=>{n.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,n.shouldUnregister]),vn.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),vn.useEffect(()=>{n.values&&!ei(n.values,t.current)?(i._reset(n.values,{keepFieldsRef:!0,...i._options.resetOptions}),t.current=n.values,s(o=>({...o}))):i._resetDefaultValues()},[i,n.values]),vn.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=HF(r,i),e.current}const H0=(n,e,t)=>{if(n&&"reportValidity"in n){const r=oe(t,e);n.setCustomValidity(r&&r.message||""),n.reportValidity()}},kC=(n,e)=>{for(const t in e.fields){const r=e.fields[t];r&&r.ref&&"reportValidity"in r.ref?H0(r.ref,t,n):r.refs&&r.refs.forEach(s=>H0(s,t,n))}},u3=(n,e)=>{e.shouldUseNativeValidation&&kC(n,e);const t={};for(const r in n){const s=oe(e.fields,r),i=Object.assign(n[r]||{},{ref:s&&s.ref});if(d3(e.names||Object.keys(n),r)){const o=Object.assign({},oe(t,r));at(o,"root",i),at(t,r,o)}else at(t,r,i)}return t},d3=(n,e)=>n.some(t=>t.startsWith(e+"."));var h3=function(n,e){for(var t={};n.length;){var r=n[0],s=r.code,i=r.message,o=r.path.join(".");if(!t[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];t[o]={message:a.message,type:a.code}}else t[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(d){return n.push(d)})}),e){var l=t[o].types,c=l&&l[r.code];t[o]=gC(o,e,t,s,c?[].concat(c,r.message):r.message)}n.shift()}return t},f3=function(n,e,t){return t===void 0&&(t={}),function(r,s,i){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(n[t.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(c){return i.shouldUseNativeValidation&&kC({},i),{errors:{},values:t.raw?r:c}})}catch(c){return a(c)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:u3(h3(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}};function m3({value:n,onChange:e,baseCode:t}){const[r,s]=O.useState({value:"",sku:"",isActive:!0}),i=()=>{const a=r.value.trim();if(!a)return;const l=r.sku.trim()||(t?`${t}-${(n.length+1).toString().padStart(2,"0")}`:`SKU-${Date.now()}`);e([...n,{value:a,sku:l,isActive:r.isActive}]),s({value:"",sku:"",isActive:!0})},o=a=>e(n.filter((l,c)=>c!==a));return m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-2",children:[m.jsx("input",{className:"input sm:col-span-2",placeholder:"  (: )",value:r.value,onChange:a=>s(l=>({...l,value:a.target.value}))}),m.jsx("input",{className:"input sm:col-span-2",placeholder:"SKU",value:r.sku,onChange:a=>s(l=>({...l,sku:a.target.value}))}),m.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[m.jsx("input",{type:"checkbox",checked:r.isActive,onChange:a=>s(l=>({...l,isActive:a.target.checked}))})," "]})]}),m.jsx("button",{type:"button",className:"btn",onClick:i,children:" "}),n.length>0&&m.jsxs("div",{className:"border rounded",children:[m.jsxs("div",{className:"grid grid-cols-5 gap-2 px-3 py-2 bg-gray-50 text-xs",children:[m.jsx("div",{className:"col-span-2",children:""}),m.jsx("div",{className:"col-span-2",children:"SKU"}),m.jsx("div",{children:""})]}),n.map((a,l)=>m.jsxs("div",{className:"grid grid-cols-5 gap-2 px-3 py-2 border-b last:border-0 text-sm items-center",children:[m.jsx("div",{className:"col-span-2",children:a.value}),m.jsx("div",{className:"col-span-2 font-mono",children:a.sku}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{children:a.isActive?"":""}),m.jsx("button",{type:"button",className:"btn-secondary px-2 py-1 rounded",onClick:()=>o(l),children:""})]})]},l))]})]})}function p3(){const n=bu(),[e,t]=O.useState(void 0),[r,s]=O.useState([]),[i,o]=O.useState([]),[a,l]=O.useState(""),[c,u]=O.useState(!1),[d,h]=O.useState([]),{data:p}=ky(),{register:_,handleSubmit:v,setValue:w,watch:y,formState:{errors:g,isSubmitting:b}}=c3({resolver:f3(tE),defaultValues:{name:"",slug:"",code:"",brandId:"",categoryIds:[],warehouseCode:"",variationKey:"",countryCode:null}}),x=y("name"),C=y("slug"),N=j=>j.trim().toLowerCase().replace(/[^\u0600-\u06FFa-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),k=O.useMemo(()=>(x||"").trim().length>0,[x]),P=async j=>{let I="";try{const V={...j,brandId:e,categoryIds:r};if(c&&!(j.variationKey&&j.variationKey.trim())){Lt("    (Variation Key)");return}const{id:H}=await wN(V);I=H;try{if(c){await Dp(H,j.variationKey&&j.variationKey.trim()||null);for(const J of d)J.value.trim()&&await by(H,{variantValue:J.value.trim(),sku:J.sku||`${j.code}-${J.value}`,isActive:J.isActive})}else j.variationKey&&await Dp(H,null)}catch{}try{a&&a.trim()&&await nE(H,a)}catch{}try{if(i.length)for(const J of i)J.key.trim()&&await rE(H,{key:J.key.trim(),valueString:J.value})}catch{}An("    ")}catch(V){const H=(V==null?void 0:V.message)||"   ";Lt(H)}finally{I&&n(`/products/${I}`)}};return m.jsxs("div",{className:"space-y-4",children:[m.jsx(Fs,{title:" "}),m.jsxs("form",{onSubmit:v(P),className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[m.jsxs("div",{className:"lg:col-span-2 card p-4 space-y-3",children:[m.jsx("h3",{className:"font-semibold",children:" "}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"label",children:""}),m.jsx("input",{className:"input",..._("name")}),g.name&&m.jsx("p",{className:"text-red-600 text-xs mt-1",children:String(g.name.message)})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"label flex items-center justify-between",children:[m.jsx("span",{children:""}),m.jsx("button",{type:"button",className:"btn btn-xs",disabled:!k,onClick:()=>w("slug",N(x||"")),children:"  "})]}),m.jsx("input",{className:"input",placeholder:": product-name",..._("slug"),value:C||"",onChange:j=>w("slug",j.target.value)}),g.slug&&m.jsx("p",{className:"text-red-600 text-xs mt-1",children:String(g.slug.message)}),m.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"  /      ."})]})]}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"label",children:" "}),m.jsx("input",{className:"input",..._("code")}),g.code&&m.jsx("p",{className:"text-red-600 text-xs mt-1",children:String(g.code.message)})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:" "}),m.jsx("input",{className:"input",..._("warehouseCode")}),m.jsx("p",{className:"text-gray-500 text-xs mt-1",children:""})]})]}),m.jsx("h3",{className:"font-semibold mt-2",children:"  "}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[m.jsx("div",{children:m.jsx(fC,{value:e,onChange:j=>{t(j),w("brandId",j??"")}})}),m.jsxs("div",{children:[m.jsx(mC,{value:r,onChange:j=>{s(j),w("categoryIds",j)}}),m.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[r.length,"   "]})]})]}),m.jsx("h3",{className:"font-semibold mt-2",children:" "}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:m.jsxs("div",{children:[m.jsx("label",{className:"label",children:" "}),m.jsxs("select",{className:"input",value:y("countryCode")??"",onChange:j=>w("countryCode",j.target.value?j.target.value:null),children:[m.jsx("option",{value:"",children:"-   -"}),(p||[]).map(j=>m.jsx("option",{value:j.code2,children:j.nameFa||j.nameEn},j.code2))]}),m.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"     ."})]})}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[m.jsx("input",{type:"checkbox",checked:c,onChange:j=>u(j.target.checked)}),"   "]}),c&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsx("label",{className:"label",children:"Variation Key ( )"}),m.jsx("input",{className:"input",..._("variationKey")}),g.variationKey&&m.jsx("p",{className:"text-red-600 text-xs mt-1",children:String(g.variationKey.message)}),m.jsx("p",{className:"text-gray-500 text-xs mt-1",children:":  "})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"font-semibold",children:" "}),m.jsx(m3,{value:d,onChange:h,baseCode:y("code")})]})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"font-semibold",children:" (Properties)"}),m.jsx(lE,{value:i,onChange:o})]}),m.jsx(hC,{value:a,onChange:l}),m.jsxs("div",{className:"pt-2 flex items-center gap-2",children:[m.jsx("button",{disabled:b,className:"btn",type:"submit",children:b?"  ...":" "}),m.jsx("span",{className:"text-xs text-gray-500",children:"       ."})]})]}),m.jsxs("div",{className:"card p-4 text-sm text-gray-600",children:[m.jsx("div",{className:"font-semibold mb-2",children:""}),m.jsxs("ul",{className:"list-disc pr-5 space-y-1",children:[m.jsx("li",{children:"     ."}),m.jsx("li",{children:"      Variation Key  ."}),m.jsx("li",{children:"       ."}),m.jsx("li",{children:"        ."})]})]})]})]})}const EC=[{value:"1",label:""},{value:"2",label:" "},{value:"3",label:" "}],K0=()=>({name:"",website:"",description:"",establishedYear:"",status:EC[0].value});function g3(){const{data:n,isLoading:e}=Qh(),t=pR(),r=wR(),s=bu(),[i,o]=O.useState(()=>K0());return m.jsxs("div",{className:"space-y-4",children:[m.jsx(Fs,{title:"Brands",children:" "}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[m.jsx("div",{className:"lg:col-span-2 card p-4",children:e?m.jsx(Oi,{}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full text-sm",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-gray-100 text-left",children:[m.jsx("th",{className:"p-2",children:""}),m.jsx("th",{className:"p-2",children:""}),m.jsx("th",{className:"p-2",children:" "}),m.jsx("th",{className:"p-2",children:""})]})}),m.jsx("tbody",{children:n==null?void 0:n.map(a=>m.jsxs("tr",{className:"border-b last:border-0",children:[m.jsx("td",{className:"p-2",children:a.name}),m.jsx("td",{className:"p-2",children:String(a.status)}),m.jsx("td",{className:"p-2",children:a.productsCount}),m.jsxs("td",{className:"p-2 flex gap-2",children:[m.jsx("button",{className:"btn-secondary px-3 py-1.5 rounded",onClick:()=>s(`/brands/${a.id}`),children:""}),m.jsx("button",{className:"btn-secondary px-3 py-1.5 rounded",onClick:async()=>{try{await r.mutateAsync(a.id),An("  ")}catch(l){Lt((l==null?void 0:l.message)||"   ")}},children:""})]})]},a.id))})]})})}),m.jsxs("div",{className:"card p-4",children:[m.jsx("h3",{className:"font-semibold mb-3",children:" "}),m.jsxs("form",{className:"space-y-3",onSubmit:async a=>{a.preventDefault();const l=i.establishedYear.trim();let c=null;if(l){const d=Number.parseInt(l,10);if(Number.isNaN(d)){Lt("  ");return}c=d}const u={name:i.name.trim(),website:i.website.trim()||null,description:i.description.trim()||null,establishedYear:c,status:Number(i.status)};try{await t.mutateAsync(u),o(K0()),An("  ")}catch(d){Lt((d==null?void 0:d.message)||"   ")}},children:[m.jsxs("div",{children:[m.jsx("label",{className:"label",children:""}),m.jsx("input",{className:"input",value:i.name,onChange:a=>o(l=>({...l,name:a.target.value}))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:" "}),m.jsx("input",{className:"input",value:i.website,onChange:a=>o(l=>({...l,website:a.target.value}))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:""}),m.jsx("textarea",{className:"input min-h-[96px]",value:i.description,onChange:a=>o(l=>({...l,description:a.target.value}))})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:m.jsxs("div",{children:[m.jsx("label",{className:"label",children:" "}),m.jsx("input",{className:"input",type:"number",min:"1800",max:"3000",value:i.establishedYear,onChange:a=>o(l=>({...l,establishedYear:a.target.value}))})]})}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:""}),m.jsx("select",{className:"input",value:i.status,onChange:a=>o(l=>({...l,status:a.target.value})),children:EC.map(a=>m.jsx("option",{value:a.value,children:a.label},a.value))})]}),m.jsx("button",{type:"submit",className:"btn w-full",children:""})]})]})]})]})}const SC=[{value:"1",label:" "},{value:"2",label:""},{value:"3",label:" "}],y3=()=>({name:"",website:"",description:"",establishedYear:"",status:SC[0].value});function v3(){const{id:n}=Wk(),e=bu(),{data:t,isLoading:r}=gR(n),s=yR(n||""),i=vR(n||""),[o,a]=O.useState(()=>y3());O.useEffect(()=>{t&&a({name:t.name,website:t.website??"",description:t.description??"",establishedYear:t.establishedYear?String(t.establishedYear):"",status:String(t.status??1)})},[t]);const l=O.useMemo(()=>wy(t==null?void 0:t.logoUrl),[t==null?void 0:t.logoUrl]);if(!n)return m.jsx("div",{className:"space-y-4",children:m.jsx(Fs,{title:"Brand details",children:m.jsx("span",{className:"text-red-600",children:"    "})})});const c=async d=>{if(d.preventDefault(),!t)return;const h=o.name.trim();if(!h){Lt("Name is required");return}const p=o.establishedYear.trim();let _=null;if(p){const v=Number.parseInt(p,10);if(Number.isNaN(v)){Lt("   ");return}_=v}try{await s.mutateAsync({name:h,website:o.website.trim()||null,description:o.description.trim()||null,establishedYear:_,status:Number(o.status)}),An("   ")}catch(v){Lt((v==null?void 0:v.message)||"  ")}},u=async d=>{var p;if(!t)return;const h=(p=d.target.files)==null?void 0:p[0];if(h)try{await i.mutateAsync(h),An("  ")}catch(_){Lt((_==null?void 0:_.message)||"     ")}finally{d.target.value=""}};return m.jsxs("div",{className:"space-y-4",children:[m.jsx(Fs,{title:t?`Edit brand: ${t.name}`:"Edit brand",actions:m.jsx(Js,{to:"/brands",className:"btn-secondary px-4 py-2 rounded",children:"  "})}),r&&m.jsx("div",{className:"card p-6 flex items-center justify-center",children:m.jsx(Oi,{})}),!r&&!t&&m.jsx("div",{className:"card p-6 text-sm text-red-600",children:"  "}),t&&m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[m.jsxs("div",{className:"lg:col-span-2 card p-4 space-y-4",children:[m.jsx("h2",{className:"font-semibold text-base",children:" "}),m.jsxs("form",{className:"space-y-3",onSubmit:c,children:[m.jsxs("div",{children:[m.jsx("label",{className:"label",children:""}),m.jsx("input",{className:"input",value:o.name,onChange:d=>a(h=>({...h,name:d.target.value}))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:" "}),m.jsx("input",{className:"input",value:o.website,onChange:d=>a(h=>({...h,website:d.target.value}))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:""}),m.jsx("textarea",{className:"input min-h-[120px]",value:o.description,onChange:d=>a(h=>({...h,description:d.target.value}))})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"label",children:"  "}),m.jsx("input",{className:"input",type:"number",min:"1800",max:"3000",value:o.establishedYear,onChange:d=>a(h=>({...h,establishedYear:d.target.value}))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:""}),m.jsx("select",{className:"input",value:o.status,onChange:d=>a(h=>({...h,status:d.target.value})),children:SC.map(d=>m.jsx("option",{value:d.value,children:d.label},d.value))})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"submit",className:"btn px-4 py-2",disabled:s.isPending,children:s.isPending?"   ":" "}),m.jsx("button",{type:"button",className:"btn-secondary px-4 py-2 rounded",onClick:()=>e("/brands"),children:""})]})]})]}),m.jsxs("div",{className:"card p-4 space-y-3",children:[m.jsx("h2",{className:"font-semibold text-base",children:""}),l?m.jsx("img",{src:l,alt:`${t.name} logo`,className:"w-48 h-48 object-contain border rounded bg-white"}):m.jsx("div",{className:"w-48 h-48 flex items-center justify-center border rounded bg-gray-50 text-xs text-gray-500",children:"   "}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:" "}),m.jsx("input",{type:"file",accept:"image/*",onChange:u,disabled:i.isPending})]}),i.isPending&&m.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[m.jsx(Oi,{})," ",m.jsx("span",{children:"  "})]})]})]})]})}function w3(){const{data:n,isLoading:e,isError:t,error:r}=ky(),s=kR(),i=ER(),o=SR(),[a,l]=O.useState({code2:"IR",code3:"IRN",nameFa:"",nameEn:"",region:"",flagEmoji:""});return m.jsxs("div",{className:"space-y-4",children:[m.jsx(Fs,{title:"Countries",children:" "}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[m.jsx("div",{className:"lg:col-span-2 card p-4",children:e?m.jsx(Oi,{}):t?m.jsxs("div",{className:"text-sm text-red-600",children:["Failed to load countries",r!=null&&r.message?`: ${r.message}`:"",". Please ensure the backend exposes GET /countries."]}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full text-sm",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-gray-100 text-left",children:[m.jsx("th",{className:"p-2",children:" (FA)"}),m.jsx("th",{className:"p-2",children:" (EN)"}),m.jsx("th",{className:"p-2",children:" 2"}),m.jsx("th",{className:"p-2",children:" 3"}),m.jsx("th",{className:"p-2",children:""}),m.jsx("th",{className:"p-2",children:""}),m.jsx("th",{className:"p-2"})]})}),m.jsx("tbody",{children:n==null?void 0:n.map(c=>m.jsxs("tr",{className:"border-b last:border-0",children:[m.jsx("td",{className:"p-2",children:c.nameFa}),m.jsx("td",{className:"p-2",children:c.nameEn}),m.jsx("td",{className:"p-2",children:c.code2}),m.jsx("td",{className:"p-2",children:c.code3}),m.jsx("td",{className:"p-2",children:c.region||"-"}),m.jsx("td",{className:"p-2",children:c.flagEmoji||"-"}),m.jsxs("td",{className:"p-2 flex items-center gap-2",children:[m.jsx("button",{className:"btn-secondary px-3 py-1.5 rounded",onClick:async()=>{const u=await ho({title:" ",defaultValue:c.nameFa,required:!0,confirmText:"",cancelText:""});if(!u)return;const d=await ho({title:" (EN)",defaultValue:c.nameEn,required:!0,confirmText:"",cancelText:""});if(!d)return;const h=await ho({title:" ()",defaultValue:c.region||"",confirmText:"",cancelText:""}),p=await ho({title:" ()",defaultValue:c.flagEmoji||"",confirmText:"",cancelText:""});try{await i.mutateAsync({code2:c.code2,input:{nameFa:u.trim(),nameEn:d.trim(),region:(h==null?void 0:h.trim())||null,flagEmoji:(p==null?void 0:p.trim())||null}}),An("  ")}catch(_){Lt((_==null?void 0:_.message)||" ")}},children:""}),m.jsx("button",{className:"btn-secondary px-3 py-1.5 rounded",onClick:async()=>{try{await o.mutateAsync(c.code2),An("  ")}catch(u){Lt((u==null?void 0:u.message)||" ")}},children:""})]})]},c.code2))})]})})}),m.jsxs("div",{className:"card p-4",children:[m.jsx("h3",{className:"font-semibold mb-3",children:" "}),m.jsxs("form",{className:"space-y-3",onSubmit:async c=>{var u,d;c.preventDefault();try{await s.mutateAsync({code2:a.code2.trim().toUpperCase(),code3:a.code3.trim().toUpperCase(),nameFa:a.nameFa.trim(),nameEn:a.nameEn.trim(),region:((u=a.region)==null?void 0:u.trim())||null,flagEmoji:((d=a.flagEmoji)==null?void 0:d.trim())||null}),l({code2:"IR",code3:"IRN",nameFa:"",nameEn:"",region:"",flagEmoji:""}),An("  ")}catch(h){Lt((h==null?void 0:h.message)||" ")}},children:[m.jsxs("div",{children:[m.jsx("label",{className:"label",children:" (FA)"}),m.jsx("input",{className:"input",value:a.nameFa,onChange:c=>l(u=>({...u,nameFa:c.target.value}))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:" (EN)"}),m.jsx("input",{className:"input",value:a.nameEn,onChange:c=>l(u=>({...u,nameEn:c.target.value}))})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"label",children:"  2"}),m.jsx("input",{className:"input",value:a.code2,onChange:c=>l(u=>({...u,code2:c.target.value}))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:"  3"}),m.jsx("input",{className:"input",value:a.code3,onChange:c=>l(u=>({...u,code3:c.target.value}))})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"label",children:" ()"}),m.jsx("input",{className:"input",value:a.region,onChange:c=>l(u=>({...u,region:c.target.value}))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:""}),m.jsx("input",{className:"input",value:a.flagEmoji,onChange:c=>l(u=>({...u,flagEmoji:c.target.value}))})]})]}),m.jsx("button",{type:"submit",className:"btn",children:""})]})]})]})]})}function _3(){const{data:n,isLoading:e,isError:t,error:r}=xy(),s=_R(),i=bR(),o=xR(),[a,l]=O.useState({name:"",domain:""});return m.jsxs("div",{className:"space-y-4",children:[m.jsx(Fs,{title:"Stores",children:" "}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[m.jsx("div",{className:"lg:col-span-2 card p-4",children:e?m.jsx(Oi,{}):t?m.jsxs("div",{className:"text-sm text-red-600",children:["    ",r!=null&&r.message?`: ${r.message}`:""]}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full text-sm",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-gray-100 text-left",children:[m.jsx("th",{className:"p-2",children:""}),m.jsx("th",{className:"p-2",children:""}),m.jsx("th",{className:"p-2",children:""})]})}),m.jsx("tbody",{children:n==null?void 0:n.map(c=>m.jsxs("tr",{className:"border-b last:border-0",children:[m.jsx("td",{className:"p-2",children:c.name}),m.jsx("td",{className:"p-2",children:c.domain||"-"}),m.jsxs("td",{className:"p-2 flex gap-2",children:[m.jsx("button",{className:"btn-secondary px-3 py-1.5 rounded",onClick:async()=>{const u=await ho({title:"  ",defaultValue:c.name,required:!0,confirmText:"",cancelText:""});if(u)try{await i.mutateAsync({id:c.id,name:u}),An("   ")}catch(d){Lt((d==null?void 0:d.message)||"    ")}},children:" "}),m.jsx("button",{className:"btn-secondary px-3 py-1.5 rounded",onClick:async()=>{const u=await ho({title:"  ()",defaultValue:c.domain||"",confirmText:"",cancelText:""});if(u!==null)try{await o.mutateAsync({id:c.id,domain:(u||"").trim()||null}),An("  ")}catch(d){Lt((d==null?void 0:d.message)||"   ")}},children:" "})]})]},c.id))})]})})}),m.jsxs("div",{className:"card p-4",children:[m.jsx("h3",{className:"font-semibold mb-3",children:" "}),m.jsxs("form",{className:"space-y-3",onSubmit:async c=>{c.preventDefault();try{await s.mutateAsync({name:a.name,domain:a.domain||null}),l({name:"",domain:""}),An("  ")}catch(u){Lt((u==null?void 0:u.message)||"   ")}},children:[m.jsxs("div",{children:[m.jsx("label",{className:"label",children:""}),m.jsx("input",{className:"input",value:a.name,onChange:c=>l(u=>({...u,name:c.target.value}))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:" ()"}),m.jsx("input",{className:"input",value:a.domain,onChange:c=>l(u=>({...u,domain:c.target.value}))})]}),m.jsx("button",{type:"submit",className:"btn",children:""})]})]})]})]})}function b3(){const{data:n,isLoading:e}=Ey(),t=CR(),r=PR(),s=TR(),{data:i}=mR(),o=O.useMemo(()=>new Set((i??[]).map(w=>w.id)),[i]),[a,l]=O.useState({name:"",slug:"",parentId:""}),c=O.useRef(null),[u,d]=O.useState({}),h=w=>u[w]??!0,p=O.useMemo(()=>{const w=new Map;return(n??[]).forEach(y=>w.set(y.id,y.name)),w},[n]),_=O.useMemo(()=>{const w=n??[],y=new Map;w.forEach(x=>y.set(x.id,{...x,children:[]}));const g=[];y.forEach(x=>{x.parentId&&y.has(x.parentId)?y.get(x.parentId).children.push(x):g.push(x)});const b=x=>{x.sort((C,N)=>C.name.localeCompare(N.name)),x.forEach(C=>b(C.children))};return b(g),g},[n]),v=O.useMemo(()=>{const w=[],y=g=>{g.forEach(b=>{w.push(b),b.children.length&&y(b.children)})};return y(_),w},[_]);return m.jsxs("div",{className:"space-y-4",children:[m.jsx(Fs,{title:" ",children:" "}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[m.jsx("div",{className:"lg:col-span-2 card p-4",children:e?m.jsx(Oi,{}):m.jsxs("div",{children:[m.jsx("div",{className:"text-xs text-gray-600 mb-2",children:":             ."}),m.jsx("div",{className:"mb-2 p-2 border rounded bg-gray-50 text-xs text-gray-700",onDragOver:w=>w.preventDefault(),onDrop:async w=>{var x;w.preventDefault();const y=c.current;if(c.current=null,!y)return;const g=p.get(y)||y;if(await Fo({title:"  ",text:`   ${g}    `,icon:"warning",confirmText:"",cancelText:""}))try{await s.mutateAsync({id:y,newParentId:null}),An("  ")}catch(C){const N=(((x=C==null?void 0:C.details)==null?void 0:x.detail)||(C==null?void 0:C.message)||"").toString();Lt(N||"    ")}},children:"         ."}),m.jsx(CC,{nodes:_,isExpanded:h,onToggle:w=>d(y=>({...y,[w]:!h(w)})),onRename:async(w,y)=>{const g=await ho({title:" ",defaultValue:y.name,required:!0,confirmText:"",cancelText:""});if(g)try{await r.mutateAsync({id:w,name:g,slug:y.slug}),An("  ")}catch(b){Lt((b==null?void 0:b.message)||"   ")}},onDragStart:w=>{c.current=w},onDragOver:w=>w.preventDefault(),onDrop:async w=>{var C;if(o.has(w)){Lt("        ");return}const y=c.current;if(c.current=null,!y||y===w)return;const g=p.get(y)||y,b=p.get(w)||w;if(await Fo({title:" ",text:`   ${g}  ${b}  `,icon:"warning",confirmText:"",cancelText:""}))try{await s.mutateAsync({id:y,newParentId:w}),An("  ")}catch(N){const k=N==null?void 0:N.status,P=(((C=N==null?void 0:N.details)==null?void 0:C.detail)||(N==null?void 0:N.message)||"").toString();Lt(k===400?"         ":P||"   ")}}})]})}),m.jsxs("div",{className:"card p-4",children:[m.jsx("h3",{className:"font-semibold mb-3",children:" "}),m.jsxs("form",{className:"space-y-3",onSubmit:async w=>{w.preventDefault();try{await t.mutateAsync({name:a.name.trim(),slug:a.slug.trim(),parentId:a.parentId||null}),l({name:"",slug:"",parentId:""}),An("  ")}catch(y){Lt((y==null?void 0:y.message)||"   ")}},children:[m.jsxs("div",{children:[m.jsx("label",{className:"label",children:""}),m.jsx("input",{className:"input",value:a.name,onChange:w=>l(y=>({...y,name:w.target.value}))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:" (Slug)"}),m.jsx("input",{className:"input",value:a.slug,onChange:w=>l(y=>({...y,slug:w.target.value}))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"label",children:""}),m.jsxs("div",{className:"border rounded p-2 max-h-64 overflow-auto space-y-1 text-sm",children:[m.jsxs("label",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"radio",name:"parentCat",value:"",checked:!a.parentId,onChange:()=>l(w=>({...w,parentId:""}))}),m.jsx("span",{children:" ( )"})]}),v.map(w=>m.jsxs("label",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"radio",name:"parentCat",value:w.id,checked:a.parentId===w.id,onChange:()=>l(y=>({...y,parentId:w.id}))}),m.jsx("span",{className:"text-gray-400",children:"".repeat(Math.max(0,(w.depth??1)-1))}),m.jsx("span",{children:w.name})]},w.id))]})]}),m.jsx("button",{type:"submit",className:"btn",children:""})]})]})]})]})}function CC({nodes:n,isExpanded:e,onToggle:t,onRename:r,onDragStart:s,onDragOver:i,onDrop:o}){return m.jsx("ul",{className:"text-sm select-none",children:n.map(a=>m.jsxs("li",{className:"py-1",children:[m.jsx("div",{className:"flex items-center justify-between gap-2 border rounded px-2 py-1 hover:bg-gray-50",draggable:!0,onDragStart:()=>s(a.id),onDragOver:i,onDrop:()=>o(a.id),children:m.jsxs("div",{className:"flex items-center gap-2 w-full",children:[a.children.length>0?m.jsx("button",{type:"button",className:"btn-secondary px-2 py-0.5 rounded",onClick:()=>t(a.id),children:e(a.id)?"":"+"}):m.jsx("span",{className:"px-2"}),m.jsxs("span",{className:"flex-1 text-right pr-2",style:{paddingRight:`${Math.max(0,(a.depth??1)-1)*12}px`},children:[a.name,m.jsxs("span",{className:"text-xs text-gray-500",children:[" (",a.slug,")"]})]}),m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("button",{className:"btn-secondary px-2 py-1 rounded",onClick:()=>r(a.id,{name:a.name,slug:a.slug}),children:""})})]})}),a.children.length>0&&e(a.id)&&m.jsx("div",{className:"pr-6 mt-1",children:m.jsx(CC,{nodes:a.children,isExpanded:e,onToggle:t,onRename:r,onDragStart:s,onDragOver:i,onDrop:o})})]},a.id))})}const x3=yO([{path:"/",element:m.jsx(RO,{}),errorElement:m.jsx(MO,{}),children:[{index:!0,element:m.jsx(lO,{to:"/products",replace:!0})},{path:"products",element:m.jsx(AR,{})},{path:"products/new",element:m.jsx(p3,{})},{path:"products/:id",element:m.jsx($F,{})},{path:"brands",element:m.jsx(g3,{})},{path:"brands/:id",element:m.jsx(v3,{})},{path:"stores",element:m.jsx(_3,{})},{path:"countries",element:m.jsx(w3,{})},{path:"categories",element:m.jsx(b3,{})}]}]);function k3(){return m.jsx(CO,{router:x3})}const wm=typeof window<"u"?window.Swal:void 0;if(typeof window<"u"&&typeof window.alert=="function"){const n=window.alert.bind(window);window.alert=e=>{try{const t=typeof e=="string"?e:String(e);if(t==="__CANCELLED__")return;if(wm)if(t.length>160||/\n|\r/.test(t)){const s=`<pre dir="ltr" style="text-align:left;white-space:pre-wrap;max-height:60vh;overflow:auto;padding:8px;background:#f9fafb;border-radius:6px;">${t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}</pre>`;wm.fire({icon:"info",title:"",html:s,width:"60em",confirmButtonText:""})}else wm.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:2500,timerProgressBar:!0}).fire({icon:"info",title:t});else n(e)}catch{n(e)}}}typeof window<"u"&&typeof window.confirm=="function"&&(window.confirm=n=>!0);const E3=document.getElementById("root"),S3=wk(E3);S3.render(m.jsx(vn.StrictMode,{children:m.jsx(Z2,{children:m.jsx(k3,{})})}))});export default C3();
